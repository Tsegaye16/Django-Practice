text comput scienc fundament multimediaze-nian li mark s. drew jiangchuan liu third editiontext comput scienc seri editor david gri , depart comput scienc , cornel univers , ithaca , ny , usa orit hazzan , faculti educ technolog scienc , technion —israel institut technolog , haifa , israelmor inform seri http : //www.springer.com/series/3191ze-nian li mark s. drew  jiangchuan liu fundament multimedia third edit 123ze-nian li school comput scienc simon fraser univers burnabi , bc , canadamark s. drew school comput scienc simon fraser univers burnabi , bc , canada jiangchuan liu school comput scienc simon fraser universityburnabi , bc , canada issn 1868-0941 issn 1868-095x ( electron ) text comput scienceisbn 978-3-030-62123-0 isbn 978-3-030-62124-7 ( ebook ) http : //doi.org/10.1007/978-3-030-62124-7 1stedit : ©prentice-hal , inc. 2004 2ndedit : ©springer intern publish switzerland 2014 3rdedit : ©springer natur switzerland ag 2021 work subject copyright . right reserv publish , whether whole partof materi concern , speci ﬁcalli right translat , reprint , reus illustr , recit , broadcast , reproduct micro ﬁlm physic way , transmiss inform storag retriev , electron adapt , comput softwar , similar dissimilar methodolog known hereaft developed.th use gener descript name , regist name , trademark , servic mark , etc . thispubl impli , even absenc speci ﬁc statement , name exempt relev protect law regul therefor free gener use.th publish , author editor safe assum advic inform book believ true accur date public . neither publish author editor give warranti , express impli , respect materi containedherein error omiss may made . publish remain neutral regardto jurisdict claim publish map institut af ﬁliation . springer imprint publish regist compani springer natur switzerland ag regist compani address : gewerbestrass 11 , 6330 cham , switzerlandto mom , wife yansin . ze-nian noah , ira , eva , especi , jenna . mark wife jill , children kevin , jerri , kathi . jiangchuanprefac 17 year sinc ﬁrst edit fundament multimedia , theﬁeld applic multimedia ﬂourish undergo evermor rapid growth evolut variou emerg interdisciplinari area . howev , comprehens textbook aid continu learn master fun-dament concept knowledg multimedia remain essenti . origin edit publish prentice-hal , start second edit chosen springer , prestigi publish superband rapidli expand array comput scienc textbook , particularli thehigh-qu , dedic , establish textbook seri : text comput sci-enc , textbook form part . second edit includ consider ad depth network aspect book . end , dr. jiangchuan liu ad team author . third edit constitut signi ﬁcant revis : textbook thoroughli revis updat includ recent develop ﬁeld . exampl , updat introduct current multimedia tool , weinclud current topic 360 /c14video video code standard h.266 ; new-gener social , mobil , cloud comput human-centr interactivemultimedia , augment realiti virtual realiti ; deep learn multimedia process ; attend technolog . multimedia associ rich set core subject comput scienc engin , address . book introduct tosimpl design consider tool —it serv advanc audienc . hand , book refer work —it tradit textbook . perforc may discuss multimedia tool , would like give asens underli issu play task tool carri . studentswho undertak succeed cours base text said realli understand fundament matter regard materi , henc titl text . conjunct text , full- ﬂedg cours also allow student make use knowledg carri interest even wonder practicalproject multimedia ; interact project engag sometim amus ; , perhap , even teach concept . viiwho read book ? text aim introduc basic idea use multimedia , audienc comfort technic applic , e.g. , comput scienc student andengin student . book aim cover upper level undergradu mul-timedia cours , could also use advanc cours . inde , ( quit long ) list cours make use ﬁrst two edit text includ mani undergradu cours well use pertin point departur graduatestud may encount idea practic way . aswel , book would good refer anyon , includ industri , interest current multimedia technolog . select materi inth text address real issu learner face soon showup workplac . topic simpl , new student ; aresomewhat complex , unavoid emerg area . text mainli present concept , applic . multimedia cours , hand , teach concept , test , also allow student toutil skill alreadi know , code present , address problem inmultimedia . accompani websit materi text includ code formultimedia applic along project student develop sucha cours , plu use materi best present electron form . author use materi real class ? sinc 1996 , taught third-year undergradu cours multimediasystem base introductori materi set book . one-semestercours like could includ materi cover text , wehav usual manag consid good mani topic address , withment made select number issu part 3 4 , within timefram . well , time period one-semest cours , also taught graduate-level cours use note cover topic similar ground cover text , introduct advanc materi . fourth-yearor graduate-level cours would well discuss materi ﬁrst three part book consid materi last part , perhap con-junct origin research refer includ along withresult present topic confer . attempt ﬁll need , concentr undergradu audi- enc includ advanc materi well . section safe omit ﬁrst read mark asterisk tabl contents.viii prefacewhat cover text ? part 1 , introduct multimedia data represent , introduc notion includ term multimedia , look present well itshistori . practic speak , carri multimedia project use softwar tool , addit overview multimedia softwar tool get nut bolt multimedia author . represent data critic studi multimedia , look import data representationsfor use multimedia applic . speci ﬁcalli , graphic imag data , video data , audio data examin detail . sinc color vital import inmultimedia program , see import area impact multimedia issu . part 2 , multimedia data compress , consid make dataﬂi onto screen speaker . multimedia data compress turn import enabl technolog make modern multimedia system pos- sibl . therefor , look lossless lossi compress method , suppli fundament concept necessari fulli understand method . lattercategori , lossi compress , arguabl jpeg still-imag compress standard , includ jpeg 2000 , import , consid detail . butsinc pictur worth 1,000 word , video worth millionword per minut , examin idea behind mpeg standard mpeg-1 , mpeg-2 , mpeg-4 , mpeg-7 , beyond modern video code standardsh.264 , h.265 , h.266 . audio compress treat separ consid basic audio speech compress techniqu take look mpeg audio , includ mp3 aac . part 3 , multimedia commun network , consid great demand multimedia commun content share place network andsystem . internet , howev , initi design multimedia contentdistribut signi ﬁcant challeng address . discuss wire internet wireless mobil network technolog protocol , theenhanc make multimedia commun possibl . examin state-of-the-art multimedia content distribut mechan , well modern cloud comput highli scalabl multimedia data process . thediscuss also includ latest edg comput serverless computingsolut toward ﬁne-grain ﬂexibl realtim multimedia . part 4 , human-centr interact multimedia , examin number technolog form heart enabl new web 2.0 paradigm , richus interact . popular web 2.0-base social media share websit asyoutub , facebook , twitter , twitch , tiktok drastic chang content gener distribut landscap , inde becom integr part peopl ’ daili life . develop code algorithm hardwar sens , commun , interact also empow virtual realiti ( vr ) andaug realiti ( ar ) , provid better immers experi beyond 3d . thispart examin new-gener interact multimedia servic discussestheir potenti challeng . huge amount multimedia content alsoprefac ixmilit multimedia-awar search mechan , therefor consid challeng mechan multimedia content search retriev . textbook websit book websit http : //www.cs.sfu.ca/mmbook . reader ﬁnd gener inform book includ previou edit , errata sheetupd regularli , program help demonstr concept text , adynam set link “ explor ” section chapter . sinc link regularli updat , cours url chang quit often , link onlin rather within print text . instructor ’ resourc main text websit id password , access sampl student project instructor ’ discret password-protect . instructor , differ password , websit also contain cours instructor resourc foradopt text . includ extens collect onlin slide , solut exercis text , sampl assign solut , sampl exam , extra exam question . acknowledg grate colleagu gener gave time review thistext , wish express thank edward chang , shu-ch chen , qianp gu , moham hefeeda , rachel s. heller , gongzhu hu , s. n. jayaram , tiko kameda , joonwhoan lee , xiaobo li , jie liang , siwei lu , jiebo luo , jacqu vaisey . write text greatli aid number suggest contribut present former colleagu student . would like tothank moham athiq , jame au , yi ching david chou , chad ciavarro , hosseinhajimirsadeghi , hao jiang , mehran khodabandeh , steven kilthau , michael king , tian lan , chenyu li , haitao li , cheng lu , minlong lu , luo , xiaoqiang , hamidreza mirzaei , peng peng , haoyu ren , ryan shea , chantal snazel , wenqisong , yi sun , domin szopa , zinovi tauber , malt von ruden , fangxin wang , jian wang , jie wei , edward yan , osmar za ïane , cong zhang , lei zhang , miao zhang , wenbiao zhang , yuan zhao , ziyang zhao , william zhong , qiang zhu , andyifei zhu assist . yi ching david chou also help refresh thecompanion websit textbook . well , dr. ye lu made great contributionsx prefaceto chap . 8and9 ; andi sun contribut chap . 20 . valiant effort par- ticularli appreci . also grate student gener made cours project avail instruct use book . burnabi , canada ze-nian li mark s. drew jiangchuan liuprefac xicont part introduct multimedia data represent 1 introduct multimedia ............................... 3 1.1 multimedia ? ............................... 3 1.1.1 compon multimedia ................... 4 1.2 multimedia : past present ......................... 5 1.2.1 earli histori multimedia .................. 5 1.2.2 hypermedia , www , internet .............. 9 1.2.3 multimedia new millennium ............. 13 1.3 multimedia softwar tool : quick scan ............... 16 1.3.1 music sequenc notat ............... 17 1.3.2 digit audio ............................. 17 1.3.3 graphic imag edit .................. 18 1.3.4 video edit ............................. 18 1.3.5 anim ............................... 19 1.3.6 multimedia author ....................... 20 1.3.7 multimedia broadcast ..................... 21 1.4 futur multimedia ........................... 22 1.5 exercis ....................................... 24 refer ............................................ 25 2 tast multimedia .................................. 27 2.1 multimedia task concern ...................... 27 2.2 multimedia present ............................ 28 2.3 data compress ................................. 35 2.4 multimedia product ............................. 38 2.5 multimedia share distribut ................... 39 2.6 use edit author tool ............... 41 2.6.1 adob premier ........................... 42 2.6.2 html5 canva ........................... 45 2.6.3 adob director ............................ 46 2.6.4 adob xd ............................... 48 xiii2.7 exercis ....................................... 51 refer ............................................ 55 3 graphic imag data represent ................... 57 3.1 graphic imag data type ...................... 57 3.1.1 1-bit imag .............................. 57 3.1.2 8-bit gray-level imag ..................... 58 3.1.3 imag data type .......................... 62 3.1.4 24-bit color imag ........................ 62 3.1.5 higher bit-depth imag .................... 62 3.1.6 8-bit color imag ......................... 63 3.1.7 color lookup tabl ( lut ) ................. 65 3.2 popular file format ............................... 69 3.2.1 gif .................................... 69 3.2.2 jpeg ................................... 73 3.2.3 png ................................... 75 3.2.4 tiff ................................... 75 3.2.5 window bmp ............................ 75 3.2.6 window wmf ........................... 76 3.2.7 netpbm format ........................... 76 3.2.8 exif ................................... 76 3.2.9 heif ................................... 76 3.2.10 ps pdf .............................. 77 3.2.11 ptm ................................... 78 3.3 exercis ....................................... 79 refer ............................................ 81 4 color imag video ................................ 83 4.1 color scienc .................................... 83 4.1.1 light spectra .......................... 83 4.1.2 human vision ............................ 85 4.1.3 spectral sensit eye ................. 85 4.1.4 imag format .......................... 86 4.1.5 camera system ........................... 88 4.1.6 gamma correct ......................... 88 4.1.7 color-match function .................... 91 4.1.8 cie chromat diagram ................... 92 4.1.9 color monitor speci ﬁcation .................. 96 4.1.10 out-of-gamut color ....................... 96 4.1.11 white point correct ...................... 97 4.1.12 xyz rgb transform ..................... 99 4.1.13 transform gamma correct ............. 99xiv contents4.1.14 l * * b * ( cielab ) color model ............... 100 4.1.15 color coordin scheme ............... 102 4.1.16 munsel color name system ................ 102 4.2 color model imag ............................ 102 4.2.1 rgb color model display ................ 102 4.2.2 multi-sensor camera ....................... 103 4.2.3 camera-depend color .................... 103 4.2.4 subtract color : cmi color model ........... 105 4.2.5 transform rgb cmi ............. 105 4.2.6 undercolor remov : cmyk system ........... 106 4.2.7 printer gamut ............................ 106 4.2.8 multi-ink printer .......................... 107 4.3 color model video ............................. 108 4.3.1 video color transform ..................... 108 4.3.2 yuv color model ......................... 109 4.3.3 yiq color model .......................... 111 4.3.4 ycbcr color model ........................ 112 4.4 exercis ....................................... 113 refer ............................................ 117 5 fundament concept video ........................... 119 5.1 analog video .................................... 119 5.1.1 ntsc video ............................. 122 5.1.2 pal video ............................... 125 5.1.3 secam video ............................ 125 5.2 digit video .................................... 126 5.2.1 chroma subsampl ....................... 126 5.2.2 ccir itu-r standard digit video ..... 128 5.2.3 high de ﬁnition tv ( hdtv ) .................. 129 5.2.4 ultra-high-d ﬁnition tv ( uhdtv ) ............ 130 5.3 video display interfac ............................ 131 5.3.1 analog display interfac .................... 131 5.3.2 digit display interfac .................... 133 5.4 360/c14video ...................................... 135 5.4.1 equirectangular project ( erp ) ............... 136 5.4.2 project .......................... 137 5.5 3d video tv ................................. 138 5.5.1 cue 3d percept ........................ 138 5.5.2 3d camera model ......................... 139 5.5.3 3d movi tv base stereo vision ....... 140 5.5.4 vergenc –accommod con ﬂict .......... 141 5.5.5 autostereoscop ( glasses-fre ) display devic ... 142 5.5.6 dispar manipul 3d content creation .... 143content xv5.6 video qualiti assess ( vqa ) ..................... 145 5.6.1 object assess ....................... 145 5.6.2 subject assess ...................... 146 5.6.3 vqa metric ........................ 146 5.7 exercis ....................................... 146 refer ............................................ 148 6 basic digit audio .................................. 151 6.1 digit sound .............................. 151 6.1.1 sound ? ........................... 151 6.1.2 digit .............................. 152 6.1.3 nyquist theorem .......................... 155 6.1.4 signal-to-nois ratio ( snr ) .................. 156 6.1.5 signal-to-quantization-nois ratio ( sqnr ) ....... 158 6.1.6 linear nonlinear quantiz .............. 159 6.1.7 audio filter ............................ 164 6.1.8 audio qualiti versu data rate ............... 164 6.1.9 synthet sound .......................... 165 6.2 midi : music instrument digit interfac .............. 167 6.2.1 midi overview ........................... 167 6.2.2 hardwar aspect midi ................... 171 6.2.3 structur midi messag .................. 173 6.2.4 midi-to-wav convers ................... 177 6.2.5 gener midi ............................. 177 6.2.6 midi 2.0 ................................ 177 6.3 quantiz transmiss audio ................ 178 6.3.1 code audio .......................... 178 6.3.2 puls code modul ...................... 178 6.3.3 differenti code audio .................. 180 6.3.4 lossless predict code ................... 182 6.3.5 dpcm .................................. 186 6.3.6 dm .................................... 189 6.3.7 adpcm ................................. 190 6.4 exercis ....................................... 191 refer ............................................ 195 part ii multimedia data compress 7 lossless compress algorithm .......................... 199 7.1 introduct ..................................... 199 7.2 basic inform theori ........................ 200 7.3 run-length code ................................ 203xvi contents7.4 variable-length code ( vlc ) ....................... 203 7.4.1 shannon –fano algorithm .................... 204 7.4.2 huffman code ........................... 205 7.4.3 adapt huffman code .................... 210 7.5 dictionary-bas code ............................ 215 7.6 arithmet code ................................. 220 7.6.1 basic arithmet code algorithm ............. 221 7.6.2 scale increment code ............... 224 7.6.3 integ implement ...................... 229 7.6.4 binari arithmet code .................... 229 7.6.5 adapt arithmet code .................. 230 7.7 lossless imag compress ......................... 233 7.7.1 differenti code imag ................. 233 7.7.2 lossless jpeg ............................ 234 7.8 exercis ....................................... 236 refer ............................................ 239 8 lossi compress algorithm ............................ 241 8.1 introduct ..................................... 241 8.2 distort measur ............................... 242 8.3 rate-distort theori .......................... 243 8.4 quantiz ..................................... 244 8.4.1 uniform scalar quantiz .................. 244 8.4.2 nonuniform scalar quantiz ............... 247 8.4.3 vector quantiz ........................ 249 8.5 transform code ................................. 250 8.5.1 discret cosin transform ( dct ) .............. 251 8.5.2 karhunen –loèv transform * ................. 266 8.6 wavelet-bas code ............................. 269 8.6.1 introduct .............................. 269 8.6.2 continu wavelet transform * ............... 274 8.6.3 discret wavelet transform * ................. 277 8.7 wavelet packet .................................. 288 8.8 embed zerotre wavelet coef ﬁcient .............. 289 8.8.1 zerotre data structur .................. 290 8.8.2 success approxim quantiz .......... 292 8.8.3 ezw exampl ............................ 293 8.9 set partit hierarch tree ( spiht ) ............ 296 8.10 exercis ....................................... 296 refer ............................................ 300content xvii9 imag compress standard ............................ 301 9.1 jpeg standard ................................ 301 9.1.1 main step jpeg imag compress ......... 302 9.1.2 jpeg mode ............................. 311 9.1.3 glanc jpeg bitstream ............... 314 9.2 jpeg 2000 standard ............................ 315 9.2.1 main step jpeg 2000 imag compress * .... 316 9.2.2 adapt ebcot jpeg 2000 ............... 325 9.2.3 region-of-interest code .................... 325 9.2.4 comparison jpeg jpeg 2000 perform .............................. 326 9.3 jpeg-l standard ............................. 327 9.3.1 predict ................................ 329 9.3.2 context determin ...................... 331 9.3.3 residu code ........................... 331 9.3.4 near-lossless mode ........................ 332 9.4 bi-level imag compress standard ................. 332 9.4.1 jbig standard ......................... 332 9.4.2 jbig2 standard ........................ 333 9.5 exercis ....................................... 336 refer ............................................ 338 10 basic video compress techniqu ....................... 341 10.1 introduct video compress .................... 341 10.2 video compress base motion compens ....... 342 10.3 search motion vector ........................... 343 10.3.1 sequenti search .......................... 344 10.3.2 2d logarithm search ...................... 345 10.3.3 hierarch search ......................... 347 10.4 h.261 .......................................... 349 10.4.1 intra-fram ( i-fram ) code ................. 351 10.4.2 inter-fram ( p-frame ) predict code ......... 351 10.4.3 quantiz h.261 ....................... 352 10.4.4 h.261 encod decod .................. 353 10.4.5 glanc h.261 video bitstream syntax .... 355 10.5 h.263 .......................................... 357 10.5.1 motion compens h.263 ................ 357 10.5.2 option h.263 code mode ................ 358 10.5.3 h.263+ h.263++ ....................... 360 10.6 exercis ....................................... 362 refer ............................................ 364xviii contents11 mpeg video code : mpeg-1 , 2 , 4 , 7 .................. 365 11.1 overview ....................................... 365 11.2 mpeg-1 ........................................ 366 11.2.1 motion compens mpeg-1 .............. 366 11.2.2 major differ h.261 ............ 368 11.2.3 mpeg-1 video bitstream .................... 371 11.3 mpeg-2 ........................................ 372 11.3.1 support interlac video .................. 374 11.3.2 mpeg-2 scalabl ....................... 377 11.3.3 major differ mpeg-1 .......... 383 11.4 mpeg-4 ........................................ 385 11.4.1 overview mpeg-4 ....................... 385 11.4.2 video object-bas code mpeg-4 ......... 388 11.4.3 synthet object code mpeg-4 ............ 401 11.4.4 mpeg-4 part , pro ﬁle , level ............. 409 11.5 mpeg-7 ........................................ 410 11.5.1 descriptor ( ) ............................ 412 11.5.2 descript scheme ( ds ) .................... 414 11.5.3 descript de ﬁnition languag ( ddl ) .......... 417 11.6 exercis ....................................... 417 refer ............................................ 420 12 modern video code standard : h.264 , h.265 , h.266 ...... 423 12.1 overview ....................................... 423 12.2 h.264 .......................................... 423 12.2.1 motion compens ....................... 425 12.2.2 integ transform .......................... 428 12.2.3 quantiz scale ..................... 430 12.2.4 exampl h.264 integ transform quantiz ........................... 432 12.2.5 intra-cod .............................. 435 12.2.6 in-loop deblock filter .................. 436 12.2.7 entropi code ........................... 437 12.2.8 context-adapt variabl length code ( cavlc ) ................................ 440 12.2.9 context-adapt binari arithmet code ( cabac ) ................................ 442 12.2.10 h.264 pro ﬁle ............................ 444 12.2.11 h.264 scalabl video code ( svc ) ............ 446 12.2.12 h.264 multiview video code ( mvc ) .......... 447 12.3 h.265 .......................................... 448 12.3.1 motion compens ....................... 449 12.3.2 integ transform .......................... 453content xix12.3.3 quantiz scale ..................... 454 12.3.4 intra-cod .............................. 455 12.3.5 discret sine transform ( dst ) ................ 455 12.3.6 in-loop filter .......................... 457 12.3.7 entropi code ........................... 458 12.3.8 special code mode ...................... 458 12.3.9 h.265 pro ﬁle ............................ 459 12.3.10 h.265 extens .......................... 460 12.4 h.266 .......................................... 462 12.4.1 motion compens ....................... 463 12.4.2 adapt multipl transform ................. 465 12.4.3 non-separ secondari transform ............ 465 12.4.4 in-loop filter .......................... 468 12.4.5 tool high dynam rang ( hdr ) video ..... 469 12.4.6 tool 360/c14video ....................... 471 12.4.7 h.266 perform report ................... 473 12.5 exercis ....................................... 474 refer ............................................ 477 13 basic audio compress techniqu ....................... 479 13.1 adpcm speech code .......................... 480 13.1.1 adpcm ................................. 480 13.1.2 g.726 adpcm , g.727-9 ..................... 480 13.2 vocod ....................................... 483 13.2.1 phase insensit ......................... 483 13.2.2 channel vocod .......................... 484 13.2.3 formant vocod .......................... 485 13.2.4 linear predict code ..................... 486 13.2.5 celp ................................... 489 13.2.6 hybrid excit vocod * .................. 495 13.3 open sourc speech codec * ........................ 498 13.3.1 speex ................................... 499 13.3.2 opu ................................... 500 13.4 exercis ....................................... 502 refer ............................................ 504 14 mpeg audio compress ............................... 505 14.1 psychoacoust .................................. 506 14.1.1 equal-loud relat .................... 506 14.1.2 frequenc mask ......................... 508 14.1.3 tempor mask ......................... 513 14.2 mpeg audio .................................... 515 14.2.1 mpeg layer ............................. 515 14.2.2 mpeg audio strategi ...................... 516xx contents14.2.3 mpeg audio compress algorithm ........... 517 14.2.4 mpeg-2 aac ( advanc audio code ) ........ 523 14.2.5 mpeg-4 audio ........................... 525 14.3 audio codec ............................... 526 14.3.1 ogg vorbi .............................. 526 14.4 mpeg-7 audio beyond ......................... 528 14.5 explor ................................ 529 14.6 exercis ....................................... 529 refer ............................................ 530 part iii multimedia commun network 15 network servic protocol multimedia commun ....................................... 535 15.1 protocol layer comput commun network ..... 535 15.2 local area network ( lan ) access network ......... 536 15.2.1 lan standard ............................ 538 15.2.2 ethernet technolog ........................ 538 15.2.3 access network technolog ................. 540 15.3 internet technolog protocol .................... 543 15.3.1 network layer : ip ......................... 543 15.3.2 transport layer : tcp udp ............... 545 15.3.3 network address translat ( nat ) firewal .............................. 550 15.4 multicast extens ................................ 552 15.4.1 router-bas architectur : ip multicast ......... 552 15.4.2 non router-bas multicast architectur ........ 554 15.5 qualiti servic ( qo ) qualiti experi ( qoe ) ... 555 15.5.1 qo qoe multimedia commun .... 556 15.5.2 internet qo architectur : intserv diffserv .... 560 15.5.3 network softwar virtual : sdn nvf ................................ 564 15.5.4 rate control buffer manag ........... 565 15.6 protocol multimedia transmiss interact ...... 567 15.6.1 hypertext transfer protocol ( http ) ............ 567 15.6.2 real-tim transport protocol ( rtp ) ............ 569 15.6.3 rtp control protocol ( rtcp ) ................. 571 15.6.4 real-tim stream protocol ( rtsp ) ........... 571 15.7 case studi : internet telephoni ....................... 573 15.7.1 signal protocol : h.323 session initi protocol ( sip ) ..................... 574 15.8 explor ................................ 578content xxi15.9 exercis ....................................... 578 refer ............................................ 580 16 internet multimedia content distribut .................... 583 16.1 proxi cach ................................... 584 16.1.1 sliding-interv cach ..................... 585 16.1.2 pre ﬁx cach segment cach ........... 587 16.1.3 rate-split cach work-ahead smooth .... 588 16.2 content distribut network ( cdn ) ................. 592 16.2.1 request rout redirect ............... 592 16.2.2 repres : akamai stream cdn ......... 594 16.3 broadcast/multicast video distribut .................. 596 16.3.1 smart tv set-top box ( stb ) .............. 596 16.3.2 scalabl broadcast/multicast vod .............. 598 16.3.3 multi-r broadcast/multicast heterogen user ................................... 602 16.4 application-lay multicast peer-to-p stream ..... 605 16.4.1 application-lay multicast tree ............... 605 16.4.2 repres : end-system multicast ( esm ) ...... 606 16.4.3 peer-to-p mesh overlay ................... 608 16.4.4 repres : coolstream ................ 610 16.5 web-bas media stream ......................... 613 16.5.1 dynam adapt stream http ( dash ) ............................ 615 16.5.2 common media applic format ( cmaf ) ..... 617 16.5.3 web real-tim commun ( webrtc ) ....... 619 16.6 exercis ....................................... 621 refer ............................................ 624 17 multimedia wireless mobil network .............. 627 17.1 characterist wireless channel ................... 627 17.1.1 path loss ................................ 627 17.1.2 multipath fade .......................... 628 17.2 wireless network technolog ..................... 630 17.2.1 cellular wireless mobil network : 1g –5g ....... 631 17.2.2 wireless local area network ( wlan ) ......... 640 17.2.3 bluetooth short-rang technolog ......... 643 17.3 multimedia wireless channel .................... 644 17.3.1 error detect ............................ 645 17.3.2 error correct ........................... 648 17.3.3 error-resili code ...................... 652 17.3.4 error conceal ......................... 657xxii contents17.4 mobil manag .............................. 660 17.4.1 network layer mobil ip .................... 661 17.4.2 link-lay handoff manag .............. 663 17.5 explor ................................ 665 17.6 exercis ....................................... 666 refer ............................................ 667 18 cloud comput multimedia servic ................... 671 18.1 cloud comput overview ......................... 672 18.1.1 repres storag servic : amazon s3 ....... 676 18.1.2 repres comput servic : amazon ec2 ............................. 678 18.2 multimedia cloud comput ........................ 681 18.3 multimedia content share cloud ................. 681 18.3.1 impact global ...................... 684 18.3.2 case studi : net ﬂix ......................... 685 18.4 multimedia comput ﬂoad .................... 687 18.4.1 requir comput ﬂoad ........ 688 18.4.2 servic partit video process ......... 689 18.5 interact cloud game ........................... 690 18.5.1 workload delay cloud game .......... 691 18.5.2 implement deploy ............... 694 18.6 edg comput serverless comput multimedia ................................... 696 18.6.1 mobil edg comput ..................... 696 18.6.2 serverless comput video process ....... 698 18.7 explor ................................ 700 18.8 exercis ....................................... 700 refer ............................................ 702 part iv human-centr interact multimedia 19 onlin social media share .............................. 707 19.1 repres social media servic ................ 708 19.1.1 user-gener content ( ugc ) ................ 708 19.1.2 onlin social network ( osn ) ............... 709 19.2 user-gener media content share ................. 710 19.2.1 youtub video format meta-data .......... 710 19.2.2 characterist youtub video .............. 711 19.2.3 small-world youtub video ............... 714 19.2.4 youtub partner ’ view ............... 716 19.2.5 crowdsourc interact livecast .............. 719 19.3 media propag onlin social network ............ 722content xxiii19.3.1 share pattern individu user ............ 723 19.3.2 video propag structur model .......... 724 19.3.3 video watch share behavior .......... 727 19.4 mobil video clip share .......................... 727 19.4.1 mobil interfac characterist ................ 728 19.4.2 video clip popular ....................... 729 19.4.3 lifespan propag .................... 729 19.5 explor ................................ 731 19.6 exercis ....................................... 731 refer ............................................ 733 20 augment realiti virtual realiti ..................... 737 20.1 de ﬁning augment realiti virtual realiti ........... 737 20.2 work ﬂow augment realiti ...................... 740 20.2.1 sensori data collect ..................... 740 20.2.2 local align ................... 741 20.2.3 world gener emiss ............... 741 20.3 earli foundat system applic ............. 742 20.4 enabl hardwar infrastructur ................... 745 20.4.1 graphic process unit ( gpu ) ............... 745 20.4.2 global posit system ( gp ) .............. 747 20.4.3 network multipl user ................ 748 20.5 modern augment realiti system applic ...... 749 20.6 limit challeng .......................... 752 20.6.1 color percept ........................... 753 20.6.2 depth percept .......................... 754 20.6.3 local .............................. 755 20.6.4 inform present ..................... 756 20.6.5 social accept .......................... 756 20.7 explor ................................ 757 20.8 exercis ....................................... 757 refer ............................................ 758 21 content-bas retriev digit librari ................. 763 21.1 retriev imag ? ..................... 763 21.2 synopsi earli cbir system ...................... 766 21.3 c-bird —an earli experi ....................... 768 21.3.1 color histogram ........................... 768 21.3.2 color densiti color layout ............... 770 21.3.3 textur layout ............................ 770 21.3.4 search illumin invari .............. 773 21.3.5 search-by-object model ..................... 774 21.4 quantifi search result .......................... 777 21.5 key technolog current cbir system ............. 780xxiv contents21.5.1 robust imag featur represent ............................ 780 21.5.2 user feedback collabor .............. 782 21.5.3 post-process techniqu .............. 783 21.5.4 visual concept search ...................... 784 21.5.5 featur learn convolut neural network ................................ 785 21.5.6 databas index ......................... 788 21.6 queri video ............................... 789 21.7 queri video base human activ —a case studi .......................................... 792 21.7.1 model human activ structur ............ 793 21.7.2 experiment result ....................... 795 21.8 quality-awar mobil visual search ................... 795 21.8.1 quality-awar method ...................... 798 21.8.2 experiment result ....................... 799 21.9 deep increment hash network * ................... 800 21.9.1 problem de ﬁnition ......................... 801 21.9.2 descript dihn ....................... 801 21.9.3 experiment result ....................... 804 21.10 exercis ....................................... 804 refer ............................................ 806 index ...................................................... 811content xxvpart introduct multimedia data represent introduct multimedia , chap . 1 , consid question multimedia . compon multimedia ﬁrst introduc current multimedia research topic project discuss put ﬁeld perspec- tive actual play edg work ﬁeld . sinc multimedia inde practic ﬁeld , chap . 1also suppli overview multimedia softwar tool , video editor digit audio program . tast multimedia “ tast ” multimedia , chap . 2 , introduc set task concern consid studi multimedia . issu multimedia product present modern comput commun platform discuss , follow “ tast ” consid produc sprite anim “ build-your-own ” video transit . go review current futur state multimedia share distribut , outlin later discuss social media , video share , new form onlin tv . final , detail popular multimedia edit author tool set quick start ﬁeld . multimedia data represent mani ﬁeld , issu best repres data crucial import studi multimedia , chap . 3–6consid address ﬁeld . chapter set import data represent use multimedia applic . sinc main area concern imag , video , audio , begin investig chap . 3 , graphic imag data represent . go look fundament concept video chap . 5 , take side trip chap . 4to explor sever issu use color , sinc color vital import multimedia program . audio data special properti chap . 6 , basic digit audio , introduc method compress sound inform , begin discuss digitization2 part : introduct multimedia data represent audio , linear nonlinear quantiz , includ compand . midi explic , enabl technolog captur , store , play back music note . quantiz transmiss audio discuss , includ notion subtrac- tion signal predict valu , yield number easier compress . differenti puls code modul ( dpcm ) adapt dpcm introduc , take look encoder/decod schema.1introduct multimedia 1.1 multimedia ? peopl use term “ multimedia ” may quit differ , even oppos , viewpoint . consum entertain vendor , say phone compani , may think multimedia interact tv hundr digit channel cable-tv-likeservic deliv high-spe internet connect . hardwar vendor might , hand , like us think multimedia laptop good sound capabl perhap superior multimedia-en microprocessor understand addit multimedia instruct . comput scienc engin student read book like application-ori view multimedia consist : applic use mul- tipl modal advantag , includ text , imag , draw , graphic , ani- mation , video , sound ( includ speech ) , , like , interact kind.thi contrast media use rudimentari comput display text- tradit form print hand-produc materi . popular notion “ converg ” one inhabit colleg campu cultur larg . scenario , comput , smartphon , game , digit tv , multimedia-bas search , converg technolog , presum arriv near futur ﬁnal fulli function all-round , multimedia-enabledproduct . hardwar may inde strive all-round devic , present alreadi exciting—multimedia part interest project underway comput scienc , keynot interact . converg go ﬁeld , fact , converg area past separ ﬁnding much share new applic area . graphic , visual , hci , artiﬁci intellig , comput vision , data compress , graph theori , network , databas system import contribut make multimedia present time . © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_134 1 introduct multimedia 1.1.1 compon multimedia multipl modal text , audio , imag , draw , anim , video , interact multimedia put use way divers •videoconferenc . •tele-medicin . •a web-bas video editor let anyon creat new video edit , anno- tate , remix profession video cloud . •geograph base , real-tim augment realiti , massiv multiplay onlin video game , make use portabl devic smartphon , laptop , tablet , function gps-awar mobil game consol . •shapeshift tv , viewer vote plot path phone text messag , pars direct plot chang real time . •a camera suggest would best type next shot adher good techniqu guidelin develop storyboard . •cooper educ environ allow schoolchildren share singl educ game use two mice pass control back forth . •search ( ) larg imag video databas target visual object , use semant object . •composit artiﬁci natur video hybrid scene , place real- appear comput graphic video object scene take physic object light ( e.g. , shadow ) account . •visual cue videoconferenc particip , take account gaze direct attent particip . •make multimedia compon edit —allow user side decid compon , video , graphic , actual view allow client move compon around delet them—mak compon distribut . •build “ inverse-hollywood ” applic recreat process video made , allow storyboard prune concis video summar . comput scienc student ’ point view , make multimedia interest- ing much materi cover tradit comput scienc area bear multimedia enterpris . today ’ digit world , multimedia content recordedand play , display , access digit inform content-process devic , rang smartphon , tablet , laptop , person comput , smart tv , game consol , server data center , distribut media usbﬂash drive ( key ) , disc , hard drive , popularli nowaday , wire wireless network . lead wide varieti research topic : •multimedia process code . includ audio/image/video process- ing , compress algorithm , multimedia content analysi , content-bas multi-media retriev , multimedia secur , on.1.1 multimedia ? 5 •multimedia system support network . peopl look topic network protocol , internet wireless network , oper system , server client , databas . •multimedia tool , end system , applic . includ hypermedia system , user interfac , author system , multimod interact , inte- gration : “ ubiqu ” —web-everywher devic , multimedia educ , includingcomputer-support collabor learn design , applic virtual environ . multimedia research touch almost everi branch comput scienc . exam- ple , data mine import current research area , larg databas mul- timedia data object good exampl big data may inter- est mine ; telemedicin applic , “ telemed patient consultativeencount , ” multimedia applic place heavi burden network archi- tectur . multimedia research also highli inter-disciplinari , involv research ﬁeld electr engin , physic , psycholog ; signal processingfor audio/video signal essenti topic electr engin ; color imag video long histori solid foundat physic ; importantli , multimedia data perceiv human be , , certainli , relat tomed psycholog research . 1.2 multimedia : past present place multimedia proper context , section , brieﬂi scan histori ofmultimedia , rel recent part connect multimedia hypermedia . also show rapid evolut revolut multimedia new millennium new gener comput commun platform . 1.2.1 earli histori multimedia brief histori use multimedia commun idea might begin withnewspap , perhap ﬁrst mass commun medium , use text , graphic , imag . still-imag camera invent , graphic andimag gener hand-drawn . joseph nicéphor niépc captur ﬁrst natur imag window 1826 use slide wooden box camera [ 1,2 ] . made use 8 h exposur pewter coat bitumen . later , alphons giroux built ﬁrst commerci camera double-box design . outer box ﬁtted landscap len , inner box hold ground glass focus screen imag plate . slide theinner box make object differ distanc focu . similar camera use expos wet silver-surfac copper plate , commerci introduc 1839 . 1870 , wet plate replac conveni dri plate . figur 1.16 1 introduct multimedia fig . 1.1 vintag dry-plat camera . e & h anthoni model champion , circa 1890 ( imag author ’ collect ) show exampl nineteenth-centuri dry-plat camera , bellow focus . end nineteenth centuri , ﬁlm-base camera introduc , soon becam domin replacedbi digit camera . thoma alva edison ’ phonograph , invent 1877 , ﬁrst devic abl record reproduc sound . origin record sound onto tinfoil sheetphonograph cylind [ 3 ] . figur 1.2show exampl edison phonograph ( edison gem , 1905 ; imag author ’ collect ) . phonograph later improv alexand graham bell . notabl improv includ wax-coat cardboard cylind , cut stylu move side side “ zig zag ” pattern across record . emil berlin transform phonograph cylind gramophon record . side ﬂat disc spiral groov run peripheri near center , conveni play turntabl tonearm stylu . thesecompon improv time twentieth centuri , eventu enabl qualiti sound reproduc close origin . gramo- phone record one domin audio record format throughout muchof twentieth centuri . mid-1980 , gramophon use declin sharpli rise audio tape , later compact disc ( cd ) dig- ital record format [ 4 ] . figur 1.3show evolut audio storag media , start edison cylind record , ﬂat vinyl record , magnet tape ( reel-to-reel cassett ) , modern digit cd . motion pictur origin conceiv 1830 observ motion rapid percept human eye . edison commiss invent motion pictur camera 1887 [ 5 ] . silent featur ﬁlm appear 1910 1927 ; silent era effect end releas jazz singer 1927.1.2 multimedia : past present 7 fig . 1.2 edison phonograph , model gem . note patent plate bottom pictur , suggest import patent long realiz also seriou edison inprotect invent . despit warn plate , particular phonograph modiﬁedbi origin owner , good diyer 100 year ago , includ power spring motor froman edison standard model larg ﬂower horn tea tray compani 1895 , guglielmo marconi conduct ﬁrst wireless radio transmiss pontecchio , itali , year later ( 1901 ) , detect radio wave beam across atlant [ 6 ] . initi , invent telegraph , radio major medium audio broadcast . 1909 , marconi share nobel prize physics.1 1reginald a. fessenden , quebec , beat marconi human voic transmiss sever year , inventor receiv due credit . nevertheless , fessenden paid $ 2.5 million 1928 purloin patents.8 1 introduct multimedia fig . 1.3 evolut audio storag media . left right : edison cylind record , ﬂat vinyl record , reel-to-reel magnet tape , cassett tape , cd televis , tv short , new medium twentieth centuri [ 7 ] . 1884 , paul gottlieb nipkow , 23-year-old univers student germani , patent ﬁrst electromechan televis system , employ spin disk seri hole spiral toward center . hole space equal angularinterv , singl rotat , disk would allow light pass hole onto light-sensit selenium sensor produc electr puls . imag focus rotat disk , hole captur horizont “ slice ” whole imag . nipkow ’ design would practic advanc ampliﬁ tube technolog , particular , cathod ray tube ( crt ) , becam avail 1907 . commerci avail sinc late 1920 , crt-base tv establishedvideo commonli avail medium sinc chang world mass commun . media mention analog format , time- vari featur ( variabl ) signal continu represent input , i.e. , analog input audio , imag , video signal . connect comput anddigit media , i.e. , media data repres use discret binari format , emerg actual short period : 1945 part mit ’ postwar deliber scientist employ war effort , vannevar bush wrote landmark articl [ 8 ] describ amount hypermedia system , call “ memex. ” memex meant univers use person memori devic thateven includ concept associ links—it realli forerunn world wide web . world war ii , 6,000 scientist hard work war effort suddenli found time consideroth issu , memex idea one fruit new freedom . 1965 ted nelson start xanadu project coin term hypertext . xanadu ﬁrst attempt hypertext system—nelson call “ magic placeof literari memory. ” 1967 nichola negropont form architectur machin group mit . 1969 nelson van dam brown univers creat earli hypertext editor call fress [ 9 ] . present-day intermedia project institut research inform scholarship ( iri ) brown descendantof earli system.1.2 multimedia : past present 9 1976 mit architectur machin group propos project entitl “ multipl media. ” result aspen movi map , ﬁrst videodisc , 1978 . 1982 thecompact disc ( cd ) made commerci avail philip soni , soon becom standard popular medium digit audio data , replac analog magnet tape . 1985 negropont wiesner co-found mit media lab , lead research institut investig digit video multimedia . 1990 kristina hooper woolsey head appl multimedia lab , staff 100 . educ chief goal . 1991 mpeg-1 approv intern standard digit video . develop led newer standard , mpeg-2 , mpeg-4 , mpeg , 1990 . 1991 introduct pda 1991 began new period use comput gener multimedia particular . develop continu 1996with market ﬁrst pda keyboard . 1992 jpeg accept intern standard digit imag compres- sion , remain wide use today ( say , virtual everi digit cam-era ) . 1992 ﬁrst audio multicast multicast backbon ( mbone ) made . 1995 ja v languag creat platform-independ applic devel- opment , wide use develop multimedia applic . 1996 dvd video introduc ; high-qual , full-length movi distribut singl disc . dvd format promis transform music , game , comput industri . 1998 handheld mp3 audio player introduc consum market , ini- tialli 32 mb ﬂash memori . 1.2.2 hypermedia , www , internet earli studi laid solid foundat captur , represent , compres-s , storag type media . multimedia , howev , simpli put differ media togeth ; rather , focus integr enabl rich interact among , well media humanb . may think book linear medium , basic meant read begin end . contrast , hypertext system meant read nonlinearli , follow link point part document , inde document . figur 1.4illustr familiar idea . dougla engelbart , greatli inﬂuenc vannevar bush ’ “ may think , ” demonstr on-lin system ( nl ) , anoth earli hypertext program 1968 . engelbart ’ group stanford research institut aim “ augment , automa- tion , ” enhanc human abil comput technolog . nl consist ofsuch critic idea outlin editor idea develop , hypertext link , telecon-10 1 introduct multimedia fig . 1.4 hypertext nonlinear hypertext nonlinearnorm text linear hot spot ferenc , word process , e-mail , made use mous point devic , window softwar , help system [ 10 ] . hypermedia , ﬁrst introduc ted nelson around 1965 , went beyond text-onli . includ wide array media , graphic , imag , especi continu media—sound video , link togeth . world wide web ( www simpli web ) best exampl hypermedia applic , also largest . amazingli , predomin network multimedia applic root nuclear physic ! 1990 , tim berners-le propos world wide web cern ( european center nuclear research ) mean organ share work experiment result . approv cern , start develop hypertext server , browser , editor nextstep workstat . team invent hypertext markup languag ( html ) hypertext transfer protocol ( http ) purpos , . hypert ext markup languag ( html ) recogn document need format human-read identifi structur element . charl goldfarb , edward mosher , raymond lori develop gener markup languag ( gml ) ibm . 1986 , iso releas ﬁnal version standard gener markup languag ( sgml ) , mostli base earlier gml.1.2 multimedia : past present 11 html languag publish hypermedia web [ 11 ] . deﬁn use sgml deriv element describ gener document structur format . sinc use ascii , portabl differ ( even binari incompat ) computerhardwar , allow global exchang inform . 2020 , current version html5 . html use tag describ document element . tag format < token param > deﬁn start point document element < /token > deﬁn end element . element inlin paramet ’ requir end tag . html divid document head bodi part follow : < html > < head > ... < /head > < bodi > ... < /bodi > < /html > thehead describ document deﬁnit , pars document render done . includ page titl , resourc link , meta-inform author decid specifi . bodi part describ document structur content . common structur element paragraph , tabl , form , link , item list , button . simpl html page follow : < html > < head > < titl > sampl web page. < /titl > < meta name = `` author '' content = `` cranki professor '' > < /head > < bodi > < p > put text like , sinc paragraph element. < /p > < /bodi > < /html > natur , html complex structur mix stan- dard . standard evolv allow integr script languag , dynamicmanipul almost element properti display client side ( dynam html ) , modular custom render paramet use a12 1 introduct multimedia languag call cascad style sheet ( css ) . nonetheless , html rigid , non- descript structur element , modular hard achiev . extens markup languag ( xml ) also need markup languag web modular ofdata , structur , view . , would like user applic abl deﬁn tag ( structur ) allow document relationship , one place , deﬁn data use tag anoth place ( xml ﬁle ) , ﬁnalli , deﬁn yet anoth document render tag . suppos want stock inform retriev databas accord user queri . use xml , would use global document-typ deﬁnit ( dtd ) alreadi deﬁn stock data . server-sid script abid dtdrule gener xml document accord queri , use data databas . final , send user xml style sheet ( xsl ) , depend type devic use display inform , document look bestboth comput 27-inch led display small-screen cellphon . origin xml version xml 1.0 , approv w3c februari 1998 , ﬁfth edit publish 2008 . origin version stillrecommend gener use . second version xml 1.1 introduc 2004 second edit publish 2006 . xml syntax look like html syntax , although much stricter . tag lowercas , tag onlyinlin data termin , exampl , < token params/ > . xml also use namespac , multipl dtd declar differ element similar tag name element distinguish . dtd import urisa well . exampl xml document structur , deﬁnit small xhtml document : < ? xml version= '' 1.0 '' encoding= '' iso-8859-1 '' ? > < ! doctyp html public `` -//w3c//dtd xhtml 1.0 '' '' http : //www.w3.org/tr/xhtml1/dtd/xhtml1-transition.dtd '' > < html xmlns= '' http : //www.w3.org/1999/xhtml '' > ... [ html follow mentionedxml rule ] < /html > xml document start < ? xml version= '' ver '' ? > . < ! doctyp ... > special tag use import dtd . sinc dtd def- init , adher xml rule . xmln deﬁn uniqu xml namespac document element . case , namespac xhtml speciﬁc websit . addit xml speciﬁc , follow xml-relat speciﬁc standardized:1.2 multimedia : past present 13 •xml protocol . use exchang xml inform process . meant supersed http extend well allow interprocess commu- nicat across network . •xml schema . structur power languag deﬁn xml data type ( tag ) . unlik dtd , xml schema use xml tag type deﬁnit . •xsl . basic css xml . hand , xsl much complex , three part : xsl transform ( xslt ) , xml path languag ( xpath ) , xsl format object . www quickli gain popular , due amount inform avail web server , capac post inform , eas navig inform web browser , particularli marc andreessen ’ intro- duction mosaic browser 1993 ( later becam netscap ) . today , web technolog maintain develop world wide web consortium ( w3c ) , togeth internet engin task forc ( ietf ) standard technolog . w3c list follow three goal thewww : univers access web resourc ( everyon everywher ) , effect navig avail inform , respons use post materi . worth mention internet serv underli vehicl www multimedia content share . start advanc research project agenc network ( arpanet ) two node 1969 , internet gradual becam domin global network interconnect numer- comput network billion user standard internet protocol suit ( tcp/ip ) . evolv togeth digit multimedia . one hand , internet carri much multimedia content . larg swept opticaldisc storag distribut media movi industri . current reshap tv broadcast industri ever-acceler speed . hand , internet initi design multimedia data quit friendli multimedia trafﬁc . multimedia data , occupi almost 90 % internet bandwidth , key drive forc toward enhanc exist internetand toward develop next gener internet , see chap . 15 and16 . 1.2.3 multimedia new millennium enter new millennium , wit fast evolut toward new gener social , mobil , cloud comput multimedia process share . today , role internet evolv origin use acommun tool provid easier faster share inﬁnit suppli inform , multimedia content greatli enrich . high- deﬁnit video even 3d/multiview video readili captur browsedbi person comput devic , conveni store process remot cloud resourc . importantli , user activ engag part social ecosystem , rather passiv receiv media content . revolut is14 1 introduct multimedia driven deep penetr 3g/4g/5g wireless network smart mobil devic . come highli intuit interfac except richer multimedia function , seamlessli integr onlinesoci network instant media content gener share . list import mileston develop multimedia new millennium . believ reader textbook familiarwith , internet age , wit dramat chang ; mani reader , particularli younger gener , would even familiar use multimedia servic youtub , facebook , twitter , twitch , tiktokthan author . 2000 www size estim 1 billion page . soni unveil ﬁrst blu-ray disc prototyp octob 2000 , ﬁrst prototyp player releas april 2003 japan . 2001 ﬁrst peer-to-p ﬁle share ( mostli mp3 music ) system , napster , shut court order , mani new peer-to-p ﬁle-shar system , e.g. , gnutella , emul , bittorr , launch follow year . coolstream ﬁrst large-scal peer-to-p stream system thatwa deploy internet , attract 1 million 2004 . later year saw boom mani commerci peer-to-p tv system , e.g. , pplive , ppstream , uuse , particularli east asia.ntt docomo japan launch ﬁrst commerci 3g wireless network octob 1 . 3g start deploy worldwid , promis broadband wireless mobil data transfer multimedia data . 2003 skype releas free peer-to-p voic internet . 2004 web 2.0 recogn new way util softwar develop end user use web ( technic speciﬁc new web ) . idea promot user collabor interact gener content “ virtual commun , ” oppos simpli passiv view content.exampl includ social network , blog , wiki , etc . facebook , popular onlin social network , found mark zuckerberg.flickr , popular photo host share site , creat ludicorp , vancouver-bas compani found stewart butterﬁeld caterina fake . 2005 youtub creat , provid easi portal video share , purchas googl late 2006 . googl launch onlin map servic , satellit imag , real-timetrafﬁc , streetview ad later . 2006 twitter creat , rapidli gain worldwid popular , 500 mil- lion regist user 2012 , post 340 million tweet per day.amazon launch cloud comput platform , amazon ’ web servic ( aw ) . central well known servic amazon ec2 amazon s3.1.2 multimedia : past present 15 nintendo introduc wii home video game consol , whose remot con- troller detect movement three dimens . 2007 appl launch ﬁrst gener iphon , run io mobil oper- ate system . touch screen enabl intuit oper , asso- ciat app store offer numer mobil applic . googl unveil android mobil oper system , along found- open handset allianc : consortium hardwar , softwar , telecommun compani devot advanc open standard mobil devic . ﬁrst android-pow phone sold octob 2008 , googl play , android ’ primari app store , soon launch . follow year , tablet comput use io , android , window larger touch screen join ecosystem , . 2009 ﬁrst lte ( long-term evolut ) network set oslo , norway , stockholm , sweden , make import step toward 4g wireless net-work . jame cameron ’ ﬁlm , avatar , creat surg interest 3d video . 2010 netﬂix , use dvd rental servic provid , migrat infras- tructur amazon aw cloud comput platform , becam major onlin stream video provid . master copi digit ﬁlm movi studio store amazon s3 , ﬁlm encod 50 dif-fer version base video resolut , audio qualiti use machin cloud . total , netﬂix 1 petabyt data store amazon ’ cloud.microsoft introduc kinect , horizont bar full-bodi 3d motion cap- ture , facial recognit , voic recognit capabl , game con- sole xbox 360 . 2012 html5 subsum previou version , html4 , standard 1997 . html5 w3c “ candid recommendation. ” meant provid support latest multimedia format maintain consist current web browser devic , along abil run low- power devic smartphon tablets.twitch start offer video live stream servic , particular , esport competit . 2013 twitter offer vine , mobil app enabl user creat post short video clip . soni releas playstat 4 , video game consol , inte- grate gaikai , cloud-bas game servic offer stream videogam content . 4k resolut tv start avail consum market . googl start sell googl glass , optic head-mount display designedin shape pair eyeglass . 2015 youtub launch support publish view 360 ◦video , playback websit android mobil apps.alphago , comput program play board game go , becam ﬁrst program beat human profession player . event attract signiﬁcant16 1 introduct multimedia attent gener public , particular core technolog , deep learn , , come year , seen success multimedia content understand gener . 2016 hololen , pair mix realiti smartglass develop manufactur microsoft , start avail market . pokémon go , augment realiti ( ar ) mobil game , releas andcredit popular location-bas ar technolog . netﬂix complet migrat amazon aw cloud platform skype move microsoft azur platform . 2017 tiktok , video-shar social network servic creat share short lip-sync , comedi , talent video , launch global market ( chines version , douyin , launch 2016 ) . soon becam popular app categori . 2018 world ’ ﬁrst 16k ultra-high deﬁnit ( uhd ) short video ﬁlm , prairi wind , creat . 2019 5g cellular system start deploy , provid enhanc mobil broad- band ultra-low latenc access.th wi-fi 6 ( 802.11ax ) standard releas , offer theoret maximum throughput 1 gbp . 2020 due outbreak corona viru ( covid-19 ) around world , work/ studi home becam norm earli 2020 . multimedia-empow onlin meet teach tool , e.g. , zoom , googl class , microsoft team , saw boom use period . 1.3 multimedia softwar ool : quick scan concret appreci current state multimedia softwar tool availablefor carri task multimedia , includ quick overview softwar categori product . tool realli beginning—a fulli function multimedia project also call stand-alon program well use predeﬁn tool fulli exercis capabl machin internet . 2 cours teach use text , student encourag tri tool , produc full-blown creativ multimedia product . yet textbook “ how-to ” book use tools—it understand fundament design principl behind tool ! clear understand key multi- media data structur , algorithm , protocol , student make smarter advanc use tool , fulli unleash potenti , even improveth tool develop new tool . 2in typic comput scienc cours multimedia , tool describ might use creat small multimedia product ﬁrst assign . tool power enough might also form part cours project.1.3 multimedia softwar tool : quick scan 17 categori softwar tool examin •music sequenc notat , •digit audio , •graphic imag edit , •video edit , •anim , •multimedia author , •multimedia broadcast . 1.3.1 music sequenc notat cakewalk bandlab cakewalk bandlab straightforward music-not program “ sequenc- ing. ” term sequenc come older devic store sequenc note midi music languag ( event , midi , see sect . 6.2 ) . final , avid sibeliu final sibeliu two composer-level notat system ; program like set bar excel , learn curv fairli steep . 1.3.2 digit audio digit audio tool deal access edit actual sampl sound make audio . adob audit adob audit ( formerli cool edit ) power , popular digit audio toolkit thatemul profession audio studio , includ multitrack product sound ﬁle edit , along digit signal process effect . sound forg like audit , sound forg sophist pc-base program edit w vsound ﬁle . sound captur sound card , mix andedit . also permit ad complex special effects.18 1 introduct multimedia avid pro ool pro tool high-end integr audio product edit environ run macintosh comput well window . pro tool offer easi midi creation manipul well power audio mix , record , edit softwar . full effect depend purchas dongl . 1.3.3 graphic imag edit adob illustr illustr power publish tool creat edit vector graphic , easili export use web . especi use logograph design . adob photoshop photoshop standard tool graphic , imag process , imag manip-ul . layer imag , graphic , text separ manipul maxi- mum ﬂexibl , set ﬁlter permit creation sophist light effect . gimp gimp free open-sourc graphic editor altern photoshop . supportsmani bitmap format , gif , png , jpeg . pixel-bas format , pixel speciﬁ . also support vector-bas format , endpoint line speciﬁ instead pixel , swf ( adob flash ) . also read photoshop format . 1.3.4 video edit adob premier premier simpl , intuit video edit tool nonlinear editing—put video clip order . video audio arrang track , like music score . provid larg number video audio track , superimposit , virtualclip . larg librari built-in transit , ﬁlter , motion clip allow easi creation effect multimedia productions.1.3 multimedia softwar tool : quick scan 19 cyberlink powerdirector powerdirector , produc cyberlink corp. , anoth popular nonlinear video edit softwar . provid rich select audio video featur special effect easi use . support modern video format includ vchd 2.0 , 4k ultra hd , 3d video . also support end-to-end 360◦video edit , well 64-bit video process , graphic card acceler , multipl cpu . process preview known faster premier . howev , “ programm ” premier . adob effect effect power video edit tool enabl user add changeexist movi effect light , shadow , motion blur . also allow layer , photoshop , permit manipul object independ . imovi imovi video edit tool maco io devic . versatil , convenientfor video edit creation movi trailer . imovi iphon especi handi popular . later version imovi also support 4k uhd video edit . final cut pro final cut pro profession video edit tool offer appl maco . itallow input video audio numer sourc , provid complet environ , edit color correct ﬁnal output video ﬁle . 1.3.5 anim multimedia api java3d api use java construct render 3d graphic , similar way java media framework handl media ﬁle . provid basic set object primit ( cube , spline , etc . ) upon develop build scene . abstract layer built top opengl directx ( user select ) , soth graphic acceler . directx , window api support video , imag , audio , 3d anim , common api use develop multimedia window applic computergames.20 1 introduct multimedia opengl creat 1992 still popular 3d api today . opengl highli portabl run popular modern oper system , unix , linux , window , maco . anim softwar autodesk 3d max ( formerli 3d studio max ) includ number high-end profession tool charact anim , game develop , visual effectsproduct . model produc use tool seen sever consum game , soni playstat . autodesk maya complet model , anim , render packag . featur wide varieti model anim tool , creat realist cloth fur . autodesk maya run window , maco , linux . blender free open-sourc altern paid autodesk suit tool . also offer complet model , anim , render featur set , well python script capabl . gif anim packag much simpler approach anim also allow quick develop ofeffect small anim web , mani sharewar program permitcr anim gif imag . gif contain sever imag , loop creat simpl anim . linux also provid simpl anim tool , anim . 1.3.6 multimedia author tool provid capabl creat complet multimedia present , includ interact user control , call author program . adob anim adob anim ( formerli adob flash3 ) allow user creat interact presen- tation mani differ platform mani differ format , html5 webgl . content creation process anim follow score metaphor—a timelin arrang parallel event sequenc , much like music score consist 3flash shockwav domin onlin multimedia platform late 1990 earli 2010 . fell ﬂavor due mani inherit secur ﬂaw resourc requir support ecosystem . html5 larg overtaken new role.1.3 multimedia softwar tool : quick scan 21 music note . element anim call symbol . symbol ad central repositori , call librari , ad multimedia timelin . symbol present speciﬁc time , appear stage , whichrepres movi look like certain time , manipul move tool built anim . adob director adob director ( formerli macromedia director ) multimedia applic author- platform . use movi metaphor creat interact present . includ built-in script languag , lingo , allow creation complex interact movies.adob discontinu support director sinc 2017 . howev , power tool , director still use commun date . adob dreamweav dreamweav webpag author tool allow user produc web-basedmultimedia present without learn html . softwar develop kit uniti engin multimedia engin develop kit target novic small develop team produc video game interact off-the-shelf experi . uniti deploy mani platform , pc , smartphon , consol window . free person use also use profession vari subscript cost royalti . unreal engin offer high-ﬁdel visual box , unlik uniti , steep learn curv . commonli use larg game develop studio target high-qual visual effect latest hardwar . 1.3.7 multimedia broadcast ob , xsplit ob xsplit two wide use broadcast tool . ob free open sourc , xsplit proprietari paid . tool thought entir broadcast product studio digit form . offer built-in supportfor switch differ camera multimedia sourc real-tim broadcast . user broadcast live video feed websit like youtub live , mixer , twitch , variou live stream websites.22 1 introduct multimedia 1.4 futur multimedia textbook emphas fundament multimedia , focus basic matur techniqu collect form foundat today ’ multimedia system . worth note , howev , multimedia research remain young vigor grow . bring mani excit topic togeth , certainlyse great innov dramat chang life near futur [ 12,13 ] . exampl , research interest camera-bas object track technol- ogi . face detect ubiquit , camera softwar reasonablejob identifi face imag video , face recognit , object track , action/ev analysi mean solv problem today . shot detection— ﬁnding scene chang exist video—and video classiﬁc time interest , new challeng arisen old subject due abund onlin video profession edit . extend convent 2d video , today ’ 3d captur technolog fast enough allow acquir dynam characterist human facial express speech , synthes highli realist facial anim speech low-bandwidthappl . beyond , multipl view sever camera singl camera differ light accur acquir data give shape surfac properti materi , thu automat gener synthet graphicsmodel . allow photo-realist ( video qualiti ) synthesi virtual actor . multimedia applic aim handicap person , particularli poor vision elderli , rich ﬁeld endeavor current research , . anotherrel exampl googl glass , , equip optic head-mount display , enabl interact , smartphone-lik inform display user . wire- lessli connect internet , also commun use natur languag voicecommand . scenario excit new technolog make good step for- ward toward wearabl comput , great potential—argu near-futur . past decad also wit explos new-gener communi- cation technolog multimedia process deliveri . without doubt , net- work servic futur focu user experi particip withrich media . onlin social media , youtub , facebook , twitter , twitch , tiktok , rapidli chang mechan inform gener share , even daili life . research onlin social media like one mostimport area scrutini , 100,000 academ articl produc per year area . vast coverag social media share , howev , present unpreced scale challeng . highli diversiﬁ content type , origin , distribut channel fur- ther impos complex interact among individu particip , particularli advanc immers applic interact livecast/gamecast , multi-partymedia product , onlin game , augment realiti ( ar ) virtual realiti ( vr ) . make high demand qualiti respons , much higher convent voic commun internet tv ( e.g. , latenc orderof 100 ms even 10 ms ) . emerg applic video ana- lytic assisted/autonom drive , consum larg becom intel-1.4 futur multimedia 23 ligent machin , , without human-in-the-loop , impos even stringent demand . light , new network distribut comput architectur advoc , e.g. , 5g cellular network , well cloud edg com-put . 6g cellular network standard still develop , ultra-low latenc high-bandwidth support massiv scale multimedia end devic primari focu . crowdsourc multimedia : concept , make use input larg number human contributor multimedia project , experienc larg growth attent . exampl , peopl provid tag aid understandingth visual content imag video , amazon ’ “ mechan turk , ” outsourc time-consum task semant video annot larg number worker will work small reward fun . straightforward use larg popul analyz “ sentiment , ” popular particular brand name evidenc read sever thousand tweet subject.anoth exampl “ digit fashion , ” aim develop smart cloth commun enhanc cloth use wireless commun , artiﬁci enhanc human interact social set . vision isto use technolog allow individu allow certain thought feel broadcast automat , exchang other equip similar technolog . execut academ paper : scienc engin , one tradit way commun ﬁnding public paper academ journal . new idea exploit complet digit pathway broadcast inform call “ execut papers. ” idea result discuss publishedpap often difﬁcult reproduc . reason dataset use program code work data typic suppli part public . execut paper approach allow “ reader ” interact andinteract manipul data code , understand ﬁnding present . moreov , concept includ allow reader rerun code , chang paramet , upload differ data . anim lifelik virtual agent : exampl , virtual educ , particular , social partner special need children , variou role design todemonstr emot person , varieti embodi . object ﬂexibl , oppos ﬁxed script . behavior scienc model brought play model interact peopl , extend enabl natur interact virtual charact . “ augment interact ” applic use develop interfac real virtual human task augment storytel . applic area push develop comput scienc gen- eral , stimul new applic , fascin practition . chief leader multimedia research gener sever overarch “ grand challeng ” prob-lem , act type state art multimedia interest . present , consist follow : •social event detect social multimedia : discov social event plan attend peopl , indic collect multimedia content captur peopl upload social-media sites.24 1 introduct multimedia •sport video annot : use video classiﬁc label video segment certain action stroke tabl tenni , penalti kick soccer game , etc . •gamestori : video game analyt challeng e-sport game often involv- ing million player viewer analyz . audio video stream , com- mentari , game data statist , interact trace , multimedia data use summar predict develop evolut game . •live video stream : requir ultra-low end-to-end latenc real-tim inter- action broadcast viewer . main challeng qoe ( qualiti experi ) , due latenc constraint . •violent scene detect ﬁlm : automat detect portion movi depict violenc . , aspect avail text audio could brought play . •preserv privaci surveil video : method obscur privat inform ( face googl earth ) , render privacy-sensit element videounrecogniz , time allow video still viewabl peopl also allow comput vision task object track . •deep video understand : understand relationship differ enti- tie long durat movi . relat famili , work , social , type . modal multimedia exploit knowledg base construct consult . •large-scal human-centr video analysi : analyz variou crowd complex event get train , dine busi restaur , earthquak escap , etc . issu includ multi-person track , crowd pose estim track , person-level action recognit . •search question answer spoken web : search audio content within audio content use audio queri , match spoken question acollect spoken answer . •multimedia recommend system : improv qualiti recommend sys- tem produc item relev user ’ interest . applic includ movi recommend , news recommend , etc . solut challeng difﬁcult , impact enorm , industri , also everyon , live digit multimediaworld . want textbook bring valuabl knowledg multimedia , hope enjoy perhap even contribut promis ﬁeld ( mayb topic list beyond ) futur career ! 1.5 exercis 1 . use word , describ “ multimedia ” . multimedia simpli collect differ type media ? 2 . identifi three novel multimedia applic . discuss think novel potenti impact . 3 . discuss relat multimedia hypermedia.1.5 exercis 25 4 . brieﬂi explain , word , “ memex ” role regard hypertext . could carri memex task today ? use memex idea work ? 5 . discov current media input , storag , playback devic analog . necessari convert digit ? pro con analog digit ? 6 . task think transmiss smell internet . suppos smell sensor one locat wish transmit aroma vector ( let us say ) receiv , reproduc sensat . ask designsuch system . list three key issu consid two applic deliveri system . hint : think medic applic . 7 . track object peopl done sight sound . vision system precis , rel expens ; hand , pair microphon detect person ’ bear inaccur cheapli . sensor fusion sound vision thu use . surf web ﬁnd develop tool videoconferenc use kind multimedia idea . 8.non-photorealist graphic mean comput graphic well enough with- attempt make imag look like camera imag . exampl conferenc . exampl , track lip movement , gener right anim ﬁt face . ’ much like face , substi-tut anoth one—facial-featur model map correct lip movement onto anoth model . see ﬁnd carri research gener avatar repres confer particip ’ bodi . 9 . watermark mean embed hidden messag data . could import legal implic : imag copi ? imag doctor ? took ? ? think “ messag ” could sens capturingan imag secretli embed imag , answer question . ( similar question deriv use cell phone . could use determin put phone use , , ? could elimin need password other use phone lost. ) . refer 1 . b. newhal , histori photographi : 1839 present . ( museum modern art , 1982 ) 2 . t. gustavson , g.e . hous , camera : histori photographi daguerreotyp digit . ( sterl signatur , 2012 ) 3 . a. koenigsberg , patent histori phonograph , 1877–1912 . ( apm press , 1991 ) 4 . d.l . morton , jr. , sound record : life stori technolog . ( john hopkin univers press , 2006 ) 5 . q.d . bower , k. fuller-seeley , one thousand night movi : illustr histori motion pictur , 1895–1915 . ( whitman publish , 2012 ) 6 . t.k . sarkar , r. mailloux , a. arthur , m. salazar-palma , d.l . sengupta , histori wireless . ( wiley-iee press , olin , 2006 ) 26 1 introduct multimedia 7 . m. hilm , j. jacob , televis histori book ( televis , media cultur studi ) . ( british film institut , 2008 ) 8 . v . bush , may think , atlant monthli ( 1945 ) 9 . n. yankelovitch , n. meyrowitz , a. van dam , read write electron book , hypermedia literari studi , ed . p. delani , g.p . landow ( mit press , 1991 ) 10 . d. engelbart , h. lehtman , work togeth , byte magazin ( 1988 ) , pp . 245–252 11 . j. duckett , html css : design build websit ( wiley , 2011 ) 12 . k. nahrstedt , r. lienhart , mal . slaney . special issu 20th anniversari acm sigmm . acm tran . multim . comput . commun . appl . ( tomccap ) ( 2013 ) 13 . a. nauman et al. , multimedia internet thing : comprehens survey . ieee access 8 , 8202–8250 ( 2020 ) 2a tast multimedia 2.1 multimedia task concern multimedia content ubiquit softwar around us , includ phone , cours . interest subject comput scienc engineer- ing point view , well interest make interact applic ( “ present ” ) , use video editor adob premier still-imag editor adob photoshop ﬁrst instanc , combin result- ing resourc interact program make use “ author ” tool flash director includ sophist program . multimedia often gener problem consider gener comput scienceﬂavor . exampl , camera smart enough ﬁnd face ( reason- abl success ) —but recent task ﬁrmli domain comput vision , i.e. , branch artiﬁci intellig deal tri understand imag content . basic concern impact multimedia appear product , tend increasingli inﬂuenc ﬁeld . continu com- puter vision direct , camera owner might encourag think like computerscientist ask “ go imag ? ” less high-level question “ imag taken ? ” ( scene recognit ) “ imag contain particular object ? ” ( object classiﬁc ) . still quit difﬁcult question “ wherei object interest ? ” ( object detect ) . lower level question might “ object pixel belong ? ” ( imag segment ) . thu , take long ﬁnd fulli engag classic comput vision hier-archi high level detail descript imag , scene recognit top imag segment bottom . text , take moder approach difﬁculti level , ’ presum answer sophist question pose . nonetheless , studi fundament multimedia problem inde fruit concern © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_22728 2 tast multimedia aim book give reader tool would need eventu tackl difﬁcult question , exampl , work situat . 2.2 multimedia present section , brieﬂi outlin effect keep mind present multi-media content well use guidelin content design [ 1,2 ] . graphic style care thought gone combin color scheme letter perceiv present . mani present meant busi projecteddisplay , rather appear screen close eye . human visual dynam consid regard present must construct . observ drawn vetter et al . [ 3 ] , shown fig . 2.1 . color principl guidelin color scheme andart style best combin certain theme style . color scheme could , exampl , natur ﬂoral outdoor scene solidcolor indoor scene . exampl art style oil paint , watercolor , color pencil , pastel . gener hint use mani color , distract . help consist use color—then color use signal chang theme . font effect visual commun , larg font ( 18–36 point ) best , six eight line per screen . shown fig . 2.1 , san serif font work better serif font ( serif font short line stem angl upper lower end letter ’ stroke ) . figur 2.1show comparison two screen project , ( fig . 2 3 vetter et al . [ 3 ] ) . top ﬁgure show good use color font . consist color scheme , use larg san serif ( arial ) font . bottom ﬁgure poor , mani color use , inconsist . red adjac blue hard focuson , human retina focu color simultan . serif ( time new roman ) font said hard read darken , project set . final , lower right panel enough contrast—pretti pastel colorsar often usabl background sufﬁcient different.2.2 multimedia present 29 fig . 2.1 color font . courtesi ron vetter color contrast program see result research vetter et al. , construct small java program1 investig readabl text depend text color color background . simplest approach make readabl color screen use princip complementari color background text . color valu rang 0–1 ( , effect , 0–255 ) , text color tripl ( red , green , blue ) , ( r , g , b ) 1seehttp : //www.cs.sfu.ca/mmbook . execut program sourc given.30 2 tast multimedia short , legibl color background like given color subtract maximum : ( r , g , b ) ⇒ ( 1−r,1−g,1−b ) ( 2.1 ) , color “ opposit ” sens ( sens artist use ) , text bright , background dark , vice versa . java program given , slider use chang background color . background chang , text chang equal princip complementarycolor . click background bring color picker altern slider . feel choos better color combin , click text . bring color picker tie background color , experi . ( text also edit . ) littl experiment show color combinationsar pleas other , exampl , pink background forest green foreground green background mauv foreground . figur 2.2show small program oper . also worth note graphic user interfac ( gui ) program modern ﬂat design ( see fig . 2.1for comparison ) . figur 2.3show “ color wheel , ” opposit color equal ( 1 −r , 1−g , 1−b ) . artist ’ color wheel look , base feel rather algorithm . tradit artist ’ wheel , exampl , yellow opposit magenta , instead opposit blue fig . 2.3 , blue instead opposit orang . fig . 2.2 program investig color readability2.2 multimedia present 31 fig . 2.3 color wheel sprite anim sprite often use anim . exampl , adob director , notion sprite expand instanti resourc . howev , basic idea ofsprit anim simpl . suppos produc anim ﬁgure , fig . 2.4a . simpl matter creat 1-bit mask , shown fig . 2.4b , black white , accompani sprite , shown fig . 2.4c . overlay sprite color background b , shown fig . 2.5a , ﬁrst and bandm , ore result , ﬁnal result fig . 2.5e . oper avail carri simpl composit manipu- lation frame rate produc simpl 2d anim move sprite around frame chang way look . fig . 2.4 sprite creation : aorigin ; bmask imag ; n csprite s. “ duke ” ﬁgure courtesi sun microsystems32 2 tast multimedia fig . 2.5 sprite anim : abackground b ; bmask ; cband ; dsprite ; eband or video transit video transit effect way indic chang next section . video transit syntact mean signal “ scene chang ” often carrysemant mean . mani differ type transit exist ; main type cut , wipe , dissolv , fade-in , fade-out . cut , name suggest , carri abrupt chang imag content two consecut video frame respect clip . simplest frequent use video transit . wipe replac pixel region viewport anoth video . boundari line two video move slowli across screen , second video gradual replac ﬁrst . wipe left-to-right , right-to-left , vertic , horizont , like iri open , swept like hand aclock , . dissolv replac everi pixel mixtur time two video , grad- ualli chang ﬁrst second . fade-out replac video black ( white ) , fade-in revers . dissolv classiﬁ two type , correspond , exampl , cross dissolv anddith dissolv adob premier video edit softwar . type ( cross dissolv ) , everi pixel affect gradual . deﬁn d= ( 1−α ( ) ) ·a+α ( ) ·b ( 2.2 ) 2.2 multimedia present 33 fig . 2.6 avideo l ; bvideo r ; cvideo lslide place push video r aand bare color 3-vector video video b . , α ( ) transit function , often linear time : α ( ) =kt , ktmax≡1 ( 2.3 ) type ii ( dither dissolv ) entir differ . determin α ( ) , increasingli pixel video abruptli ( instead gradual , type ) chang video b . posit pixel subject chang randomor sometim follow particular pattern . obvious , fade-in fade-out special type type dissolv , video b black ( white ) . wipe special form type ii dissolv , inwhich chang pixel follow particular geometr pattern . despit fact mani digit video editor includ preset number video transit , may also interest build . exampl , suppos wish build special type wipe slide one video anoth video slide replac . usual type wipe . instead , videostay place , transit line move across “ stationari ” video , left part viewport show pixel left video , right part show pixel right video ( wipe move horizont left right ) . suppos would like video frame held place , instead move progress farther ( ) viewport : wish slide video lin left push video r. figur 2.6show process . video l video rha valu r , g , b . note r function posit frame , ( x , ) , well time t. sinc video collect imag variou size , two video maximum extent , xmax . ( premier actual make video size—th one chosen preset selection—so caus worri differ size . ) time goe , horizont locat xtfor transit boundari move across viewport xt=0a tt=0t oxt=xmaxatt=tmax . therefor , transit linear time , xt= ( t/tmax ) xmax . time , situat shown fig . 2.7a . viewport , shall write pixel , coordin system , x-axi 0 xmax . x ( ) , must determin ( ) video take rgb , i.e. , ( red , green , blue ) valu , ( b ) x-posit unmov video take pixel valu , , posit xfrom left video , say , own34 2 tast multimedia xtxmax0i xvideolviewport videor ( ) xmax xmax − xtxt x 0y x ( b ) fig . 2.7 ageometri video lpush video r ; bcalcul posit video lfrom pixel copi viewport coordin system . video , cours imag left video frame chang time . let ’ assum depend yi implicit . event , use ya sourc video . red channel ( similarli green blue ) , r=r ( x , ) . suppos determin pixel come video l. x-posit xlin unmov video xl=x+ ( xmax−xt ) , xi posit tri ﬁll viewport , xti posit viewport transit boundari reach , xmaxi maximum pixel posit frame . see , note fig . 2.7b calcul posit xlin video l ’ coordin system sum distanc x , viewport , differ xmax−xt.2.2 multimedia present 35 tin0 .. tmax xin0 .. xmax ( x xmax < tmax ) r=rl ( x+xmax∗ [ 1−t tmax ] , ) els r=rr ( x−xmax∗t tmax , ) fig . 2.8 pseudocod slide video transit substitut fact transit move linearli time , xt= xmax ( t/tmax ) , set pseudocod solut shown fig . 2.8 . fig . 2.8 , slight chang formula pixel actual come video rinstead video li easi deriv . exercis section end chapter contain suggest video transit . comput scientist engin , easili capabl construct video transit , rather reli simpli choos item menu . career multimedia involv address interest sometim challeng task no-on actual solv ! 2.3 data compress one evid import challeng use multimedia necess compress data . tabl 2.1show valu standard deﬁnit high- deﬁnit broadcast video . clearli , need excel fast data compress order avoid high data rate caus problem storag network , tri share data also disk i/o . tabl 2.1 uncompress video size standard deﬁnit video 640×480 full color = 922 kb/frame @ 30 frames/ = 28 mb/ = 221 mb/ ×3,600 s/h = 100 gb/h high deﬁnit video 1,920×1,080 full color = 6.2 mb/frame @ 30 frames/ = 187 mb/ =1 . 5g b / ×3,600 s/h = 672 gb/h36 2 tast multimedia much compress requir ? effect , depend applic , capabl view comput display , bandwidth ( bit per second ) avail perhap stream certainli view decompress result . jpeg imag compress standard , amount compress control valu qf ( qualiti factor ) rang 1–100 ( see sect . 9.1for detail ) . “ qualiti ” result imag best qf=100 worst qf=1 . figur 2.9a show origin , uncompress imag ( ˇceský krumlov , czech republ ) taken digit camera allow full-accuraci imag cap- ture , data compress . origin imag resolut 3,232 by2,424 . reduc 485 column 364 row pixel data better illustr effect qf . 8-bit accuraci red , green , blue pixel valu , total ﬁle size 485 ×364×3=529,620 byte ( includ ﬁle-head inform , store valu column row size ) . tabl 2.2 , show result use differ qualiti factor jpeg compress . inde , greatli shrink ﬁle size , small valu qfthe result imag poor . see fig . 2.9that qf=25 terribl , insist go qualiti factor qf=5 end unus imag . howev , fig . 2.9 jpeg compress : aorigin uncompress imag ; bjpeg compress qualiti factor qf=75 ( typic default ) ; c , dqualiti factor qf=25 qf=52.3 data compress 37 tabl 2.2 jpeg ﬁle size ( byte ) percentag size data jpeg compress qualiti factor qf=75 , 25 , 5 qualiti factor ( qf ) compress ﬁle size percentag origin ( % ) – 529,620 100 75 37,667 7.11 25 16,560 3.13 5 5,960 1.13 exercis show us someth interest : color part , oppos black white ( i.e. , grayscal ) may well less notic problem highcompress ratio ( i.e. , low amount data surviv compress ) . ’ see color grayscal , fact , treat differ chap . 9 . compress inde save day , price . jpeg compress effect compress ratio 15:1 littl loss qualiti . video compress , mpeg video compress standard , set chap . 11 , produc compress ratio 100:1 retain reason qualiti . howev , let ’ look expens imag video process term process cpu . suppos imag whose pixel wish darken , factor 2 . follow code fragment pseudocod oper : f rx=1t column { = 1 row { imag [ x , ] .red /= 2 ; imag [ x , ] .green /= 2 ; imag [ x , ] .blue /= 2 ; } } risc machin , loop amount one increment , one check , one branch instruct . also three load , three shift , three store . make total 12 instruct per pixel , i.e. , per 3 byte . , four instruct perimag byte . standard-deﬁnit video , 28 mb/ , mean 28 ×4=112 mega instruct per second . high deﬁnit , 187 mb/ , need 748 mega instruct per second . certainli possibl . howev , jpeg compress take 300 instruc- tion per pixel , word , 100 instruct per imag byte . yield numbersof 2.8 billion instruct per second standard deﬁnit 19 billion instruc- tion per second high deﬁnit , begin real constraint ! clearli , clever techniqu requir , view later chapter . issu aris tri interact multipl stream data , e.g. , happen tri show video news interview , plu video background38 2 tast multimedia inform , plu data stream addit inform , etc . composit ( put togeth ) inform ﬁrst , compress best way forward ? composit receiv end ? multimedia tend open new questionson comput scienc . multipl data stream place new burden oper system , term schedul resourc manag . well , new capabl impli new demand : happen rock band need rehears music togeth , place ( distribut music problem ) . question becom one much latenc ( time lag ) accept- abl ’ compress , variou applic . music rehears , band member hit lead note close time ! 2.4 multimedia product multimedia project involv host peopl special skill . book , emphas technic aspect , well multimedia product easili involv art director , graphic design , product artist , produc , project manag , writer , user interfac design , sound design , videograph , 3d 2d anim , well programm . product timelin would like involv program project 40 % complet , reason target alpha version ( earli ver- sion contain plan featur ) perhap 65–70 % complet . typic , design phase consist storyboard , ﬂowchart , prototyp , andus test , well parallel product media . program debug phase would carri consult market , distribut phase would follow . storyboard depict initi idea content multimedia concept seri sketch . like “ keyfram ” video—th stori hang “ stop places. ” ﬂowchart organ storyboard insert navig information—th multimedia concept ’ structur user interact . reliabl approach plan navig pick tradit data structur . ahierarch system perhap one simplest organiz strategi . multimedia realli like present , care thought must given organ movement “ room ” product . forexampl , suppos navig african safari , also need bring specimen back museum close examination—just effect transit one local ? ﬂowchart help imagin solut . ﬂowchart phase follow develop detail function speciﬁ- cation . consist walk-through scenario present , frame frame , includ screen action user interact . exampl , amouseov charact , charact react , user click charact result action . ﬁnal part design phase prototyp test . multimedia design use special multimedia author tool stage alreadi , even the2.4 multimedia product 39 intermedi prototyp use ﬁnal product continu anoth tool . user test , cours , extrem import ﬁnal develop phase . 2.5 multimedia share distribut multimedia content , produc , need publish share amongus . recent year , tradit storag distribut media , optic disc , larg replac usb ﬂash drive solid-st drive ( ssd ) , conveni , internet . consid youtub , popular video share site internet , exampl . user easili creat googl account channel ( youtub own googl ) , upload video , share everyon toselect user . youtub enabl titl tag use classifi video link similar video togeth ( shown list relat video ) . figur 2.10 show webpag upload video local comput youtub . thevideo , captur us 1905 edison firesid phonograph cygnet horn play cylind record , search youtub ’ homepag “ edison phonograph multimedia textbook 3rd edit , ” titl tag suppliedbi us . fig . 2.10 webpag upload youtub video . video , titl “ edison phonograph multimedia textbook 3rd edit , ” open user ( privaci set : public ) searchedin youtub homepag use titl tag . note video thumbnail automaticallygener youtube40 2 tast multimedia fig . 2.11 youtub page video upload . list relat video shown right side user post comment , figur 2.11 show youtub page video . also offer list relat video , recommend youtub . ideal , expect link videosabout edison phonograph multimedia textbook . result shown fig . 2.11 exactli would expect , relat certain degre . inde , multimedia content retriev recommend remain quit difﬁcult , wewil review basic techniqu chap . 21 . link video fed social network site facebook twitter well , potenti propag mani user interest short time , examin chap . 19 . internet reshap tradit tv broadcast well . netﬂix , build servic amazon ’ cloud platform , becom one largest tv content provid . custom base 137 million worldwid ( year 2018 ) , surpass convent tv broadcast . twitch.tv , gamecast livecastplatform , 2.2 million broadcast monthli 15 million daili activ user , around million averag concurr user . user mostli young , ’ strong interest tradit tv broadcast . user ’ view habit also chang . compel content core foun- dation internet protocol tv ( iptv ) proposit , remain true today ; yet iptv servic becom highli person , integr , portabl , on-demand . servic provid move beyond basic video offer toward richer user experi , particularli support multi-screen viewing2.5 multimedia share distribut 41 across tv , pc , tablet , smartphon . meanwhil , 3d , multi-view , multi- stream develop , multipl video stream event deliv user , abl switch camera view . isa real recognit servic provid happen home across planet—that famili voraci simultan consum stream high- deﬁnit video devic tradit set-top box/tv pair . scale challeng multimedia content distribut enorm [ 4 ] . reach 100 million viewer , deliveri tv qualiti video encod mpeg-4 ( 1.5 mbp ) may requir aggreg capac 150 tbp . put thing perspect , consid two large-scal internet video broadcast : nbc ’ live telecast super bowl xlix 2015 , record-high viewership within unit state 114.4 million viewer , 2018 fifa world cup final ( franc versu croatia ) , around 1 billion viewer worldwid . even low-bandwidth internet video 500 kbp , nbc broadcast need 57 tbp server andnetwork bandwidth , fifa broadcast worldwid would order magni- tude higher . hardli handl singl server . later , chap . 16and 18 , see effect solut use peer-to-p , content distribut network , cloud deal challeng . 2.6 use edit author ool textbook primarili concern principl multimedia—th fundamen-t grasp real understand subject . nonetheless , need real vehicl show understand , straight program c++ java alway best way show knowledg . introductori multimediacours ask least start deliv multimedia product ( e.g. , see exercis 9 ) . therefor , ’ consid popular author tool . sinc ﬁrst step creat multimedia applic probabl creation interest video clip , start look video edit tool . realli author tool , videocr import includ small introduct one program . tool look follow : •premier , •html5 canva , •director , •xd . , cours , mean exhaust list , tool often use creat multimedia content . also note mani adob ’ creativ cloud , give subscrib access collect softwar use graphic design , video edit , web develop , photographi , along setof mobil applic also option cloud services.42 2 tast multimedia 2.6.1 adob premier premier basic adob premier simpl yet power video edit program allow quickli creat simpl digit video assembl merg multimediacompon . effect use “ score ” author metaphor , compon place “ track ” horizont , timelin window sens resembl music score . thefil > new project command open window display seri “ preset ” —assembl valu frame resolut , compress method , frame rate . start import resourc , vi ( audio video interleav ) video ﬁle w v sound ﬁle drag project window onto track 1o r2 . usual , see three track : video 1 , video 2 , video 3 . video transi- tion , mean chang one video segment anoth , effect window . transit drag transit track transit win-dow , gradual replac video 1 video 2 ( dissolv ) , sudden replac random pixel checkerboard ( dither dissolv ) , wipe , one video slide anoth . mani transit choos . import w v sound ﬁle drag audio 1 audio 2 timelin window addit sound track . edit properti sound track right-click . figur 2.12 show typic premier screen might look like . yellow ruler top timelin window delin work timeline—drag right amount time . 1-second dropdown box bottom representsshow one video keyfram per 1 second . “ compil ” video , go sequenc > render work area look product ’ make , save project .prproj ﬁle . save movi , select file > export > movi . get interest , must make choic , involv format movi tobe save . figur 2.13 show project option . dialog tweak codec provid codec manufactur ; bring click part project control panel via conﬁgur button . compress codec ( compression–decompress protocol ) often hardwar video captur card . choos codec requir hardwar assist , someon els ’ system may abl play brilliant digit video , vain ! imag also insert track . use transit make imag gradual appear disappear ﬁnal video window . , set “ mask ” imag , fig . 2.14 . , import adob photoshop layer imag , accompani alpha channel made photoshop . premier , click imag , place video track , effect control window , click triangl next opac prop-erti enter new opac valu , make imag partial transpar . premier control make face shown imag transpar background using2.6 use edit author tool 43 fig . 2.12 adob premier screen fig . 2.13 adob premier export set screen44 2 tast multimedia fig . 2.14 adob premier preview clip viewer , adob photoshop imag alpha- channel layer . : rgb channel : color black background . b : alpha channel : white black background alpha channel . also simpl use motion effect imag ﬂy frame . photoshop , set alpha channel follow : 1 . use imag like—a .jpg , say . 2 . make background solid color—whit , say.3 . make sure chosen imag > mode > rgb color . 4 . select background area ( want remain opaqu premier ) —use magic wand tool . 5 . go select > save select ... . 6 . ensur channel = new . press ok. 7 . go window > show channel , double-click new channel , renam alpha ; make color ( 0 , 0 , 0 ) . 8 . save ﬁle psd . alpha channel creat photoshop ( “ key ” use ) white background , ’ need revers key premier . premier simpl method creat titl ( give credit credit due ) digit video . anoth nice featur premier simpl use captur video old analog sourc . form digit video camcord input , go file > captur . ( menu video/audio captur option appear right-click captur window . ) also set compress format would like export set go file > export > media press ctrl+m . , access drop preset compress option h.265 , mpeg4 , quick- time , . altern , would like custom compress set , youmay go video tab control frame size , frame rate , pixel ratio , more.2.6 use edit author tool 45 2.6.2 html5 canva html5 latest evolut standard deﬁn html ( hypertext markup languag ) , recommend world wide web consortium . come new element , attribut , behavior , larger set technolog allow build divers power websit applic , particularli withimprov support multimedia . late 1990 earli 2010 , adob flash shockwav domin tool creation interact anim . fell favor due mani inher secur ﬂaw resourcesrequir support ecosystem . html5 larg overtaken role . html5 canva element use draw anim graphic webpag . , give brief introduct html5 canva provid simpl exampl use . found mozilla develop network ( mdn ) web doc sourc . html5 , canva rectangular area gener html code width height attribut . background color transpar default . sampl code , set page bodi background color gray , thecanva background color red , make visibl . < canva id= '' canva '' width= '' 300 '' height= '' 300 '' style = '' background-color : red '' > < /canva > < canva > element contain graphic . need use javascript actual draw graphic object . creat new canva , gener one render context display content . javas-cipt code get 2d context . interest , webgl ( web graphic librari ) use render 3d context . var canva = document.getelementbyid ( `` canva '' ) ; var ctx = canvas.getcontext ( `` 2d '' ) ; draw canva draw simpl shape , text , imag , path , object canva . canva ﬁlled grid , act x-i coordin system . code draw rectangl , x coordin top-left corner rectangl . // rectangl fill color ctx.fillrect ( x , , width , height ) ; // rectangl border ctx.strokerect ( x , , width , height ) ; 46 2 tast multimedia fig . 2.15 rectangl pure color ( left ) rectangl gradient color ( right ) // clear rectangl area ctx.clearrect ( x , , width , height ) ; shape ﬁlled fillstyl method . figur 2.15 show two exampl pure color gradient color , respect . transform anim shape graphic transform translat , rotat , scale . ctx.translat ( x , ) ; ctx.rotat ( degre ) ; ctx.scale ( x_scaled_factor , y_scaled_factor ) ; creat anim , take follow step : 1 . clear canva : ctx.clearrect ( x , , width , height ) . 2 . save current state canva : ctx.save ( ) . 3 . draw graphic . 4 . restor canva state : ctx.restor ( ) . 2.6.3 adob director director complet environ ( see fig . 2.16 ) creat interact “ movies. ” movi metaphor use throughout director , window use program reﬂect . main window , action take place , stage . two main window cast score . cast consist resourc movi may use , bitmap , sound , vector-graph shape , flash movies,2.6 use edit author tool 47 fig . 2.16 director : main window digit video , script . cast member creat directli simpli import . typic , creat sever cast , better organ part movi . cast member place stage drag cast window.becaus sever instanc may use singl cast member , instanc call sprite . typic , cast member raw media , wherea sprite object control , , cast member appear stage themovi . sprite becom interact attach “ behavior ” ( exampl , make sprite follow mous ) either prewritten special creat . behavior intern script languag director , call lingo . director standard event-driven program allow easi posit object attach eventprocedur object . use part lingo call imag lingo , directli manipul imag within director . mean imag manip- ulat carri code , make code-bas visual effect . set predeﬁn event rich includ mous event well network event ( exampl latter would test whether cast member down- load yet ) . type control achiev might loop part presentationuntil video download , continu jump anoth frame . bitmap use button , typic use would jump frame movi button-click event . score window organ horizont line , one sprite , vertic frame . thu , score look somewhat like music score , time left right , resembl list event midi ﬁle ( seechap . 6 ) . type behavior , prewritten user-deﬁn , lingo . librari palett provid access prewritten behavior script . drop behavior onto sprite attach behavior whole frame . behavior includ paramet , dialog box appear . exampl , navig behavior must speciﬁ frame jump . attach behavior to48 2 tast multimedia mani sprite frame use differ paramet instanc . behavior respond simpl event , click sprite event trigger “ playback head ” enter frame . basic function , play sound , comeprepackag . write user-deﬁn lingo script provid ﬂexibl . behavior modiﬁ use inspector window : behavior inspector properti inspector . anim tradit anim ( cel anim ) creat show slightli differ imagesov time . director , approach amount use differ cast member differ frame . control process easili , director permit combin mani cast member singl sprite . less sophisticated-look simpl anim avail tween featur director . , specifi particular imag move around stage without alter origin imag . “ tween ” refer job minor anim , use ﬁll keyfram produc experienc animators—a role director fulﬁll automat . prepar anim , specifi path stage tween frame take . also specifi sever keyfram kind curv anim follow keyfram . also specifi imag acceler deceler begin end movement ( “ ease-in ” “ ease-out ” ) . figur 2.17 show tween sprite . lingo script 3d sprite director use four type script : behavior , script attach cast member , movi script , parent script . behavior , movi script , parent script appear cast member cast window . anoth sophist featur director abil creat , import , manipul 3d object stage . exampl , simpl 3d object ad director 3d text . 2.6.4 adob xd adob xd program creat mockup prototyp mobil app , websit , softwar use seri artboard link . primarili forus interfac user experi design test visual appear interfac design goe develop build code . way , design ﬁnaliz layout user ﬂow creation without code knowledg andmak design adjust chang easily.2.6 use edit author tool 49 fig . 2.17 tween sprite three main mode adob xd , name , design , prototyp , share . design mode ( fig . 2.18 ) , user make artboard place imag , text , vector icon , screen . also import designcontrol ad layout column ad compon state ( fig . 2.19 ) . fig . 2.18 design mode adob xd50 2 tast multimedia fig . 2.19 compon state use chang look element trigger fig . 2.20 link screen preview mode . link prototyp mode , element clickabl , allow user move screen design complet interfac , screen link togeth interact prototyp mode . therefor , element use trigger transit new screen , give sens real app design preview ( fig . 2.20 ) . design readi , user send link work prototyp share mode.2 work prototyp made adob xd prototyp program mani use interfac design process . use obtain design critiqu , run user test design , show develop build , show theapp present , either live record . work prototyp play 2seehttp : //www.cs.sfu.ca/mmbook demo.2.7 exercis 51 desktop well mobil devic use adob xd mobil app , design get good sens scale design sit real smartphon screen . 2.7 exercis 1 . extra inform multimedia good convey ? ( ) spoken text convey written text ? ( b ) might written text better spoken text ? 2 . find learn autodesk 3d max local lab softwar . read onlin tutori see softwar ’ approach 3d model techniqu . learn textur map anim use product . make 3d model carri outthes step . 3 . suppos wish creat simpl anim , fig . 2.21 . note imag exactli anim look like time , ﬁgurativerepresent process move ﬁsh ; ﬁsh repeat move . state need carri object , give simpl pseudocod solut problem . assum alreadi list ( x , ) coordin ﬁsh path avail procedur center imag path posit , movement take place top video . 4 . slide transit fig . 2.8 , explain arriv formula xin unmov right video r r. 5 . suppos wish creat video transit second video appear ﬁrst video open circl ( like camera iri open ) , shown fig . 2.22 . write formula use correct pixel two video achiev special effect . write answer red channel . 6 . suppos wish creat video transit second video appear ﬁrst video move radiu ( like clock hand ) , shown fig . 2.23 . write formula use correct pixel two video achiev special effect red channel . 7 . suppos wish creat wavi effect , shown fig . 2.24 . effect come replac imag xvalu xvalu offset small amount . suppos imag size 160 row ×120 column pixel . ( ) use ﬂoat arithmet , add sine compon xvalu pixel pixel take rgb valu equal differ pixel theorigin imag . make maximum shift xequal 16 pixels.52 2 tast multimedia fig . 2.21 sprite , progress take space fig . 2.22 iri wipe : airi open ; bat later moment ( b ) premier packag , integ arithmet provid . function sin redeﬁn take int argument return int . argument sin function must 0 .. 1,024 , valu sin in−512 .. 512 : sin ( 0 ) return 0 , sin ( 256 ) return 512 , sin ( 512 ) return 0 , sin ( 768 ) return -512 , andsin ( 1,024 ) return 0 . rewrit express part ( ) use integ arithmet . ( c ) could chang answer make wave time-depend ? 2.7 exercis 53 fig . 2.23 clock wipe : aclock hand sweep ; bat later moment fig . 2.24 filter appli video 8 . would creat color wheel imag fig . 2.3 ? write small program make imag . hint : place r , g , b corner equilater triangl insid circl . ’ best go column row output imag rather simpli go around disk tri map result back ( x , ) pixel posit . 9 . longer exercis learn exist softwar manipul imag , video , music , make 1-min digit video . end exercis , shouldknow use video editor ( e.g. , adob premier ) , imag editor ( espe-54 2 tast multimedia cialli photoshop ) , music notat program produc midi , per- hap digital-audio manipul softwar adob audit , well multimedia softwar . ( ) acquir ( ﬁnd ) least three digit video ﬁle . either use cam- corder download net , use video set still- imag camera , phone , etc . ( , interest legaci video , use video-captur premier equival product make , old analog camcord vcr—thi challeng , fun ) . ( b ) tri upload one video youtub . check time taken upload video , discuss relat video ’ qualiti size . time longer shorter total playback time video ? ( c ) compos ( edit ) small midi ﬁle music-manipul softwar . ( ) creat ( ﬁnd ) least one w v ﬁle ( ok—could mp3 opu ) . may either digit ﬁnd net , etc . might like edit digital-audio ﬁle use softwar audit , audac , etc . ( e ) use photoshop creat titl end . trivial ; howev , say know multimedia without work photoshop.a state , use featur know photoshop creat alpha channel : •use imag like : .jpg , say . •make background solid color , white , say . •make sure chosen imag > mode > rgb color . •select background area ( want remain opaqu premier ) : magicwandtool . •select > save select > channel=new ; ok . •window > showchannel ; doubl click new channel renam alpha ; make color ( 0 , 0 , 0 ) . •save ﬁle .psd . alpha channel creat photoshop white background , ’ need choos reversekey premier choos transpar > alpha . ( f ) combin produc movi 60 second long , includ titl , credit , soundtrack , least three transit . plotlin video interest , ! ( g ) experi differ compress method ; encourag use mpeg ﬁnal product . interest see con- cept textbook go product actual video . adob premier use divx codec gener movi , output movieactu playabl ( ) machin , ’ interest tri var- iou codec ? refer 55 ( h ) constitut minimum statement exercis . may tempt get creativ , ’ ﬁne , ’ go overboard take much time away rest life ! refer 1 . a.c. luther , author interact multimedia ( ibm tool seri ) . ( ap profession , 1994 ) 2 . d.e . wolfgram , creat multimedia present . ( que , 1994 ) 3 . r. vetter , c. ward , s. shapiro , use color text multimedia project . ieee multim . 2 ( 4 ) , 46–54 ( 1995 ) 4 . jiangchuan liu , sanjay g. rao , bo li , hui zhang , opportun challeng peer-to-p internet video broadcast . proc . ieee 96 ( 1 ) , 11–24 ( 2008 ) 3graphic imag data represent chapter , look imag , start 1-bit imag , 8-bit grayscal imag print , 24-bit color imag 8-bit version colorimag . speciﬁc ﬁle format store imag also discuss . consid follow topic : •graphics/imag data type , •popular ﬁle format . 3.1 graphic imag data type number ﬁle format use multimedia [ 1 ] continu prolifer . exampl , tabl 3.1 show list ﬁle format use popular product adob premier . text , shall studi popular ﬁle format develop sens oper . shall concentr gif jpg imageﬁl format , sinc gif ﬁle format one simplest contain sever fundament featur , jpg ﬁle format arguabl import overal . begin , shall discuss featur variou type imag gener . 3.1.1 1-bit imag imag consist pixel —pictur element digit imag . 1-bit imag consist bit thu simplest type imag . pixel store singl bit ( 0 1 ) . henc , imag also refer binari imag . also sometim call 1-bit monochrom imag , sinc contain color . figur 3.1show 1-bit monochrom imag ( call “ lena ” multimedia © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_35758 3 graphic imag data represent tabl 3.1 popular adob premier ﬁle format imag audio video bmp , dib , aiff , aac , av , dv , gif , heif , ac3 , bwf , flv , hevc , jpg , pict , mp3 , m4a , m4v , mov , mp4 , png , psd , wav , w mpg , mt , mxf , tga , tif swf , wmv fig . 3.1 monochrom 1-bit lena imag scientists—thi standard imag use illustr mani algorithm ) . 640 ×480 monochrom imag requir 38.4 kb storag ( =640×480/8 ) . monochrom 1-bit imag satisfactori pictur contain simpl graphic andtext . moreov , fax machin use 1-bit data , fact 1-bit imag still import even though storag capac increas enough permit use imag carri inform . 3.1.2 8-bit gray-level imag consid 8-bit image—that , one pixel gray valu 0 255 . pixel repres singl byte—for exampl , darkpixel might valu 10 , bright one might 230 . entir imag thought two-dimension array pixel valu . refer array bitmap —a represent graphics/imag data parallel manner store video memori . imag resolut refer number pixel digit imag ( higher resolut alway yield better qualiti ) . fairli high resolut imag might 1,600×1,200 , wherea lower resolut might 640 ×480 . notic use aspect ratio 4:3 . ’ adopt ratio , found look natur . reason , 4 :3 adopt earli tv ( see chap . 5 ) earli laptop screen . later display typic use aspect ration 16:9 match high-deﬁnit video tv .3.1 graphic imag data type 59 fig . 3.2 bitplan 8-bit grayscal imag plane 0plane 7 bitplan array must store hardwar ; call hardwar frame buffer . special ( rel expens ) hardwar call “ video ” card ( actual graphic card ) use purpos . resolut video card match desir resolut imag , enough video card memori avail , data shift around ram display . think 8-bit imag set 1-bit bitplan , plane consist 1-bit represent imag : bit turn imag pixel nonzero valu bit level . figur 3.2display concept bitplan graphic . bitplan valu 0 1 pixel , togeth , bitplan make singl byte store valu 0 255 ( 8-bit situat ) . least signiﬁc bit , bit valu translat 0 1 ﬁnal numer sum binari number . posit arithmet impli next , second , bit 0 1 make contribut 0 2 ﬁnal sum . next bit stand 0 4 , 0 8 , , 0 128 signiﬁc bit . video card refresh bitplan data video rate , unlik ram , hold data well . raster ﬁeld refresh 60 cp ( cycl per second ) north america 50 cp europ . pixel usual store byte ( valu 0 255 ) , 640×480 grayscal imag requir 300 kb storag ( 640 ×480=307,200 ) . figur 3.3show lena imag , time grayscal . wish print imag , thing becom complex . suppos avail 600 dot-per-inch ( dpi ) laser printer . devic usual print dot print . howev , 600 ×600 imag print 1-inch space thu pleas . instead , dither use . basic strategi dither trade intens resolut forspati resolut . ( e e [ 2 ] good discuss dither . ) .60 3 graphic imag data represent fig . 3.3 grayscal imag lena dither print 1-bit printer , dither use calcul larger pattern dot , valu 0 255 correspond pleas pattern correctli repres darker brighter pixel valu . main strategi replac pixel valu larger pattern , say 2 ×2o r4×4 , number print dot approxim varying-s disk ink use halfton print . halfton print analog process use smaller larger ﬁlled circl black ink repres shade , newspap print , say . instead use n×nmatrix on-off 1-bit dot , repres n2+1 level intens resolution—sinc , exampl , three dot ﬁlled way count one intens level . dot pattern creat heurist . exampl , u ea2 ×2 “ dither matrix ” : /parenleftbigg02 31/parenrightbigg ﬁrst remap imag valu 0 .. 255 new rang 0 .. 4 ( integ ) divid 256 /5 . , exampl , pixel valu 0 , print noth 2×2 area printer output . pixel valu 4 , print four dot . rule intens greater dither matrix entri , print ondot entri locat : replac pixel n×nmatrix onoroff dot . howev , notic number level , far , small type print . increas number effect intens level increas thedith matrix size , also increas size output imag . reduc amount detail small part imag , effect reduc spatial resolut . note imag size may much larger dither imag , sinc replac pixel 4 ×4 array dot , say , make imag 4 2=16 time large.3.1 graphic imag data type 61 fig . 3.4 dither grayscal imag . a8-bit grayscal imag lenagray.bmp ; bdither version imag ; cdetail dither version howev , clever trick get around problem . suppos wish use larger , 4 ×4 dither matrix , ⎛ ⎜⎜⎝082 1 0 12 4 14 6 31 1 1 9 15 7 13 5⎞ ⎟⎟⎠ suppos slide dither matrix imag four pixel horizont vertic direct time ( imag valu reduc rang 0 .. 16 ) . “ order dither ” consist turn printer output bit pixel intens level greater particular matrix element pixel posit . figur 3.4a show grayscal imag lena . ordered-dith version shown fig . 3.4b , detail lena ’ right eye fig . 3.4c . algorithm order dither , n×ndither matrix , follow : algorithm 3.1 order dither begin forx=0t xmax // column fory=0t ymax // row i=xm dn j=ym dn //i ( x , ) input , ( x , ) output , di dither matrix . ifi ( x , ) > ( , j ) ( x , ) =1 ; els ( x , ) =0 ; end foley et al . [ 2 ] provid detail order dithering.62 3 graphic imag data represent 3.1.3 imag data type next section introduc common data type graphic imag ﬁle format : 24-bit color 8-bit color . discuss ﬁle format . format restrict particular hardware/oper system platform ( e.g. , ms window maco ) , mani other platform-independ , r cross-platform , format . even format cross-platform , convers applic recogn translat format one system anoth . imag format incorpor variat compress techniqu due larg storag size imag ﬁle . compress techniqu classiﬁ either lossless orlossi . studi variou imag , video , audio compress techniqu chap . 7through 14 . 3.1.4 24-bit color imag color 24-bit imag , pixel repres three byte , usual repres rgb . sinc valu rang 0–255 , format support 256 ×256×256 , total 16,777,216 , possibl combin color . howev , ﬂexibl doesresult storag penalti : 640 ×480 24-bit color imag would requir 921.6 kb storag without compress . import point note mani 24-bit color imag actual store 32-bit imag , extra byte data pixel store α ( alpha ) valu repres special-effect inform . ( see [ 2 ] introduct use theα-channel composit sever overlap object graphic imag . simplest use transpar ﬂag . ) figur 3.5 show imag forestfire.bmp , 24-bit imag microsoft window bmp format ( discuss later chapter ) . also shown grayscal imag red , green , blue channel imag . take byte valu 0 .. 255 color channel repres intens , display grayscal imag color separ . 3.1.5 higher bit-depth imag among imag format usual compress possibl one requir maximum faith view scene variou reason medic liabil . exampl , imag patient ’ liver better repres color red purpl , say , accur ! imag format recogn inform scene imag gain use special camera view three color , i.e. , rgb . idea might use invis light ( e.g. , infrar , ultraviolet ) secur camera , say , produc medic imag skin util addit color better diagnos skin ailment carcinoma . anoth reason3.1 graphic imag data type 63 fig . 3.5 high-resolut color separ r , g , b color channel imag . aexampl 24-bit color imag forestfire.bmp ; b , c , dr , g , b color channel imag use high bit-depth satellit imag , extra inform give indic type crop growth , etc . : , cost simpli lift camerainto high altitud space motiv idea obtain much inform possibl , perhap even yet make use data . imag call multispectr ( 3 color ) hyperspectr ( great mani imag plane , say 224 color satellit imag ) . text , shall stick grayscal rgb color imag . 3.1.6 8-bit color imag space concern ( almost alway is—e.g. , ’ want ﬁll oursmartphon memori needlessli ) , reason accur color imag obtainedbyquant color inform collaps . mani system util color inform store 8 bit inform ( so-cal “ 256 color ” ) produc screen imag . even system electron actual use 24-bitinform , backward compat demand understand 8-bit color imag ﬁle , well smaller size quit use . shall also see trick use imageri . 8-bit color imag ﬁle use concept lookup tabl store color inform . basic , imag store color instead set byte , index tabl 3-byte valu specifi 24-bit color pixel with64 3 graphic imag data represent fig . 3.6 three-dimension histogram rgb color forestfire.bmp lookup tabl index . way , ’ bit like paint-by-numb children ’ art set , number 1 perhap stand orang , number 2 green , on—therei inher pattern set actual color . make sens care choos color repres best imag : imag mostli red sunset , ’ reason repres red precis andstor green . suppos color 24-bit imag collect 256 ×256×256 set cell , along count mani pixel belong colorsstor cell . exampl , exactli 23 pixel rgb valu ( 45,200,91 ) store valu 23 three-dimension array , element index index valu [ 45 , 200 , 91 ] . data structur call color histogram ( see , e.g. , [ 3,4 ] ) . use tool imag transform manipul imag process . figur 3.6 show 3d histogram rgb valu pixel forestfire.bmp . histogram 16 ×16×16 bin show count bin term intens pseudocolor . see import clus- ter color inform , correspond red , yellow , green , , forestfir imag . cluster way allow us pick import 256 group color . basic , larg popul 3d histogram bin subject split-and- merg algorithm determin “ best ” 256 color . figur 3.7show result 8-bit imag gif format ( discuss later chapter ) . notic difference3.1 graphic imag data type 65 fig . 3.7 exampl 8-bit color imag fig . 3.5a , 24-bit imag , fig . 3.7 , 8-bit imag , reason small . alway case . consid ﬁeld medic imag : would satisﬁ “ reason accur ” imag brain potenti lasersurgeri ? like not—and consider 64-bit imag medic applic question . note great save space 8-bit imag 24-bit one : 640 ×480 8-bit color imag requir 300 kb storag , compar 921.6 kb color imag ( , without compress appli ) . 3.1.7 color lookup tabl ( lut ) , idea use 8-bit color imag store index , code valu , pixel . , pixel store , say , valu 25 , mean go row25 color lookup tabl ( lut ) . imag display two-dimension array valu , usual store row-column order simpli long seri valu . 8-bit imag , imag ﬁle store ﬁle header informationjust 8-bit valu r , g , b correspond index . figur 3.8display idea . lut often call palett . acolor picker consist array fairli larg block color ( semicontin- uou rang color ) mous click select color indic . realiti , color picker display palett color associ index valu 0 255 . figur 3.9display concept color picker : user select color block index valu 2 , color meant cyan , rgb valu ( 0,255,255 ) .66 3 graphic imag data represent 00011110 10111110 00111100 yb = 60g = 190r = 30memori valu 250 25 255b g r pixel value0 0 n−1y0 0 n−1m−1 xm −1 x fig . 3.8 color lut 8-bit color imag fig . 3.9 color picker 8-bit color : block color picker correspond one row color lut simpl anim process possibl via simpli chang color tabl : call color cycl orpalett anim . sinc updat color tabl fast , result simpl , pleas effect , marque around textbox color ball appear move around border box . simplic chang small palett data , trick like possibl 8-bit color imag . dither also carri color printer , use 1 bit per color channel space color r , g , b dot . altern , printer screen print limit number color , say use 8 bit instead 24 , color made seem printabl , even avail color lut . appar color resolut display increas without reduc spatial resolut averag intens neighbor pixel . possibl trick eye perceiv color avail , carri spatial blend put good use . figur 3.10 show 24-bit color imag lena , fig . 3.10 b show imag reduc 5 bit via dither . figur 3.10 c show detail left eye.3.1 graphic imag data type 67 fig . 3.10 a24-bit color imag lena.bmp ; bversion color dither ; cdetail dither version devis color lookup tabl sect . 3.1.6 , brieﬂi discuss idea cluster gener impor- tant 256 color 24-bit color imag . howev , gener , cluster expens slow process . need devis color lut somehow—how shall accomplish ? straightforward way make 8-bit lookup color 24-bit color would divid rgb cube equal slice dimens . center result cube would serv entri color lut , simplysc rgb rang 0 .. 255 appropri rang would gener 8-bit code . sinc human sensit r g b , could shrink r rang g rang 0 .. 255 3-bit rang 0 .. 7 shrink b rang 2-bit rang 0 .. 3 , make total 8 bit . shrink r g , could simpli divid r g byte valu ( 256/8= ) 32 truncat . pixel imag get replac 8-bit index , color lut serv gener 24-bit color . howev , tend happen simpl scheme edg artifact appear imag . reason slight chang rgb result shift new code , edg appear , quit annoy perceptu . simpl altern solut color reduct problem call median- cut algorithm better job ( sever compet method well better ) . approach deriv comput graphic [ 5 ] ; , show much simpliﬁ version . method type adapt partit scheme tri put bit , discrimin power , color cluster . idea sort r byte valu ﬁnd median . valu smaller median label 0 bit valu larger median label 1 bit . median point half pixel smaller half larger . suppos imag appl , pixel reddish . median r byte valu might fall fairli high red 0 .. 255 scale . next , consid pixel 0 label ﬁrst step sort g valu . , label imag pixel anoth bit ( second bit assign ) , 0 less68 3 graphic imag data represent fig . 3.11 histogram r byte 24-bit color imag forestfire.bmp result 0 1-bit label everi pixel . second bit color tabl index built , take r valu less r median label pixel 0 1 accord g valu less greater median g valu . continu r , g , b 8 bit give color lut 8-bit index median green 1 greater . appli scheme pixel receiv 1 bit red step , arriv 2-bit label pixel . carri blue channel , 3-bit scheme . repeat step , r , g , b , result 6-bit scheme , cycl r g result 8 bit . bit form 8-bit color index valu pixel , correspond 24-bit color center result small color cube . ou see fact type scheme inde concentr bit need differenti high popul close color . easili visual ﬁnding median use histogram show count posit 0 .. 255 . figur 3.11 show histogram r byte valu forestfire.bmp imag along median valu , depict vertic line . 24-bit color imag result replac everi pixel correspond color lut 24-bit color approxim origin 24-bit imag , cours , algorithm reason job put discriminatori power needed—wher small color shade differ notic . also mention sever method exist distribut approxim error one pixel next . effect smooth problem 8-bit approxim . accur version median-cut algorithm proce via follow steps:3.1 graphic imag data type 69 1 . find smallest box contain color imag . 2 . sort enclos color along longest dimens box . 3 . split box two region median sort list.4 . repeat process step ( 2 ) ( 3 ) origin color space divid , say , 256 region . 5 . everi box , call mean r , g , b box repres ( center ) color box . 6 . base euclidean distanc pixel rgb valu box cen- ter , assign everi pixel one repres color . replac pixel byth code lookup tabl index repres color ( tabl , repres color 24-bits—8 bit r , g , b. ) . way , might tabl 256 row , contain three 8-bit valu . row indic code lookup tabl , indic storedin pixel valu new , color quantiz orpalett imag . 3.2 popular file format popular imag ﬁle format describ . one simplest 8-bit gif format , studi easili understood , well histor connect www html markup languag ﬁrst imag type recogn net browser . howev , current import commonﬁl format jpeg , explor great depth chap . 9 . 3.2.1 gif graphic interchang format ( gif ) devis unisi corpor com- puserv , initi transmit graphic imag phone line via modem . gif standard use lempel-ziv-welch algorithm ( form compression—se chap . 7 ) , modiﬁ slightli imag scanlin packet use line group pixel effect . gif standard limit 8-bit ( 256 ) color imag . produc accept color , best suit imag distinct color ( e.g. , graphic draw ) . gif imag format interest featur , notwithstand fact larg supplant . standard support interlac —the success display pixel wide space row four-pass display process . fact , gif come two ﬂavor . origin speciﬁc gif87a . later version , gif89a , support simpl anim via graphic control extens block data . provid simpl control delay time , atranspar index , . imag edit softwar support gif , wide use today ’ swebpages.70 3 graphic imag data represent fig . 3.12 gif ﬁle format gif signatur raster arearep 1 n time . . . . . . gif terminatorloc color mapimag descriptorglob color mapscreen descriptor worthwhil examin ﬁle format gif87 detail , sinc mani format bear resembl grown good deal complex “ simpl ” standard . standard speciﬁc , gener ﬁle format fig . 3.12 . signatur 6 byte : gif87a ; screen descriptor 7-byte set ﬂag . gif87 ﬁle contain one imag deﬁnit , usual ﬁt sever differ part screen . therefor , imag contain color lookup tabl , local color map , map 8 bit 24-bit rgb valu . howev , need , global color map instead deﬁn take place local tabl latter includ . screen descriptor compris set attribut belong everi imag ﬁle . accord gif87 standard , deﬁn fig . 3.13 .screen width given ﬁrst 2 byte . sinc machin invert order msb/lsb ( signiﬁc byte/least signiﬁc byte—i.e. , byte order ) , order speciﬁ . screen height next 2 byte . “ ” byte 5 0 global color map given . color resolut , “ cr ” , 3 bit 0 .. 7 . sinc old standard meant oper varieti low-end hardwar , “ cr ” request much color resolut . next bit , shown “ 0 ” , extra use standard . “ pixel ” anoth 3 bit , indic number bit per pixel imag , store ﬁle . although “ cr ” usual equal “ pixel ” , need . byte 6 give color tabl index byte background color , byte 7 ﬁlled zero . present usag , abil use small color resolut good featur , sinc may interest low-end devic web-en wristwatch , say . acolor map set simpl fashion , fig . 3.14 . howev , actual length tabl equal 2pixel+1a given screen descriptor . imag ﬁle imag descriptor , deﬁn fig . 3.15 . interestingli , develop standard allow futur extens ignor byte end one imag begin next , identiﬁ a3.2 popular file format 71 fig . 3.13 gif screen descriptor = 1 cr + 1 pixel + 1background = color index screen background ( color defin global color map none specifi , default map ) background 6 7screen height raster height pixel ( lsb first ) raster width pixel ( lsb first ) bit screen widthbyt # 1 2 3 4 50 7654321 0 0000000 global color map follow descriptor # bit color resolut # bits/pixel imagem cr 0 pixel fig . 3.14 gif color map bit 70 red intens green intens blue intens red intens green intens blue intensitybyt # 1 3 4 52 6red valu color index 0 green valu color index 0 blue valu color index 0 red valu color index 1 green valu color index 1 blue valu color index 1 ( continu remain color ) 654321 . . . comma charact . way , futur enhanc could simpli insert backward-compat fashion . interlac bit set local imag descriptor , row imag display four-pass sequenc , fig . 3.16 . , ﬁrst pass display row 0 8 , second pass display row 4 12 , . allow quick sketch appear web browser display imag , follow detail ﬁll-in . jpeg standard ( ) similar display mode , denot progress mode . actual raster data ﬁrst compress use lzw compress scheme ( see chap . 7 ) store . gif87 standard also set , futur use , extens block could deﬁn . even gif87 , simpl anim achiev , delay deﬁn imag , multipl imag simpli overwrit screen clears.72 3 graphic imag data represent bit imag left imag top imag width imag heightbyt # 1 3 4 5 6 7 8 9 10imag separ charact ( comma ) width imag pixel ( lsb first ) start imag pixel top screen ( lsb first ) height imag pixel ( lsb first ) = 0 = 1 pixel + 1m = 0 = 17 0 654321 00010110 use global color map , ignor ‘ pixel ’ local color map follow , use ‘ pixel ’ imag format sequenti order imag format interlac order # bit per pixel image2start imag pixel left side screen ( lsb first ) 0 0 0 pixel fig . 3.15 gif imag descriptor fig . 3.16 gif four-pass interlac display row orderimag row 0 1 2 3 4 5 6 7 8 9 10 11 12 * 2b * * 2a * * 3a * * 3c * * 3b * * 1a * * 1b * * 4a * * 4b * * 4c * * 4d * * 4e * * 4f * result * 4b * * 4f * * 4d * * 4e * * 4c * * 4a * pass 4 * 3a * * 3c * * 3b * pass 3 * 2b * * 2a * pass 2 * 1a * * 1b * pass 1. . . gif89 introduc number extens block deﬁnit , especi assist anim : transpar delay imag . quit use featur introduc gif89 idea sort color tabl . import color appear ﬁrst , decod fewer color avail , import one chosen . , segment color lookup tabl use , nearbi color map well possibl color avail . investig ﬁle header work practic look par- ticular gif imag . figur 3.7i 8-bit color gif imag . see ﬁle header3.2 popular file format 73 look , simpli use everyon ’ favorit command unix/linux/maco oper system : od ( octal dump ) . unix,1then , issu command od -c forestfire.gif | head -2 see ﬁrst 32 byte interpret charact : g f 8 7 \208 \2 \188 \1 \247 \0 \0 \6 \3 \5 j \132 \24 | ) \7 \198 \195 \ \128 u \27 \196 \166 & deciph remaind ﬁle header ( gif87a ) , use hexadecim : od -x forestfire.gif | head -2 result 4749 4638 3761 d002 bc01 f700 0006 0305 ae84 187c 2907 c6c3 5c80 551b c4a6 2654 thed002 bc01 follow signatur screen width height ; given least-signiﬁcant-byte-ﬁrst order , ﬁle decim screen width 0+13×16+2×162=720 , screen height 11 ×16+12+1×162= 444 . f7 ( 247 decim ) ﬁfth byte screen descriptor , follow background color index , 00 , 00delimit . set ﬂag , f7 , bit , read 1 , 111 , 0 , 111 , word : global color map use , 8-bit color resolut , 0 separ , 8-bit pixel data . 3.2.2 jpeg import current standard imag compress jpeg [ 6 ] . stan- dard creat work group intern organ standard- izat ( iso ) inform call joint photograph expert group therefor name . shall studi jpeg good deal detail chap . 9 , salient featur compress standard mention . human vision system speciﬁc limit , jpeg take advan- tage achiev high rate compress . eye–brain system see extrem ﬁne detail . mani chang occur within pixel , refer 1cento version ; older version use slightli differ syntax.74 3 graphic imag data represent fig . 3.17 jpeg imag low qualiti speciﬁ user imag segment high spatial frequenc —that , great deal chang ( x , ) space . limit even conspicu color vision grayscal ( black white ) . therefor , color inform jpeg decim ( partial drop , averag ) small block imag repres spatial frequenc domain ( u , v ) , rather ( x , ) . , speed chang xand yi evalu , low high , new “ imag ” form group coefﬁcient weight speed . weight correspond slow chang favor , use simpl trick : valu divid larg integ truncat . way , small valu arezero . scheme repres long run zero efﬁcient appli , andvoila ! —the imag greatli compress . sinc effect throw away lot inform divis truncat step , compress scheme “ lossi ” ( although lossless mode exist ) . ’ , sinc straightforward allow user choos larg denominatorto use henc much inform discard , jpeg allow user set desir level qualiti , compress ratio ( input divid output ) . exampl , fig . 3.17 show forestfir imag qualiti factor qf=10 . ( usual default qualiti factor qf=75. ) . imag mere 1 .5 % origin size . comparison , jpeg imag qf=75 yield imag size 5 .6 % origin , wherea gif version imag compress 23 .0 % uncompress imag size.3.2 popular file format 75 3.2.3 png one interest develop stem popular internet effort toward system-independ imag format . one format portabl net- work graphic ( png ) . standard meant supersed gif standard extend import way . motiv new standard part thepat held unisi compuserv lzw compress method . ( inter- estingli , patent cover compress , decompress : unixgunzip util other decompress lzw-compress ﬁle . ) special featur png ﬁle includ support 16 bit per pixel color channel , i.e. , 48-bit color—a larg increas . file may also contain gamma- correct inform ( see sect . 4.1.6 ) correct display color imag α-channel inform ( 16 bit ) use control transpar . instead progress display base row-interlac gif imag , displayprogress display pixel two-dimension interlac seven pass 8 ×8 block imag . support lossless lossi compress perform better gif . png wide support variou web browsersand imag softwar . 3.2.4 tiff tag imag file format ( tiff ) anoth popular imag ﬁle format . develop aldu corpor 1980 , later support microsoft compani , popular among graphic artist , photograph , publish industri . support attach addit inform ( refer “ tag ” ) provid great deal ﬂexibl . import tag format signiﬁ : type compress , etc. , use store imag . exampl , tiff store mani differ type imag : 1-bit , grayscal , 8-bit , 24-bit rgb , . tiff origin lossless format , ad tag allow opt jpeg , jbig , even jpeg 2000 compress . sinc tiff user-control jpeg , provid major advantag latter lossi compress . quit common use tiff ﬁle store uncompress data . tiff ﬁle divid section , store bitmap imag , vector- stroke-bas imag ( see postscript ) , type data . section ’ data type speciﬁ tag . 3.2.5 window bmp bitmap ( bmp ) , also known devic independ bitmap ( dib ) , major system standard imag ﬁle format microsoft window . use raster graphic . bmp support mani pixel format , includ index color ( 8 bit per pixel ) , and16 , 24 , 32-bit color imag . make use run-length encod ( rle ) com- pression ( see chap . 7 ) fairli efﬁcient compress 24-bit color imag due76 3 graphic imag data represent 24-bit rle algorithm . bmp imag also store uncompress . par- ticular , 16-bit 32-bit color imag ( α-channel inform ) alway uncompress . 3.2.6 window wmf window metafil ( wmf ) nativ vector ﬁle format microsoft window oper environ . wmf ﬁle actual consist collect graphic devic interfac ( gdi ) function call , also nativ window environ . wmf ﬁle “ play ” ( typic use window playmetafil ( ) function ) describ graphic render . wmf ﬁle ostens device-independ unlimit size . later enhanc metaﬁl format plu extens ( emf+ ) format devic independ . 3.2.7 netpbm format ppm ( portabl pixmap ) , pgm ( portabl graymap ) , pbm ( portabl bitmap ) belong famili open-sourc netpbm format . format mostli com-mon linux/unix environ . sometim also collect known pnm pam ( portabl anymap ) . either ascii ﬁle raw binari ﬁle ascii header imag . simpl , alway beus cross-platform applic . wide support variou softwar , e.g. , gimp linux mac os , work window well . 3.2.8 exif exchang imag file ( exif ) imag format digit camera . enabl record imag metadata ( exposur , light source/ﬂash , white balanc , type ofscen , etc . ) standard imag exchang . varieti tag ( mani tiff ) avail facilit higher-qu print , sinc inform camera picture-tak condit store use , e.g. , printer forposs color-correct algorithm . exif format incorpor jpeg softwar digit camera . also includ speciﬁc ﬁle format audio accompani digit imag . 3.2.9 heif high efﬁcienc imag file ( heif ) still-imag version hevc ( h. 265 ) video format . adopt appl replac jpeg idevices.heif said contain wrap still imag compress hevc codec . contain ﬂexibl : use store imag sequenc , depth3.2 popular file format 77 inform , thumbnail imag , audio , etc . heif efﬁcient jpeg , i.e. , imag size reduc half almost impercept chang imag qualiti . heif support 14-bit color depth , higher color depth injpeg ( usual 8-bit , 12-bit ) . gif , heif also support transpar . 3.2.10 ps pdf postscript import languag typeset , mani high-end printer havea postscript interpret built . postscript vector-bas , rather pixel- base , pictur languag : page element essenti deﬁn term vector . font deﬁn way , postscript includ vector/structur graphic well text ; bit-map imag also includ output ﬁle . encapsul postscript ﬁle add inform includ postscript ﬁle anoth document . sever popular graphic program , adob illustr , use postscript . note , howev , postscript page descript languag provid com- pression ; fact , postscript ﬁle store ascii . therefor ﬁle oftenlarg , academ set , common ﬁle made avail compress unix util , compress orgzip . therefor , anoth text + ﬁgure languag larg supersed postscript nonacadem set : adob system inc. includ lzw ( see chap . 7 ) compress portabl document format ( pdf ) ﬁle format . consequ , pdf ﬁle includ imag compress ratio , 2:1 3:1 , asdo ﬁle compress lzw-base compress tool , unix compress orgzip , pc-base winzip ( varieti pkzip ) winrar . ﬁle contain imag , pdf may achiev higher compress ratio usingsepar jpeg compress imag content ( depend tool use creat origin compress version ) . use featur adob acrobat pdf reader conﬁgur read document structur link element , clickabl content handi summari tree-structur link diagram provid . interest comput scienc engin student know name postscript aros languag base stack data structur , postﬁx notat , oper follow operand . stroke-bas graphic featur postscript mean diagram appear crisp line outputdevic , importantli , zoom level ( said , low-resolut printer still produc low-resolut output ) . idea postscript engin output devic ( say , screen ) render stroke command neatli possibl . forexampl , execut command 100 200 moveto , postscript interpret push xand yposit onto stack ; follow 250 75 lineto stroke get line next point.78 3 graphic imag data represent fig . 3.18 a50 input imag ptm : light individu 50 differ direct ei , i=1 ... 50 ; binterpol imag new light e 3.2.11 ptm ptm ( polynomi textur map ) techniqu store represent camera scene contain inform set imag taken set light spectrum , place differ directionfrom scene [ 7 ] . suppos acquir nimag scene , taken ﬁxed-posit camera light i=1 ... ndiffer light direct e i= ( ui , vi , wi ) t. exampl , hemispher light frame could use , say , 40 50 light , one vertex geodes dome . object ptm part ﬁnd surfac properti object imaged—thi use imagingmuseum artifact paint , instanc . main task ptm abl interpol light direct , gener new imag seen . ﬁle size ptm imag collect kept small pack multipleinterpol coefﬁcient integ data . figur 3.18 show typic set input imag look like , set 50 input imag . 2figur 3.18 b show interpol imag , light direct input set [ 8 ] : light come θ=42.6◦ , φ=− 175.4◦ , θ polar angl camera object φi angl x , yplane perpendicular axi . ptm proce assum polynomi model gener lumin l=r+g+b ( orr , g , bsepar ) form regress coefﬁcient set light-direct eito i=1 ... nvalu li [ 7 ] . addit level use radial basi function ( rbf ) interpol use interpol non-smooth phenomena shadow specular [ 8 ] . 2dataset courtesi tom malzbend , hewlett-packard.3.3 exercis 79 3.3 exercis 1 . brieﬂi explain need abl less 24-bit color make problem . gener , need adapt transform 24-bit color valu 8-bit one ? 2 . suppos decid quantiz 8-bit grayscal imag 2 bit accuraci . simplest way ? rang byte valu origin imag map quantiz valu ? 3 . suppos 5-bit grayscal imag . size ordered-dith matrix need display imag 1-bit printer ? 4 . suppos avail 24 bit per pixel color imag . howev , notic human sensit r g b—in fact , 1.5 time sensit r g b . could best make use bit avail ? 5 . job , decid impress boss use disk space compani ’ grayscal imag . instead use 8 bit per pixel , ’ like use 48 bit per pixel rgb . could store origin grayscal imag new format would appear use , visual ? 6 . suppos 8-bit grayscal imag appear fig . 3.19 ; i.e. , linear shade goe 0 255 left right , illustr fig . 3.19 b . imag 100 row 100 column . signiﬁc bitplan , pleas draw imag show 1 ’ 0 ’ . mani 1 ’ ? . next-most signiﬁc bitplan , pleas draw imag show 1 ’ 0 ’ . mani 1 ’ ? ( ) 050100150200250 column rowsintens ( b ) fig . 3.19 agrayscal imag 0 .. 255 ; bvisual ramp80 3 graphic imag data represent 7 . color lut problem , tri median-cut algorithm sampl imag . explain brieﬂi algorithm , carri imag red appl , put color gradat result 24-bit color imag need , among red . 8 . regard non-ord dither , standard graphic text [ 2 ] state , “ even larger pattern use , spatial versu intens resolut trade-off limit visual acuiti ( one minut arc normal light ) . ” ( ) sentenc mean ? ( b ) hold piec paper distanc 1 foot , approxim linear distanc dot ? ( inform : one minut arc 1/60 one degre angl . arc length circl equal angl ( radian ) time radiu . ) could see gap dot 300 dpi printer ? 9 . write algorithm ( pseudocod ) calcul color histogram rgb data . 10 . ( ) describ detail use singl imag sever color lookup tabl realiz simpl animation—a rotat color wheel , sequenc 4 snapshot appear repetit . wheel rotat θ=90◦ clockwis time ; ﬁrst three snapshot shown . c—cyan , m—magenta , —yellow , r—red . c ry c r ( ) ( b ) ( c ) cr ( b ) similarli , realiz sequenc 8 snapshot wheel rotat θ=45◦clockwis time , ﬁrst three snapshot ? c r ( ) ( b ) ( c ) c rym c ry m3.3 exercis 81 ( c ) appar , trivial make smoother anim rotat color wheel simpli decreas valu rotat angl θeach time . pixel singl imag limit 8 bit , maximumnumb snapshot produc anim similar case ( b ) ? ? refer 1 . j. miano , compress imag file format : jpeg , png , gif , xbm , bmp ( addison wesley profession , 1999 ) 2 . j.f . hugh , a. van dam , m. mcguir , d.f . sklar , j.d . foley , s.k . feiner , k. akeley , comput graphic : principl practic , 3rd edn . c ( addison-wesley , 2013 ) 3 . m. sonka , v . hlavac , r. boyl , imag process , analysi , machin vision , 4th edn . ( pw publish , 2014 ) 4 . l.g . shapiro , g.c . stockman , comput vision ( prentice-hal , 2001 ) 5 . p . heckbert , color imag quantiz frame buffer display . siggraph proc . 16 , 297–307 ( 1982 ) 6 . w.b . pennebak , j.l . mitchel , jpeg still imag data compress standard ( v nos- trand reinhold , new ork , 1992 ) 7 . t. malzbend , d. gelb , h. wolter . polynomi textur map , comput graphic , sig- graph 2001 proceed ( 2001 ) , pp . 519–528 8 . m. . drew , . hel-or , t. malzbend , n. hajari , robust estim surfac properti interpol shadow/specular compon . imag vi . comput . 30 ( 4–5 ) , 317–331 ( 2012 ) 4color imag video color imag video ubiquit web multimedia product . increasingli , becom awar discrep color seen peopl sometim differ color display screen . latest version html standard attempt address issu specifyingcolor term standard , “ srgb , ” arriv color scientist . becom awar simpl , yet strang involv world color , chapter , shall consid follow topic : •color scienc , •color model imag , •color model video . 4.1 color scienc 4.1.1 light spectra recal high school light electromagnet wave , color character wavelength wave . laser light consist singl wavelength , e.g. , rubi laser produc bright , scarlet red beam . tomak plot light intens versu wavelength , would see spike appropri red wavelength , contribut light . contrast , light sourc produc contribut mani wavelength . howev , human detect light , contribut fall “ visibl wavelengths. ” short wavelength produc blue sensat long wavelength produc red one . measur visibl light use devic call spectrophotomet , reﬂect light diffract grate ( rule surfac ) spread differ wave-length much prism . figur 4.1show phenomenon white light © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_48384 4 color imag video fig . 4.1 sir isaac newton ’ experi . permiss warden fellow , new colleg , oxford fig . 4.2 spectral power distribut daylight contain color rainbow . ever look toy prism , notic rainbow effect generated—th effect due natur phenomenon call dispers . see similar effect surfac soapbubbl . visibl light electromagnet wave rang 400–700 nm ( nm stand nanomet , 10 −9m ) . figur 4.2show rel power wavelength interv typic outdoor light sunni day . type curv call spectral power distribut ( spd ) spectrum . show rel amount light energi ( electromagnet signal ) wavelength . symbol forwavelength λ ( lambda ) type curv might call e ( λ ) . practic , measur use effect sum voltag small wavelength rang , say 5 10 nm , plot usual consist segment join function valueseveri 10 nm . mean , also , proﬁl actual store vector ; howev , show equat treat e ( λ ) continu function—in realiti , integr calcul use sum element vectors.4.1 color scienc 85 4.1.2 human vision eye work like camera , len focus imag onto retina ( upside- left-right revers ) . retina consist array rod three kind ofcon . receptor call shape like cone rod , respect . rod come play light level low producea imag shade gray ( “ cat gray night ! ” ) . higher light level , cone produc signal . differ pigment , three kind cone sensit red ( r ) , green ( g ) , blue ( b ) light . higher light level result neuron ﬁring ; issu happen brain pipelin subject much debat . howev , seem like brain make use differ r −g , g−b , b−r , well combin r , g , binto high-light-level achromat channel ( thu say brain good algebra ) . 4.1.3 spectral sensit eye eye sensit light middl visibl spectrum . like spdproﬁl light sourc , fig . 4.2 , receptor show rel sensit function wavelength . blue receptor sensit shown scale , fact , much smaller curv red green—blu late addit , evolut ( , statist , favorit color human , regardlessof nationality—perhap reason , blue bit surpris ! ) . figur 4.3show overal sensit dash line . dash curv fig . 4.3i import call luminous-efﬁci function . usual denot v ( λ ) form sum respons curv red , green , blue [ 1,2 ] . rod sensit broad rang wavelength , produc signal gener percept black–whit scale . rod sensit curv look like luminous-efﬁci function v ( λ ) shift somewhat red end spectrum [ 1 ] . eye 6 million cone , proport r , g , bcone differ . like present ratio 40:20:1 ( see [ 3 ] complet explan ) . achromat channel produc cone thu somethinglik 2 r+g+b/20 . spectral sensit function usual denot letter “ r , g , b , ” let us denot vector function q ( λ ) , compon q ( λ ) = ( q r ( λ ) , qg ( λ ) , qb ( λ ) ) ( 4.1 ) , three sensor ( vector index k=1 .. 3 therefor appli ) , function wavelength . respons color channel eye proport number neuron ﬁring . red channel , light fall anywher nonzero part red cone function fig . 4.3will gener respons . total response86 4 color imag video fig . 4.3 r , g , b cone , luminous-efﬁci curv v ( λ ) wavelength ( nm ) rel respons 400 450 500 550 600 650 7000.0 0.2 0.4 0.6 0.8 1.0rgv b red channel sum light fall retina red cone sensit , weight sensit wavelength . think sensit continu function , succinctli write idea form integr : r=/integraltext e ( λ ) qr ( λ ) dλ g=/integraltext e ( λ ) qg ( λ ) dλ b=/integraltext e ( λ ) qb ( λ ) dλ ( 4.2 ) sinc signal transmit consist three number , color form three- dimension vector space . 4.1.4 imag format equat 4.2actual appli view self-lumin object ( i.e. , light ) . situat , actual imag light reﬂect surfac . surfac reﬂect differ amount light differ wavelength , dark surfac reﬂect less energi light surfac . figur 4.4show surfac spectral reﬂect ( 1 ) orang sneaker ( 2 ) fade bluejean [ 4 ] . reﬂect function denot ( λ ) . imag format situat thu follow : light illumin spd e ( λ ) imping surfac , surfac spectral reﬂect function ( λ ) , reﬂect , ﬁltere eye ’ cone function q ( λ ) . basic arrang shown fig . 4.5 . function c ( λ ) call color signal consist product illumin e ( λ ) time reﬂect ( λ ) : c ( λ ) =e ( λ ) ( λ ) .4.1 color scienc 87 fig . 4.4 surfac spectral reﬂect function ( λ ) object wavelength ( nm ) surfac spectral reflect 400 450 500 550 600 650 7000.1 0.2 0.3 0.4 0.5 0.6jeanssneak fig . 4.5 imag format model se c sensor qr , g , b rg b ( λ ) ( λ ) ( λ ) ( λ ) equat similar eq . ( 4.2 ) , , take account imag format model r=/integraltext e ( λ ) ( λ ) qr ( λ ) dλ g=/integraltext e ( λ ) ( λ ) qg ( λ ) dλ b=/integraltext e ( λ ) ( λ ) qb ( λ ) dλ ( 4.3 ) 88 4 color imag video 4.1.5 camera system , human develop camera system similar fashion , good camera three signal produc pixel locat ( correspond retin posit ) . analog signal convert digit , truncat integ , store . precis use 8 bit , maximum valu r , g , bi 255 , minimum 0 . howev , light enter eye comput user emit screen—th screen essenti self-lumin sourc . therefor , needto know light e ( λ ) enter eye . 4.1.6 gamma correct modern display ( e.g. , lcd , led , ole , etc . ) attempt mimic older crt ( cathod ray tube ) display , sinc standard origin built display . thu , know characterist crt still import . rgb numbersin imag ﬁle convert back analog , drive electron gun cathod ray tube ( crt ) . electron emit proport drive voltag , would like crt system produc light linearli relat toth voltag . unfortun , turn case . light emit actual roughli proport voltag rais power ; power call “ gamma , ” symbol γ . thu , ﬁle valu red channel r , screen emit light proport tor γ , spd equal red phosphor paint screen target red channel electron gun . valu gamma around 2.2 . sinc mechan televis receiv old standard comput crt display , tv system , regardless actual display use , pre-correct situat actual appli invers transform gener tv voltag signal . customari append prime signal “ gamma-correct ” rais power ( 1/γ ) transmiss . thu , r→ r/prime=r1/γ⇒ ( r/prime ) γ→ r , ( 4.4 ) arriv “ linear signals. ” , camera store gamma-correct valu r/prime , exponenti γoccur display , imag look right . v oltag often normal maximum 1 , interest see effect gamma transform signal . figur 4.6a show light output gamma-correct appli . see darker valu display dark . also shown fig . 4.7a , display linear ramp left right . figur 4.6b show effect pre-correct signal appli power law r1/γ , customari normal voltag rang 0–1 . see appli ﬁrst correct fig . 4.6b , follow effect display ( ostens crt ) system , fig . 4.6a , would result linear signal . combined4.1 color scienc 89 gamma correct voltagelight 0.0 0.2 0.4 0.6 0.8 1.00.0 0.2 0.4 0.6 0.8 1.0 ( ) gamma correct voltagelight 0.0 0.2 0.4 0.6 0.8 1.00.0 0.2 0.4 0.6 0.8 1.0 ( b ) fig . 4.6 aeffect put standard crt ( mimick actual modern display ) light emit screen ( voltag normal rang 0–1 ) . bgamma correct signal fig . 4.7 adisplay ramp 0 255 , gamma correct . bimag gamma correct appli effect shown fig . 4.7b . , ramp shown 16 step gray level 0 gray level 255 . care deﬁnit gamma recogn simpl power law would result inﬁnit deriv zero voltage—and made construct circuit accomplish gamma correct difﬁcult devis analog . practic , gener transform , r→r/prime=a×r1/γ+b , use , along special care origin : vout=/braceleftbigg4.5×vin vin < 0.018 1.099× ( v0.45 in−0.099 ) , vin≥0.018 ( 4.5 ) 90 4 color imag video call camera transfer function , law recommend societi motion pictur televis engin ( smpte ) standard smpte– 170m . gamma 2.2 ? fact , valu notproduc ﬁnal power law 1.0 . histori number buri decis ntsc ( nation televis system committe u.s.a. ) tv invent . actual power law forcolor receiv may actual closer 2.8 . howev , compens 2.2 power law , arriv overal valu 1.25 instead 1.0 . idea view condit dim surround , overallgamma produc pleas imag albeit color errors—dark color made even darker , also eye–brain system chang rel contrast light dark color [ 5 ] . advent comput system , ostens built ( least standard ) crt , situat becom even interest : camera may maynot insert gamma correct ; softwar may write imag ﬁle use gamma ; softwar may decod expect ( ) gamma ; imag store frame buffer ; common provid lookup tabl gamma framebuff . , gener imag use comput graphic , gamma appli , gamma still necessari pre-compens display . make sens , , deﬁn overal “ system ” gamma take account transform . unfortun , one must often simpli guess actual overal gamma may . adob photoshop allow one tri differ gamma valu . www publish , import know macintosh gamma cor-rect graphic card gamma 1.8 , sgi machin expect gamma 1.7 , pc extra gamma correct like display gamma 2.5 . therefor , common machin , might make sens togamma-correct imag averag macintosh pc valu , 2.1 . howev , practition might use valu 2.4 , adopt srgb group—a standard model typic light level monitor condit includ deﬁnit new “ standard ” rgb www applic includ futur html standard call srgb : ( less ) “ devic independentcolor space internet. ” issu relat gamma correct decis intens level repres bit pattern pixel valu ﬁle . eye mostsensit ratio intens level , rather absolut intens : mean brighter light , greater must chang light level order chang perceiv . precis control bit repres intens , would make sens code intens logarithm maximum usag bit avail , includ code invers ( 1/γ ) power law transform , eq . ( 4.4 ) , perhap lookup tabl implement invers function ( see [ 6 ] , p. 564 ) . howev , like imag video encount nonlinear encod bit level , inde produc camcord broadcast tv . imag gamma-correct accord eq . ( 4.4 ) . cie-sponsor cielab perceptu based4.1 color scienc 91 color differ metric ( see page 100 ) provid care algorithm includ nonlinear aspect human bright percept . 4.1.7 color-match function practic speak , mani color applic involv specifi recreat particular desir color . exampl , suppos one wish duplic particular shade screen , particular shade dy cloth . mani year , even eye-sensit curv fig . 4.3were known , techniqu evolv psycholog match combin basic r , g , blight given shade . particular set three basic light avail : call set color primari . match given shade , set observ ask separ adjust bright three primari use set control result spot light close match desir color . basic situat shown fig . 4.8 . devic carri experi call colorimet . intern standard bodi color , cie ( commiss international de l ’ eclairag ) pool data 1931 , set curv call color-match function . use color primari peak 440 , 545 , 580 nm . suppos instead swatch cloth one interest match given wavelength laser light ( i.e. , monochromat light ) . color-match experi summar statement proport color primari need individu narrowband wavelength light . gener light match linear combin singl wavelength result . red green blue white screenblackpartit light matchedroom illumin eye fig . 4.8 colorimet experiment92 4 color imag video 400 450 500 550 600 650 700−0.4−0.200.20.40.60.811.2 wavelength ( nm ) rel sensit fig . 4.9 cie color-match function ¯r ( λ ) , ¯g ( λ ) , ¯b ( λ ) figur 4.9show cie color-match curv , denot ¯r ( λ ) , ¯g ( λ ) , and¯b ( λ ) . fact , curv linear matrix multipl away eye sensit fig . 4.3 . part curv neg ? indic color reproduc linear combin primari . color , one primari light shift one side black partit fig . 4.8 other—then illumin sampl match instead white screen . thu , sens , color match neg light . 4.1.8 cie chromat diagram time long past , engin found upset one cie color-match curv fig . 4.9ha neg lobe . therefor , set ﬁctitiou primari devis lead color-match function posit valu . result curv shown fig . 4.10 ; usual refer thecolor-match function . result linear ( 3 ×3 matrix ) transform ¯r , ¯g , ¯bcurv , denot ¯x ( λ ) , ¯y ( λ ) , ¯z ( λ ) . matrix chosen middl standard color- match function ¯y ( λ ) exactli equal luminous-efﬁci curv v ( λ ) shown fig . 4.3 . gener spd , e ( λ ) , essenti “ colorimetr ” inform requir character color set tristimulu valu x , , zdeﬁn analog eq.4.2as4.1 color scienc 93 400 450 500 550 600 650 70000.20.40.60.81 wavelength ( nm ) rel sensit fig . 4.10 cie standard color-match function ¯x ( λ ) , ¯y ( λ ) , ¯z ( λ ) x=/integraltext e ( λ ) ¯x ( λ ) dλ y=/integraltext e ( λ ) ¯y ( λ ) dλ z=/integraltext e ( λ ) ¯z ( λ ) dλ ( 4.6 ) middl valu , , call lumin . color inform transform tie special valu . incorpor substanti inform human visual system . howev , 3d data difﬁcult visual , consequ cie devis 2d diagram base valu ( x , , z ) tripl impli curv fig . 4.10 ; wavelength visibl , valu x , , z given three curv valu form limit human see . howev , eq . ( 4.6 ) , observ increas bright illumin ( turn light bulb ) increas tristimulu valu scalar multipl . therefor , make sens devis 2d diagram somehow factor magnitud vector ( x , , z ) . cie system , accomplish divid sum x+y+z : x=x/ ( x+y+z ) y=y/ ( x+y+z ) z=z/ ( x+y+z ) ( 4.7 ) effect mean one valu set ( x , , z ) redund , sinc x+y+z=x+y+z x+y+z≡1 ( 4.8 ) 94 4 color imag video fig . 4.11 cie chromat diagram xy 0.0 0.2 0.4 0.6 0.8 1.00.0 0.2 0.4 0.6 0.8 1.0 400700 z=1−x−i . ( 4.9 ) valu x , yare call chromat . effect , project tristimulu vector ( x , , z ) onto plane connect point ( 1,0,0 ) , ( 0,1,0 ) , ( 0,0,1 ) . usual , plane view project onto z=0 plane , set point insid triangl vertic ( x , ) valu ( 0,0 ) , ( 1,0 ) , ( 0,1 ) . figur 4.11 show locu point monochromat light , drawn cie “ chromat diagram. ” straight line along bottom “ horsesho ” join point extrem visibl spectrum , 400 nm 700 nm ( blue green red ) . straight line call “ line purples. ” horsesho call “ spectrum locu ” show ( x , ) chromat valu monochromat light visibl wavelength . color-match curv devis add valu ( area curv ¯x ( λ ) , ¯y ( λ ) , ¯z ( λ ) ) . therefor , white illumin spd valu equal 1—an “ equi-energi white light ” — chromat valu ( 1/3,1/3 ) . figur 4.11 display white point middl diagram . final , sinc must x , y≤1 x+y≤1 , possibl chromat valu must necessarili lie dash diagon line fig . 4.11 . note one may choos differ “ white ” spectra standard illumin . cie deﬁn sever , illumin , illumin c , standard daylight d65 d100 . display somewhat differ white spot cie diagram : d65 chromat equal ( 0.312713 ,0.329016 ) illumin c chromat ( 0.310063 ,0.316158 ) . figur 4.12 display spd4.1 color scienc 95 wavelength ( nm ) 400 450 500 550 600 650 700a d65c f2d100spectral power distribut fig . 4.12 standard illumin spd curv standard light . illumin characterist incandesc light , spd typic tungsten bulb , quit red . illumin c earli attempt character daylight , d65 d100 , respect , mid-rang bluish commonli use daylight . figur 4.12 also show much spiki spd standard ﬂuoresc illumin , call f2 [ 2 ] . color chromat spectrum locu repres “ pure ” color . “ satur ” : think paper becom satur ink . contrast , color close white point unsatur . chromat diagram nice properti , mixtur two light , result chromat lie straight line join chromat two light . , slightli cagey say case color , gener , “ lights. ” reason far adher anaddit model color mix . model hold good light , , special case , monitor color . howev , shall see , hold printer color ( see p. 106 ) . chromat cie diagram , “ domin wavelength ” posi- tion spectrum locu intersect line join white point given color , extend . ( color give intersect line purpl , complement domin wavelength deﬁn extend line back- ward white point . ) anoth use deﬁnit set complementari color given color , given color line white spot . final , “ excit puriti ” ratio distanc white spot given color domin wavelength , express percentage.96 4 color imag video 4.1.9 color monitor speciﬁc color monitor speciﬁ part white point chromat desir rgb electron gun ostens crt display activ highest power . actual , like use gamma-correct valu r/prime , g/prime , b/prime , suppli camera . normal voltag rang 0 1 , wishto specifi monitor display desir white point r /prime=g/prime=b/prime=1 ( abbrevi transform ﬁle valu voltag simpli state pixel color valu , normal maximum 1 ) . howev , phosphoresc paint use insid crt monitor screen , fact , chromat , ﬁrst glanc would appear one could independ control monitor white point . howev , remedi set gain control electron gun maximum voltag desir white appear . sever monitor speciﬁc current use . monitor speciﬁc standard still use consist ﬁxed chromat monitor phosphor speciﬁ manufactur , along standard whitepoint need . tabl 4.1show valu three common speciﬁc state- ment . ntsc standard north american japanes speciﬁc ; smpte modern version , wherein standard illumin chang fromillumin c illumin d65 phosphor chromat line later machin . digit video speciﬁc use similar speciﬁc north america . ebu system deriv european broadcast union isus pal secam video system . 4.1.10 out-of-gamut color moment , let ’ worri gamma correct . realli basic prob-lem display color gener device-independ color , agreement taken speciﬁ ( x , ) chromat valu , use device-depend color valu rgb . ( x , ) pair , wish ﬁnd rgb tripl give speciﬁ ( x , , z ) ; therefor , form zvalu phosphor , via z=1−x−yand solv rgb manufacturer-speciﬁ chromat . sinc , green blue valu ( i.e. , ﬁle valu zero ) would simpli see red-phosphor chromatic- , similarli gand b , combin nonzero valu r , g , bvia tabl 4.1 chromat white point monitor speciﬁc system red green blue white point xr yr xg yg xb yb xw yw ntsc 0.67 0.33 0.21 0.71 0.14 0.08 0.3101 0.3162 smpte 0.630 0.340 0.310 0.595 0.155 0.070 0.3127 0.3290 ebu 0.64 0.33 0.29 0.60 0.15 0.06 0.3127 0.32904.1 color scienc 97 ⎡ ⎣xrxgxb yrygyb zrzgzb⎤ ⎦⎡ ⎣r g b⎤ ⎦=⎡ ⎣x z⎤ ⎦ ( 4.10 ) ( x , ) isspeciﬁ instead deriv , invert matrix phosphor ( x , , z ) valu obtain correct rgb valu use order obtain desir chromat . rgb number neg ? problem case , human abl perceiv color , represent devic use . say case color “ gamut , ” sinc setof possibl display color constitut gamut devic . one method use deal situat simpli use closest in-gamut color avail . anoth common approach select closest comple-mentari color . crt monitor , everi display color within triangl ; follow so-cal “ grassman ’ law , ” describ human vision—grassman ’ law state “ color match linear , ” mean linear combin light made three primari linear set weight use make combinationtim primari . , compos color linear combin three “ light ” avail three phosphor , creat color convex set deriv lights—in case , triangl . ( ’ see belowthat printer convex longer hold . ) figur 4.13 show triangular gamut ntsc system , drawn cie diagram . suppos small triangl repres given , desir color . thenth in-gamut point boundari ntsc monitor gamut taken intersect line ( label ( ) ﬁgure ) connect desir color white point nearest line ( label ( b ) ﬁgure ) form boundari ofth gamut triangl . 4.1.11 white point correct one deﬁcienc done far realiti need abl map tristimulu valu xyz devic rgb ’ , deal chromat xyz . differ xyz valu includ magnitud color . well , need abl alter matter r , g , bare maximum valu obtain white point . far , tabl 4.1would produc incorrect valu . exampl , consid smpte speciﬁc . set r=g=b=1 result valu xthat equal sum xvalu , 0 .630+0.310+0.155 , 1.095 . similarli , andzvalu come 1.005 0.9 . , divid ( x+y+z ) result chromat ( 0.365,0.335 ) , rather desir valu ( 0.3127,0.3290 ) .98 4 color imag video fig . 4.13 approxim out-of-gamut color in-gamut one . out-of-gamut color shown triangl approxim intersect line color white point boundari bof h ed e v c ec l rg u xy 0.0 0.2 0.4 0.6 0.8 1.00.0 0.2 0.4 0.6 0.8 1.0redgreen blue ( ) ( b ) method use correct deﬁcienc ﬁrst take white point mag- nitud ya uniti : ( white point ) =1 . ( 4.11 ) need ﬁnd set three correct factor gain three electron gun multipli valu get exactli white point xyz valu r=g=b=1 . suppos matrix phosphor chromat xr , xg , ... , etc . eq . ( 4.10 ) call m. express correct diagon matrix d=diag ( d1 , d2 , d3 ) xyz white ≡md ( 1,1,1 ) ( 4.12 ) ( ) tmean transpos . smpte speciﬁc , ( x , , z ) = ( 0.3127,0.3290,0.3582 ) divid middl valu , xyz white = ( 0.95045 ,1,1.08892 ) . note multipli dbi ( 1,1,1 ) tjust give ( d1 , d2 , d3 ) tand end equat specifi ( d1 , d2 , d3 ) : ⎡ ⎣x z⎤ ⎦ white=⎡ ⎣0.630 0 .310 0 .155 0.340 0 .595 0 .070 0.03 0 .095 0 .775⎤ ⎦⎡ ⎣d1 d2 d3⎤ ⎦ ( 4.13 ) invert , new valu xyz white speciﬁ , arriv ( d1 , d2 , d3 ) = ( 0.6247,1.1783,1.2364 ) . ( 4.14 ) 4.1 color scienc 99 4.1.12 xyz rgb transform 3 ×3 transform matrix xyz rgb taken t=md ( 4.15 ) even point white point : ⎡ ⎣x z⎤ ⎦=t⎡ ⎣r g b⎤ ⎦ . ( 4.16 ) smpte speciﬁc , arriv t=⎡ ⎣0.3935 0 .3653 0 .1916 0.2124 0 .7011 0 .0866 0.0187 0 .1119 0 .9582⎤ ⎦ . ( 4.17 ) written , read x=0.3935·r+0.3653·g+0.1916·b y=0.2124·r+0.7011·g+0.0866·b z=0.0187·r+0.1119·g+0.9582·b ( 4.18 ) 4.1.13 transform gamma correct calcul assum deal linear signal . howev , like instead linear r , g , bwe actual nonlinear , gamma- correct r/prime , g/prime , b/primecamera valu . best way carri xyz torgb transform calcul linear rgb requir , invert eq . ( 4.16 ) , creat nonlinear signal via gamma correct . nevertheless , usual done state . instead , equat valu use , appli nonlinear signal . impli much error , fact , color near white point . concess accuraci give new name y/primeto new yvalu creat r/prime , g/prime , b/prime . signiﬁc y/prime code descriptor bright pixel question.1 use set transform equat origin ntsc system , base upon illumin c white point , even though outdat . follow 1in color faq ﬁle [ 7 ] , new valu y/primei call “ luma. ” 100 4 color imag video procedur outlin , valu top row tabl 4.1 , w e arriv follow transform : x=0.607·r+0.174·g+0.200·b y=0.299·r+0.587·g+0.114·b z=0.000·r+0.066·g+1.116·b ( 4.19 ) thu , code nonlinear signal begin encod nonlinear signal correl lumin : y/prime=0.299·r/prime+0.587·g/prime+0.114·b/prim ( 4.20 ) ( see sect . 4.3for discuss encod nonlinear signal . ) 4.1.14 l * * b * ( cielab ) color model discuss best make use bit avail us ( see p. 65 ) touch issu well human vision see chang light level . subject actual exampl weber ’ law , psycholog : quantiti , chang must perceiv differ . exampl , ’ rel easi tell differ weight pick 4-year-oldsist 5-year-old brother ( asid attribut ) . howev , difﬁcult tell differ weight two heavi object . anoth exampl see chang bright light differ must much largerthan see chang dim light . rule thumb phenomenon state equal perceiv chang must relative—chang equal perceiv ratio chang , whether dark bright light , etc . somethought use idea lead one logarithm approxim perceptu equal space unit . human vision , howev , cie arriv somewhat involv version kind rule , call cielab space . quantiﬁ space , , differ perceiv color bright . make sens , fact , sinc , practic speak , color differ use comparisonof sourc target color , : one would interest , e.g. , whether particular batch dy cloth color origin swatch . figur 4.14 show cutaway 3d solid coordin space associ color differ metric . cielab ( also known l ∗a∗b∗ ) use power law 1 /3 instead logarithm . use three valu correspond roughli ( ) lumin ; plu ( b ) pair combin make color hue . color differ , two color color space , simpli deﬁn euclidean distanc : /delta1e=/radicalbig ( l∗ 1−l∗ 2 ) 2+ ( a∗ 1−a∗ 2 ) 2+ ( b∗ 1−b∗ 2 ) 2 ( 4.21 ) 4.1 color scienc 101 fig . 4.14 cielab model l∗=116/parenleftbiggi yn/parenrightbigg ( 1/3 ) −16 a∗=500/bracketleftbigg/parenleftbiggx xn/parenrightbigg ( 1/3 ) −/parenleftbiggi yn/parenrightbigg ( 1/3 ) /bracketrightbigg b∗=200/bracketleftbigg/parenleftbiggi yn/parenrightbigg ( 1/3 ) −/parenleftbiggz zn/parenrightbigg ( 1/3 ) /bracketrightbigg ( 4.22 ) xn , yn , znbe xyz valu white point . auxiliari deﬁnit chroma =c∗=/radicalbig ( a∗ ) 2+ ( b∗ ) 2 hue angl =h∗=arctanb∗ a∗ ( 4.23 ) roughli , maximum minimum valu a∗correspond red green , b∗rang yellow blue . chroma scale color , color ( satur ) color occupi outsid cielab solid l∗bright level , washed-out ( desatur ) color nearer central achromat axi . hue angl express less peopl mean “ color , ” i.e. , would one describ color red , orang , etc . develop color differ model activ ﬁeld research , plethora human-perception-bas formula ( com- petitor vintag cielab call cieluv—both devis in102 4 color imag video 1976 ) . interest gener partli color metric impact one model differ light view across devic and/or network boundari [ 8 ] . cielab model use sever high-end product , includ adob photoshop . 4.1.15 color coordin scheme sever coordin scheme use describ color human per-ceiv , confus ﬁeld whether gamma correct appli . describ device-independ color—bas xyz correl human see . howev , gener user make free use ofrgb orr /prime , g/prime , b/prime . scheme includ : cmi ( describ p. 105 ) ; hsl—hue , satu- ration , light ; hsv—hue , satur , valu ; hsi—and intens ; hci– c=chroma ; hvc—v=valu ; hsd—d=dark : beat goe ! 4.1.16 munsel color name system accur name color also import consider . one time-test stan- dard system devis munsel earli 1900 revis mani time ( last one call munsel renot ) [ 9 ] . idea set ( yet anoth ) approxim perceptu uniform system three axe discuss specifi color . axe valu ( black-whit ) , hue , chroma . valu divid 9 step , hue 40 step around circl , chroma ( satur ) maximum 16 level , circl radiu vari valu . main idea fairli invari speciﬁc color user , includ artist , munsel corpor therefor sell book patch paint made proprietari paint formula ( book quit expens ! ) . assert often use uniform scale . 4.2 color model imag seen introduct color scienc introduct ofth problem crop respect color imag display . arecolor model coordin system realli use store , display , print imag ? 4.2.1 rgb color model display accord sect . 4.3 , usual store color inform directli rgb form . howev , note sect . 4.1that coordin system fact devic dependent.4.2 color model imag 103 expect abl use 8 bit per color channel color accur enough . howev , fact , use 12 bit per channel avoid alias effect dark imag areas—contour band result gamma correct sincegamma correct result mani fewer avail integ level ( see exercis 9 . ) imag produc comput graphic , store integ proport intens frame buffer ; , gamma correct lutbetween frame buffer display . gamma correct appli ﬂoat quantiz integ , storag frame buffer , , fact , use 8 bit per channel still avoid contour artifact . 4.2.2 multi-sensor camera accur color achiev use camera three sensor , i.e. , three color ﬁlter . one way use rotat ﬁlter , place differ color ﬁlter light path quick seri shot . work captur artwork museum modern art new york citi , asix-channel camera [ 10 ] use accur captur imag import artwork , imag closer full spectrum ; work use alter color ﬁlter checkerboard array , set , built camera ( “ art spectralimag ” ) . part work direct also includ remov near-infrar ﬁlter typic place camera , extend camera ’ sensit infrar [ 11 ] . 4.2.3 camera-depend color valu r , g , b pixel depend camera sensor use imag scene . look two camera-depend color space commonli use : hsv srgb . first , recal sect . 4.1.14 cielab , deﬁn color coordin meant camera independ , i.e. , human-percept orient . , pro- pose set axe l∗ , a∗ ( redness-green ) , b∗ ( yellowness-blu ) associ human visual system percept light l∗ ; hue h∗ , mean magnitude- independ notion color ; chroma c∗ , mean puriti ( vivid ) color . hsv along direct , order tie perceptu concept camera-depend color , hsv color system tri gener similar quantiti . mani commonli use variant , hsv far common . h standsfor hue ; stand “ satur ” color , deﬁn chroma divid luminance—th desatur color closer gray ; v stands104 4 color imag video “ valu , ” mean correl bright perceiv human . hsv color model commonli use imag process edit softwar . rgb data convert hsv color space follow : assum r , g , b 0 .. 255 , m=max { r , g , b } ( 4.24 ) m=min { r , g , b } v=m s=/braceleftbigg0 fv=0/parenleftbig v−m/parenrightbig /v v > 0 h=⎧ ⎪⎪⎪⎪⎪⎪⎨ ⎪⎪⎪⎪⎪⎪⎩0i f s=0 60 ( g−b ) / ( m−m ) ( m=rand g≥b ) 60 ( g−b ) / ( m−m ) +360 ( m=rand g < b ) 60 ( b−r ) / ( m−m ) +120 m=g 60 ( r−g ) / ( m−m ) +240 m=b mandmdenot maximum minimum ( r , g , b ) triplet . srgb balanc human color percept device-depend color , srgb color space devis tie color space particular refer display devic . srgb gener adopt refer color space web , sens unless otherwis state color space encoded/transmittedvalu assum srgb . origin , srgb propos hewlett-packard microsoft , later standard intern electrotechn commiss ( iec ) [ 12 ] . srgb presuppos certain standard view condit , typic use comput mon- itor ( detail may found [ 13,14 ] ) . well , speciﬁ transform go standard gamma-correct imag one linear light intens , follow ( color channel iin ( r , g , b ) normal rang [ 0,1 ] ) ) : i=r , g , b , appli function ⎧ ⎨ ⎩i=i /prime/12.92 , ifi/prim < 0.04045 ; i= ( ( i/prime+0.055 ) /1.055 ) 2.4otherwis ( 4.25 ) take account whole curv shape , approxim γvalu 2.2 . well , srgb standard speciﬁ colorimetr transform go linear srgb valu human-cent ciexyz tristimulu color space valu : ⎛ ⎝x z⎞ ⎠=⎛ ⎝0.4124 0 .3576 0 .1805 0.2126 0 .7152 0 .0722 0.0193 0 .1192 0 .9505⎞ ⎠⎛ ⎝r g b⎞ ⎠ ( 4.26 ) 4.2 color model imag 105 deﬁnit , white ( r , g , b ) = ( 1,1,1 ) xyz tripl becom standard light d65 ( divid 100 ) : ( x , , z ) = ( 0.9505,1.0000,1.0890 ) . 4.2.4 subtract color : cmi color model far , effect deal addit color . name , two light beam imping target , say two color projector send light white screen , color add . theoret crt , still display upon standard built , two phosphor crt screen turn , color add . , exampl , red phosphor +green phosphor make yellow light . ink deposit paper , essenc opposit situat hold : yellow ink subtract blue white illumin , reﬂect red green , appear yellow ! , instead red , green , blue primari , need primari amount to−r , −green , −blue ; need subtract r g b . subtract color primari cyan ( c ) , magenta ( ) , yellow ( ) ink . figur 4.15 show two system , rgb cmi , connect . addit ( rgb ) system , black “ light , ” rgb= ( 0,0,0 ) . subtract cmi system , black aris subtract light lay ink c=m=y=1 . 4.2.5 transform rgb cmi given identiﬁc role ink subtract system , simplest model invent specifi ink densiti lay paper , make certain cmi cubeblu green redmagentacyan cyanmagentayellow yellowgreen bluer black ( 0 , 0 , 0 ) black ( 1 , 1 , 1 ) white ( 0 , 0 , 0 ) white ( 1 , 1 , 1 ) rgb cube fig . 4.15 rgb cmi color cubes106 4 color imag video desir rgb color , follow : ⎡ ⎣c y⎤ ⎦=⎡ ⎣1 1 1⎤ ⎦−⎡ ⎣r g b⎤ ⎦ ( 4.27 ) invers transform ⎡ ⎣r g b⎤ ⎦=⎡ ⎣1 1 1⎤ ⎦−⎡ ⎣c y⎤ ⎦ ( 4.28 ) 4.2.6 undercolor remov : cmyk system c , , suppos mix black . howev , often mix muddi brown ( know , kindergarten ! ) . truli “ black ” black ink , fact , cheaper mix color ink make black , simpl approach producingsharp printer color calcul part three-color mix would black , remov color proport , add back real black . call “ undercolor removal. ” krepres amount black , new speciﬁc ink thu k≡min { c , , } ( 4.29 ) ⎡ ⎣c y⎤ ⎦⇒⎡ ⎣c−k m−k y−k⎤ ⎦ figur 4.16 depict color combin result combin primari color avail two situat , addit color , one usual speciﬁ color use rgb , subtract color , one usual speciﬁ color use cmi cmyk . 4.2.7 printer gamut common model print process , printer lay transpar layersof ink onto ( gener white ) substrat . wish cyan print inktruli equal minus-r , object produc cyan ink complet block red light also complet pass green blue light . unfortun , “ block dye ” approxim industri realiti transmissioncurv overlap c , , ink . lead “ crosstalk ” color channel difﬁculti predict color achiev printing.4.2 color model imag 107 fig . 4.16 addit subtract color . argb use specifi addit color . bcmi use specifi subtract color figur 4.17a show typic transmiss curv real block dye , fig . 4.17b show result color gamut color printer use ink . see gamut smaller ntsc monitor , overlap . gamut aris model use printer ink . transmitt relat optic densiti via logarithm : d=− logt , ti one curv fig . 4.17a . actual color form linear combin dof ink , da combin three densiti weight weight wi , i=1 .. 3 , wican rang zero maximum allow without smear . overal transmitt ti form product exponenti three weight densities—light extinguish exponenti travel “ sandwich ” transpar dye . light reﬂect paper ( piec slide ﬁlm ) te=e−d , ei illumin light . form color xyz eq . ( 4.6 ) lead printer gamut fig . 4.17b . center printer gamut white–black axi ; six boundari vertic correspond c , , , three combin cm , cy , laid full densiti . lesser ink densiti lie middl diagram . full densiti ink correspond black/whit point , lie centerof diagram point mark “ o. ” particular ink , point chromat ( x , ) = ( 0.276,0.308 ) . 4.2.8 multi-ink printer increasingli , printer manufactur four ( cmyk ) ink , i.e. , print system mani color . exampl cmykrgb printer . object greatli increas size printer gamut [ 15 ] .108 4 color imag video fig . 4.17 atransmiss curv block dye . b spectrum locu , triangular ntsc gamut , six-vertex printer gamutblock dye wavelengthtransmitt 400 450 500 550 600 650 700c my0 . 0 0 . 2 0 . 4 0 . 6 0 . 8 1.0 ( ) xy 0.0 0.2 0.4 0.6 0.8 1.00.0 0.2 0.4 0.6 0.8 1.0block dye gamut + ntsc gamut ( b ) 4.3 color model video 4.3.1 video color transform method deal color digit video larg deriv older analog method code color tv . typic , version lumin combin color inform singl signal . exampl , matrix transform method similar eq . ( 4.19 ) call yiq use transmit tv signal north america japan . europ , video tape use pal secam code , base tv use matrix transform call yuv.4.3 color model video 109 final , digit video mostli use matrix transform call ycbcr close relat yuv .2 4.3.2 yuv color model initi , yuv code use pal analog video . version yuv nowalso use ccir 601 standard digit video . firstli , code lumin signal ( gamma-correct signal ) equal /primein eq . ( 4.20 ) . ( recal y/primei often call “ luma. ” ) luma y/primei similar , exactli , cie lumin valu , gamma-correct . multimedia , practition often blur differ simpli refer lumin . well magnitud bright need color scale , end chromin refer differ color refer white lumin . repres color differ u , v : u=b/prime−y/prim v=r/prime−y/prim ( 4.30 ) eq . ( 4.20 ) ( 4.30 ) read ⎡ ⎣y/prim u v⎤ ⎦=⎡ ⎣0.299 0 .587 0 .114 −0.299−0.587 0 .886 0.701 −0.587−0.114⎤ ⎦⎡ ⎣r/prime g/prime b/prime⎤ ⎦ ( 4.31 ) one goe backward , ( y/prime , u , v ) ( r/prime , g/prime , b/prime ) , invert matrix eq . ( 4.31 ) . note gray pixel , r/prime=g/prime=b/prim , lumin y/primei equal gray valu , r/prime , say , sinc sum coefﬁcient eq . ( 4.20 ) 0.299+0.587+0.114 = 1.0 . also , gray ( “ black white ” ) imag , chromin ( u , v ) zero sinc sum coefﬁcient lower two equat ( 4.31 ) zero . henc , color tv could display precursor black white televis use y/primesignal.3and backward compat , color tv use old black white signal color inform identifi signal y/prime . final , actual implement , uandvar rescal purpos conveni maximum minimum . analog video , scale chosen uorvi limit rang ±0.5 time maximum y/prime [ 16 ] . ( note actual voltag anoth , non-norm range—for analog 2the luminance–chromin color model ( yiq , yuv , ycbcr ) proven effect . henc , also adopt imag compress standard jpeg jpeg2000 . 3it note mani author user simpli use letter prime , ( perhap ) mean prime ! 110 4 color imag video y/primei often rang 0 700 mv rescal uandv , call pband prin context , rang ±350 mv . ) scale reﬂect deal compon video—thre separ signal . howev , deal composit video , want compos singl chromin signal uand vat , turn conveni contain u , vwithin rang −1/3t o+4/3 . composit signal magnitud y/prime±√ u2+v2wil remain within amplitud limit record equip . purpos , uandvar rescal follow : u=0.492111 ( b/prime−y/prim ) v=0.877283 ( r/prime−y/prim ) ( 4.32 ) ( multipli sometim round three signiﬁc digit ) . altogeth , make transform r/prime , g/prime , b/primetoy/prim , u , va follow : ⎡ ⎣y/prim u v⎤ ⎦=⎡ ⎣0.299 0 .587 0 .114 −0.14713 −0.28886 0 .436 0.615 −0.51499 −0.10001⎤ ⎦⎡ ⎣r/prime g/prime b/prime⎤ ⎦ ( 4.33 ) one goe backward , ( y/prime , u , v ) ( r/prime , g/prime , b/prime ) , invert matrix eq . ( 4.33 ) , follow : ⎡ ⎣r/prime g/prime b/prime⎤ ⎦=⎡ ⎣1.0000 0 .0000 1 .13983 1.0000 −0.39465 −0.58059 1.0000 2 .03211 0 .0000⎤ ⎦⎡ ⎣y/prim u v⎤ ⎦ ( 4.34 ) chromin signal compos uandva composit signal c=u·co ( ωt ) +v·sin ( ωt ) ( 4.35 ) ωrepres ntsc color frequenc . eq . ( 4.33 ) , note zero minimum valu u , v . term real , posit color , ui approxim blue ( u > 0 ) yellow ( u < 0 ) rgb cube ; vi approxim red ( v > 0 ) cyan ( v < 0 ) . figur 4.18 show decomposit typic color imag y/prime , u , v compon . sinc uand vgo neg , display , fact , imag shift , rescal version actual signal . sinc eye sensit black white variat , term spatial frequenc ( e.g. , eye see grid ﬁne gray line clearli ﬁne coloredlin ) , analog pal signal bandwidth 1.3 mhz alloc ofuandv , 5.5 mhz reserv /primesign . fact , color inform transmit color tv actual blocki ’ perceiv low level color information.4.3 color model video 111 fig . 4.18 y/primeuv decomposit color imag . top imag ai origin color imag ; bisy/prim ; c , dare ( u , v ) 4.3.3 yiq color model yiq ( actual , y/primeiq ) use ntsc color tv broadcast . , gray pixel gener zero ( , q ) chromin signal . origin mean name came combin analog signal , ifor “ in-phas chromin ” qfor “ quadratur chromin ” signal—thes name safe ignor . thought , although uandvar simpli deﬁn , captur most-to-least hierarchi human vision sensit . although uand vnice deﬁn color differ , best correspond actual human perceptualcolor sensit . ntsc , iand qare use instead . yiq version yuv , /prime , uandvrot 33◦ : i=0.492111 ( r/prime−y/prim ) co 33◦−0.877283 ( b/prime−y/prim ) sin 33◦ ( 4.36 ) q=0.492111 ( r/prime−y/prim ) sin 33◦+0.877283 ( b/prime−y/prim ) co 33◦ lead follow matrix transform : ⎡ ⎣y/prim q⎤ ⎦=⎡ ⎣0.299 0 .587 0 .114 0.595879 −0.274133 −0.321746 0.211205 −0.523083 0 .311878⎤ ⎦⎡ ⎣r/prime g/prime b/prime⎤ ⎦ ( 4.37 ) ii roughli orange–blu direct qroughli correspond purple– green direction.112 4 color imag video fig . 4.19 iand qcompon color imag go back ( y/prime , , q ) ( r/prime , g/prime , b/prime ) , one invert eq . ( 4.37 ) : ⎡ ⎣r/prime g/prime b/prime⎤ ⎦=⎡ ⎣1.0000 0 .95630 0 .62103 1.0000 −0.27256 −0.64671 1.0000 −1.10474 1 .70116⎤ ⎦⎡ ⎣y/prim q⎤ ⎦ ( 4.38 ) figur 4.19 show decomposit color imag yiq compon . q compon shown sinc origin imag they/primecompon fig . 4.18 . particular imag , energi captur y/primecompon ; typic . howev , case , yiq decomposit better job form hierarch sequenc imag ; 8-bit y/primecompon , root- mean-squar valu 146 ( 255 maximum possibl ) . u , vcompon rm valu 19 21 . yiq decomposit , iand qcompon , hand , rm valu 20 5 , better priorit color valu . 4.3.4 ycbcr color model intern standard compon ( three-sign , studio qualiti ) digit video ofﬁcial “ recommend itu-r bt.601-4 ” ( known rec . 601 ) . standard use anoth color space , yc bcr , often simpli written ycbcr . ycbcr transform close relat yuv transform . yuv chang scale cbi u , coefﬁcient 0.5 multipli b/prime . softwar system , cband crare also shift valu 0 1 . make equat follow : cb= ( ( b/prime−y/prim ) /1.772 ) +0.5 ( 4.39 ) cr= ( ( r/prime−y/prim ) /1.402 ) +0.54.3 color model video 113 written , ⎡ ⎣y/prim cb cr⎤ ⎦=⎡ ⎣0.299 0 .587 0 .114 −0.168736 −0.331264 0 .5 0.5 −0.418688 −0.081312⎤ ⎦⎡ ⎣r/prime g/prime b/prime⎤ ⎦+⎡ ⎣0 0.5 0.5⎤ ⎦ ( 4.40 ) practic , howev , recommend 601 speciﬁ 8-bit code , maxi- mum y/primevalu 219 , minimum +16 . valu 16 235 reserv process ( denot “ headroom ” “ footroom ” ) .cb cr rang ±112 offset +128 ( word , maximum 240 minimum 16 ) . r /prime , g/prime , b/primear ﬂoat [ 0 .. 1 ] , obtain y/prime , cb , crin [ 0 .. 255 ] via transform [ 16 ] ⎡ ⎣y/prim cb cr⎤ ⎦=⎡ ⎣65.481 128 .553 24 .966 −37.797 −74.203 112 112 −93.786 −18.214⎤ ⎦⎡ ⎣r/prime g/prime b/prime⎤ ⎦+⎡ ⎣16 128128⎤ ⎦ ( 4.41 ) fact , output rang also clamp [ 1 .. 254 ] sinc rec . 601 synchroniza- tion signal given code 0 255 . invers transform eq . ( 4.41 ) follow [ 16 ] : ⎡ ⎣r /prime g/prime b/prime⎤ ⎦=⎡ ⎣0.00456621 0 .0000 0 .00625893 0.00456621 −0.00153632 −0.00318811 0.00456621 0 .00791071 0 .0000⎤ ⎦⎡ ⎣y/prime−16 cb−128 cr−128⎤ ⎦ ( 4.42 ) ycbcr transform use jpeg imag compress mpeg video compress . 4.4 exercis 1 . consid follow set color-rel term : ( ) wavelength , ( b ) color level , ( c ) bright , ( ) white . would match follow ( vagu state ) characteris- tic term ? ( ) lumin , ( b ) hue , ( c ) satur , ( ) chrominance.114 4 color imag video 2 . color outdoor light ? , around wavelength would guess peak power red sunset ? blue sky light ? 3 . “ lab gamut cover color visibl spectrum. ” statement mean ? brieﬂi , lab relat color ? —just descript . ( roughli ) rel size lab gamut , cmyk gamut , anda monitor gamut ? 4 . prove straight line ( x , , z ) space project straight line ( x , ) chromat space . , let c 1= ( x1 , y1 , z1 ) c2= ( x2 , y2 , z2 ) two differ color , let c3= ( x3 , y3 , z3 ) fall line connect c1 c2 : c3=αc1+ ( 1−α ) c2 . show ( x3 , y3 ) =β ( x1 , y1 ) + ( 1− β ) ( x2 , y2 ) β . 5 . chromat “ horsesho ” shape fig . 4.11 come ? calcul ? write small pseudocod solut problem ﬁnding so-cal “ spectrum locus. ” hint : figur 4.20a show color-match function fig . 4.10 drawn set point 3-space . fig . 4.20b show point map anoth 3d set point . hint : tri program solut problem , help answer moreexplicitli . 6 . suppos use new set color-match function ¯x new ( λ ) , ¯ynew ( λ ) , ¯znew ( λ ) valu λ ( nm ) ¯xnew ( λ ) ¯ynew ( λ ) ¯znew ( λ ) 450 0.2 0.1 0.5 500 0.1 0.4 0.3 600 0.1 0.4 0.2 700 0.6 0.1 0.0 system , chromat valu ( x , ) equi-energi white light e ( λ ) e ( λ ) ≡1 wavelength λ ? explain . 7 . repeat step lead eq . ( 4.18 ) , time use ntsc standard— use number signiﬁc digit tabl 4.18 end transform eq . ( 4.19 ) . 8 . ( ) suppos imag notgamma-correct camcord . gener , would appear screen ? ( b ) happen artiﬁci increas output gamma store imag pixel ? ( one photoshop . ) effect imag ? 9 . suppos imag ﬁle valu 0 .. 255 color channel . deﬁn r=r/255 red channel , wish carri gamma correct pass new valu r/primeto display devic , r/prime/similarequalr1/2.0.4.4 exercis 115 00.20.40.60.811.2 00.20.40.60.8100.20.40.60.811.21.41.61.8 1.4 ( ) 00.10.20.30.40.50.60.70.80.9 00.20.40.60.81 00.20.40.60.8 ( b ) fig . 4.20 acolor-match function ; btransform color-match function common carri oper use integ math . suppos approx- imat calcul creat new integ valu 0 .. 255 via ( int ) ( 255· ( r1/2.0 ) ) ( ) comment ( roughli ) effect oper number actual avail level display . hint : code languag help understand mechan work better—and well , simpli count output level . ( b ) end level 0 .. 255 affect gamma correct , low end near 0 high end near 255 ? ? much end ? 10 . mani comput graphic applic , γcorrect perform color lut ( lookup tabl ) . show ﬁrst ﬁve entri color lut meant use γcorrect . hint : code save troubl use calcul question . 11 . devis program produc fig . 4.21 , show color gamut monitor adher smpte speciﬁc . 12 . “ hue ” color , independ bright much pure white ad . make simpl deﬁnit hue set ratio r : g : b . ( ) suppos color ( i.e. , rgb ) divid 2.0 , rgb tripl valu 0.5 time former valu . explain use numer values:116 4 color imag video fig . 4.21 smpte monitor gamut ( ) gamma correct appli divis 2.0 color store , darker rgb hue origin sens ratio r : g : b light eman displaydevic ? ( ’ discuss psychophys effect chang perception—her ’ worri machin ) . ( ii ) gamma correct notappli , second rgb , = rgb/2 , hue ﬁrst rgb , display ? hue origin color store , light display ? ( b ) assum gamma correct appli , color tripl hue display origin color store ? 13 . wish produc graphic pleas easili readabl . suppos make background color pink . color text font use make text readabl ? justifi answer . 14 . make matter simpler eventu print , buy camera equip cmi sensor , oppos rgb sensor ( cmi camera , fact , avail ) . ( ) draw spectral curv roughli depict camera ’ sensit wavelength might look like . ( b ) could output cmi camera use produc ordinari rgb pic- ture ? ? 4.4 exercis 117 15 . color ink-jet printer use cmyk model . color ink cyan spray onto sheet white paper , ( ) look cyan daylight ? ( ii ) color would appear blue light . ? refer 1 . d.h. pritchard , u.s. color televis fundamentals—a review . ieee tran . consum . electron . 23 ( 4 ) , 467–478 ( 1977 ) 2 . g. wyszecki , w. . stile , color scienc : concept method , quantit data for- mula , 2nd edn . ( wiley , new york , 2000 ) 3 . r.w.g . hunt , color reproduct color vision model , 1st color imag confer transform & transport color , pp . 1–5 . societi imag scienc & technolog ( & ) /societi inform display ( sid ) joint confer ( 1993 ) 4 . m.j. vrhel , r. gershon , l. . iwan , measur analysi object reﬂect spectra . color re . appl . 19 , 4–9 ( 1994 ) 5 . r.w.g . hunt , reproduct color , 6th edn . ( fountain press , england , 2004 ) 6 . j.f . hugh , a. van dam , m. mcguir , d.f . sklar , j.d . foley , s.k . feiner , k. akeley , comput graphic : principl practic , 3rd edn . ( addison-wesley , 2013 ) 7 . c.a . poynton , color faq—frequ ask question color ( 2006 ) . http : //www.poynton.com/ notes/colour_and_gamma/colorfaq.html 8 . m.d . fairchild , color appear model , 3rd edn . ( addison-wesley , 2013 ) 9 . d. travi , effect color display . ( academ press , 1991 ) 10 . r. . bern , l.a. taplin , practic spectral imag use color-ﬁlt array digit camera . art-si.org/pdfs/acquisition/tr_practical_spectral_imaging.pdf 11 . c. fredembach , s. susstrunk , colour near infrar , 16th color imag confer , pp . 176–182 ( 2008 ) 12. intern electrotechn commiss , iec 61966-2-1 : multimedia system equipment—colour measur management—part 2-1 : colour management—default rgb colour space—srgb . ( iec , geneva , 2007 ) 13 . m. stoke , m. anderson , s. chandrasekar , r. motta , standard default color space internet : srgb ( 1996 ) . http : //www.color.org/srgb.html 14 . microsoft corpor , colorspac interchang use srgb ( 2001 ) . http : //www.microsoft . com/whdc/device/display/color/srgb.mspx 15 . p. urban , ink limit spectral color constant print , 11th congress interna- tional colour associ ( 2009 ) 16 . c.a . poynton , technic introduct digit video ( wiley , new york , 1996 ) 5fundament concept video chapter , introduc princip notion need understand video . digit video compress explor separ , chap . 10through 12 . consid follow aspect video impact multimedia applic : •analog video , •digit video , •video display interfac , •360◦video , •3d video tv , •video qualiti assess . sinc video creat varieti sourc , begin signal them- selv . analog video repres continu ( time-vari ) signal , ﬁrst part chapter discuss creat measur . digit video repres sequenc digit imag . nowaday , omnipres manytyp multimedia applic . therefor , second part chapter focus issu digit video includ hdtv , uhdtv , 3d tv . 5.1 analog video last decad , tv program sent receiv analog signal.onc electr signal receiv , may assum bright least monoton function voltag , necessarili linear , gamma correct ( see sect . 4.1.6 ) . analog signal f ( ) sampl time-vari imag . so-cal progress scan- ning trace complet pictur ( frame ) row-wis time interv . high-resolut comput monitor typic use time interv 1/72 s. © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_5119120 5 fundament concept video fig . 5.1 interlac raster scan qp tu vr tv monitor multimedia standard , anoth system , inter- lace scan , use . , odd-numb line trace ﬁrst , even- number line . result “ odd ” “ even ” ﬁeld —two ﬁeld make one frame . fact , odd line ( start 1 ) end middl line end odd ﬁeld , even scan start half-way point . figur 5.1show scheme use . first , solid ( odd ) line traced—p q , r , , end t—then even ﬁeld start u end v . scan line horizont small voltag appli , move electron beam time . interlac invent , standard deﬁn , difﬁcult transmit amount inform full frame quickli enough avoid ﬂicker . doubl number ﬁeld present eye reduc perceiv ﬂicker . interlac , odd even line displac time . gener notic except fast action take place onscreen , blur may occur . exampl , video fig . 5.2 , move helicopt blur still background . sinc sometim necessari chang frame rate , resiz , even produc still interlac sourc video , variou scheme use de-interlac . simplest de-interlac method consist discard one ﬁeld duplic scan line ﬁeld , result inform one ﬁeld lost complet . , complic method retain inform ﬁeld . tradit crt ( cathod ray tube ) display built like ﬂuoresc light must ﬂash 50–70 time per second appear smooth . europ , fact conve- nientli tie 50 hz electr system , use video digit 25 frame per second ( fp ) ; north america , 60 hz electr system dictat 30 fp . jump q r fig . 5.1i call horizont retrac , electron beam crt blank . jump u v p call vertic retrac .5.1 analog video 121 fig . 5.2 interlac scan produc two ﬁeld frame : ath video frame ; bfield 1 ; cfield 2 ; ddiffer ﬁeld white ( 0.714 v ) horizont retrac activ line signalblack ( 0.055 v ) blank ( 0 v ) sync ( − 0.286 v ) 10.9 52.7 fig . 5.3 electron signal one ntsc scan line sinc voltag one dimensional—it simpli signal vari time—how know new video line begin ? , part electr signal tell us restart left side screen ? solut use analog video small voltag offset zero indic black anoth valu , zero , indic start line . name , could use “ blacker-than-black ” zero signal indic begin line . figur 5.3show typic electron signal one scan line ntsc composit video . “ white ” peak valu 0.714 v , “ black ” slightli zero 0.055 v , wherea blank zero volt . shown , time durat blank puls signal use synchron well , tip sync signal approxim −0.286 v . fact , problem reliabl synchron import special signal control sync take 30 % signal ! 122 5 fundament concept video vertic retrac sync idea similar horizont one , except happen per ﬁeld . tekalp [ 1 ] present good discuss detail analog ( digit ) video . handbook [ 2 ] consid mani fundament problem video process great depth . 5.1.1 ntsc video ntsc tv standard mostli use north america japan . use familiar 4:3 aspect ratio ( i.e. , ratio pictur width height ) 525 scan line per frame 30 frame per second . exactli , histor reason ntsc use 29.97 fps—or , word , 33.37 ms per frame . ntsc follow interlac scan system , frame divid two ﬁeld , 262.5 lines/ﬁeld . thu , horizont sweep frequenc 525×29.97≈15,734 lines/ , line swept 1 /15,734 s≈63.6µ . sinc horizont retrac take 10.9 µs , leav 52.7 µs activ line signal , imag data display ( see fig . 5.3 ) . figur 5.4show effect “ vertic retrac sync ” “ horizont retrac sync ” ntsc video raster . blank inform place 20 line reserv control inform begin ﬁeld . henc , number activ video line per frame 485 . similarli , almost 1/6 raster left side blank horizont retrac sync . nonblank pixel call activ pixel . pixel often fall scan line . therefor , even noninterlac scan , ntsc tv capabl show 340 ( visual distinct ) lines—about 70 % 485 speciﬁ activ line . interlac scan , could low 50 % . imag data encod blank region , inform place , v-chip inform , stereo audio channel data , subtitl mani languag . fig . 5.4 video raster , includ retrac sync datavert retrac synchorizont retrac syncimag data5.1 analog video 123 tabl 5.1 sampl per line variou analog video format format sampl per line vh 240 s-vh 400–425 beta-sp 500 standard 8 mm 300 hi-8 mm 425 ntsc video analog signal ﬁxed horizont resolut . therefor , must decid mani time sampl signal display . sampl correspond one pixel output . pixel clock divid horizont line video sampl . higher frequenc pixel clock , sampl per line . differ video format provid differ number sampl per line , list tabl 5.1 . laser disk resolut hi-8 . ( comparison , minidv 1/4-inch tape digit video 480 line 720 sampl per line . ) ntsc use yiq color model . employ techniqu quadratur modu- lation combin ( spectral overlap part ) ( in-phas ) q ( quadratur ) signal singl chroma signal c [ 1,3 ] : c=ico ( fsct ) +qsin ( fsct ) ( 5.1 ) modul chroma signal also known color subcarri , whose magnitud is/radicalbig i2+q2and phase tan−1 ( q/i ) . frequenc cisfsc≈3.58 mhz . iandqsign multipli time domain cosin sine function frequenc fsc ( eq . ( 5.1 ) ) . equival convolv fourier transform frequenc domain two impuls function fscand−fsc.a result , copi iand qfrequenc spectra made center fscand −fsc , respectively.1 ntsc composit signal composit lumin signal chroma signal , deﬁn : composit =y+c=y+ico ( fsct ) +qsin ( fsct ) ( 5.2 ) ntsc assign bandwidth 4.2 mhz ybut 1.6 mhz iand 0.6 mhz toq , due human ’ insensit color detail ( high-frequ color chang ) . fig . 5.5show , pictur carrier 1.25 mhz ntsc video channel , total bandwidth 6 mhz . chroma signal “ carri ” fsc≈3.58 mhz toward higher end channel thu center 1 .25+ 1neg frequenc ( −fsc ) mathemat notion need fourier transform . physic spectrum , posit frequenc used.124 5 fundament concept video 0 1.25 5.756 mhz 4.2 mhz 4.83 audio subcarriercolor subcarrierpictur carrieri q y6.0f ( mhz ) fig . 5.5 interleav c signal ntsc spectrum 3.58=4.83 mhz . greatli reduc potenti interfer ( lumin ) c ( chromin ) signal , sinc magnitud higher frequenc compon yare signiﬁcantli smaller lower frequenc counterpart . moreov , blinn [ 3 ] explain , great care taken interleav discret yand cspectra reduc interfer . “ interleav ” illustr fig . 5.5 , frequenc compon ( discret fourier transform ) shown solid line , q shown dash line . result , 4.2 mhz band yi overlap interleav 1.6 mhz iand 0.6 mhz q . ﬁrst step decod composit signal receiv side separ yandc . gener , low-pass ﬁlter use extract , locat lower end channel . tv set higher qualiti also use comb ﬁlter [ 3 ] exploit fact yandcar interleav . separ , chroma signal ccan demodul extract qsepar . extract : 1 . multipli signal cbi 2 co ( fsct ) c·2 co ( fsct ) =i·2 cos2 ( fsct ) +q·2 sin ( fsct ) co ( fsct ) =i· ( 1+co ( 2fsct ) ) +q·2 sin ( fsct ) co ( fsct ) =i+i·co ( 2fsct ) +q·sin ( 2fsct ) 2 . appli low-pass ﬁlter obtain iand discard two higher frequenc ( 2 fsc ) terms.5.1 analog video 125 similarli , extract qbi ﬁrst multipli cbi 2 sin ( fsct ) appli low- pass ﬁltere . ntsc bandwidth 6 mhz tight . audio subcarri frequenc 4.5 mhz , place center audio band 1 .25+4.5=5.75 mhz channel ( fig . 5.5 ) . would actual bit close color subcarrier—a caus potenti interfer audio color signal . due larg thisreason ntsc color tv slow frame rate 30 ×1,000/1,001≈29.97 fp [ 4 ] . result , adopt ntsc color subcarri frequenc slightli lower , f sc=30×1,000/1,001×525×227.5≈3.579545 mhz 227.5 number color sampl per scan line ntsc broadcast tv . 5.1.2 pal video pal ( phase altern line ) tv standard origin invent german sci- entist . use 625 scan line per frame , 25 frame per second ( 40 ms/frame ) , 4:3 aspect ratio interlac ﬁeld . broadcast tv signal also use incomposit video . import standard wide use western europ , china , india , mani part world . higher resolut ntsc ( 625 versu 525 scan line ) , visual qualiti pictur gener better . pal use yuv color model 8 mhz channel , alloc bandwidth 5.5 mhz 1.8 mhz u v . color subcarri frequenc f sc≈4.43 mhz . improv pictur qualiti , chroma signal altern sign ( e.g. , +u −u ) success scan line ; henc , name “ phase altern line. ” 2thi facilit use ( line-r ) comb ﬁlter receiver—th signal consecut line averag cancel chroma signal ( alway carri opposit sign ) separ c obtain high-qual signal . 5.1.3 secam video secam , invent french , third major broadcast tv standard.secam stand system electroniqu couleur avec memoir . secam also use 625 scan line per frame , 25 frame per second , 4:3 aspect ratio interlacedﬁeld . origin design call higher number scan line ( 800 ) , ﬁnal version settl 625 . secam pal similar , differ slightli color code scheme . secam , u v signal modul use separ color subcarri 4.25 mhz 4.41 mhz , respect . sent altern line , , one u v signal sent scan line . 2accord blinn [ 3 ] , ntsc select half integ ( 227.5 ) number color sampl scan line . henc , chroma signal also switch sign success scan lines.126 5 fundament concept video tabl 5.2 comparison analog broadcast tv system seri tv systemfram rate ( fp ) seriesnumb ofscan line totalchannelseri width ( mhz ) bandwidth seri alloc ( mhz ) seri ior useri qor v ntsc 29.97 525 6.0 4.2 1.6 0.6 pal 25 625 8.0 5.5 1.8 1.8 secam 25 625 8.0 6.0 2.0 2.0 tabl 5.2give comparison three major analog broadcast tv system . worth note countri ceas oper ( e.g. , ntsc broadcast stop canada unit state 2011 2015 , respect ) andhav switch digit tv broadcast . 5.2 digit video advantag digit represent video mani . permit •store video digit devic memori , readi process ( nois remov , cut past , ) integr variou multimedia appli- cation . •direct access , make nonlinear video edit simpl . •repeat record without degrad imag qualiti . •eas encrypt better toler channel nois . earlier soni panason record , digit video form composit video . modern digit video gener use compon video , although rgb signal ﬁrst convert certain type color oppon space . usual color space ycbcr [ 5 ] . 5.2.1 chroma subsampl sinc human see color much less spatial resolut black white , make sens decim chromin signal . interest necessarili inform name arisen label differ scheme use . begin , number given state mani pixel valu , per four origin pixel , actu- sent . thu , chroma subsampl scheme “ 4:4:4 ” indic chroma subsampl use . pixel ’ , cb , crvalu transmit , four , cb , cr.5.2 digit video 127 4:4:4 4:2:2 4:2:0 4:1:1 pixel , cr , cb valuespixel cr cb valuespixel valu fig . 5.6 chroma subsampl scheme “ 4:2:2 ” indic horizont subsampl cbandcrsign factor 2 . , four pixel horizont label 0–3 , four ys sent , everi two cb two cr sent , ( cb0 , y0 ) ( cr0 , y1 ) ( cb2 , y2 ) ( cr2 , y3 ) ( cb4 , y4 ) , . scheme “ 4:1:1 ” subsampl horizont factor 4 . scheme “ 4:2:0 ” subsampl horizont vertic dimens factor 2 . theo- retic , averag chroma pixel posit row column , shown fig . 5.6 . see scheme 4:2:0 , fact , anoth kind 4:1:1 sampl , sens send 4 , 1 , 1 valu per 4 pixel . therefor , label scheme reliabl mnemon ! scheme 4:2:0 , along other , commonli use jpeg mpeg ( see later chapter part ii ) .128 5 fundament concept video 5.2.2 ccir itu-r standard digit video ccir consult committe intern radio . one import standard produc ccir-601 compon digit video . standard sinc becom standard itu-r rec . 601 , intern standard profession video applic . adopt sever digit video format , includ popular dv video . ntsc-compat version 525 scan line , 858 pixel ( 720 visibl , blank period ) . ntsc version uses4:2:2 , pixel repres 2 byte ( 8 bit yand 8 bit altern cbandcr ) . rec . 601 ( ntsc ) data rate ( includ blank sync exclud audio ) thu approxim 216 mbp ( megabit per second ) : 525×858×30×2 byte ×8bit byte≈216 mbp blank , digit video system may make use extra data capac- iti carri audio signal , translat foreign languag , error-correctioninform . tabl 5.3show digit video speciﬁc , aspect ratio 4:3 . rec . 601 standard use interlac scan , ﬁeld half asmuch vertic resolut ( e.g. , 240 line ntsc ) . cif stand common intermedi format , speciﬁ intern tele- graph telephon consult committe ( ccitt ) , supersed inter- nation telecommun union , overse telecommun ( itu- ) radio frequenc matter ( itu-r ) one unit nation bodi . idea ofcif , vh qualiti , specifi format lower bitrat . cif use progress ( noninterlac ) scan . qcif stand quarter-cif , even lower bitrat . cif/qcif resolut evenli divis 8 , andal except 88 divis 16 ; conveni block-bas video code h.261 h.263 , discuss chap . 10 . tabl 5.3 itu-r digit video speciﬁc rec . 601 rec . 601 cif qcif 525/60 625/50 ntsc pal/secam lumin resolution720×480 720×576 352×288 176×144 chromin resolution360×480 360×576 176×144 88×72 color subsampling4:2:2 4:2:2 4:2:0 4:2:0 aspect ratio 4:3 4:3 4:3 4:3 fields/ 60 50 30 30 interlac ye ye no5.2 digit video 129 cif compromis ntsc pal , adopt ntsc frame rate half number activ line pal . play exist tv set , ntsc tv ﬁrst need convert number line , wherea pal tv requireframe-r convers . 5.2.3 high deﬁnit tv ( hdtv ) introduct wide-screen movi brought discoveri viewer seatednear screen enjoy level particip ( sensat immers ) expe- rienc convent movi . appar , exposur greater ﬁeld view , especi involv peripher vision , contribut sens “ there. ” main thrust high-deﬁnit tv ( hdtv ) increas “ deﬁnit ” unit area , rather increas visual ﬁeld , especi itswidth . ﬁrst-gener hdtv base analog technolog develop soni nhk japan late 1970 . hdtv success broadcast 1984lo angel olymp game japan . multipl sub-nyquist sampl encod ( muse ) improv nhk hdtv hybrid analog/digit technolog put use 1990 . 1,125 scan line , interlac ( 60 ﬁeld per second ) , 16:9 aspect ratio . use satellit broadcast—quit appropri japan , cover one two satellit . direct broadcast satellit ( db ) channel use bandwidth 24 mhz . gener , terrestri broadcast , satellit broadcast , cabl , broadband net- work feasibl mean transmit hdtv well convent tv . sinc uncompress hdtv easili demand 20 mhz bandwidth , willnot ﬁt current 6 8 mhz channel , variou compress techniqu investig . also anticip high-qual hdtv signal transmit use one channel , even compress . 1987 , fcc decid hdtv standard must compat exist ntsc standard must conﬁn exist high-frequ ( vhf ) ultra-high-frequ ( uhf ) band . prompt number propos north america end 1988 , analog mix analog/digit . 1990 , fcc announc differ initiative—it prefer full- resolut hdtv . decid hdtv would simultan broadcast exist ntsc tv eventu replac . develop digit hdtv immedi took north america . wit boom propos digit hdtv , fcc made key decis go digit 1993 . “ grand allianc ” form includ four main pro- posal , gener instrument , mit , zenith , & , thomson , philip , sarnoff , other . eventu led format advanc televis system committe ( tsc ) , respons standard tv broad- cast hdtv . 1995 , u.s. fcc advisori committe advanc televi-s servic recommend tsc digit televis standard adopted.130 5 fundament concept video tabl 5.4 advanc digit tv format support tsc number activ number activ aspect ratio frame rate pixel per line line 1,920 1,080 16:9 60p 60i 30p 24p 1,280 720 16:9 60p 30p 24p 720 480 16:9 4:3 60p 60i 30p 24p 640 480 4:3 60p 60i 30p 24p tabl 5.4list standard support video scan format . ( 50 hz system , 60p becom 50p , 30p becom 25p , etc . ) tabl , “ ” mean interlac scan “ p ” mean progress ( noninterlac ) scan . frame ratessupport integ rate ntsc rate , , 60.00 59.94 , 30.00 29.97 , 24.00 23.98 fp . video , mpeg-2 initi chosen compress standard . seen chap . 11 , use main level high level main proﬁl mpeg- 2 . audio , ac-3 standard . support so-cal 5.1 channel dolbi surround sound—ﬁv surround channel plu subwoof channel . 2008 , tscwa updat adopt h.264 video compress standard . salient differ convent tv hdtv [ 4,6 ] latter much wider aspect ratio 16:9 instead 4:3 . ( actual , work beexactli one-third wider current tv ) . anoth featur hdtv move toward progress ( noninterlac ) scan . rational interlac introduc serrat edg move object ﬂicker along horizont edg . consum analog tv set still abl receiv signal via 8-vsb ( 8-level vestigi sideband ) demodul box . servic provid includ thefollow : •standard-deﬁnit tv ( sdtv ) —the ntsc tv higher . •enhanced-deﬁnit tv ( edtv ) —480 activ line higher—th third fourth row tabl 5.4 . •high-deﬁnit tv ( hdtv ) —720 activ line higher . popular choic includ 720p ( 1,280 ×720 , progress scan , 30 fp ) , 1080i ( 1,920 ×1,080 , interlac , 30 fp ) , 1080p ( 1,920 ×1,080 , progress scan , 30 60 fp ) , last one becom mainstream nowaday . 5.2.4 ultra-high-deﬁnit tv ( uhdtv ) ultra-high-deﬁnit tv ( uhdtv ) , also known ultra hd uhd , new gener hdtv . effort toward uhdtv standard initi 2012 tsc call propos support 4k uhdtv ( 2160p ) 60 fp 2013 . asof today , uhdtv mainli includ 4k uhdtv : 2160p ( 3 ,840×2,160 , progress scan ) 8k uhdtv : 4320p ( 7 ,680×4,320 , progress scan ) . aspect ratio5.2 digit video 131 tabl 5.5 summari ultra-high-deﬁnit tv ( uhdtv ) type uhdtv resolut bit depth ( bit ) aspect ratio frame rate 4k uhd ( 2160p ) 3,840 ×2,160 10 12 16:9 120p 8k uhd ( 4320p ) 7,680 ×4,320 10 12 16:9 120p 16k uhd ( 8640p ) 15,360 ×8,640 10 12 16:9 240p 16:9 . bit depth 10 12 bit per sampl , chroma subsampl 4:2:0 , 4:2:2 , 4:4:4 . support maxim frame rate increas 120 fp . uhdtv provid superior pictur qualiti , close imax movi . compar hdtv , requir much higher bandwidth/bitr . 16k uhdtv also demonstr 2018 , target applic virtual realiti true immers . resolut 15,360 ×8,640 total 132.7 megapixel . tabl 5.5summar main speciﬁc 4k , 8k , 16k uhdtv . 5.3 video display interfac discuss interfac video signal transmiss output devic ( e.g. , set-top box , video player , video card , etc . ) video display ( e.g. , tv , monitor , projector , etc. ) . wide rang video display interfac , support video signal differ format ( analog digit , interlac progress ) , dif-fer frame rate , differ resolut [ 7 ] . start discuss analog interfac , includ compon video , composit video , s-video , digit interfac , includ dvi , hdmi , displayport . 5.3.1 analog display interfac analog video signal often transmit one three differ interfac : com- ponent video , composit video , s-video . figur 5.7show typic connector . fig . 5.7 connector typic analog display interfac . left right : compon video , composit video , s-video , vga132 5 fundament concept video compon video higher end video system , studio , make use three separ video signal red , green , blue imag plane . refer compon video . kind system three wire ( connector ) connect camera devic tv monitor . color signal restrict alway rgb separ . instead , saw chap . 4on color model imag video , form three signal via luminance–chromin transform rgb signals—for exampl , yiq oryuv . color separ scheme , compon video give best color repro- duction , sinc “ crosstalk ” three differ channel , unlik composit video s-video . compon video , howev , requir bandwidth good synchron three compon . composit video incomposit video , color ( “ chromin ” ) intens ( “ lumin ” ) signal mix singl carrier wave . chromin composit two color compo- nent ( iand qoruand v ) . type signal use broadcast color tv ; downward compat black-and-whit tv . ntsc tv , exampl [ 3 ] , iand qare combin chroma signal , color subcarri put chroma signal higher frequenc end channel share lumin signal . chromin lumin compon separ receiv end , two color compon furtherrecov . connect tv vcr , composit video use one wire ( henc one connector , bnc connector end coaxial cabl rca plug end ordinari wire ) , video color signal mix , sent separ . audio signal anoth addit one signal . sinc colorinform mix color intens wrap signal , interfer lumin chromin signal inevit . s-video compromis , s-video ( separ video super video , e.g. , s-vh ) use two wire : one lumin anoth composit chromin signal . result , less crosstalk color inform crucial grayscaleinform . reason place lumin part signal black-and- white inform import visual percept . note previouschapt , human abl differenti spatial resolut grayscal ( “ black- and-whit ” ) part much better color part rgb imag . therefor , color5.3 video display interfac 133 inform transmit much less accur intens inform . see fairli larg blob color , make sens send less color detail . video graphic array ( vga ) video graphic array ( vga ) video display interfac ﬁrst introduc ibm 1987 , along ps/2 person comput . sinc wide use comput industri mani variat , collect referredto vga . initi vga resolut 640 ×480 use 15-pin d-subminiatur vga connector . later extens carri resolut rang 640 ×400 pixel 70 hz ( 24 mhz signal bandwidth ) 1,280 ×1,024 pixel ( sxga ) 85 hz ( 160 mhz ) 2,048 ×1,536 ( qxga ) 85 hz ( 388 mhz ) . vga video signal base analog compon rgbhv ( red , green , blue , horizont sync , vertic sync ) . also carri display data channel ( ddc ) data deﬁn video electron standard associ ( vesa ) . sinc video signal analog , suffer interfer , particularli cabl long . 5.3.2 digit display interfac given rise digit video process monitor directli accept digitalvideo signal , great demand toward video display interfac transmit digit video signal . interfac emerg 1980 ( e.g. , color graphic adapt ( cga ) d-subminiatur connector ) , evolv rapidli . today , wide use digit video interfac includ digit visual interfac ( dvi ) , high- deﬁnit multimedia interfac ( hdmi ) , displayport , shown fig . 5.8 . digit visual interfac ( dvi ) digit visual interfac ( dvi ) develop digit display work group ( ddwg ) transfer digit video signal , particularli comput ’ video fig . 5.8 connector differ digit display interfac . left right : dvi , hdmi , display- port134 5 fundament concept video card monitor . carri uncompress digit video conﬁgur support multipl mode , includ dvi-d ( digit ) , dvi-a ( analog ) , dvi-i ( digit analog ) . support analog connect make dvi backwardcompat vga ( though adapt need two interfac ) . dvi ’ digit video transmiss format base panellink , high-spe serial link technolog use transit minim differenti signal ( tmd ) . dvi , sourc , e.g. , video card , read display ’ extend display identiﬁc data ( edid ) , contain display ’ identiﬁc , color characterist ( gamma level ) , tabl support video mode . sourc display areconnect , sourc ﬁrst queri display ’ capabl read monitor ’ edid block . prefer mode nativ resolut chosen . single-link mode , maximum pixel clock frequenc dvi 165 mhz , support maximum resolut 2.75 megapixel 60 hz refresh rate . allow maximum 16:9 screen resolut 1,920 ×1,080 60 hz . dvi speciﬁc also support dual link , achiev even higher resolut 2,560 ×1,600 60 hz . high-deﬁnit multimedia interfac ( hdmi ) hdmi newer digit audio/video interfac develop backward compati- ble dvi . promot consum electron industri , wide use consum market sinc 2002 . hdmi speciﬁc deﬁnesth protocol , signal , electr interfac , mechan requir . electri- cal speciﬁc , term tmd vesa/ddc link , ident dvi . , basic video , adapt convert video signalslosslessli . hdmi , howev , differ dvi follow aspect : 1 . hdmi ’ carri analog signal henc compat vga . 2 . dvi limit rgb color rang ( 0–255 ) . hdmi support rgb ycbcr 4:4:4 4:2:2 . latter common applic ﬁeld thancomput graphic . 3 . hdmi support digit audio , addit digit video . maximum pixel clock rate hdmi 1.0 165 mhz , sufﬁcient support 1080p wuxga ( 1,920 ×1,200 ) 60 hz . hdmi 1.3 increas 340 mhz , allow higher resolut ( wqxga , 2,560 ×1,600 ) singl digit link . hdmi 2.1 releas 2017 , support higher resolut higher refresh rate . hdmi 2.1 also introduc new hdmi cabl categori call ultra-high speed ( 48 gbit/ bandwidth ) , enough for8k resolut approxim 50 hz . use display stream compress compress ratio 3:1 , format 8k ( 7,680 ×4,320 ) 120 hz 10k ( 10,240 ×4,320 ) 100 hz possible.5.3 video display interfac 135 displayport displayport digit display interfac develop vesa , start 2006 . ﬁrst display interfac use packet data transmiss , like internet ethernet ( see chap . 15 ) . speciﬁc , base small data packet known micro-packet , emb clock signal within data stream . , displayport achiev higher resolut yet fewer pin previou technolog . use data packet also allow displayport extens , i.e. , new featur ad time without signiﬁc chang physicalinterfac . displayport use transmit audio video simultan , either . video signal path 6–16 bit per color channel , audio path 8 channel 24-bit 192 khz uncompress pcm audio carri compress audio . dedic bidirect channel carri devic manag andcontrol data . vesa design displayport replac vga dvi . end , much higher video bandwidth , enough four simultan 1080p 60 hz display or4k video 60 hz . backward compat vga dvi achiev use activ adapt . compar hdmi , displayport slightli bandwidth , also accommod multipl stream audio video separ devices.furthermor , vesa speciﬁc royalty-fre , hdmi charg annual fee manufactur . point make displayport strong competitor hdmi consum electron market , well . displayport cabl port may either full-siz connector mini connector . latter ﬁrst develop use appl comput product . despit differ shape , ident perform . 2019 , vesa formal releas displayport 2.0 standard , expand data rate 77.37 gbit/ . also incorpor number advanc featur , beyond-8k resolut , higher refresh rate high dynam rang ( hdr ) support higher resolut , improv support multipl display conﬁgur , well improv user experi augmented/virtu realiti ( ar/vr ) display . 5.4 360◦video 360◦video also known omnidirect video , spheric video , rimmers video . due rapid develop vr ( virtual realiti ) technolog , becom popular [ 8,9 ] . intuit way envis 360◦video take roller coaster ride one look left right , front behind , ( often upside-down ) , endur variou irregular movement . nameimpli , 360 ◦video span 360◦horizont 180◦vertic . captur camera ( almost ) possibl view angl . actual implement , video usual captur omnidirect camera collect cameraswith wide ﬁeld view . although theoret possibl , 360 ◦video a136 5 fundament concept video limit rang view vertic , i.e. , may includ top bottom sphere . multipl camera employ , usual overlap view merg obtain spheric video . video stitch perform gen- erat merg footag , similar stitch panoram imag . sinc color contrast shot often vari signiﬁcantli , calibration/adjustmenti challeng task . 360 ◦video monoscop stereoscop . latter especi suitabl vr applic , often view smart devic vr headset . 5.4.1 equirectangular project ( erp ) order view 360◦ ( spheric ) video ﬂat 2d screen , special pro- jection requir . one common project equirectangular project ( erp ) . adopt spheric coordin system , point sphere repres ( r , θ , φ ) , ri radiu sphere , θindic longitud , andφth latitud . angl θha rang [ −180◦,180◦ ] , commonli known longitud 180◦wt o1 8 0◦e , φha rang [ −90◦,90◦ ] , i.e. , latitud 90◦ 90◦n . prime meridian ( aka greenwich meridian ) , θ=0◦ , equat , φ=0◦ . discuss erp , alway use equat central parallel , y=0 . let θ0be longitud central meridian , x=0 , equat erp x=r· ( θ−θ0 ) ( 5.3 ) y=r·φ ( 5.4 ) ( x , ) project coordin erp , θandφar radian . ifθ0=0◦ , i.e. , use prime meridian central meridian , x=0 , equat erp simpli x=r·θ ( 5.5 ) y=r·φ ( 5.6 ) figur 5.9 illustr world map erp , θ0=0◦ . shown ﬁgure distort “ circl , ” distort caus erp sever , especi near pole ( mention pole ) . mani applic , rectilinear correct required.5.4 360◦video 137 fig . 5.9 equirectangular project ( erp ) world map . ( imag creat justin kunimun , github.com/jkunimune15/map-project . © cc -sa 4.0 ) 5.4.2 project follow three popular project model : •cubemap project ( cmp ) —instead project onto singl plane erp , project made onto six face cube , i.e. , left , front , right , behind , top , bottom . result , distort caus project much reduc . cmp realiz radial project , sphere embed cube . ray connect center sphere point sphere extend get project imag one face cube . •equi-angular cubemap ( eac ) —thi variat cmp adopt googl stream vr video . convent cmp , although project ray equal space circl , i.e. , ident /delta1θ , project interv cube surfac equal . two ray eman around center view form interv length d0 , d0 < di , i/negationslash=0 . differ |di− d0|increas |i|increas , caus undesir nonuniform sampl . avoid distort , eac , interv remap new interv equal length . •pyramid format—thi format advoc facebook . so-cal pyra- mid project , base pyramid provid full resolut imag front view . side pyramid provid side view imag grad- ualli reduc resolut . main advantag multiresolut approachi reduc bitrat requir video transmiss , i.e. , use higher resolut need . ye et al . [ 9 ] present good summari variou project format 360 ◦ video includ 360lib platform , establish joint video138 5 fundament concept video explor team ( jvet ) itu-t video code expert group ( vceg ) . 360lib [ 10 ] also provid tool convert 360◦video among variou project model . 5.5 3d video tv three-dimension ( 3d ) pictur movi exist decades.howev , rapid progress research develop 3d technolog andth success 2009 ﬁlm avatar push 3d video peak . increasingli , movi theater , broadcast tv ( e.g. , sport event ) , person comput , variou handheld devic . main advantag 3d video enabl experi immersion—b , realli ! besid avatar , movi , hugo , toy stori 3 , recent , toy stori 4 success exampl . start introduct fundament 3d vision 3d percept , emphas stereo vision ( stereopsi ) sinc modern 3d video 3d tvare base stereoscop vision . 5.5.1 cue 3d percept human vision system capabl achiev 3d percept util multiplecu . combin produc optim ( nearli optim ) depth estim . multipl cue agre , enhanc 3d percept . conﬂict , 3d percept hinder . sometim , illus aris . monocular cue monocular cue necessarili involv eye includ follow : •shading—depth percept shade highlight . •perspect scaling—converg parallel line distanc inﬁniti . •rel size—dist object appear smaller compar known same-s object distanc . •textur gradient—th appear textur chang reced dis- tanc . •blur gradient—object appear sharper distanc eye focus , wherea nearer farther object gradual blur . •haze—du light scatter atmospher , object distanc lower contrast lower color satur . •occlusion—a far object occlud nearer object ( ) . •motion parallax—induc object movement head movement , nearer object appear move faster.5.5 3d video tv 139 among monocular cue , said occlus motion parallax effect . binocular cue human vision system util effect binocular vision , i.e. , stereo vision , aka stereopsi . left right eye separ small distanc , averag approxim two half inch , 65 mm . known interocular distanc . result , left right eye slightli differ view , i.e. , imag object shift horizont . amount shift , dispar , depend object ’ distanc eye , i.e. , depth , thu provid binocular cue 3d percept . horizont shift also known horizont parallax . fusion left right imag singl vision occur brain , producingth 3d percept . current 3d video tv system almost base stereopsi , believ effect cue . 5.5.2 3d camera model simpl stereo camera model design simpl ( artiﬁci ) stereo camera system left right camera ident ( len , focal length , etc . ) ; camera ’ optic axe parallel , point z-direct , scene depth . camera place ( −b/2,0,0 ) ( b/2,0,0 ) world coordin system ( oppos local coordin system base camera axe ) , bi camera separ , length baselin . given point p ( x , , z ) 3d space , xland xr x-coordin project left right camera imag plane , follow deriv : d=fb/z ( 5.7 ) fi focal length , d=xl−xri dispar orhorizont parallax . suggest dispar di invers proport depth zof point p. name , object near camera yield larg dispar valu , far object yield small dispar valu . point far , approach inﬁniti , d→0 . almost amateur profession stereo video camera use simpl stereo camera model camera axe parallel . obviou reason simpl easi manufactur . moreov , object depth thescen dispar daccord eq . ( 5.7 ) . enabl us depict 3d space stack depth plane , equival , dispar plane , handi camera calibr , video process , analysis.140 5 fundament concept video toed-in stereo camera model human eye known behav differ simpl camera model . human focu object certain distanc , eye rotat around vertic axi opposit direct order obtain ( maintain ) singl binocular vision . result , dispar d=0 object focu , locat distanc observ object focu ; > 0 object farther object focu ( so-cal posit parallax ) ; < 0 nearer object ( neg parallax ) . human eye emul so-cal toed-in stereo camera , camera axe usual converg parallel . one complic model object depth ( i.e. , z ) scene longer yield dispar . word , “ dispar plane ” curv . object side view appear farther away thanth object middl , even depth z . 5.5.3 3d movi tv base stereo vision 3d movi use color glass earli day , movi theater offer 3d experi provid glass tint complementari color , usual red left cyan right.thi techniqu call anaglyph 3d . basic , prepar stereo pictur , left imag ﬁltere remov blue green , right imag ﬁltere remov red . project onto screen good align andprop dispar . stereo pictur pass color glass , mental combin ( fuse ) color 3d pictur reproduc viewer ’ brain . anaglyph 3d movi easi produc . howev , due color ﬁltere , color qualiti necessarili best . anaglyph 3d still wide use scientiﬁcvisu variou comput applic . 3d movi use circularli polar glass nowaday , domin technolog 3d movi theater reald cinemasystem . movie-go requir wear polar glass order see movi 3d . basic , light left right pictur polar differ direct . project superimpos screen . left andright polar glass audienc wear polar accordingli , allow one two polar pictur pass block . cut cost , singl projector use movi theater . z screenpolar switch altern polar light left right pictur project onto screen . frame rate said 144 fps.5.5 3d video tv 141 circularli ( oppos linearli ) polar glass use user tilt head look around bit freeli without lose 3d percept . 3d tv shutter glass tv home entertain , howev , use shutter glass . basic , liquid crystal layer glass user wear becom opaqu ( behav like shutter ) voltag appli . otherwis transpar . glass areact ( e.g. , via infrar ) synchron tv set altern show left right imag ( e.g. , 120 hz left 120 hz right ) time sequenti manner . 3d vision shutter glass readili realiz desktop comput laptop modest addit special design hardwar softwar . thenvidia geforc 3d vision kit exampl . 5.5.4 vergence–accommod conﬂict current stereoscop technolog 3d video mani drawback . reportedthat larg number viewer difﬁculti watch 3d movi and/or tv . 3d object appear darker , smaller , ﬂatten compar appear real world . moreov , caus eye fatigu strain . make viewersdizzi , caus headach even nausea . besid mani obviou technic challeng make left right imag undistort , synchron , separ , fundament issu , i.e. , thevergence–accommod conﬂict [ 11,12 ] . word “ accommod ” refer physic act eye requir maintain clear ( focus ) imag object distanc chang . depict fig . 5.10 , human eye harmon accommod vergenc . keep focu object interest , eye also converg spot . result , focal distanc =v ergenc distanc . system , cours , dynam : chang focu attent need , adjust vergenc accommod accordingli . 3d movi theater , gaze 3d display devic , situat differ . natur focus screen ﬁxed distanc . brain process fuse left right imag , suppos decoupl ourverg accommod . vergence–accommod conﬂict . object suppos behind screen ( posit parallax ) indic fig . 5.10 b , focal distanc < v ergenc distanc , vice versa . us seem capabl , except demand heavi cognit load . explain quickli feel visual fatigu . cite walter murch , distinguish ﬁlm editor sound design , one commun withrog ebert , legendari ﬁlm critic : “ biggest problem 3-d ‘ conver- gence/focu ’ issu . …3-d ﬁlm requir us focu one distanc converg at142 5 fundament concept video ( ) real world focal distanc right left ( b ) 3d displayscreenverg distanceverg distanc focal distanc left right fig . 5.10 vergence–accommod conﬂict anoth , 600 million year evolut never present problem . live thing eye alway focus converg point. ” movi industri invent mani techniqu allevi conﬂict [ 13 ] . exampl , common practic avoid depth discontinu cut . within clip , effort made keep main object interest roughli screen depth , keep averag depth level must movement caus depth chang . 5.5.5 autostereoscop ( glasses-fre ) display devic wear glass watch 3d video/tv/movi anoth major draw- back . uncomfort , especi alreadi wear prescript eye glass . ﬁlter glass inevit dim pictur reduc bright- ness contrast , mention color distort . figur 5.11 show two popular glasses-fre , so-cal autostereoscop display devic . figur 5.11 depict techniqu parallax barrier , layer opaqu materi slit place front normal display devic , e.g. , lcd . result , eye see half column display . properli arrang stereo left–right imag , separ view two imag left right eye realiz . number commerci product use parallax barrier technolog , portabl nintendo 3d game consol , screen fujiﬁlm 3d camera finepix real 3d w3 , sever smartphones.5.5 3d video tv 143 ( b ) lenticular lensleft right left right ( ) parallax barrier fig . 5.11 autostereoscop display devic order allow larger view angl devic use multipl posit , potenti multipl user , one pair stereo imag use , e.g. , one toshiba ’ glasses-fre 3d tv . figur 5.11 b depict techniqu use lenticular len . instead barrier , column magnifi lens place front display direct light properli left right eye . technolog also appli lenticular print gener variou 3d pictur and/or anim . lenticular technolog type integr imag , origin propos gabriel lippmann 1908 [ 14 ] . instead cylindr lens shown , array spheric convex microlens use gener larg number distinct micro-imag . computer-gener 2d view 3d scene , one view per micro-len . therefor , techniqu enabl render multipl view direct . lytro camera , base technolog the4d light ﬁeld [ 15 ] , attempt toward goal . 5.5.6 dispar manipul 3d content creation creation 3d video content major challeng technic , perceptu , artist . post-product , dispar valu manipul creat best 3d percept . focu variou method dispar manipul geometri alter simpli . dispar imag dispar measur pixel . summar lang et al . siggraph 2010 paper nonlinear dispar map [ 16 ] , follow essenti concepts:144 5 fundament concept video •dispar rang —when ask look ( focu ) screen , comfort zone near screen distanc . object zone view angl eye , yield accept rang dispar arereadili perceiv 3d . creat 3d video content , common practic map ( often suppress ) origin dispar rang ﬁt comfort zone viewer . cite [ 16 ] , “ practic valu dispar 30 foot cinema screen , +30 ( appear behind screen ) −100 ( appear front screen ) pixel , assum video width 2,048 pixels. ” •dispar sensit —our vision system capabl discrimin dif- ferent depth nearbi . sensit depth drop rapidli increas view distanc : said invers proport squar distanc . justiﬁ nonlinear dispar map [ 16 ] dispar compress take place larger view distanc . sinc dispar rang nearbi object better preserv , allevi problem ﬂatteningof foreground object , often interest . •dispar gradient —thi measur rate dispar chang within dis- tanc stereoscop imag . exampl , two point frontal surfac inth 3d world yield ( approxim ) dispar left right imag due ident depth ; yield dispar gradient ( near ) zero . hand , two point obliqu surfac may yield differ dis-par valu due differ depth , henc yield nonzero dispar gradient . burt julesz [ 17 ] point human vision limit dis- pariti gradient binocular fusion . beyond limit , fusion singl visioni difﬁcult mostli imposs , thu avoid dispar gradient edit . •dispar veloc —when consecut scene present littl dispar chang , process stereoscop inform quickli . larg accommod vergenc chang ( i.e. , dispar chang ) , slow consider . due limit tempor modul frequenc dis- pariti . discuss earlier , focus screen watch 3d video , rapid chang vergenc main caus visual fatigu must restricted.w toler chang converg ( i.e. , dispar ) long speed chang moder . addit technic issu follow : •most stereoscop camera adopt simpl camera model camera optic axe parallel . yield near-zero dispar far object larg dispar nearbi object , differ toed-in cameramodel better emul human vision system . case , convers imag dispar valu necessari 3d video post-product stage . varieti techniqu describ [ 13,18 ] , among ﬂoat window screen distanc artiﬁci shift . •a state , averag interocular distanc viewer approxim 2.5 inch . result , toed-in camera model , project imag a5.5 3d video tv 145 far object ( near inﬁniti ) , exampl , 2.5 inch apart left right imag screen order gener requir posit parallax . depend screen size screen resolut , differentimag dispar requir . therefor common practic produc differ 3d content differ imag dispar valu target dif- ferent purpos ( larg cinema screen versu small pc smartphon screen , high resolut versu low resolut ) . multimedia movi industri keenli interest convert vast amount 2d content 3d . zhang et al . [ 19 ] provid good survey issu involv manual ( semi- ) automat convert video ﬁlm . 5.6 video qualiti assess ( vqa ) order reduc storag transmiss overhead , common digit video compress . compar code efﬁcienc differ videocompress method , common practic compar bitrat code video bitstream qualiti . video qualiti assess approach beobject orsubject : former done automat comput latter requir human judgement . 5.6.1 object assess common criterion use object assess psnr ( peak signal-to-nois ratio ) . imag psnr =10 log 10i2 max mse , ( 5.8 ) imaxi maximum intens valu , e.g. , 255 8-bit imag , mse themean squar error origin imag iand compress imag ˜i . video , psnr usual averag psnr imag video sequenc . recent literatur , bd-rate often adopt comparison video code efﬁcienc . bd-rate ( short bjontegaard ’ delta-r ) [ 20 ] base differ bitrat two compress method , usual new versu baselin , psnr maintain . actual implement , averagebitr differ rang psnr ( qualiti level ) . neg bd-rate indic improv code efﬁcienc ( save bitrat ) achiev new method . luma bd-rate gener view reliabl chromabd-r , although latter sometim also measured.146 5 fundament concept video 5.6.2 subject assess main advantag psnr easi calcul . howev , necessarili reﬂect qualiti perceiv human , i.e. , visual qualiti . obviou exampl would add ( subtract ) small ﬁxed amount intens valu pixel pictur . visual ( subject ) , may notic qualitychang . hand , psnr certainli affect . methodolog subject assess televis pictur speciﬁ itu-r recommend bt.500 . latest version bt.500-13 [ 21 ] revis 2012 . exampl , experi ohm et al . [ 22 ] , origin compress video clip shown success human subject ( so-cal doubl stimulu method ) . subject ask grade compress video qualiti , 0—lowest , 10—highest . mo ( mean opinion score ) , arithmet mean score , use measur subject qualiti differentvideo compress method . subject assess method extens employ devel- opment video compress standard h.265 h.266 , especi forhdr video [ 23 ] , mo score use compar effect differ techniqu algorithm guid develop code tool . 5.6.3 vqa metric video qualiti assess ( vqa ) activ research area [ 24 ] . main effort ﬁnd better metric simpl measur psnr , assessmentscan conduct object ( comput ) result compar human subject . mani vqa algorithm deriv counterpart imag qualiti assess ( iqa ) . wang et al . [ 25 ] present structur sim- ilar ( ssim ) index captur simpl imag structur inform ( e.g. , lumin contrast ) . becom popular imag video qualityassess . peng et al . [ 26 ] present brief survey vqa good metric base novel spacetim textur represent . wang et al . [ 27 ] present vqa model asymmetr compress stereoscop 3d video , left andright stereo imag differ resolut asymmetr transform-domain quantiz code may appli . 5.7 exercis 1 . ntsc video 525 line per frame 63.6 µs per line , 20 line per ﬁeld vertic retrac 10.9 µs horizont retrac . ( ) 63.6 µs come ? ( b ) take time , horizont retrac vertic retrac ? much time ? 5.7 exercis 147 2 . think less detect ﬂicker , pal europ ntsc north america ? justifi conclus . 3 . sometim signal televis combin fewer part requir tv transmiss . ( ) altogeth , mani signal use studio broadcast tv ? ( b ) s-video stand ? mani signal use s- video ? ( c ) mani signal actual broadcast standard analog tv recep- tion ? kind video call ? 4 . show qsignal extract ntsc chroma signal c ( eq . ( 5.1 ) ) demodul . 5 . one sometim hear old betamax format videotap , compet vh lost , actual better format . would statementb justiﬁ ? 6 . ’ see ﬂicker workstat screen display video ntsc frame rate . think might ? 7 . digit video use chroma subsampl . purpos ? feasibl ? 8 . salient differ ordinari tv hdtv/uhdtv ? main impetu develop hdtv/uhdtv ? 9 . advantag interlac video ? problem ? 10 . one solut remov problem interlac video de-interlac . overlay two ﬁeld obtain de-interlac imag ? suggest simpl de-interlac algorithm retain inform bothﬁeld . 11 . assum bit depth 12 bit per sampl , 120 fp , 4:2:2 chroma sub- samplng , bitrat 4k , 8k , 16k uhdtv video areuncompress ? 12 . equirectangular project ( erp ) , use prime meridian central meridian x=0 , equat central parallel y=0 , project coordin citi 31 .23 ◦n , 121 .47◦e ? 13 . assum use toed-in stereo camera model , interocular distanc , screen dmeter away , ( ) distanc point pgener posit parallax equal ion screen ? ( b ) distanc point p gener neg parallax equal −i ? 14 . common criterion use object imag qualiti assess psnr ( peak signal-to-nois ratio ) . 8-bit imag , psnr =10 log102552 mse ( 5.9 ) mse stand mean squar error origin imag imag compression.148 5 fundament concept video origin imag lossi imag compress ( ) ( b ) given : 50 50 50 50 200 200 200 200 50 50 60 80 170 190 200 200 50 50 50 50 200 200 200 200 50 50 60 80 170 190 200 200 50 50 50 50 200 200 200 200 50 50 60 80 170 190 200 20050 50 50 50 200 200 200 200 50 50 60 80 170 190 200 200 50 50 50 50 200 200 200 200 50 50 60 80 170 190 200 200 50 50 50 50 200 200 200 200 50 50 60 80 170 190 200 200 50 50 50 50 200 200 200 200 50 50 60 80 170 190 200 200 50 50 50 50 200 200 200 200 50 50 60 80 170 190 200 200 ( ) origin imag ( b ) lossi imag compress ( ) explain main reason loss sharp edg lossi imag compress . ( b ) psnr lossi imag ? ( c ) arbitrarili add intens valu 10 pixel lossi imag ( b ) , would psnr ? ( ) chang ( addit error ) ( c ) hardli notic visual , i.e. , bare affect perceiv imag qualiti . henc , often argu psnr best measur imag qualiti assessment.suggest method allevi impact chang measur psnr . 15 . give least three reason argu psnr necessarili good metric video qualiti assess . refer 1 . a.m. tekalp , digit video process , 2nd edn . ( prentic hall , 2015 ) 2 . a. bovik ( ed . ) , handbook imag video process , 2nd edn . ( academ press , 2010 ) 3 . j.f . blinn , ntsc : nice technolog , super color . ieee comput . graph . appl . 13 ( 2 ) , 17–23 ( 1993 ) 4 . c.a . poynton , technic introduct digit video ( wiley , new ork , 1996 ) 5 . j.f . blinn , world digit video . ieee comput . graph . appl . 12 ( 5 ) , 106–112 ( 1992 ) 6 . c.a . poynton , digit video hd : algorithm interfac , 2nd edn . ( elsevi , 2012 ) 7 . r.l . myer , display interfac : fundament standard ( wiley , 2002 ) 8 . c.l . fan , et al. , survey 360◦video stream : acquisit , transmiss , display . acm comput . surv . 52 ( 4 ) , 71:1–71:36 ( 2019 ) 9 . . ye , j.m . boyc , p . hanhart , omnidirect 360◦video code technolog respons joint call propos video compress capabl beyond hevc . ieee tran . circuit syst . video technol . 30 ( 5 ) , 1241–1252 ( 2020 ) 10 . iso/iec jtc1/sc29/wg11/n17197 , algorithm descript project format convers video qualiti metric 360lib . ( itu iso/iec , 2017 ) 11 . d.m . hoffman , a.r . girshick , k. akeley , m. . bank , v ergence-accommod conﬂict hinder visual perform caus visual fatigu . j. vi . 8 ( 3 ) ( 2008 ) refer 149 12 . t. shibata , j. kim , d.m . hoffman , m. . bank , zone comfort : predict visual dis- comfort stereo display . j. vi . 11 ( 8 ) ( 2011 ) 13 . b. mendiburu , 3d movi make : stereoscop digit cinema script screen . ( e l e v e r scienc , 2009 ) 14 . g. lippmann , la photographi integral . compt rendu academi de scienc 146 , 446– 451 ( 1908 ) 15 . m. levoy , p . hanrahan , light ﬁeld render , proceed intern confer comput graphic interact techniqu ( siggraph ) ( 1996 ) 16 . m. lang , a. hornung , o. wang , s. poulako , a. smolic , m. gross , nonlinear dispar map stereoscop 3d . acm tran . graph . 29 ( 4 ) ( 2010 ) 17 . p . burt , b. julesz , dispar gradient limit binocular fusion . scienc 208 ( 4444 ) , 615–617 ( 1980 ) 18 . r. ronfard , g. taubin ( ed . ) , imag geometri process 3-d cinematographi : introduct . ( springer , 2010 ) 19 . l. zhang , c. v azquez , s. knorr , 3d-tv content creation : automat 2d-to-3d video convers . ieee tran . broadcast . 57 ( 2 ) , 372–383 ( 2011 ) 20 . g. bjontegaard , calcul averag psnr differ rd-curv . technic report vceg-m33 ( 2001 ) 21 . itu-r rec . bt.500-13 . methodolog subject assess qualiti televis pictur . itu-r ( 2012 ) 22 . j.r. ohm , et al. , comparison code efﬁcienc video code standards—includ high efﬁcienc video code ( hevc ) . ieee tran . circ . syst . video technol . 22 ( 12 ) , 1669–1684 ( 2012 ) 23 . e. françoi , et al. , high dynam rang video code technolog respons joint call propos video compress capabl beyond hevc . ieee tran . circ . syst.video technol . 30 ( 5 ) , 1253–1266 ( 2020 ) 24 . . chen , k. wu , q. zhang , qo qoe : tutori video qualiti assess . ieee commun . surv . tutor . 17 ( 2 ) , 1126–1165 ( 2015 ) 25 . z. wang et al. , imag qualiti assess : error visibl structur similar . ieee tran . imag process . 13 ( 4 ) , 600–612 ( 2004 ) 26 . p . peng , d. liao , z.n . li , efﬁcient tempor distort measur video base spacetim textur . pattern recogn . 70 , 1–11 ( 2017 ) 27 . j. wang et al. , asymmetr compress stereoscop 3d video : qualiti assess rate-distort perform evalu . ieee tran . imag process . 26 ( 3 ) , 1330–1343 ( 2017 ) 6basic digit audio audio inform crucial multimedia present , sens , simplest type multimedia data . howev , import differ audio imag inform ignor . exampl , customari use occasion drop video frame video stream , facilitateview speed , simpli sound inform sens lost dimens . introduc basic concept sound multimedia chapter examin arcan detail compress sound informationin chap . 13and 14 . digit sound necessarili impli sampl quantiz signal , introduc topic . begin discuss make sound inform , go examin use midi enabl technolog captur , store , play back music note . go look detail audio quantiz , give introductori inform digit audio dealt storageor transmiss . entail ﬁrst discuss subtract signal predict valu yield number close zero , henc easier deal . 6.1 digit sound 6.1.1 sound ? sound wave phenomenon like light , macroscop involv moleculesof air compress expand action physic devic . exampl , speaker audio system vibrat back forth produc alongitudin pressur wave perceiv sound . ( exampl , let us use slinki place tabl . get longitudin wave vibrat slinki along length ; contrast , get transvers wave wave slinki back andforth perpendicular length . ) © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_6151152 6 basic digit audio without air sound—for exampl , space . sinc sound pressur wave , take continu valu , oppos digit one ﬁnite rang . nevertheless , wish use digit version sound wave , must formdigit represent audio inform . even though pressur wave longitudin , still ordinari wave properti behavior , reﬂect ( bounc ) , refract ( chang anglewhen enter medium differ densiti ) , diffract ( bend around obstacl ) . make design “ surround sound ” possibl . sinc sound consist measur pressur 3d point , detect measur pressur level locat , use transduc convert pressur voltag level . gener , signal decompos sum sinusoid , will use enough sinusoid . figur 6.1show weight sinusoid build quit complex signal . wherea frequenc absolut measur , pitch perceptu , subject qualiti sound . gener , pitch rel . pitch frequenc link set note middl c exactli 440 hz . octav note correspond doubl frequenc take us anoth note . thu , middl piano ( “ a4 ” “ a440 ” ) set 440 hz , next 880 hz , one octav , . given sound fundament frequenc f , deﬁn harmon music tone whose frequenc integr multipl fundament frequenc , i.e. , 2f,3f,4f , .. , etc . exampl , fundament frequenc ( also known ﬁrst harmon ) sf=100 hz , frequenc second harmon 200 hz . third harmon , 300 hz . harmon linearli combin form new signal . harmon period fundament frequenc , linear combin also period fundament frequency.figur 6.1show appear combin harmon . , allow ( integ noninteg ) multipl higher fun- dament frequenc , allow overton complex interest result sound . togeth , fundament frequenc overton refer asparti . harmon discuss also refer harmon partial . 6.1.2 digit figur 6.2show “ one-dimension ” natur sound . v alu chang time inamplitud : pressur increas decreas time [ 1 ] . sinc one independ variabl , time , call 1d signal—a oppos imag , data depend two variabl , xand , video , depend three variabl , x , , . amplitud valu continu quantiti . sinc inter- est work data comput storag , must digit theanalog signal ( i.e. , continuous-valu voltag ) produc microphon . digit mean convers stream numbers—prefer integ efﬁciency.6.1 digit sound 153 fundament frequenc + 0.5 × 2× fundament + 0.33 3× fundament + 0.25 × 4× fundament + 0.5 × 5× fundamental= === fig . 6.1 build complex signal superpos sinusoid fig . 6.2 analog signal : continu measur pressur wave timeamplitude154 6 basic digit audio timeamplitud ( ) timeamplitud ( b ) fig . 6.3 sampl quantiz : asampl analog signal time dimens ; bquan- tizat sampl analog signal amplitud dimens sinc graph fig . 6.2i two dimension , fulli digit signal shown sampl dimension—in time amplitud . sampl mean measur quantiti interest , usual evenli space interv . ﬁrst kind sampling—us measur evenli space time intervals—i simpli call sampl ( surprisingli ) , rate perform call thesampl frequenc . figur 6.3a show type digit . audio , typic sampl rate 8 khz ( 8,000 sampl per second ) 48 khz . human ear hear 20 hz ( deep rumbl ) much 20 khz ; level , enter rang ultrasound . human voic reach approxim 4 khz need bound sampl rate least doubl frequenc ( see discuss nyquist sampl rate , ) . thu , arriv use rang 8–40 khz . sampl amplitud voltag dimens call quantiz , shown fig . 6.3b . discuss uniform sampl , equal space sampl interv , nonuniform sampl possibl . use sampl time use quantiz ( see µ-law rule , ) . typic uniform quantiz rate 8 16 bit ; 8-bit quantiz divid vertic axi 256 level 16-bit quantiz divid 65,536 level . decid digit audio data , need answer follow question : 1 . sampl rate ? 2 . ﬁneli data quantiz , quantiz uniform ? 3 . audio data format ( i.e. , ﬁle format ) ? 6.1 digit sound 155 6.1.3 nyquist theorem know , sound made sinusoid . simpl illustr , fig . 6.4a show singl sinusoid : singl , pure , frequenc ( electron instrument creat bore sound ) . sampl rate equal actual frequenc , see fig . 6.4b fals signal detect : simpli constant , zero frequenc . , hand , sampl 1.5 time frequenc , fig . 6.4c show obtain incorrect ( alia ) frequenc lower correct one—it half correct one ( wavelength , peak peak , doubl actual signal ) . comput graphic , much effort aim mask alia effect variou method fig . 6.4 alias : aa singl frequenc ; bsampl exactli frequenc produc constant ; csampl 1.5 time per cycl produc alia frequenc perceiv ( ) ( b ) ( c ) 156 6 basic digit audio anti-alias . alia artifact belong origin signal . thu , correct sampl , must use sampl rate equal least twice maximum frequenc content signal . call nyquist rate . nyquist theorem name harri nyquist , famou mathematician work bell lab . gener , signal band limit —that , lower limit f1and upper limit f2of frequenc compon signal—then need sampl rate least 2 ( f2−f1 ) . suppos ﬁxed sampl rate . sinc would imposs recov frequenc higher half sampl rate event , system ananti-alias ﬁlter restrict frequenc content sampler ’ input rang half sampl frequenc . confusingli , frequenc equal half nyquist rate call nyquist frequenc . ﬁxed sampl rate , nyquist frequenc half sampl rate . highest possibl signal frequenc compon frequenc equal sampl . note true frequenc alia locat symmetr fre- quenci axi respect nyquist frequenc pertain sampl rate use . reason , nyquist frequenc associ sampl frequencyi often call “ fold ” frequenc . say , sampl frequenc less twice true frequenc , greater true frequenc , alia frequenc equal sampl frequenc minu true frequenc . exam-pl , true frequenc 5.5 khz sampl frequenc 8 khz , alia frequenc 2.5 khz : f alias=fsampl −ftrue , ftrue < fsampl < 2×ftrue ( 6.1 ) well , frequenc doubl frequenc could also ﬁt sampl point . fact , ad posit neg multipl sampl frequenc truefrequ alway give anoth possibl alia frequenc , alia give set sampl sampl sampl frequenc . , sampl frequenc less twice true frequenc less true frequenc , alia frequenc equal ntime sampl frequenc minu true frequenc , ni lowest integ make ntime sampl frequenc larger true frequenc . exampl , true frequenc 1.0 1.5 time sampl frequenc , alia frequenc equal true frequenc minu sampl frequenc . gener , appar frequenc sinusoid lowest frequenc sinusoid exactli sampl input sinusoid . figur 6.5show relationship appar frequenc input ( true ) frequenc . 6.1.4 signal-to-nois ratio ( snr ) analog system , random ﬂuctuat produc nois ad signal , measur voltag thu incorrect . ratio power correct signal toth nois call signal-to-nois ratio ( snr ) . therefor , snr measur qualiti signal.6.1 digit sound 157 fig . 6.5 fold sinusoid frequenc sampl 8,000 hz . fold frequenc , shown dash , 4,000 hz true frequenc ( khz ) appar frequenc ( khz ) 001234 2468 1 0 snr usual measur decibel ( db ) , 1 db tenth bel . snr valu , unit db , deﬁn term base-10 logarithm squar voltag : snr=10 log10v2 signal v2 noise=20 log10vsign vnois ( 6.2 ) power signal proport squar voltag . exampl , signal voltag vsignal ten time nois , snr 20 ×log10 ( 10 ) =20 db . term power , squeak hear ten violin play ten time squeak hear one violin play , ratio power given term decibel 10 db , , word , 1 bel . notic decibel alway deﬁn term ratio . term “ decibel ” appli sound environ usual comparison just-aud sound frequenc 1 khz . level sound hear around us describ term decibel , ratio quietest sound capabl hear . tabl 6.1show approxim level sound . tabl 6.1 magnitud common sound , decibelsthreshold hear 0 rustl leav 10 v eri quiet room 20 averag room 40 convers 60 busi street 70 loud radio 80 train station 90 rivet 100 threshold discomfort 120 threshold pain 140 damag eardrum 160158 6 basic digit audio 6.1.5 signal-to-quantization-nois ratio ( sqnr ) digit signal , must take account fact quantiz valu store . digit audio signal , precis sampl determin number bit per sampl , typic 8 16 . asid nois may present origin analog signal , addit error result quantiz . , voltag rang 0–1 8 bit store valu , effect forc continu valu voltag 256 differ valu . inevit , introduc roundofferror . although realli “ nois , ” call quantiz nois ( orquant error ) . associ concept nois error essenti occur randomli sampl sampl . qualiti quantiz character signal-to-quantization- nois ratio ( sqnr ) . quantiz nois deﬁn differ valu analog signal , particular sampl time , nearest quantiz interv valu . , error much half interv . quantiz accuraci nbit per sampl , rang digit signal is−2 n−1to 2n−1−1 . thu , actual analog signal rang −vmax to+vmax , quantiz level repres voltag 2 vmax/2n , rvmax/2n−1 . sqnr simpli express term peak signal , map toth level v signal 2n−1 , sqnr denomin maximum vquan_nois 1/2 . ratio two simpl deﬁnit sqnr1 : sqnr =20 log10vsign vquan_noise=20 log102n−1 1 2 =20×n×log 2=6.02n ( db ) ( 6.3 ) word , bit add 6 db resolut , 16 bit provid maximum sqnr 96 db . examin worst case . , hand , assum input signal sinusoid , , quantiz error statist independ , magnitud uniformli distribut 0 half interv , show [ 2 ] express sqnr becom sqnr =6.02n+1.76 ( db ) ( 6.4 ) sinc larger better , show realist approxim give better character number qualiti system . simul quantiz sampl , e.g. , draw valu sinusoid prob- abil function , verifi eq . ( 6.4 ) . deﬁn sqnr term rm ( root- mean-squar ) valu signal versu rm valu quantiz nois , thefollow tlab fragment inde compli eq . ( 6.4 ) : 1thi ratio actual peak signal-to-quantization-nois ratio , psqnr.6.1 digit sound 159 % sqnr_sinusoid.m % % simul verifi sqnr sinusoid % probabl densiti function . b = 8 ; % 8-bit quantiz signal q = 1/10000 ; % make sampl signal interv size 1/10001 e q= [ 0 : q:1 ] ; x = sin ( 2 * pi * seq ) ; % analog signal -- > 10001 sampl % quantiz : x8bit = round ( 2ˆ ( b-1 ) * x ) / 2ˆ ( b-1 ) ; % [ -128,128 ] /128= [ -1 , +1 ] quanterror = x - x8bit ; % sqnr = 20 * log10 ( sqrt ( mean ( x.ˆ2 ) ) /sqrt ( mean ( quanterror.ˆ2 ) ) ) % % 50.0189db sqnrtheori = 6.02 * b + 1.76 % 1.76=20 * log10 ( sqrt ( 3/2 ) ) % 49.9200db care eq . ( 6.4 ) actual prove analyt wish : error obey uniform-random probabl distribut rang [ −0.5,0.5 ] , rm ( root-mean-squar ) valu is/radicalbig/integraltext0.5 −0.5x2dx=1/√ 12 . assum signal sinusoid , sin ( 2πx ) =sinθ . multipli scalar valu , give rang sinusoid travel , i.e. , max minu min : d= [ ( 2n−1−1 ) − ( −2n−1 ) ] /similarequ 2n . sine curv multipli factor d/2 . rm valu signal is/radicalbig 1/ ( 2π ) /integraltext2π 0 ( 2sinθ ) 2dθ=d/ ( 2√ 2 ) . form ratio rm signal rm quantiz nois , get 20 log10 ( √ 12d/ ( 2√ 2 ) ) = 20 log10 ( d√3/2 ) = 20 log10 ( ) +20 log10 ( √3/2 ) = 20 log10 ( 2n ) +20 log10 ( √3/2 ) , give eq . ( 6.4 ) . typic digit audio sampl precis either 8 bit per sampl , equival telephon qualiti , 16 bit , cd qualiti . fact , 12 bit would like ﬁne adequ sound reproduct . 6.1.6 linear nonlinear quantiz mention sampl typic store uniformli quantiz values.thi call linear format . howev , limit number bit avail , may sensibl tri take account properti human percept andset nonuniform quantiz level pay attent frequenc rang human hear best . rememb quantiz magnitud , amplitude—how loud signal . chap . 4 , discuss interest featur mani human percept subsystem ( ) —weber ’ law—which state , propor- tionat must ad discern differ . state formal , weber ’ lawsay equal perceiv differ valu proport absolut level : /delta1respons ∝/delta1stimulu /stimulu ( 6.5 ) 160 6 basic digit audio mean , exampl , feel increas weight 10 11 pound , instead start 20 pound , would take 22 pound us feel increas weight . insert constant proportion k , differenti equat state dr=k ( 1/ ) ds ( 6.6 ) respons rand stimulu s. integr , arriv solut r=klns+c ( 6.7 ) constant integr c. state differ , solut r=kln ( s/s0 ) ( 6.8 ) s0i lowest level stimulu caus respons ( r=0 s=s0 ) . thu , nonuniform quantiz scheme take advantag perceptu characterist make use logarithm . idea log plot deriv eq . ( 6.8 ) , simpli take uniform step along s-axi , mirror nonlinear respons along r-axi . instead , would like take uniform step along r-axi . thu , nonlinear quantiz work ﬁrst transform analog signal raw sspace theoret rspace , uniformli quantiz result valu . result step near low end signal , quantiz step effect concentr s-axi , wherea larg valu , one quantiz step r encompass wide rang svalu . law audio call µ-law encod , u-law , sinc ’ easier write . similar rule , call a-law , use telephoni europ . equat similar encod method follow : µ-law : r=sign ( ) ln ( 1+µ ) ln/braceleftbigg 1+µ/vextendsingle/vextendsingle/vextendsingle/vextendsingl sp/vextendsingle/vextendsingle/vextendsingle/vextendsingle/bracerightbigg , /vextendsingle/vextendsingle/vextendsingle/vextendsingl sp/vextendsingle/vextendsingle/vextendsingle/vextendsingle≤1 ( 6.9 ) a-law : r=⎧ ⎪⎪⎨ ⎪⎪⎩a 1+lna/parenleftbig sp/parenrightbig , /vextendsingle/vextendsingle/vextendsingl sp/vextendsingle/vextendsingle/vextendsingle≤1 sign ( ) 1+lna/bracketleftbig 1+lna/vextendsingle/vextendsingle/vextendsingl sp/vextendsingle/vextendsingle/vextendsingle/bracketrightbig ,1 a≤/vextendsingle/vextendsingle/vextendsingl sp/vextendsingle/vextendsingle/vextendsingle≤1 ( 6.10 ) sign ( ) =/braceleftbigg1i f > 0 , −1 otherwis figur 6.6depict curv . paramet µ-law encod usual set toµ=100 µ=255 , paramet a-law encod usual set a=87.6.6.1 digit sound 161 −1−0.8−0.6−0.4−0.2 0 0.2 0.4 0.6 0.8 1−1−0.8−0.6−0.4−0.200.20.40.60.81 s/spr : μ−law −lawμ−law −law μ−law : μ=100 μ−law : μ=255 a−law : a=87.6 fig . 6.6 nonlinear transform audio signal , spi peak signal valu si current signal valu . far , simpli mean wish deal s/sp , rang −1t o1 . idea use type law s/spi ﬁrst transform valu r ri quantiz uniformli transmit store signal , avail bit use store inform chang signal appar human listen , perceptu nonuniform . see , consid small chang |s/sp|near valu 1.0 , curv fig . 6.6i ﬂattest . clearli , chang sha much larger ﬂat area near origin regist chang quantiz rvalu . quiet , low end hear best discern small chang s. µ-law transform concentr avail inform end . first , carri µ-law transform , quantiz result valu , nonlinear transform away input . logarithm step repres low-amplitud , quiet signal accuraci loud , high-amplitud one . mean signal encod ﬁxed number bit low-amplitud , quiet signal , amount noise—th error repres signal—i smaller number high-amplitud signal . therefor , µ-law transform effect make signal-to-nois ratio uniform across rang input signal . techniqu base human perception—a simpl form “ perceptu coder. ” interestingli , effect also made use statist sound like hear , gener low-volum rang . effect , ask bit assign sound occur—wher probabl densiti highest . type coder also one driven statistics.162 6 basic digit audio summari , logarithm transform , call “ compressor ” parlanc telephoni , appli analog signal sampl convert digit ( analog-to-digit , ad , convert ) . amount compress increas asth amplitud input signal increas . ad convert carri uniform quantiz “ compress ” signal . transmiss , sinc need analog hear sound , signal convert back , use digital-to-analog ( da ) convert , pass “ expand ” circuit revers logarithm . overal transform call compand . nowaday , compand also carri digit domain . µ-law audio use develop nonuniform quantiz rule sound . gener , would like put avail bit perceptu acuiti ( sensit small chang ) . ideal , bit alloc occur examin curv stimulu versu respons human . tri alloc bit level interv small chang stimulu produc larg chang respons . , idea compand reﬂect less speciﬁc idea use assign bit signal : put bit need deliv ﬁner resolut result perceiv . idea milit simpli use uniformquant scheme , instead favor nonuniform scheme quantiz . µ-law ( a-law ) audio applic idea . save bit gain transmit smaller bit depth signal , inde possibl without introduc much error . telephoni signal becam digit , found origin continuous-domain µ-law transform could use substanti reduct bit transmiss still producereasonable-sound speech upon expans receiv end . µ-law often start bit depth 16 bit , transmit use 8 bit , expand back 16 bit receiv . suppos use µ-law eq . ( 6.9 ) µ=255 . signal si normal rang [ −1,1 ] . input −2 15to ( +215−1 ) , divid 215to normal . µ-law appli turn sinto r ; follow reduc bit depth 8-bit sampl , use ˆr=sign ( ) ∗ﬂoor ( 128∗r ) . 8-bit signal ˆri transmit . , receiv side , normal ˆrbi divid 27 , appli invers function eq . ( 6.9 ) , follow : ˆs=sign ( ) /parenleftbigg ( µ+1 ) |ˆr|−1 µ/parenrightbigg ( 6.11 ) final , expand back 16 bit : ˜s=ceil ( 215∗ˆ ) . show t- lab function operations.6.1 digit sound 163 −4−3−2−1 0 1 2 3 4 x 104−4−3−2−101234x 104 signalreconstitut signal fig . 6.7 nonlinear quantiz compand function x_out = mu_law_8bitsf ( x ) % signal x 16-bit mu=255 ; xnormd = x/2ˆ15 ; y=sign ( x ) * ( ( log ( 1+mu * ab ( xnormd ) ) ) /log ( 1+mu ) ) ; y8bit = floor ( 128 * ) ; % transmit y8bitnormd = y8bit/2ˆ7 ; x_hat = sign ( x ) * ( ( ( mu+1 ) ˆab ( y8bitnormd ) -1 ) /mu ) ; % scale 16 bit : x_out = ceil ( 2ˆ15 * x_hat ) ; 216input valu , shown solid line fig . 6.7 , compand output valu shown staircas step , thicker line . inde , see compand put accuraci quiet end nearest zero.164 6 basic digit audio 6.1.7 audio filter prior sampl ad convers , audio signal also usual ﬁltere remov unwant frequenc . frequenc kept depend applic . speech , typic 50 hz 10 khz retain . frequenc block band-pass ﬁlter , also call band-limit ﬁlter , screen lower higher frequenc . audio music signal typic contain 20 hz 20 khz . ( twenti hz low rumbl produc upset eleph . twenti khz aboutth highest squeak hear. ) . band-pass ﬁlter music screen frequenc outsid rang . da convert end , even though remov high frequenc like nois event , reappear output . reason sampl quantiz , effect replac perhap smoothinput signal seri step function . theori , discontinu signal contain possibl frequenc . therefor , decod side , low-pass ﬁlter use da circuit , make use cutoff high-frequ endof coder ’ band-pass ﬁlter . 6.1.8 audio qualiti versu data rate uncompress data rate increas bit use quantiz . stereoinform , oppos mono , doubl bitrat ( bit per second ) need transmit digit audio signal . tabl 6.2show audio qualiti relat bitrat bandwidth . term bandwidth , deriv analog devic signal process , refer part respons transfer function devic approxim constant , ﬂat , x-axi frequenc y-axi equal transfer function . half-pow bandwidth ( hpbw ) refer bandwidth point power fall half maximum power . sinc 10 log 10 ( 1 2 ) ≈− 3.0 , term −3 db bandwidth also use refer hpbw . analog devic , bandwidth express frequenc unit , call hertz ( hz ) , cycl per second ( exampl , heartbeat per second ) . digit devic , hand , amount data transmit ﬁxed bandwidth usual express bitrat , i.e. , bit per second ( bp ) byte per amount time . contrast , comput network , term bandwidth refer data rate ( bp ) network transmiss link deliv . examin issu detail later chapter multimedia network . telephoni use µ-law ( may written “ u-law ” ) encod , a-law europ . format use linear quantiz . use µ-law rule shown eq . ( 6.9 ) , dynam range—th ratio highest lowest nonzero valu , express db valu 2nfor n-bit system , simpli state number bits—of digit telephon signal effect improv 8 bit 12 13.6.1 digit sound 165 tabl 6.2 bitrat bandwidth sampl audio applic qualiti sampl rate ( khz ) bit persampl mono/stereo bitrat ( ifuncom-press ) ( kb/ ) signalbandwidth ( hz ) telephon 8 8 mono 8 200–3,400 radio 11.025 8 mono 11.0 100–5,500 fm radio 22.05 16 stereo 88.2 20–11,000 cd 44.1 16 stereo 176.4 5–20,000 dvd audio 192 ( max ) 24 ( max ) 6channel 1,200.0 ( max ) 0–96,000 ( max ) standard sampl frequenc use audio 5.0125 , 11.025 , 22.05 , 44.1 khz , except , frequenc support sound card . sometim use rememb kind data rate tabl 6.2in term byte per minut . exampl , uncompress digit audio signal cd-qualiti stereo sound 10.6 megabyt per minute—roughli 10 megabytes—p minut . 6.1.9 synthet sound digit sound must still convert analog , us hear . twofundament differ approach handl store sampl audio . ﬁrst term fm , frequenc modul . second call wave tabl , wave , sound . ﬁrst approach , carrier sinusoid chang ad anoth term involv- ing second , modul frequenc . interest sound creat chang argument main cosin term , put second cosin insid argumentitself—then cosin cosin . time-vari amplitud “ envelop ” function multipli whole signal , anoth time-vari function multipli inner cosin , account overton . ad coupl extra constant , theresult function complex inde . exampl , fig . 6.8a show function co ( 2πt ) , fig . 6.8b anoth sinusoid twice frequenc . cosin cosin interest function fig . 6.8c , ﬁnalli , carrier ( angular ) frequenc 2 πand modul ( angular ) frequenc 4 π , much interest curv fig . 6.8d . obvious , consid complex signal , follow [ 3 ] : x ( ) =a ( ) co [ ω ct+i ( ) co ( ωmt+φm ) +φc ] ( 6.12 ) creat complic signal . fm synthesi equat state make signal use basic carrier frequenc ωcand also use addit , modul frequenc ωm . fig . 6.8d,166 6 basic digit audio 00.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1−1−0.8−0.6−0.4−0.200.20.40.60.81 timemagnitudeco ( 2 π ) ( ) 00.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1−1−0.8−0.6−0.4−0.200.20.40.60.81 timemagnitudeco ( 4 π ) ( b ) 00.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1−1−0.8−0.6−0.4−0.200.20.40.60.81 timemagnitudeco ( co ( 4 π ) ) ( c ) 00.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1−1−0.8−0.6−0.4−0.200.20.40.60.81 timemagnitudeco ( 2 π t+co ( 4 π ) ) ( ) fig . 6.8 frequenc modul : aa singl frequenc ; btwice frequenc ; cusual , fm carri use sinusoid argument sinusoid ; da complex form aris carrier frequenc 2 πand modul frequenc 4 πcosin insid sinusoid valu ωc=2πandωm=4π . phase constant φmandφccreat time- shift interest sound . time-depend function ( ) call envelop —it speciﬁ overal loud time use fade fade sound . guitar string attack period , decay period , sustain period , ﬁnalli releas period . shown fig . 6.10 . final , time-depend function ( ) use produc feel harmon ( “ overton ” ) chang amount modul frequenc heard . ( ) small , hear mainli low frequenc , ( ) larger , hear higher frequenc well . fm synthesi use low-end sound card , also provid mani sound card provid backward compat . accur way gener sound digit signal call wave-t synthesi . techniqu , digit sampl store sound real instrument . sinc wave tabl store memori sound card , manipul softwar sound combin , edit , enhanc . sound reproduct good deal better wave tabl fm synthesi . save memori space,6.1 digit sound 167 varieti special techniqu , sampl loop , pitch shift , mathemat interpol , polyphon digit ﬁltere , appli [ 4,5 ] . exampl , use abl chang key—suppos song bit high voic . wave tabl mathemat shift produc lower-pitch sound . howev , kind extrapol use far without sound wrong . wave tabl often includ sampl variou note theinstrument , key chang need stretch far . wave-t synthesi expens fm synthesi , partli data storag need much larger . hand , storag becom much less expens , iti possibl compress wave-t data , , nonetheless , clearli simpl trick one accomplish easili use compact formul fm synthesi , wherea make chang particular wave tabl good deal complex . nevertheless , advent cheap storag , wave data becom gener use , includ ring tone . 6.2 midi : music instrument digit interfac wave-t ﬁle provid accur render real instrument sound arequit larg . simpl music , might satisﬁ fm synthesi versionsof audio signal could easili gener sound card . essenti everi comput equip sound card ; sound card capabl manipul output sound speaker connect board , record sound inputfrom microphon line-in connect comput , manipul sound store memori . will satisﬁ sound card ’ default mani sound wish includ multimedia project , use simpl script languag hardwar setup call midi . 6.2.1 midi overview midi , date earli 1980 , acronym stand music instrument digit interfac . form protocol adopt electron music industri enabl comput , synthes , keyboard , music devic commun . synthes produc synthet music includ sound card , use one two method discuss . midistandard support synthes , sound creat one play manipul anoth sound reason close . comput must special midi interfac , incorpor sound card . soundcard must also da ad convert . midi script language—it code “ event ” stand product certain sound . therefor , midi ﬁle gener small . exampl , amidi event might includ valu pitch singl note , volum , instrument sound play.168 6 basic digit audio role midi . midi make music note ( among capabl ) , use invent , edit , exchang music idea encapsul note . quit differ idea sampl , speciﬁc actual sound arecaptur . instead , midi aim music , alter “ user ” wish . sinc midi intim relat music composit ( music notat ) program , midi use vehicl music educ . one strong capabl midi-bas music commun avail singl midi instrument control midi instrument , allow master– slave relationship : midi instrument must play music , part , master instrument , thu allow interest music . midi instrument may includ excel , poor , music capabl . exampl , suppos keyboard mimic tradit instrument well , gener poor actual sound built- synthes . “ daisy-chain ” differ synthes , one gener excel sound , may make overal good combin . sinc midi come witha built-in timecod , master ’ clock use synchron slave timecod , make exact synchron . so-cal “ sequencer-sampl ” use reorder manipul set digital-audio sampl and/or sequenc midi . digit audio workstat , run protool , exampl , multitrack record possibl , either sequenti concurr . exampl , one could simultan record eight vocal tracksand eight instrument track . midi concept •music organ track sequenc . track turn record play back . usual , particular instrument associ midi channel . midi channel use separ messag . 16 channel , number 1 16 . idea channel associ particular instrument—for exampl , channel 1 piano , channel 10 drum . nevertheless , switch instrument midstream , desir , andassoci anoth instrument channel . •along channel messag ( includ channel number ) , sever type messag sent , gener messag instrument indicatinga chang tune time ; call system messag . also possibl send special messag instrument ’ channel allow send mani note without channel speciﬁ . describ messag detail later . •the way synthet music instrument respond midi messag usual simpli ignor “ play sound ” messag channel . sever messag channel , say sever simultan note play apiano , instrument respond , provid multi-voic —that , play singl note once.6.2 midi : music instrument digit interfac 169 midi terminolog •asynthes , still , stand-alon sound gener vari pitch , loud , tone color . ( pitch music note instrument plays—a c , oppos g , say . wherea frequenc hz absolut musi- cal sound , pitch rel , e.g. , tune guitar may sound ﬁne butnot absolut note anoth guitar . ) also chang addit music characterist , attack delay time . good ( musician ’ ) synthe- sizer often microprocessor , keyboard , control panel , memori , on.howev , inexpens synthes also includ pc sound card . unit gener sound refer tone modul sound modul . •asequenc start special hardwar devic store edit sequenc music event , form midi data . often softwar music editor comput . •amidi keyboard produc sound , instead gener sequenc midi instruct , call midi messag ( also includ synthes gener- ate sound ) . midi messag rather like assembl code usual consistof byte . store sequenc midi messag , might 3 min music , say , store 3 kb . comparison , wave-t ﬁle ( w v ) store 1 minut music 10 mb . midi parlanc , keyboard refer toa keyboard control . •it easi confus term voic term timbr . latter midi terminolog instrument tri emulate—for exampl , apiano oppos violin . qualiti sound . instrument ( sound card ) multi-timbr capabl play mani differ sound time , ( e.g. , piano , brass , drum ) . •on hand , term “ voic , ” sometim use musician mean thing timbr , use midi mean everi differ timbr pitch tone modul produc time . synthes mani ( typic 16 , 32 , 64 , 256 , etc . ) voic . voic work independ simultan produc sound differ timbr pitch . •the term polyphoni refer number voic produc time . typic tone modul may abl produc “ 64 voic polyphoni ” ( 64 differ note ) “ 16-part multi-timbr ” ( produc soundslik 16 differ instrument ) . midi speciﬁc differ timbr produc digit use patch , set control set deﬁn particular timbr . patch often organ databas , call bank . true aﬁcionado , softwar patch editor avail . standard map specifi instrument ( patch ) associ channel agre call gener midi . general170 6 basic digit audio transmit devicesynthesizer0 11101110 0 0 10110011 0 0 110111010 one bytestart bitstop bit fig . 6.9 stream 10-bit byte ; typic midi messag , consist { statu byte , data byte , data byte } = { note , note number , note v eloc } fig . 6.10 stage amplitud versu time music note decayattack tamplitud note onnot releasesustain midi , 128 patch associ standard instrument , channel 10 reserv percuss instrument . instrument , typic messag might note ( mean , e.g. , keypress ) , consist channel , pitch , veloc ( i.e. , volum ) . percuss instrument , pitch data mean kind drum . note messag thu consist statu byte—which channel , pitch—follow two data byte . follow note messag ( key releas ) , also pitch ( note turn ) —for consist , one supposes—a veloc ( often set zero ignor ) . data midi statu byte 128 255 ; data byte 0 127 . actual midi byte 8 bit , plu 0 start stop bit , make 10-bit “ bytes. ” figur 6.9show midi data stream . midi devic often capabl programm , mean ﬁlter avail chang bass trebl respons also chang “ enve- lope ” describ amplitud sound chang time . figur 6.10 show model digit instrument ’ respons note on/not messag . midi sequenc ( editor ) allow work standard music notat get right data , desir . midi ﬁle also store wave-t data . advantage6.2 midi : music instrument digit interfac 171 wave-t data ( w v ﬁle ) much precis store exact sound instrument . sampler use sampl audio data—for exampl , “ drum machin ” alway store wave-t data real drum . one could musiceditor use midi one track plu digit audio vocal , say , anoth track . interest comput scienc engin student fact midi provid full messag protocol use whatev one like , exampl , control light theater . shall see midi messag send kind number byte , use asth programm desir . sequenc employ sever techniqu produc music actual avail . exampl , loop ( repeat ) bar less convinc . v olum easili control time—thi call time- vari amplitud modul . interestingli , sequenc also accomplish time compress expans pitch chang . possibl chang pitch sampl instrument , key chang larg , result sound begin sound displeas . reason , samplersemploy multisampl . sound record use sever band-pass ﬁlter , result record assign differ keyboard key . make frequenc shift chang key reliabl , sinc less shift involv note . midi machin control ( mmc ) subset midi speciﬁc use control record equip , e.g. , multitrack record . common use facil effect press “ play ” remot devic . anexampl usag would midi devic poor timer , master could activ right time . gener , midi use control synchron music instrument synthes record equip , evencontrol light . 6.2.2 hardwar aspect midi midi hardwar setup consist 31.25 kbp ( kilobit per second ) serial con- nection , 10-bit byte includ 0 start stop bit . usual , midi-cap unit either input devic output devic , . figur 6.11 show tradit synthes . modul wheel add vibrato . pitch bend alter frequenc , much like pull guitar string slightli . often control , foot pedal , slider , . physic midi port consist 5-pin connector label also third connector , thru . last data channel simpli copi data enter channel . midi commun half-duplex . midi theconnector via devic receiv midi data . midi connector devic transmit midi data gener . midi thru connector devic echo data receiv midi ( andonli that—al data gener devic sent via midi ) . these172 6 basic digit audio keyboard modul wheelpitch bend wheel fig . 6.11 midi synthes fig . 6.12 typic midi setup master keyboard midi modul midi modul b thru thru thru etc . port sound card interfac extern , either separ card use special interfac serial port . figur 6.12 show typic midi sequenc setup . , midi keyboard connect midi synthes thru addit sound modul . record , keyboard-equip synthes send midi messag sequenc , record . playback , messag sent sequenc sound modul synthes , play music.6.2 midi : music instrument digit interfac 173 midi messag transmiss 31.25 kbp data rate actual quit restrict . initi play note , 3-byte messag sent ( byte equal 10 bit ) . hand play chord ten ﬁnger , singl crash chord take ten note 30 bit , requir transmiss 300 bit . 31.25 kbp transmiss chord willtak 0.01 , speed 0.001 per note—and count addit messag ’ send turn offthes ten note . moreov , use pitch bend modul wheel synthes could gener manymessag well , take time transmit . henc , could audibl time lag gener slow bit transmiss rate . trick use tackl problem call run statu : midi allow send data , provid command previou messag chang . instead 3 bytes—command , data , data—midi would use 2 byte nextmessag command . 6.2.3 structur midi messag midi messag classiﬁ two type , fig . 6.13 —channel messag system messages—and classiﬁ shown . type messag examin . channel messag . channel messag 3 byte ; ﬁrst statu byte ( opcod , ) , signiﬁc bit set 1 . four least signiﬁc bit ( lsb ) identifi 16 possibl channel messag belong to,2with three remain bit hold messag . data byte , signiﬁc bit set zero . voic messag . type channel messag control voice—that , send infor- mation specifi note play turn off—and encod key pressur . v oic messag also use specifi control effect , sustain , vibrato , tremolo , pitch wheel . tabl 6.3list oper . fornot andnot messag , veloc quickli key play . typic , synthes respond higher veloc make note louder brighter . note make note occur , synthes also attempt make thenot sound like real instrument note play . pressur messag use alter sound note play . channel pressur messag forc measur key speciﬁc channel ( instrument ) hasan ident effect note play channel . pressur messag , polyphon key pressur ( also call key pressur ) , speciﬁ much volum key 2the hexadecim number deriv four lsb rang 0 15 . practic , musician softwar refer midi channel 1 16 , differ 1 code hexadecim , e.g. , channel 1 code “ 0 , ” channel 16 code “ f. ” 174 6 basic digit audio mode messag common messag exclus messagesreal-tim messagesvoic messag system messagesmidi messageschannel messag fig . 6.13 midi messag taxonomi tabl 6.3 midi voic messag v oic messag statu byte data byte1 data byte2 note & h8n key number note veloc note & h9n key number note veloc polyphon key pressur & han key number amount control chang & hbn control number control valu program chang & hcn program number none channel pressur & hdn pressur valu none pitch bend & hen msb lsb & h indic hexadecim , nin statu byte hex valu stand channel number . valu 0 .. 127 except control number , 0 .. 120 play togeth differ note chord . pressur also call aftertouch . control chang instruct set variou control ( fader , vibrato , etc. ) . manufactur may make use differ control number differ task . how- ever , control 1 like modul wheel ( vibrato ) . exampl , note messag follow 2 byte , one identifi note one specifi veloc . therefor , play note number 80 maximum veloc channel 13 , midi devic would send follow three hex byte valu : & h9c & h50 & h7f . ( explain earlier , “ & hc ” refer channel 13 , 12 . ) note number middl c number 60 . play two note simultan ( effect ) , ﬁrst , would send program chang messag two channel . recal program chang mean load particular patch channel . far , attach two timbr two differ channel . send two note messag ( serial ) would turn channel . altern , could also send note messag particular channel anoth note messag , anoth pitch , send note messag ﬁrst note . would play two note effect time instrument . recal run statu method allow one send one statu byte , e.g. , note messag , follow stream data byte associ statu byte . instanc , note messag channel 1 , “ & h90 , ” could6.2 midi : music instrument digit interfac 175 tabl 6.4 midi mode messag first data byte descript mean second data byte & h79 reset control none ; set 0 & h7a local control 0 = ; 127 = & h7b note none ; set 0 & h7c omni mode none ; set 0 & h7d omni mode none ; set 0 & h7e mono mode ( poli mode ) control number & h7f poli mode ( mono mode ) none ; set 0 follow two data byte indic tabl 6.3 . run statu need send anoth note instead simpli keep send data byte pair next stream note data . well , fact , run statu anothertrick : veloc data byte 0 note messag interpret note . henc , one send singl “ & h90 ” follow numer note note dataset . , exampl , note , note pair play middl con channel 1 could sent & h90 & h3c & h7f ; & h3c & h00 ( middl c note number 60 = “ & h3c ” ) . polyphon pressur refer much forc simultan note sever instrument . channel pressur refer much forc singl note one instrument . channel mode messag . channel mode messag form special case control chang messag , therefor mode messag opcod b ( messag “ & hbn , ” 1011nnnn ) . howev , channel mode messag ﬁrst data bytein 121 127 ( & h79–7f ) . channel mode messag determin instrument process midi voic messag . exampl includ respond messag , respond correctchannel , ’ respond , go local control instrument . recal statu byte “ & hb n , ” ni channel . data byte mean shown tabl 6.4.local control mean keyboard disconnect synthes ( anoth , extern , devic use control sound ) . note handi command , especi , sometim happen , bug aris note left play inadvert . omni mean devic respond messag channel . usual mode omni off—pay attent messag , respond everi messag regardlessof channel . poli mean devic play back sever note request . usual mode poli . poli off—monophon mode—th argument repres number monophon channel valu zero , case default number voic receiv play ; may set speciﬁc number channel . howev , exact mean combin omni on/off mono/poly176 6 basic digit audio tabl 6.5 midi system common messag system common messag statu byte number data byte midi time code & hf1 1 song posit pointer & hf2 2 song select & hf3 1 tune request & hf6 none eox ( termin ) & hf7 none tabl 6.6 midi system real-tim messag system real-tim messag statu byte time clock & hf8 start sequenc & hfa continu sequenc & hfb stop sequenc & hfc activ sens & hfe system reset & hff depend speciﬁc combin , four possibl . sufﬁc say usual combin omni , poli . system messag . system messag channel number meant command channel speciﬁc , time signal synchron , posit inform prerecord midi sequenc , detail setup informa- tion destin devic . opcod system messag start “ & hf. ” system messag divid three classiﬁc , accord use . system common messag . tabl 6.5set messag , relat time posit . song posit measur beat . messag determin play upon receipt “ start ” real-tim messag ( see ) . system real-tim messag . tabl 6.6set system real-tim messag , relat synchron . system exclus messag . ﬁnal type system messag , system exclus messag , includ manufactur extend midi standard . theiniti code “ & hf0 , ” insert stream speciﬁc messag appli product . system exclus messag suppos termin termin byte “ & hf7 , ” speciﬁ tabl 6.5 . howev , termin option , data stream may simpli end send statu byte next message.6.2 midi : music instrument digit interfac 177 6.2.4 midi-to-wav convers program , earli version adob premier , includ midi ﬁles—instead , insist w v format ﬁle . v ariou sharewar program approxim reason convers format . program essen- tialli consist larg lookup ﬁle tri reason job substitutingpredeﬁn shift w v output midi messag , inconsist suc- cess . 6.2.5 gener midi midi music sound less everi machin , would least like patch number associ instrument , exam-pl , patch 1 alway piano , ﬂugelhorn . end , gener midi [ 5 ] scheme assign instrument patch number . standard percuss map also speciﬁ 47 percuss sound , “ note ” appear musicalscor determin percuss element struck . book ’ websit includ gener midi instrument path map percuss key map . requir gener midi compat midi devic must support 16 channel ; must multi-timbr ( i.e. , channel play differ instrument/program ) ; must polyphon ( i.e. , channel abl play mani voic ) ; must minimum 24 dynam alloc voic . gener midi level2 extend gener midi , gm-2 , deﬁn 1999 updat 2003 , astandard smf standard midi file format deﬁn . nice extens inclus extra charact inform , karaok lyric , display good sequenc . 6.2.6 midi 2.0 35 year midi 1.0 , signiﬁc updat midi standard evolvedfrom gener level2 , entitl midi 2.0 . principl new standard setout januari 2020 collabor googl , microsoft , yamaha , other , auspic midi associ [ 6 ] . propos chang follow : •the old slow 5-pin midi connector/c replac usb . •the total number channel increas 16 256 , organ 16 group 16 channels.178 6 basic digit audio •while number pitch valu remain 128 , possibl veloc valu increas 128 65,536 , i.e. , use 7 16 bit . •midi 2.0 messag longer restrict old 2- 3-byte messag statu data byte . sent univers midi packet , length 32 , 64 , 96 , 128 bit depend type messag . •midi-ci ( midi capabl inquiri ) creat take care protocol negoti backward compat midi 1.0 . 6.3 quantiz transmiss audio transmit , sampl audio inform must digit , lookat detail process . inform quantiz , transmit store . go exampl complet detail , help understand discuss . 6.3.1 code audio quantiz transform data collect known code data . audio , µ-law techniqu compand audio signal usual combin simpl algorithm exploit tempor redund present audio signal . differ signal present previou time effectivelyreduc size signal valu , import , concentr histogram pixel valu ( differ , ) much smaller rang . result reduc varianc valu lossless compress method produc bitstream withshort bit length like valu , introduc chap . 7 , fare much better produc greatli compress bitstream . gener , produc quantiz sampl output audio call puls code modul orpcm . differ version call dpcm ( crude efﬁ- cient variant call dm ) . adapt version call adpcm , variant take account speech properti follow . complex model foraudio outlin chap . 13 . 6.3.2 puls code modul pcm gener audio analog—th wave hear travel air reach eardrum . know basic techniqu creat digit signal analog one consist ofsampl andquant . sampl invari done uniformly—w select sampl rate produc one valu sampl time.6.3 quantiz transmiss audio 179 magnitud direct , digit quantiz , select breakpoint magnitud remap valu within interv one repres output level . set interv boundari sometim call decis boundari , repres valu call reconstruct level . say boundari quantiz input interv map output level form coder map , repres valu output valu quantiz decod map . sinc quantiz , may choos creat either accur less accur represent sound magnitud valu . final , may wish compress data , assign bitstream use fewer bit preval signal valu . everi compress scheme three stage : 1.transform . input data transform new represent easier efﬁcient compress . exampl , predict code ( discussedlat chapter ) , predict next signal previou one transmit predict error . 2.loss . may introduc loss inform . quantiz main lossi step . use limit number reconstruct level , fewer origin signal . therefor , quantiz necessit loss inform . 3.code . , assign codeword ( thu form binari bitstream ) output level symbol . could ﬁxed-length code variable-length code , huffman code ( discuss chap . 7 ) . audio signal , ﬁrst consid pcm , digit method enabl us consid lossless predict code well dpcm scheme ; method usedifferenti code . also look adapt version , adpcm , meant provid better compress . puls code modul formal term sampl quantiz alreadi use . puls come engin ’ point view result digit signal thought inﬁnit narrow vertic “ pulses. ” exampl pcm , audio sampl cd sampl rate 44.1 khz , 16 bit persampl . stereo sound , two channel , amount data rate 1,400 kbp . pcm speech compress recal sect . 6.1.6 consid compand so-cal compressor expand stage speech signal process , telephoni . applic , signal ﬁrst transform use µ-law ( a-law europ ) rule essenti logarithm scale . pcm , use uniform quantiz , appli . result ﬁner increment sound volum use low- volum end speech rather high-volum end , ’ discernsmal chang event.180 6 basic digit audio assum bandwidth speech 50 hz 10 khz , nyquist rate would dictat sampl rate 20 khz . use uniform quantiz without compand , minimum sampl size could get away would like beabout 12 bit . henc , mono speech transmiss bitrat would 240 kbp . compand , safe reduc sampl size 8 bit perceiv level qualiti thu reduc bitrat 160 kbp . howev , thestandard approach telephoni assum highest frequenc audio signal want reproduc 4 khz . therefor , sampl rate 8 khz , compand bitrat thu reduc 64 kbp . must also address two small wrinkl get compar simpl form speech compress right . first sound 4 khz consid , frequenc content must nois . therefor , remov high- frequenc content analog input signal . done use band-limit ﬁlter block high frequenc well low one . “ band ” not-remov ( “ pass ” ) frequenc wish keep . type ﬁlter therefor also call band-pass ﬁlter . second , arriv puls signal , one fig . 6.14 , must still perform digital-to-analog convers construct output analog signal . signal arriv effect staircas shown fig . 6.14 b . type discontinu signal contain frequenc compon due originalsign , sharp corner , also theoret inﬁnit set higher frequenc compon ( theori fourier analysi , signal process ) . know higher frequenc extran . therefor , output digital-to-analog convert turn pass low-pass ﬁlter , allow frequenc origin maximum retain . figur 6.15 show complet scheme encod decod telephoni signal schemat . result low-pass ﬁltere , output becom smooth , fig . 6.14 c show . simplic , fig . 6.14 show effect compand . a-law µ-law pcm code use older intern telegraph telephon consult committe ( ccitt ) standard g.711 , digit telephoni . ccitt standard subsum standard promulg newer orga-n , intern telecommun union ( itu ) . 6.3.3 differenti code audio audio often store simpl pcm form exploit differ . fora start , differ gener smaller number henc offer possibl use fewer bit store . advantag form differ histogram differ signal usual consider peak histogram origin signal . exampl , extrem case , histogram linear ramp signal constant slope uniform , wherea histogram deriv signal ( i.e. , the6.3 quantiz transmiss audio 181 tamplitud ( ) ( c ) ( b ) origin signal pcm signal amplitud amplitud 234 −4−3−2−101234 1−4−3−2−101234 −4−3−2−10 fig . 6.14 puls code modul ( pcm ) : aorigin analog signal correspond pcm signal ; bdecod staircas signal ; creconstruct signal low-pass ﬁltere bandlimit filterlinear pcm transmiss low-pass filterdigital-to-analog converterinput analog speech signal output analog speech signal-law a-law compressor -law a-law expand fig . 6.15 pcm signal encod decoding182 6 basic digit audio differ , sampl point sampl point ) consist spike slope valu . gener , time-depend signal consist time ( tempor redund ) , differ signal—subtract current sampl previ- ou one—wil peak histogram , maximum around zero . conse- quentli , go assign bitstr codeword differ , assignshort code preval valu long codeword rare occur one . begin , consid lossless version scheme . loss aris quantiz . appli quantiz , still compression—via thedecreas varianc valu occur differ , compar origi- nal signal . chapter 7introduc sophist version lossless compress method , help see simpl version well . quantiz , predic- tive code becom dpcm , lossi method ; ’ also tri scheme . 6.3.4 lossless predict code predict code simpli mean transmit differences—w predict next samplea equal current sampl send sampl error involv make assumpt . , predict next sampleequ previou one , error differ previou next . predict scheme could also complex . howev , note one problem . suppos integ sampl valu rang 0 .. 255 . differ could much −255 .. 255 . unfortun increas dynam rang ( ratio maximum minimum ) factor two : may well need bit need transmit somediffer . fortun , use trick get around problem , shall see . , basic , predict code consist ﬁnding differ transmit , use pcm system one introduc sect . 6.3.2 . first , note differ integ least integ . let ’ formal statement whatw deﬁn integ signal set valu f n. predict valu ˆfna simpli previou valu , deﬁn error ena differ actual predict signal : ˆfn=fn−1 en=fn−ˆfn ( 6.13 ) certainli would like error valu ento small possibl . therefor , would wish predict ˆfnto close possibl actual signal fn.b u particular sequenc signal valu , function previou valu , fn−1 , fn−2 , fn−3 , etc. , may provid better predict fn . typic , a6.3 quantiz transmiss audio 183 linear predictor function use : ˆfn=2t o4/summationdisplay k=1an−kfn−k ( 6.14 ) predictor follow truncat round oper result integ valu . fact , sinc coefﬁcient an−kavail , even chang adapt ( see sect . 6.3.7 ) . idea form differ make histogram sampl valu peak . exampl , fig . 6.16 plot 1 sampl speech 8 khz , magnitud resolut 8 bit per sampl . histogram valu center around zero , fig . 6.16 b . figur 6.16 c show histogram correspond speech signal differ : differ valu much cluster around zero sampl valu . result , method assign short codeword frequent occur symbol assign short code zero rather well . code scheme much efﬁcient code sampl differ sampl , similar statementappli use sophist predictor simpli previou signal valu . howev , still left problem , reason , particular set differ valu inde consist except larg differ . clever solut difﬁculti involv deﬁn two new code add list differ valu , denot suandsd , stand shift-up shift-down . special valu reserv . suppos sampl rang 0 .. 255 , differ −255 .. 255 . deﬁn suandsda shift 32 . could , fact , produc codeword limit set signal differ , say rang −15 .. 16 . differ ( inher rang −255 .. 255 ) lie limit rang code , add extra two valu su , sd , valu outsid rang −15 .. 16 transmit seri shift , follow valu inde insid range−15 .. 16 . exampl , 100 transmit su , su , su , 4 , ( code ) suand 4are sent . lossless predict code … lossless ! , decod produc signal origin . help consid explicit scheme codingconsider , let ’ ( ’ use complic scheme , ’ tri carri entir calcul ) . simpl exampl , suppos devis predictor ˆf na follow : ˆfn=⌊1 2 ( fn−1+fn−2 ) ⌋ en=fn−ˆfn ( 6.15 ) error en ( codeword ) actual transmit . let ’ consid explicit exampl . suppos wish code sequenc f1 , f2 , f3 , f4 , f5= 21 , 22 , 27 , 25 , 22 . purpos predictor , ’ invent an184 6 basic digit audio fig . 6.16 differenc concentr histogram : adigit speech signal ; bhistogram digit speech signal valu ; chistogram digit speech signal differ ( ) sampl valuecount −1.0− −0.5 0.00.0 0 2000 8000 4000 6000 0.50.04 0.04 1.0 ( b ) sampl differencecount −1.0 −0.5 0.0 0.5 1.0 ( c ) samplesmagnitude6.3 quantiz transmiss audio 185 fn fˆnpredictor−+ en + ( ) + predictorfnreconstruct fˆnen ( b ) fig . 6.17 schemat diagram predict code : aencod ; bdecod extra signal valu f0 , equal f1=21 , ﬁrst transmit initi valu , uncod ; , everi code scheme extra expens header inform . ﬁrst error , e1 , zero , subsequ ˆf2=21 , e2=22−21=1 ˆf3=⌊1 2 ( f2+f1 ) ⌋=⌊1 2 ( 22+21 ) ⌋= 21 e3=27−21=6 ˆf4=⌊1 2 ( f3+f2 ) ⌋=⌊1 2 ( 27+22 ) ⌋= 24 e4=25−24=1 ˆf5=⌊1 2 ( f4+f3 ) ⌋=⌊1 2 ( 25+27 ) ⌋= 26 e5=22−26=− 4 ( 6.16 ) error center around zero , see , code ( assign bitstr codeword ) efﬁcient . figur 6.17 show typic schemat diagram use encapsul type system . notic predictor emit predict valu ˆfn . invari ( annoyingli ) left schemat fact predictor base fn−1 , fn−2 , ... therefor , predictor must involv memori . least , predictor includ circuit incorpor delay signal , store fn−1.186 6 basic digit audio 6.3.5 dpcm differenti puls code modul exactli predict code , except incorpor quantiz step . quantiz pcm uniform nonuniform . one scheme analyt determin best set nonuniform quantiz step lloyd–max quantiz , name stuart lloyd joel max , base least-squar minim error term . adopt nomenclatur signal valu . shall call origin signal fn , predict signal ˆfn , quantiz , reconstruct signal ˜fn . dpcm oper form predict , form error enbi subtract predict actual signal , quantiz error quantiz version , ˜en . equat describ dpcm follow : ˆfn=function _of ( ˜fn−1 , ˜fn−2 , ˜fn−3 , ... ) en=fn−ˆfn ˜en=q [ en ] ( 6.17 ) transmit codeword ( ˜en ) reconstruct : ˜fn=ˆfn+˜en codeword quantiz error valu ˜enar produc use entropi code , huffman code ( discuss chap . 7 ) . notic predictor alway base reconstruct , quantiz version signal : reason encod side use inform avail decod side . gener , mistak made use actual signal fnin predictor instead reconstruct one ˜fn , quantiz error would tend accumul could get wors rather center zero . main effect coder–decod process produc reconstruct , quan- tize signal valu ˜fn=ˆfn+˜en . “ distort ” averag squar error [ /summationtextn n=1 ( ˜fn−fn ) 2 ] /n , one often see diagram distort versu number bit level use . lloyd–max quantiz better ( less distort ) thana uniform quantiz . signal , want choos size quantiz step correspond rang ( maximum minimum ) signal . even use auniform , equal-step quantiz natur better follow practic . speech , could modifi quantiz step go , estim mean varianc patch signal valu shift quantiz step accordingli , everi block signal valu . , start time iwe could take block nvalu f nand tri minim quantiz error : mini+n−1/summationdisplay n=i ( fn−q [ fn ] ) 2 ( 6.18 ) sinc signal differ peak , could model use laplacian probabl distribut function , also strongli peak zero [ 7 ] : looks6.3 quantiz transmiss audio 187 quantiz − binari stream+symbol coder predictor +fn fˆn fnen en ( ) binari streamfn reconstruct predictorsymbol decod + fˆnen ( b ) fig . 6.18 schemat diagram dpcm : aencod ; bdecod like l ( x ) = ( 1/√ 2σ ) exp ( −√ 2|x|/σ ) , varianc σ2 . typic , assign quantiz step quantiz nonuniform step assum signal differ , dn , say , drawn distribut choos step minim mini+n−1/summationdisplay n=i ( dn−q [ dn ] ) 2l ( dn ) ( 6.19 ) least-squar problem solv iter use lloyd–max quantiz . figur 6.18 show schemat diagram dpcm coder decod . common diagram , sever interest featur less indic . first , notic predictor make use reconstruct , quantiz signal valu ˜fn , actual signal valu fn , , encod simul decod predictor path . quantiz uniform nonuniform . box label “ symbol coder ” block diagram simpli mean huffman coder—th detail step set chap . 7 . predict valu ˆfni base , howev , much histori predict scheme requir : need buffer previou valu ˜fto form predict . notic quantiz nois , fn−˜fn , equal quantiz effect error term , en−˜en.188 6 basic digit audio tabl 6.7 dpcm quantiz reconstruct level enin rang quantiz valu −255 .. −240 −248 −239 .. −224 −232 ...... −31 .. −16 −24 −15 .. 0 −8 1 .. 16 8 17 .. 32 24 ...... 225 .. 240 232 241 .. 255 248 help us explicitli understand process code look actual number . suppos adopt particular predictor follow : ˆfn=trunc/bracketleftbig/parenleftbig ˜fn−1+˜fn−2/parenrightbig /2/bracketrightbig en=fn−ˆfni integ ( 6.20 ) let us use particular quantiz scheme ˜en=q [ en ] = 16∗trunc [ ( 255+en ) /16 ] −256+8 ˜fn=ˆfn+˜en ( 6.21 ) first , note error rang −255 .. 255 , , 511 level possibl error term . quantiz take simpl cours divid error rang 32 patch 16 level . also make representativereconstruct valu patch equal midway point group 16 level . tabl 6.7give output valu input code : 4-bit code map 32 reconstruct level staircas fashion . ( notic ﬁnal rang includ 15 level , 16 . ) 6.3 quantiz transmiss audio 189 exampl stream signal valu , consid set valu f1f2f3f4f5 130 150 140 200 230 prepend extra valu f=130 data stream replic ﬁrst valu , f1 , initi quantiz error ˜e1≡0 , ensur ﬁrst reconstruct valu exact : ˜f1=130 . subsequ valu calcul follow ( prepend valu box ) : ˆf=130,130,142,144,167 e= 0,20 , −2,56,63 ˜e= 0,24 , −8,56,56 ˜f=130,154,134,200,223 decod side , assum extra valu ˜fequal correct valu ˜f1 , ﬁrst reconstruct valu ˜f1i correct . receiv ˜en , reconstruct ˜fni ident one encod side , provid use exactli predict rule . 6.3.6 dm dm stand delta modul , much simpliﬁ version dpcm often use quick analog-to-digit convert . includ scheme complet . uniform-delta dm idea dm use singl quantiz error valu , either posit neg . 1-bit coder thu produc code output follow originalsign staircas fashion . relev set equat follow : ˆf n=˜fn−1 en=fn−ˆfn=fn−˜fn−1 ˜en=/braceleftbigg+kifen > 0 , ki constant −ko h e r wise , ( 6.22 ) ˜fn=ˆfn+˜en note predict simpli involv delay . , let ’ consid actual number . suppos signal valu follow : f1f2f3f4 10 11 13 15190 6 basic digit audio also deﬁn exact reconstruct valu ˜f1=f1=10 . suppos use step valu k=4 . arriv follow valu : ˆf2=10 , e2=11−10=1 , ˜e2=4 , ˜f2=10+4=14 ˆf3=14 , e3=13−14=− 1 , ˜e3=− 4 , ˜f3=14−4=10 ˆf4=10 , e4=15−10=5 , ˜e4=4 , ˜f4=10+4=14 see reconstruct set valu 10 , 14 , 10 , 14 never stray far correct set 10 , 11 , 13 , 15 . nevertheless , difﬁcult discov dm cope well less constant signal , well rapidli chang signal . one approach mitig problem simpli increas sampl , perhap mani time nyquist rate . scheme work well make dm simpl yeteffect analog-to-digit convert . adapt dm howev , slope actual signal curv high , staircas approximationcannot keep . straightforward approach deal steep curv simpli chang step size k adapt , , respons signal ’ current properti . 6.3.7 adpcm adapt dpcm take idea adapt coder suit input much . basic , two piec make dpcm coder : quantiz predictor . , adapt dm , adapt quantiz step size suit input . dpcm , canadapt modifi quantiz , chang step size well decis boundari nonuniform quantiz . carri two way : use properti input signal ( call forward adapt quantiz ) properti quantiz output . quantiz error becom larg , chang nonuniform lloyd–max quantiz ( call backward adapt quantiz ) . also adapt predictor , use forward backward adapt . gener , make predictor coefﬁcient adapt call adapt predict code ( apc ) . interest see done . recal predictor usual taken linear function previous reconstruct quantiz valu , ˜f n. number previou valu use call order predictor . exampl , use mpreviou valu , need mcoefﬁcient ai , i=1 .. min predictor ˆfn=m/summationdisplay i=1ai˜fn−i ( 6.23 ) 6.3 quantiz transmiss audio 191 howev , get difﬁcult situat tri chang predict coefﬁcient multipli previou quantiz valu , make compli- cate set equat solv coefﬁcient . suppos decid use aleast-squar approach solv minim , tri ﬁnd best valu thea : minn/summationdisplay n=1 ( fn−ˆfn ) 2 ( 6.24 ) would sum larg number sampl fnfor current patch speech , say . ˆfndepend quantiz , difﬁcult problem solv . also , realli chang ﬁneness quantiz time , suit signal ’ chang natur ; make thing problemat . instead , usual resort solv simpler problem result use not˜fnin predict simpli signal fnitself . inde simpli solv , sinc , explicitli write term coefﬁcient ai , wish solv minn/summationdisplay n=1 ( fn−m/summationdisplay i=1aifn−i ) 2 ( 6.25 ) differenti respect aiand set zero produc linear system mequat easi solv . ( set equat call wiener–hopf equations. ) . thu , inde ﬁnd simpl way adapt chang predictor go . speech signal , common consid block signal valu , imag code , adapt chang predictor , quantiz , . sampl 8 khz , common block size 128 samples—16 ms speech . figur 6.19 show schemat diagram adpcm coder decod [ 8 ] . 6.4 exercis 1 . wish develop new internet servic , doctor . medic ultrasound rang 2-10 mhz ; sampl rate chosen ? 2 . old soundblast card 8-bit card . ( ) 8 bit ? ( b ) best sqnr ( signal-to-quantization-nois ratio ) achiev ? 3 . tuba 20 db louder singer ’ voic , ratio intens ( power ) tuba voic ? 4 . set ear protector reduc nois level 30 db , much reduc intens ( power ) ? 5 . known loss audio output end audibl frequenc rang inevit due frequenc respons function audio ampliﬁer.192 6 basic digit audio convert uniform pcmadapt quantiz adapt predictor32 kbp output −64 kbp a-law -law pcm input+ + fˆnfn f~ nen e~ n ( ) 32 kbp input+convert pcm64 kbp a-law -law pcm output adapt predictorfˆnf~ n e~ n ( b ) fig . 6.19 schemat diagram : aadpcm encod ; bdecod ( ) output 1 volt frequenc mid-rang , loss −3d b 18 khz , output voltag frequenc ? ( b ) compens loss , listen adjust gain ( henc output ) differ frequenc equal . loss remain -3 db gain equal 6 db 18 khz , output voltag ? [ hint : assum log102=0.3 . ] 6 . suppos sampl frequenc 1.5 time true frequenc . alia frequenc ? 7 . crowd room , still pick understand nearbi speaker ’ voic notwithstand fact gener nois level may high . known “ cocktail-parti effect ” ; oper hear local sound sourc take advantag differ phase two signal enter left right ear ( “ binaur auditori percept ” ) . mono , could hear neighbor ’ convers well nois level high . state think karaok machin work . hint : mix commerci music record “ pan ” paramet differ go left right channel instrument . , instrument , left , right , channel emphas . would the6.4 exercis 193 singer ’ track time record order make easi subtract sound singer ? ( typic done . ) 8 . dynam rang signal vi ratio maximum minimum , express decibel . dynam rang expect signal extent express signal qualiti . also dictat number bit per sampl need order reduc quantiz nois accept level , e.g. , may like reduc nois least order magnitud v min . suppos dynam rang signal 60 db . use 10 bit thissign ? use 16 bit ? 9 . suppos dynam rang speech telephoni impli ratio v max/vminof 256 . use uniform quantiz , mani bit use encod speech , make quantiz nois least order magnitud less smallest detect telephon sound ? 10.perceptu nonuniform gener term describ nonlinear human percept , e.g. , certain paramet audio signal vari , human necessarili perceiv differ proport amountof chang . ( ) brieﬂi describ least two type perceptu nonuniform human auditori percept . ( b ) one a-law ( µ-law ) attempt approxim ? could improv quantiz ? 11 . suppos mistakenli alway use 0.75 point instead 0.50 point quantiz interv decis point , decid quantizationlevel analog valu map . , rough calcul sqnr . effect mistak sqnr ? 12 . state nyquist frequenc follow digit sampl interv . express result hertz case . ( ) 1 millisecond , ( b ) 0.005 , ( c ) 1 h. 13 . draw diagram show sinusoid 5.5 khz , sampl 8 khz ( show eight interv sampl plot ) . draw alia 2.5 khz show eight sampl interv , exactli 5.5 cycl true signalﬁt 2.5 cycl alia signal . 14 . old western movi , notic stagecoach wheel appear move backward 5 ◦per frame , even though stagecoach move forward . effect due ? true situat ? 15 . suppos signal contain tone 1 , 10 , 21 khz , sampl rate 12 khz ( process anti-alias ﬁlter limit output 6 khz ) .194 6 basic digit audio tone includ output ? hint : output consist alias . 16 . pitch bend opcod midi follow two data byte specifi control alter . mani bit accuraci amount data correspond ? ? 17 . ( ) singl midi messag produc one note sound ? ( b ) possibl one note sound particular instru- ment ? done midi ? ( c ) program chang midi messag channel messag ? messag accomplish ? base program chang messag , mani differ instrument gener midi ? ? ( ) gener , two main kind midi messag ? term data , main differ two type messag ? within two categori , pleas list differ sub-typ . 18 . note “ middl c ” ( frequenc 440 hz ) note 69 gener midi . midi byte ( hex ) sent play note twice frequenc ( i.e. , one octav ) “ middl c ” maximum volum channel1 ? ( ’ includ start/stop bit . ) inform : octav 12 step piano , i.e. , 12 note . 19 . give exampl ( english , hex ) midi voic messag . describ part “ assembl ” statement messag suggest . “ program chang ” messag ? suppos “ program chang ” hex & hc1 . instruct & hc103 ? 20 . suddenli invent new kind music : “ 18-tone music , ” requir keyboard 180 key . would chang midi standard abl play music ? 21 . pcm , delay , assum 8 khz sampl ? gener , delay penalti associ algorithm due sampl , process , analysi . 22 . ( ) suppos use predictor follow : ˆf n=trunc/parenleftbig 1 2 ( ˜fn−1+˜fn−2 ) /parenrightbig , en=fn−ˆfn . ( 6.26 ) also , suppos adopt quantiz eq . ( 6.21 ) . input signal valu follow : 20 38 56 74 92 110 128 146 164 182 200 218 236 254 show output dpcm coder ( without entropi code ) follow : 20 44 56 74 89 105 121 153 161 181 195 212 243 2516.4 exercis 195 timesign 50100150200250 timesign 50100150200250 ( ) ( b ) fig . 6.20 adpcm reconstruct signal ( dot line ) track input signal ( solid line ) . bdpcm reconstruct signal ( dash line ) steer farther farther input signal ( solid line ) figur 6.20 show quantiz reconstruct signal track input signal . program project , write small piec code verifi result . ( b ) , suppos mistak coder side inadvert use predictor forlossless code , eq . ( 6.15 ) , use origin valu fninstead quantiz ones˜fn . show decod side end reconstruct signal valu follow : 20 44 56 74 89 105 121 137 153 169 185 201 217 233 error get progress wors . figur 6.20 b show appear : reconstruct signal get progres- sive wors . modifi code verifi statement . refer 1 . b. truax , handbook acoust ecolog , 2nd edn . ( cambridg street publish , 1999 ) 2 . k.c . pohlmann , principl digit audio , 6th edn . ( mcgraw-hil , 2010 ) 3 . j.h . mcclellan , r.w . schafer , m.a . oder , dsp first : multimedia approach . ( prentice-hal ptr , 1998 ) 4 . j. heckroth , tutori midi music synthesi . midi manufactur associ , pob 3173 , la habra ca 90632-3173 ( 1995 ) . http : //www.harmony-central.com/midi/doc/tutori . html 5 . p .k . andleigh , k. thakrar , multimedia system design . ( prentice-hal ptr , 1995 ) 6 . midi associ . strateg overview introduct midi 2.0. nation asso- ciation music merchant ( namm ) show ( 2020 ) 7 . k. sayood , introduct data compress , 5th edn . ( morgan kaufmann , san francisco , 2017 ) 8 . r.l . freeman , refer manual telecommun engin , 3rd edn . ( wiley , 2001 ) part ii multimedia data compress part , examin role play multimedia data compress , perhap import enabl technolog make modern multimedia system possibl . much data exist , archiv , via stream , elsewher , becom critic compress inform . start chap . 7look lossless data compress , i.e. , involv distort origin signal decompress reconstitut . good exampl archiv storag preciou artwork . , may go troubl imag old master ’ paint use high-pow camera mount dolli avoid parallax . certainli wish lose hard-won informa- tion , ’ best use lossless compress . winzip winrar , exampl , ubiquit tool util lossless compress . hand , come home movi will lose inform . choic lose inform anyway comput , tablet , smartphon handl data want push , els lose inform purpos use “ lossi ” compress method , ’ choos latter . nowaday , almost video see compress way , compress use mostli lossi . well , imag web standard jpeg format . almost alway lossi compress format . known lossi compress method achiev much higher level compress lossless one . chap . 8we go look fundament lossi method compres- sion , mainli focus discret cosin transform discret wavelet trans- form . major applic import method set jpeg still- imag compress standard , includ jpeg 2000 . examin chap . 9 . go look data compress method appli move images-video . start basic video compress techniqu chap . 10.w e examin idea behind mpeg standard , start mpeg-1 , mpeg-2 , mpeg-4 , mpeg-7 chap . 11 . chap . 12 , introduc modern video compress standard h.264 , h.265 , h.266 . audio compress sens stand , consid basic audio compress techniqu chap . 13 , chap . 14we look mpeg audio , includ mp3 aac.7lossless compress algorithm 7.1 introduct emerg multimedia technolog made digit librari realiti . nowaday , librari , museum , ﬁlm studio , govern convert data archiv digit form . data ( e.g. , preciou booksand paint ) inde need store without loss . start , suppos want encod call number 120 million item librari congress ( mere 20 million , consid book ) . ’ transmit item 27-bit number , give item uniqu binari code ( sinc 2 27 > 120 ,000 ,000 ) ? main problem “ great idea ” requir mani bit . fact exist mani code techniqu effect reduc total number bit need repres inform . process involv generallyref compress [ 1,2 ] . chap . 6 , begin look compress scheme aim audio . therefor , ﬁrst consid complex transform analog signal todigit one , wherea shall consid least start digit signal . exampl , even though know imag captur use analog signal , ﬁle produc digit camera inde digit . gener problem code ( compress ) set symbol , byte valu , say , studi long time . get back librari congress problem , well known certain part call number appear frequent other , would econom assign fewer bit code . known variable-length code ( vlc ) —the frequent appear symbol code fewer bit per symbol , vice versa . result , fewer bit usual need repres whole collect . chapter , studi basic inform theori sever popular loss- less compress techniqu . figur 7.1depict gener data compress scheme , © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_7199200 7 lossless compress algorithm encod ( compress ) decod ( decompress ) storag networksinput output data data fig . 7.1 gener data compress scheme compress perform encod decompress perform decod . call output encod code orcodeword . intermedi medium could either data storag communication/comput network . com- pression decompress process induc inform loss , compress scheme lossless ; otherwis , lossi . next sever chapter deal lossi compress algorithm commonli use imag , video , audio compress . , concentr lossless compress . total number bit requir repres data compress b0 total number bit requir repres data compress b1 , deﬁn compress ratio compress ratio =b0 b1 ( 7.1 ) gener , would desir codec ( encoder/decod scheme ) com- pression ratio much larger 1.0 . higher compress ratio , better lossless compress scheme , long comput feasibl . 7.2 basic inform theori accord famou scientist claud e. shannon , bell lab [ 3,4 ] , entropi ηof inform sourc alphabet s= { s1 , s2 , ... , sn } deﬁn η=h ( ) =n/summationdisplay i=1pilog21 pi ( 7.2 ) =−n/summationdisplay i=1pilog2pi ( 7.3 ) pii probabl symbol siinswil occur . term log21 piindic amount inform ( so-cal self-inform deﬁn shannon [ 3 ] ) contain si , correspond number bits1need encod si . exampl , probabl 1sinc chosen 2 base logarithm deﬁnit , unit inform isbit—natur also appropri binari code represent use digit comput . log base 10 , unit hartley ; base e , unit nat.7.2 basic inform theori 201 charact nin manuscript 1 /32 , amount inform associ receiv- ing charact 5 bit . word , charact string nnn requir 15 bit code . basi possibl data reduct text compress , sinc willlead charact code scheme differ ascii represent , charact requir least 7 bit . entropi ? scienc , entropi measur disord system— entropi , disord . typic , add neg entropi system impart order . exampl , suppos sort deck card . ( think bubbl sort deck—perhap usual way actuallysort card , though . ) everi decis swap , impart 1 bit inform card system transfer 1 bit neg entropi card deck . suppos wish commun swap decis , via network , say . make two consecut swap decis , possibl number outcom 4 . outcom equal probabl 1/4 , numberof bit send averag 4 × ( 1/4 ) ×log 2 ( 1/ ( 1/4 ) ) =2 bits—no surpris . commun ( transmit ) result two decis , would need transmit 2 bit . probabl one outcom higher other , averag number bit ’ send would differ . ( situat might occur deck alreadi partial order , probabl not-swap werehigh swap . ) suppos probabl one four state 1/2 , three state probabl 1/6 occur . extend model mani bit send averag , need go noninteg powersof 2 probabl . use logarithm ask mani ( ﬂoat ) bit inform must sent transmit inform content . equat ( 7.3 ) say case , ’ send ( 1/2 ) ×log 2 ( 2 ) +3× ( 1/6 ) ×log2 ( 6 ) =1.7925 bit , valu less 2 . reﬂect idea could somehow encod four state , occur one mean fewer bit send , ’ better ( fewer bit ) averag . deﬁnit entropi aim identifi often occur symbol datastream good candid short codeword compress bitstream . describ earlier , use variable-length code scheme entropi coding— frequent occur symbol given code quickli transmit , infrequ occur one given longer code . exampl , eoccur frequent english , give shorter code q , exampl . aspect “ surpris ” receiv infrequ symbol data stream reﬂect eq . ( 7.3 ) . symbol occur rare , probabl pii low ( e.g. , 1/100 ) , thu self-inform log21 pi=log2100 rel larg number . reﬂect fact take longer bitstr encod . probabl pi sit outsid logarithm eq . ( 7.3 ) say long stream , symbol come averag frequenc equal probabl occurr . weight multipli long short inform content given element “ surpris ” see particular symbol.202 7 lossless compress algorithm 0 0 255 2551 2/3 1/31/256 ( ) ( b ) iipi pi fig . 7.2 histogram two gray-level imag one wrinkl algorithm impli eq . ( 7.3 ) symbol occur zero frequenc , simpli ’ count entropi : take log zero . anoth concret exampl , inform sourc si gray-level digit imag , sii gray-level intens rang 0 ( 2k−1 ) , ki number bit use repres pixel uncompress imag . rang often [ 0,255 ] , sinc 8 bit typic use : make conveni 1 byte per pixel . imag histogram ( discuss chap . 3 ) way calcul probabl piof pixel gray-level intens iin imag . figur 7.2a show histogram imag uniform distribut gray- level intens , , ∀ipi=1/256 . henc , entropi imag η=255/summationdisplay i=01 256·log2256=256·1 256·log2256=8 ( 7.4 ) seen eq . ( 7.3 ) , entropi ηi weight sum term log21 pi ; henc , repres averag amount inform contain per symbol sourc s. memoryless source2 , entropi ηrepres minimum averag number bit requir repres symbol s. word , speciﬁ lower bound averag number bit code symbol s. use ¯lto denot averag length ( measur bit ) codeword produc encod , shannon code theorem state entropi best ( certain condit ) : η≤¯l ( 7.5 ) code scheme aim get close possibl theoret lower bound . 2an inform sourc independ distribut , mean valu current symbol depend valu previous appear symbols.7.3 run-length code 203 interest observ uniform-distribut exampl found η=8—the minimum averag number bit repres gray-level intens least 8 . compress possibl imag ! context ofimag , correspond “ worst case , ” neighbor pixel valu similar . figur 7.2b show histogram anoth imag , one-third pixel rather dark two-third rather bright . entropi imag η=1 3·log23+2 3·log23 2 =0.33×1.59+0.67×0.59=0.52+0.40=0.92 gener , entropi greater probabl distribut ﬂat smaller peak . 7.3 run-length code instead assum memoryless sourc , run-length code ( rlc ) exploit memori present inform sourc . one simplest form data compress . basic idea inform sourc wish compress propertythat symbol tend form continu group , instead code symbol group individu , code one symbol length group . exampl , consid bi-level imag ( one 1-bit black white pixel ) monoton regions—lik fax . inform sourc efﬁcient code use run-length code . fact , sinc two symbol , even need code symbol start run . instead , assum start run alway particular color ( either black white ) simpli code length run . descript one-dimension run-length code algorithm . two-dimension variant usual use code bi-level imag . algorithm use code run inform previou row imag code run inth current row . full descript algorithm found [ 5 ] . 7.4 variable-length code ( vlc ) sinc entropi indic inform content inform sourc , lead famili code method commonli known entropi code method . describ earlier , variable-length code ( vlc ) one best known method . , studi shannon–fano algorithm , huffman code , andadapt huffman coding.204 7 lossless compress algorithm 7.4.1 shannon–fano algorithm shannon–fano algorithm independ develop shannon bell lab robert fano mit [ 6 ] . illustr algorithm , let ’ suppos symbol code charact word hello . frequenc count symbol symbol hel count 112 1 encod step shannon–fano algorithm present fol- low top-down manner : 1 . sort symbol accord frequenc count occurr . 2 . recurs divid symbol two part , approxim number count , part contain one symbol . natur way implement procedur build binari tree . convent , let ’ assign bit 0 left branch 1 right branch . initi , symbol sort lheo . fig . 7.3show , ﬁrst divis yield two part : ( ) l count 2 , denot l : ( 2 ) ( b ) h , e , total count 3 , denot h , e , : ( 3 ) . second divis yield h : ( 1 ) e , : ( 2 ) . last divis e : ( 1 ) : ( 1 ) . tabl 7.1summar result , show symbol , frequenc count , infor- mation content/parenleftbig log21 pi/parenrightbig , result codeword , number bit need encod symbol word hello . total number bit use shown bottom . l : ( 2 ) ( 5 ) h , e , : ( 3 ) ( ) 0 1 ( b ) l : ( 2 ) ( 5 ) h : ( 1 ) e , : ( 2 ) ( 3 ) 01 0 1 l : ( 2 ) : ( 1 ) ( 5 ) e : ( 1 ) h : ( 1 ) ( c ) ( 2 ) ( 3 ) 0 10 1 0 1 fig . 7.3 code tree hello shannon–fano algorithm7.4 variable-length code ( vlc ) 205 tabl 7.1 one result perform shannon–fano algorithm hello symbol count log21 picod number bit use l 2 1.32 0 2 h 1 2.32 10 2 e 1 2.32 110 3 1 2.32 111 3 total number bit : 10 01 ( 5 ) h : ( 1 ) e : ( 1 ) : ( 1 ) l : ( 2 ) 01 10 ( b ) ( 3 ) ( 2 ) 01 ( 5 ) ( ) l , h : ( 3 ) e , : ( 2 ) fig . 7.4 anoth code tree hello shannon–fano algorithm revisit previou discuss entropi , case η=pl·log21 pl+ph·log21 ph+pe·log21 pe+po·log21 po =0.4×1.32+0.2×2.32+0.2×2.32+0.2×2.32=1.92 suggest minimum averag number bit code charact word hello would least 1.92 . exampl , shannon–fano algorithm use averag 10 /5=2 bit code symbol , fairli close lower bound 1.92 . appar , result satisfactori . point outcom shannon–fano algorithm necessarili uniqu . instanc , ﬁrst divis exampl , would equal valid divid two part l , h : ( 3 ) e , : ( 2 ) . would result code fig . 7.4 . tabl 7.2show codeword differ . also , two set codeword may behav differ error present . coincident , total number bit requir encod world hello remain 10 . shannon–fano algorithm deliv satisfactori code result data com- pression , soon outperform overtaken huffman code method . 7.4.2 huffman code first present david a. huffman 1952 paper [ 7 ] , method attract overwhelm amount research adopt mani import and/or commerci applic , fax machin , jpeg , mpeg.206 7 lossless compress algorithm tabl 7.2 anoth result perform shannon–fano algorithm hello symbol count log21 picod number bit use l 2 1.32 00 4 h 1 2.32 01 2 e 1 2.32 10 2 1 2.32 11 2 total number bit : 10 contradistinct shannon–fano , top-down , encod step huffman algorithm describ follow bottom-up manner . let ’ use exampl word , hello . similar binari code tree use , left branch code 0 right branch 1 . simpl list data structur also use . algorithm 7.1 ( huffman code ) . 1 . initi : put symbol list sort accord frequenc count . 2 . repeat list one symbol left . ( ) list , pick two symbol lowest frequenc count . form huffman subtre two symbol child node creat parent node . ( b ) assign sum children ’ frequenc count parent insert list , order maintain . ( c ) delet children list . 3 . assign codeword leaf base path root . ﬁgure , new symbol p1 , p2 , p3 creat refer parent node huffman code tree . content list illustr : initi : lheo iter ( ) : lp 1h iter ( b ) : lp 2 iter ( c ) : p3 simpl exampl , huffman algorithm appar gener code result one shannon–fano result shown fig . 7.3 , although result usual better . averag number bit use code charact also 2 , ( i.e. , ( 1+1+2+3+3 ) /5=2 ) . anoth simpl exampl , consid text string contain set charact frequenc count follow : : ( 15 ) , b : ( 7 ) , c : ( 6 ) , : ( 6 ) e : ( 5 ) . easi show shannon–fano algorithm need total 89 bit encod string , wherea huffman algorithm need 87.7.4 variable-length code ( vlc ) 207 e : ( 1 ) p1 : ( 2 ) : ( 1 ) ( ) 01 ( b ) h : ( 1 ) p2 : ( 3 ) e : ( 1 ) : ( 1 ) p1 : ( 2 ) 01 0 1 l : ( 2 ) : ( 1 ) p3 : ( 5 ) e : ( 1 ) h : ( 1 ) ( c ) p1 : ( 2 ) p2 : ( 3 ) 0 101 0 1 fig . 7.5 code tree hello use huffman algorithm shown , correct probabl ( “ prior statist ” ) avail accu- rate , huffman code method produc good compress result . decod huffman code trivial long statist and/or code tree sent data compress ( ﬁle header , say ) . overhead becom neglig data ﬁle sufﬁcient larg . follow import properti huffman code : •uniqu preﬁx properti . huffman code preﬁx huffman code . instanc , code 0 assign l fig . 7.5c preﬁx code 10 h 110 e 111 ; code 10 h preﬁx code 110 e 111 . turn uniqu preﬁx properti guarante huffman algorithm , sinc alway place input symbol leaf node huffman tree . huffman code one preﬁx code uniqu preﬁx properti hold . code gener shannon–fano algorithm anoth exampl . properti essenti also make efﬁcient decod , sinc preclud ambigu decod . exampl , bit 0 receiv , decod immedi produc symbol l without wait bit transmit . •optim . huffman code minimum-redund code , shown huffman ’ 1952 paper [ 7 ] . proven [ 2,8 ] huffman code optim given data model ( i.e. , given , accur , probabl distribut ) : – two least frequent symbol length huffman code , differ last bit . obviou algorithm.208 7 lossless compress algorithm – symbol occur frequent shorter huffman code symbol occur less frequent . name , symbol siandsj , fpi≥pj li≤lj , lii number bit codeword si . – shown ( see sayood [ 2 ] ) averag code length infor- mation sourc si strictli less η+1 . combin eq . ( 7.5 ) , η≤¯l < η+1 ( 7.6 ) extend huffman code discuss huffman code far assign symbol codeword aninteg bit length . state earlier , log21 piindic amount inform contain inform sourc si , correspond number bit need repres . particular symbol siha larg probabl ( close 1.0 ) , log21 piwil close 0 , assign 1 bit repres symbol costli . probabl symbol express 2−k , k posit integ , would averag length codeword truli optimal—that , ¯l≡η . clearli , ¯l > ηin case . one way address problem integr codeword length group sever symbol assign singl codeword group . huffman code type call extend huffman code [ 2 ] . assum inform sourc alphabet s= { s1 , s2 , ... , sn } .i fksymbol group togeth , extend alphabet ( k ) = { ks b l s/bracehtipdownleft/bracehtipupright/bracehtipupleft/bracehtipdownrights1s1 ... s1 , s1s1 ... s2 , ... , s1s1 ... sn , s1s1 ... s2s1 , ... , snsn ... sn } note size new alphabet ( k ) isnk.i fki rel larg ( e.g. , k≥3 ) , practic applic n/greatermuch1 , nkwould larg number , impli huge symbol tabl . overhead make extend huffman code impract . shown [ 2 ] , entropi sisη , averag number bit need symbol si η≤¯l < η+1 k ( 7.7 ) shave quit bit code scheme ’ bracket theoret best limit . nevertheless , much improv origin huffman code ( group size 1 ) one might hope for.7.4 variable-length code ( vlc ) 209 extend huffman exampl explicit exampl power extend huffman code , let ’ construct binari huffman code sourc swith three symbol , b , c , probabl 0.6 , 0.3 , 0.1 , respect . , n=3 . ’ interest averag codeword length , bit per symbol . start , comparison let ’ ﬁrst look valu entropi sourc , bitrat given huffman code singl symbol , block . gener huffman tree give : 0 ; b : 10 ; c : 11 ; averag =0.6×1+0.3×2+0.1×2=1.4 bits/symbol . calcul entropi get η=−/summationdisplay ipilog2pi=− 0.6×log20.6−0.3×log20.3−0.1×log20.1≈1.2955 . let ’ extend code group symbol two-charact groups—i.e. , use block k=2 charact . wish compar perform , bit per origin sourc symbol , best possibl . extend huffman tree shown fig . 7.6 : bcc cbcbb acc abaa baa fig . 7.6 huffman tree extend alphabet210 7 lossless compress algorithm codeword bitlength follow : symbol group probabl codeword bitlength aa 0.36 0 1 ab 0.18 100 3 ba 0.18 101 3 ca 0.06 1100 4 ac 0.06 1101 4 bb 0.09 1110 4 bc 0.03 11110 5 cb 0.03 111110 6 cc 0.01 111111 6 consequ , averag bitrat per symbol averag =0.5× ( 0.36+3×0.18+3×0.18+4×0.06+4×0.06+4×0.09 +5×0.03+6×0.03+6×0.01 ) =1.3350 ( reason factor 0 .5 leaf give us length-2 ( k=2 ) block symbol , wherea want compar bitrat per singl symbol . ) recal averag bitrat per symbol 1.4 length-1 symbol , best possibl entropi : η≈1.2955 . found , inde , extend huffman bitrat ﬁt bound eq . ( 7.7 ) advertis , fact result modest improv compres- sion ratio practic . 7.4.3 adapt huffman code huffman algorithm requir prior statist knowledg informationsourc , inform often avail . particularli true multi- media applic , futur data unknown arriv , , exampl , live ( stream ) audio video . even statist avail , transmiss symbol tabl could repres heavi overhead . non-extend version huffman code , discuss assum so-cal order-0 model , , symbols/charact treat singli , without context histori maintain . one possibl way includ contextu inform examin kpreced ( succeed ) symbol time ; known order-k model . exampl , order-1 model incorpor statist probabl “ qu ” addit individu probabl “ q ” “ u. ” nevertheless , impli much statist data store andsent order- kmodel k≥1 . solut use adapt compress algorithm , statist gather updat dynam data stream arriv . probabl longer base prior knowledg actual data receiv far . the7.4 variable-length code ( vlc ) 211 new code method “ adapt ” , probabl distribut receiv symbol chang , symbol given new ( longer shorter ) code . especi desir multimedia data , content ( music colorof scene ) henc statist chang rapidli . exampl , introduc adapt huffman code algorithm section . mani idea , howev , also applic adapt compressionalgorithm . procedur 7.1 ( procedur adapt huffman code ) encod decod -- -- -- - -- -- -- - initial_cod ( ) ; initial_cod ( ) ; eof eof { { get ( c ) ; decod ( c ) ; encod ( c ) ; output ( c ) ; update_tre ( c ) update_tre ( c ) ; } } •initial_cod assign symbol initi agreed-upon code , with- prior knowledg frequenc count . exampl , convent code ascii may use code charact symbol . •update_tre procedur construct adapt huffman tree . basic two thing : increment frequenc count symbol ( includ new one ) updat conﬁgur tree . – huffman tree must alway maintain sibl properti , , node ( intern leaf ) arrang order increas count . node number order left right , bottom top . ( see fig . 7.7 , ﬁrst node 1.a : ( 1 ) , second node 2.b : ( 1 ) , , number parenthes indic count . ) sibl properti violat , aswap procedur invok updat tree rearrang node . – swap necessari , farthest node count ni swap node whose count increas n+1 . note node count ni leaf node—it root subtree—th entir subtre go swap . •the encod decod must use exactli initial_cod update_tre routin . figur 7.7a depict huffman tree symbol alreadi receiv . figur 7.7b show updat tree addit ( i.e. , second ) receiv . increas count n+1=2 trigger swap . case , farthest node count n=1 : ( 1 ) . henc , : ( 2 ) : ( 1 ) swapped.212 7 lossless compress algorithm ( c-3 ) huffman tree receiv 3rd “ ” 9 . ( 11 ) 7 . p : ( 5 ) 5 . : ( 3 ) 3 . c : ( 1 ) 1 . : ( 1 ) 2 . b : ( 1 ) 4 . ( 2 ) 6 . ( 3 ) 8 . ( 6 ) ( c-2 ) anoth swap needed5 . : ( 3 ) 9 . ( 10 ) 7 . ( 5+1 ) 8 . p : ( 5 ) 6 . ( 3 ) 3 . c : ( 1 ) 1 . : ( 1 ) 2 . b : ( 1 ) 4 . ( 2 ) ( b ) receiv 2nd “ ” trigger swap9 . ( 10 ) 7 . ( 5 ) 8 . p : ( 5 ) 5 . ( 2 ) 6 . ( 3 ) 1 . : ( 1 ) 2 . b : ( 1 ) 3 . c : ( 1 ) 4 . : ( 2 ) ( c-1 ) swap need receiv 3rd “ ” 1 . : ( 1 ) 9 . ( 10 ) 7 . ( 5 ) 8 . p : ( 5 ) 5 . ( 2 ) 6 . ( 3 ) 2 . b : ( 1 ) 3 . c : ( 1 ) 4 . : ( 2+1 ) ( ) huffman tree9 . ( 9 ) 7 . ( 4 ) 8 . p : ( 5 ) 5 . ( 2 ) 6 . ( 2 ) 3 . c : ( 1 ) 4 . : ( 1 ) 1 . : ( 1 ) 2 . b : ( 1 ) fig . 7.7 node swap updat adapt huffman tree : aa huffman tree ; breceiv 2nd “ ” trigger swap ; ( c-1 ) swap need receiv 3rd “ ” ; ( c-2 ) anoth swap need ; ( c-3 ) huffman tree receiv 3rd “ ” appar , result could also obtain ﬁrst swap : ( 2 ) b : ( 1 ) , c : ( 1 ) , ﬁnalli : ( 1 ) . problem procedur would take three swap ; rule swap “ farthest node count n ” help avoid unnecessari swap . updat huffman tree receiv third involv illustr three step shown fig . 7.7 ( c-1 ) ( c-3 ) . sinc : ( 2 ) becom : ( 3 ) ( temporarili denot : ( 2+1 ) ) , necessari swap : ( 2+1 ) ﬁfth node . illustr arrow fig . 7.7 ( c-1 ) . sinc ﬁfth node non-leaf node , subtre node 1 . : ( 1 ) , 2 . b : ( 1 ) , 5 . ( 2 ) swap whole : ( 3 ) . figur 7.7 ( c-2 ) show tree ﬁrst swap . seventh node becom ( 5+1 ) , trigger anoth swap eighth node . figur 7.7 ( c-3 ) show huffman tree second swap.7.4 variable-length code ( vlc ) 213 tabl 7.3 initi code assign aadccdd use adapt huffman code symbol initi code new 0 00001 b 00010 c 00011 00100 ...... exampl show updat process aim maintain sibl properti adapt huffman tree—th updat tree sometim requir one swap . occur , swap execut multipl step “ bottom-up ” manner , start lowest level swap needed.in word , updat carri sequenti : tree node examin order , swap made whenev necessari . clearli illustr implement detail , let ’ examin anoth exampl . , show exactli bit sent , oppos simpli state tree updat . exampl 7.1 ( adapt huffman code symbol string aadccdd ) . let ’ assum initi code assign encod decod simpli follow ascii order 26 symbol alphabet , z , tabl 7.3show . improv implement algorithm , adopt addit rule : character/symbol sent ﬁrst time , must preced special symbol , new . initi code new 0 . count new alway kept 0 ( count never increas ) ; henc , alway denot new : ( 0 ) fig . 7.8 . figur 7.8show huffman tree step . initi , tree . ﬁrst , 0 new initi code 00001 sent . afterward , tree built shown ﬁrst one , label . encod decod construct ﬁrst tree , seen code thesecond 1 . code sent thu 1 . second , tree updat , shown label aa . updat receiv c similar . subtre spawn , code new isget longer—from 0 00 000 . aadc aadcc take two swap . illustr updat process clearli , shown three step , requir swap indic arrow . •aadcc step 1 . frequenc count c increas 1 1 +1=2 ; necessit swap : ( 1 ) .214 7 lossless compress algorithm “ aa ” 0 new : ( 0 ) 1 ( 2 ) : ( 2 ) “ aadccd ” c : ( 2 ) new : ( 0 ) 000 111 ( 2 ) : ( 2 ) : ( 2 ) ( 4 ) ( 6 ) “ aadcc ” step 11 ( 1 ) 1 0 new : ( 0 ) 00 1 ( 2 ) : ( 2 ) : ( 1 ) c : ( 1+1 ) ( 4 ) “ aad ” ( 1 ) new : ( 0 ) 00 11 : ( 2 ) : ( 1 ) ( 3 ) “ aadccdd ” c : ( 2 ) new : ( 0 ) 0 001 1 1 ( 2 ) : ( 2 ) : ( 3 ) ( 4 ) ( 7 ) “ aadcc ” step 21c : ( 2 ) 0 1 new : ( 0 ) 0 0 ( 1 ) 1 ( 2+1 ) : ( 2 ) : ( 1 ) ( 4 ) “ ” new : ( 0 ) ( 1 ) : ( 1 ) 01 “ aadc ” 0 ( 1 ) new : ( 0 ) 001 1 1 ( 2 ) : ( 2 ) : ( 1 ) ( 4 ) c : ( 1 ) “ aadcc ” step 3new : ( 0 ) 000 ( 1 ) ( 3 ) 111 : ( 2 ) : ( 1 ) c : ( 2 ) ( 5 ) fig . 7.8 adapt huffman tree aadccdd tabl 7.4 sequenc symbol code sent decod symbol new new new c c code 0 00001 1 0 00100 00 00011 001 101 101 •aadcc step 2 . swap c , count parent node c : ( 2 ) increas 2 2 +1=3 ; requir swap : ( 2 ) . •aadcc step 3 . swap parent c complet . tabl 7.4summar sequenc symbol code ( zero one ) sent decod . import emphas code particular symbol often chang adapt huffman code process . frequent symbol moment , shorter code . exampl , aadccdd , charact overtak frequent symbol , code chang 101 0 . cours fundament adapt algorithm—cod reassign dynam accord new probabl distribut symbol . “ demo ” adapt huffman code book ’ websit aid learn algorithm.7.4 variable-length code ( vlc ) 215 7.5 dictionary-bas code lempel–ziv–welch ( lzw ) algorithm employ adapt , dictionary-bas compress techniqu . unlik variable-length code , length codeword differ , lzw use ﬁxed-length codeword repres variable- length string symbols/charact commonli occur togeth , wordsin english text . adapt compress techniqu , lzw encod decod build dictionari dynam receiv data—th encod andth decod develop dictionari . sinc singl code repres one symbol/charact , data compress realiz . lzw proce place longer longer repeat entri dictionari , emit code element rather string , element alreadi place dictionari . predecessor lzw lz77 [ 9 ] lz78 [ 10 ] , due jacob ziv abraham lempel 1977 1978 . terri welch [ 11 ] improv techniqu 1984 . lzw use mani applic , unix compress , gif imag , winzip , other . algorithm 7.2 ( lzw compress ) . begin = next input charact ; eof { c = next input charact ; + c exist dictionari s=s+c ; els { output code ; add string + c dictionari new code ; s=c ; } } output code ; end exampl 7.2 ( lzw compress string ababbabcababba ) . let ’ start simpl dictionari ( also refer string tabl ) , initi contain three charact , code follow : code string -- -- -- -- -- -- -- - 1a2b3c216 7 lossless compress algorithm input string ababbabcababba , lzw compress algo- rithm work follow : c output code string -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- - 1a2b3c -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- - ab 1 4 bba 2 5 b aab ab b 4 6 abb ba ba b 5 7 bab bc 2 8 b cca 3 9 c aab ab 4 10 aba ab ab b abb 6 11 abba eof 1 output code 1 2 4 5 2 3 4 6 1 . instead 14 charact , 9 code need sent . assum charact code transmit byte quitea save ( compress ratio would 14 /9=1.56 ) . ( rememb , lzw adapt algorithm , encod decod independ build string tabl . henc , overhead involv transmit string tabl . ) obvious , illustr , exampl replet great deal redund input string , achiev compress quickli . gener , save lzw would come text hundr byte long . lzw algorithm simpl , make effort select optim new string enter dictionari . result , string tabl grow rapidli , illustr . typic lzw implement textual data use 12-bit codelength . henc , dictionari contain 4,096 entri , ﬁrst 256 ( 0– 255 ) entri ascii code . take account , compress ratio reduc ( 14×8 ) / ( 9×12 ) =1.04 . algorithm 7.3 ( lzw decompress ( simpl v ersion ) ) . begin = nil ; eof { k = next input code ; entri = dictionari entri k ; output entri ; 7.5 dictionary-bas code 217 ( ! = nil ) add string + entri [ 0 ] dictionarywith new code ; = entri ; } end exampl 7.3 ( lzw decompress string ababbabcababba ) . input code decod ar e124523461 .t h e initi string tabl ident use encod . lzw decompress algorithm work follow : k entry/output code string -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 1a2b3c -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- nil 1 a2 b 4 bb4 b 5 b ab 5 ba 6 abbba 2 b 7 bab b3 c 8 b cc4 b 9 c ab 6 abb 10 aba abb 1 11 abba eof appar , output string ababbabcababba—a truli lossless result ! lzw algorithm detail care examin simpl version lzw decompress algorithm reveal potenti problem . adapt updat dictionari , theencod sometim ahead decod . exampl , sequenc ababb , encod output code 4 creat dictionari entri code 6 new string abb . decod side , receiv code 4 , output ab , dictionari updat code 5 new string , ba . occur sever time exampl , encod output anoth code 4 , code 6 . away , anticipated—aft , sequenti process , encod ahead . exampl , caus problem . welch [ 11 ] point simpl version lzw decompress algorithm break follow scenario occur . assum input string ababbabcabbabbax .... 218 7 lossless compress algorithm lzw encod : c output code string -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- - 1a 2b 3c -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- - ab 1 4 bba 2 5 b aab ab b 4 6 abb ba ba b 5 7 bab bc 2 8 b cca 3 9 c aab ab b abb 6 10 abba ab ab b abb abba x 10 11 abbax ... sequenc output code encod ( henc input code decod ) s12452361 0. . . simpl lzw decod : k entry/output code string -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- - 1a2b3c -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -nil 1 a2 b 4 b b4 b 5 b ab 5 ba 6 abbba 2 b 7 bab b3 c 8 b cc 6 abb 9 ca abb 10 ? ? ? “ ? ? ? ” indic decod encount difﬁculti : dictionari entri exist last input code , 10 . closer examin reveal code 10 recent creat encod side , form concaten charact , string , charact . case , charact , string bb , , + bb +7.5 dictionary-bas code 219 . meanwhil , sequenc output symbol encod , bb , , bb , . exampl illustr whenev sequenc symbol code charact , string , charact , string , charact , , encod creat new code repres charact +string +charact use right away , decod chanc creat ! fortun , case simpl lzw decompress algorithm fail . also , occur , variabl s=charact +string . modiﬁ version algorithm handl except case checkingwheth input code deﬁn decod ’ dictionari . , simpli assum code repres symbol s+ [ 0 ] , , charact + string +charact . algorithm 7.4 ( lzw decompress ( modiﬁ ) ) . begin = nil ; eof { k = next input code ; entri = dictionari entri k ; / * except handler * / ( entri == null ) entri = + [ 0 ] ; output entri ; ( ! = nil ) add string + entri [ 0 ] dictionarywith new code ; = entri ; } end actual implement lzw algorithm requir practic limit dictionari size , exampl , maximum 4,096 entri gif . nevertheless , still yield 12-bit 11-bit code length lzw code , longer word length origin data—8 bit ascii . real applic , code length li kept rang [ l 0 , lmax ] . unix compress command , l0=9 lmaxi default 16 . dictionari initi size 2l0 . ﬁlled , code length increas 1 ; allow repeat l=lmax . data compress lack repetit structur , chanc use new code dictionari entri could low . sometim , lead data expans instead data reduct , sinc code length often longer word length origin data . deal , algorithm build two220 7 lossless compress algorithm mode : compress andtranspar . latter turn compress invok data expans detect . sinc dictionari maximum size , reach 2lmaxentri , lzw lose adapt power becom static , dictionary-bas techniqu . unix compress , exampl , monitor perform point . simpli ﬂush reiniti dictionari compress ratio fall belowa threshold . better dictionari manag perhap remov lru ( least recent use ) entri . algorithm look entri preﬁx dictionari entri , indic code use sinceit creation . 7.6 arithmet code arithmet code advanc code method usual outperform huff- man code practic . initi develop late 1970 1980 [ 12–14 ] . initi idea arithmet code introduc shannon ’ 1948 work [ 3 ] . peter elia develop ﬁrst recurs implement ( publish mention abramson ’ 1963 book [ 15 ] ) . method develop describ jelinek ’ 1968 book [ 16 ] . better known improv arithmet code method attribut pasco [ 17 ] rissanen langdon [ 12 ] . v ariou modern version arithmet code develop newer multimedia standard , exampl , fast binari arithmet code jbig , jbig2 , jpeg 2000 context-adapt binari arithmet code ( cabac ) h.264 , h.265 , h.266 . introduc fundament section later chap . 12 . normal ( non-extend mode ) , huffman code assign symbol codeword integr bit length . state earlier , log 21 piindic amount inform contain inform sourc si , correspond number bit need repres . exampl , particular symbol si larg probabl ( close 1.0 ) , log21 piwil close 0 , even assign 1 bit repres symbol costli transmit 1 bit mani time . although possibl group symbol metasymbol codeword assign- ment ( extend huffman code ) overcom limit integr number bit per symbol , increas result symbol tabl requir huffman encod decod would formid . arithmet code treat whole messag one unit achiev fraction number bit input symbol . practic , input data usual broken chunk avoid error propag . present , startwith simplist approach includ termin symbol . introduc improv method practic implementations.7.6 arithmet code 221 7.6.1 basic arithmet code algorithm messag repres half-open interv [ , b ) aand bare real number 0 1 . initi , interv [ 0,1 ) . messag becom longer , length interv shorten , number bit need repres symbol probabl rang rang low rang high 0.2 [ 0 , 0.2 ) 0 0.2 b 0.1 [ 0.2 , 0.3 ) 0.2 0.3 c 0.2 [ 0.3 , 0.5 ) 0.3 0.5 0.05 [ 0.5 , 0.55 ) 0.5 0.55 e 0.3 [ 0.55 , 0.85 ) 0.55 0.85 f 0.05 [ 0.85 , 0.9 ) 0.85 0.9 $ 0.1 [ 0.9 , 1.0 ) 0.9 1.0 ( ) abcdef $ abcdef $ abcdef $ abcdef $ abcdef $ abcdef $ 0.3 0.3 0.322 0.3286 0.331840.3322 0.3322 0.34 0.5 01.0 .334 0.9 0.85 0.55 0.5 0.3 0.2 ( b ) symbol low high rang 0 1.0 1.0 c 0.3 0.5 0.2 0.30 0.34 0.04 e 0.322 0.334 0.012 e 0.3286 0.3322 0.0036 $ 0.33184 0.33220 0.00036 ( c ) fig . 7.9 arithmet code : encod symbol caee $ : aprob distribut symbol ; bgraph- ical display shrink rang ; cnew low , high , n rang generated222 7 lossless compress algorithm interv increas . suppos alphabet [ , b , c , , e , f , $ ] , $ special symbol use termin messag , known probabl distribut shown fig . 7.9a . algorithm 7.5 ( arithmet code encod ) . begin low = 0.0 ; high = 1.0 ; rang = 1.0 ; initi symbol ; // symbol ! = termin ( symbol ! = termin ) { get ( symbol ) ; high = low + rang * range_high ( symbol ) ; low = low + rang * range_low ( symbol ) ; rang = high - low ; } output code low < = code < high ; end encod process illustr fig . 7.9b , c , string sym- bol caee $ encod . initi , low=0 , high=1.0 , rang =1.0 . ﬁrst symbol c , rang _low ( c ) =0.3 , rang _high ( c ) =0.5 , symbol c , low=0+1.0×0.3=0.3 , high=0+1.0×0.5=0.5 . new rang reduc 0.2 . clariti illustr , ever-shrink rang enlarg step ( indic dash line ) fig . 7.9b . second symbol , low , high , rang 0.30 , 0.34 , 0.04 . process repeat termin symbol $ receiv . low andhigh 0.33184 0.33220 , respect . appar ﬁnalli rang =pc×pa×pe×pe×p $ =0.2×0.2×0.3×0.3×0.1=0.00036 ﬁnal step encod call gener number fall within rang [ low , high ) . number refer tag , i.e. , uniqu identiﬁ interv repres sequenc symbol . although trivial pick number decim , 0.33184 , 0.33185 , 0.332 exampl , isless obviou binari fraction number . follow algorithm ensur shortest binari codeword found lowand high two end rang low < high . procedur 7.2 ( gener codeword encod ) . begin code = 0 ; k=1 ; ( valu ( code ) < low ) 7.6 arithmet code 223 { assign 1 kth binari fraction bit ; ( valu ( code ) > high ) replac kth bit 0 ; k=k+1 ; } end exampl , low=0.33184 , high=0.3322 . assign 1 ﬁrst binari fraction bit , would 0.1 binari , decim valu ( code ) = valu ( 0.1 ) =0.5 > high . henc , assign 0 ﬁrst bit . sinc valu ( 0.0 ) = 0 < low , thewhil loop continu . assign 1 second bit make binari code 0.01 valu ( 0.01 ) = 0.25 , less high , accept . sinc still true valu ( 0.01 ) < low , iter continu . eventu , binari codeword gener 0.01010101 , 2−2+2−4+2−6+2−8=0.33203125 . must point lucki found codeword 8 bit repres sequenc symbol caee $ . case , log21 pc+log21 pa+ log21 pe+log21 pe+log21 p $ =log21 range=log21 0.00036≈11.44 , would suggest could take 12 bit encod string symbol like . proven [ 2 ] ⌈log2 ( 1//producttext ipi ) ⌉i upper bound . name , worst case , shortest codeword arithmet code requir kbit encod sequenc symbol , k=⌈log21 range⌉=⌈ log21 /producttext ipi⌉ ( 7.8 ) pii probabl symbol iin sequenc , rang ﬁnal rang gener encod . appar , length messag long , rang quickli becom small , henc log21 rangebecom larg ; differ log21 rang and⌈log21 range⌉i neglig . gener , arithmet code achiev better perform huffman code , former treat entir sequenc symbol one unit , wherea thelatt restrict assign integr number bit symbol . exampl , huffman code would requir 12 bit caee $ , equal worst-cas perform arithmet code . moreov , huffman code alway attain upper bound given eq . ( 7.8 ) . shown ( see exercis 7 . ) alphabet [ , b , c ] known probabl distribut p a=0.5 , pb=0.4 , pc=0.1 , send bbb , huffman code requir 6 bit , ⌈log21 0.4×0.4×0.4⌉= 4 , wherea arithmet code need 4 bits.224 7 lossless compress algorithm tabl 7.5 arithmet code : decod symbol caee $ va l u e output symbol range_low range_high rang 0.33203125 c 0.3 0.5 0.2 0.16015625 0.0 0.2 0.2 0.80078125 e 0.55 0.85 0.3 0.8359375 e 0.55 0.85 0.3 0.953125 $ 0.9 1.0 0.1 algorithm 7.6 ( arithmet code decod ) . begin get binari code convert decim valu = valu ( code ) ; { find symbol range_low ( ) < = valu < range_high ( ) ; output ; low = rang_low ( ) ; high = range_high ( ) ; rang = high - low ; valu = [ valu - low ] / rang ; } symbol termin end tabl 7.5illustr decod process exampl . initi , value= 0.33203125 . sinc rang _low ( c ) =0.3≤0.33203125 < 0.5=rang _high ( c ) , ﬁrst output symbol c. yield value= [ 0.33203125 −0.3 ] /0.2= 0.16015625 , turn determin second symbol . eventu , valu 0.953125 , fall rang [ 0.9,1.0 ) termin $ . discuss , special symbol , $ , use termin string symbol . analog send end-of-lin ( eol ) imag transmiss . howev , code eol symbol interest problem . usual , eol end rel long . lei et al . [ 18 ] address issu propos algorithm control length eol codeword generates.also , transmiss channel/network noisi ( lossi ) , protect termin ( eol ) symbol crucial decod regain synchron encod . natur , encod decod know number symbol sequenc , termin symbol need . 7.6.2 scale increment code basic algorithm describ last section follow limit thatmak practic implement infeasible:7.6 arithmet code 225 •when use code long sequenc symbol , tag interv shrink small rang . repres small interv requir high-precis number ( i.e. , even 32-bit 64-bit ﬂoat point may enough ) morethan symbol code . •the encod produc output codeword entir sequenc enter . likewis , decod need codeword entir sequenceof input symbol decod . key observ [ 2,13 ] : 1 . although binari represent low , high , number within small interv usual requir mani bit , alway msb ( signiﬁc bit ) . exampl , 0.1000110 0.5469 ( low ) , 0.1000111 for0.5547 ( high ) . 2 . subsequ interv alway stay within current interv . henc , output common msb remov subsequ consider . base scale increment code . provid solut problem . scale three type scale method . shown fig . 7.10 . dark segment indic tag interv [ low , high ) , low < high . •e1 scale : appli tag interv entir ﬁrst half unit interv , i.e. , high≤0.5 ( fig . 7.10 ) . “ 0 ” sent decod result interv rescal doubl , i.e. , low=2×low , high=2×high . multipl realiz /lessmuch1 , i.e. , left-shift 1 bit . •e2 scale : appli tag interv entir second half unit interv , i.e. , low≥0.5 ( fig . 7.10 b ) . “ 1 ” sent decod low=2× ( low−0.5 ) , high=2× ( high−0.5 ) . also realiz /lessmuch1 , i.e. , left-shift 1 bit bit “ 1 ” simpli move . •e3 scale : tag interv straddl midpoint 0.5 , low≥0.25 , high≤ 0.75 ( fig . 7.10 c ) . handl low=2× ( low−0.25 ) , high=2× ( high−0.25 ) . signal e3 scale bit complic [ 2 ] . address later show e1 e2 scale . show procedur exampl involv e1 e2 scale only.226 7 lossless compress algorithm fig . 7.10 scale arithmet code ( b ) e2 scaling01 0.5 01 0.5 01 0.5 01 0.5 01 0.5 01 0.50.25 0.75 0.75 0.25 ( c ) e3 scale ( ) e1 scale procedur 7.3 ( e1 e2 scale arithmet code ) . begin ( high < = 0.5 ) ( low > = 0.5 ) { ( high < = 0.5 ) // e1 scale { output ‘ 0 ’ ; l w=2 * low ; high = 2 * high ; } els // e2 scale { output ‘ 1 ’ ; l w=2 * ( low - 0.5 ) ; high = 2 * ( high - 0.5 ) ; } } end exampl 7.4 ( arithmet code scale increment code ) . assum three symbol , b , c , probabl : : 0.7 , b : 0.2 , c : 0.1 . suppos input sequenc exampl acb , encod decod know length sequenc 3 . encod work ( see fig . 7.11 ) follows:7.6 arithmet code 227 input b:0.26 0.40.7 009 .01 0.7 0.63 0.49 0.8 0.040.52 0.544 0.6 0.432input : ac b e2 : output `` 1 '' e1 : output `` 0 '' e2 : output `` 1 '' 0.5final number 0.5 ( binari 0.1 ) select , output `` 1 '' input c : fig . 7.11 exampl : arithmet code scale increment coding—encod •after receiv “ , ” ﬁrst interv [ 0 , 0.7 ) select examin ( shown expand ) . •after receiv “ c , ” last interv [ 0.63 , 0.7 ) select . •becaus [ 0.63 , 0.7 ) entir second half unit interv , e2 scale trigger result output “ 1 ” new interv [ 0.26 , 0.4 ) , 2× ( 0.63−0.5 ) =0.26 2 × ( 0.7−0.5 ) =0.4 . •becaus [ 0.26 , 0.4 ) entir ﬁrst half unit interv , addit e1 scale necessari result output “ 0 ” new interv [ 0.52 , 0.8 ) , 2 ×0.26=0.52 2 ×0.4=0.8 . •again , e2 scale trigger result output “ 1 ” new interv [ 0.04 , 0.6 ) . point , scale need . third ( last ) input symbol “ b , ” interv [ 0.432 , 0.544 ) select . gener output shortest codeword “ 1 ” ( accord procedur discuss last section ) tag interv . summari , encod produc 1011 equival 0.6875 . import point without scale , interv [ 0.63 , 0.7 ) would chosen input symbol c , code 1011 , i.e. , 0.6875 would chosen shortest codeword repres sequenc acb . word , demonstr scale procedur produc correct result ! decod work ( see fig . 7.12 ) follows.228 7 lossless compress algorithm 0.26 0.40.7 009 .01 0.63 0.49 0.8 0.040.52 0.544 0.6 0.4320.68750.7 0.5 0.50.375 0.75read 2 bit : output tag : 10 ( 0.5 ) read 4 bit : output c tag : 1011 ( 0.6875 ) e2 : shift 1 bit , read 1 bite1 : shift 1 bit , read 1 bit tag : 1100 ( 0.75 ) tag : 1000 ( 0.5 ) tag : 0110 ( 0.375 ) e2 : shift 1 bit , read 1 bit output bbc fig . 7.12 exampl : arithmet code scale increment coding—decod gener , length kof codeword produc encod rel larg . decod choos use maximum l≤kbit work time decod process . valu li determin size smallest interv . exampl , smallest interv [ 0.9 , 1.0 ) , l=⌈log21 0.1⌉=4 . need , old bit shift new bit gradual read . , cours , essenc increment coding—both encod decod start work limit number bit , work continu without see entir sequenc symbol ﬁnal code . •after read ﬁrst 2 bit “ 10 , ” symbol alreadi unambigu decod . output a. tag : 10 , i.e. , 0.5 . •after read 4 bit “ 1011 , ” symbol c unambigu decod . output c. tag : 1011 , i.e. , 0.6875 . •becaus [ 0.63 , 0.7 ) entir second half unit interv , e2 scale trigger : shift ﬁrst bit , read 1 bit ( default , “ 0 ” ) . tag : 0110 , i.e. , 0.375 . •becaus [ 0.26 , 0.4 ) entir ﬁrst half unit interv , e1 scale trigger : shift 1 bit , read 1 bit . tag : 1100 , i.e. , 0.75 . •again , e2 scale trigger : shift ﬁrst bit , read 1 bit . tag : 1000 , i.e. , 0.5 . point , scale need . last symbol b decod . output b.7.6 arithmet code 229 e3 scale exampl , let ’ ﬁrst see e3 scale work . given interv [ 0.48 , 0.51 ) , e3 scale yield [ 0.46 , 0.52 ) , anoth e3 yield [ 0.42 , 0.54 ) , . appar , interv gradual expand . address origin concern repres tini interv could requir high precis numbers.in subsequ step increment code , like chosen rang fall ﬁrst half ( high≤0.5 ) second half ( low≥0.5 ) unit interv , e1 e2 trigger . follow shown [ 2 ] : •ne3 scale step follow e1 equival e1 follow ne2 step . •ne3 scale step follow e2 equival e2 follow ne1 step . therefor , good way handl signal e3 scale postpon e1 e2 . e1 ne3 oper , send “ 0 ” follow byn “ 1 ’ ” e1 ; e2 ne3 oper , send “ 1 ” follow byn “ 0 ’ ” e2 . 7.6.3 integ implement algorithm describ last section also integ implement use integ arithmet [ 2,13,19 ] . quit common modern multimedia applic . fairli straightforward extens origin implementation.bas , unit interv replac rang [ 0 , n ) , n integ , e.g. , 255 . integ rang could small , e.g. , [ 0 , 255 ) , appli scale techniqu similar discuss , integ arithmet , necess . main motiv integ implement , cours , avoid ﬂoat number oper . 7.6.4 binari arithmet code describ , implement arithmet code involv continu genera-t ( calcul ) new interv , check delimit interv . number symbol larg , involv mani calcul ( integ ﬂoat number ) slow . name suggest , binari arithmet code deal two symbol , i.e. , 0 1 . figur 7.13 illustr simpl scenario . obviou one new valu insid tag interv gener step , i.e. , 0.7 , 0.49 , 0.637 , and0.5929 . decis interv take ( ﬁrst second ) also simpler.230 7 lossless compress algorithm symbol 1 0.7 1 0 0.637 0.637 0.490.49 0.70.49 0.7 0 0.5929symbol 0 fig . 7.13 binari arithmet code encod decod includ scale possibl integ implementa- tion work way non-binari symbol . non-binari symbol convert binari binari arithmet code binar . mani code scheme use binar . introduc one , exp-golomb code , chap . 12 . fast binari arithmet code ( q-coder , mq-coder ) develop multime- dia standard jbig , jbig2 , jpeg-2000 . advanc version , context-adapt binari arithmet code ( cabac ) , use h.264 ( m-coder ) , h.265 , h.266 . 7.6.5 adapt arithmet code know arithmet code perform increment . henc , need know probabl distribut symbol advanc . make codec process especi adaptive—w record current count symbol receiv far , updat probabl distribut symbol . updat probabl distribut use divid interv next step . adapt huffman code , long encod decod syn- chroniz ( i.e. , use updat rule ) , adapt process work ﬂaw- lessli . nevertheless , adapt arithmet code major advantag adapt huffman code : need keep ( potenti ) larg dynam symbol tabl constantli updat adapt huffman tree . outlin procedur adapt arithmet code , give exampl illustr also work binari arithmet coding.7.6 arithmet code 231 procedur 7.4 ( procedur adapt arithmet code ) . encod decod -- -- -- - -- -- -- - initi ( reset counter ) initi ( reset counter ) ( symbol ! = termin ) ( symbol ! = termin ) { { get ( symbol ) ; decod ( symbol ) ; encod ( symbol ) ; output ( symbol ) ; updat stat interv ; updat stat interv ; } } exampl 7.5 ( adapt binari arithmet code ) . figur 7.14 illustr encod adapt binari arithmet code . assum input symbol encod 10001 . , simpl exampl , assum encod decod know length sequenc . [ clariti simplic , invok scale procedur ( e1 , e2 , etc . ) introduc earlier . ] 0.546875 ( binari 0.100011 ) p ( 0 ) =1/2 , p ( 1 ) =1/2 c ( 0 ) =1 , c ( 1 ) =2 p ( 0 ) =1/3 , p ( 1 ) =2/3 c ( 0 ) =2 , c ( 1 ) =2 p ( 0 ) =1/2 , p ( 1 ) =1/2 c ( 0 ) =3 , c ( 1 ) =2 p ( 0 ) =3/5 , p ( 1 ) =2/5 c ( 0 ) =4 , c ( 1 ) =2 p ( 0 ) =2/3 , p ( 1 ) =1/3encod 1 encod 0 encod 1encod 0 encod 00 10.5 1symbol 0 symbol 1 0.6667 0.5 0.50.5 0.50.6667 0.5834 0.5834 0.55 0.5333 0.55initi , c ( 0 ) =c ( 1 ) =1 fig . 7.14 adapt binari arithmet coding—encod . [ input symbols:10001 ] 232 7 lossless compress algorithm decod 10 11symbol 0 symbol 1 0.6667 0.5 0.50.5 0.50.6667 0.5834 0.5834 0.53330.55 0.55 0.5468750.5468750.5468750.5468750.5468750.5 decod 1 c ( 0 ) =1 , c ( 1 ) =2initi , c ( 0 ) =c ( 1 ) =1 p ( 0 ) =p ( 1 ) =1/2 p ( 0 ) =1/3 , p ( 1 ) =2/3 decod 0 p ( 0 ) =p ( 1 ) =1/2c ( 0 ) =2 , c ( 1 ) =2 decod 0 p ( 0 ) =3/5 , p ( 1 ) =2/5 decod 0c ( 0 ) =3 , c ( 1 ) =2 c ( 0 ) =4 , c ( 1 ) =2 p ( 0 ) =2/3 , p ( 1 ) =1/3 fig . 7.15 adapt binari arithmet coding—decod . [ input : 0.546875 ( binari 0.100011 ) ] •initi , counter symbol 0 1 c ( 0 ) = c ( 1 ) = 1 . henc , initi probabl symbol 0 1 p ( 0 ) = p ( 1 ) = 1/2 . ﬁrst binari symbol 1 encod . interv [ 0.5 , 1 ) expand shown ﬁgure . •the counter c ( 1 ) updat , c ( 1 ) = 2 ( c ( 0 ) remain 1 ) . accordingli , new probabl p ( 0 ) = 1/3 , p ( 1 ) = 2/3 . second binari symbol 0 encod . interv [ 0.5 , 0.6667 ) expand . •the counter c ( 0 ) updat , c ( 0 ) = 2 c ( 1 ) = 2 . new probabl p ( 0 ) = 1/2 , p ( 1 ) = 1/2 . •the encod process third fourth binari symbol similar last one . last line . •we encod ﬁfth ( last ) symbol 1 , ﬁnish exampl select number insid interv [ 0.5333 , 0.55 ) . accord procedur sect . 7.6.1 gener shortest codeword , binari 0.100011 , i.e. , 0.546875 . encod output 0.546875 ( binari 0.100011 ) . figur 7.15 illustr decod . receiv input code 0.546875 ( binari 0.100011 ) encod . •a encod , initi , counter symbol 0 1 c ( 0 ) = c ( 1 ) = 1 decod . henc , initi probabl symbol 0 1 p ( 0 ) = p ( 1 ) = 1/2 . ﬁrst binari symbol 1 decod . interv [ 0.5 , 1 ) expanded.7.6 arithmet code 233 •the counter c ( 1 ) updat , c ( 1 ) = 2 ( c ( 0 ) remain 1 ) . new proba- biliti p ( 0 ) = 1/3 , p ( 1 ) = 2/3 . second binari symbol 0 decod . interv [ 0.5 , 0.6667 ) expand . •the counter c ( 0 ) updat , c ( 0 ) = 2 c ( 1 ) = 2 . new probabl p ( 0 ) = 1/2 , p ( 1 ) = 1/2 . •the decod process third fourth binari symbol similar last one . last line . •the ﬁfth ( last ) symbol 1 decod small exampl , 0.546875 insid interv [ 0.5333 , 0.55 ) . note , normal , encod decod work increment , capabl continu handl long sequenc symbol termin ﬁnalli reach . 7.7 lossless imag compress one commonli use compress techniqu multimedia data com-press differenti code . basi data reduct differenti code redund consecut symbol data stream . recal consid lossless differenti code chap . 6 , examin audio must dealt via subtract predict valu . audio signal index one dimen-s , time . consid appli lesson learn audio context digit imag signal index two , spatial , dimens ( x , ) . 7.7.1 differenti code imag let ’ consid differenti code context digit imag . sens , move signal domain one dimens signal index numbersin two dimens ( x , ) —the row column imag . later , ’ look video signal . even complex , index space time ( x , , ) . continu physic world , gray-level intens ( color ) background foreground object imag tend chang rel slowli across imag frame . sinc deal signal time domain foraudio , practition gener refer imag signal spatial domain . gener slowli chang natur imageri spatial produc high likelihood neighbor pixel similar intens valu . given origin imag ( x , ) , use simpl differ oper , deﬁn differ imag ( x , ) follow : ( x , ) =i ( x , ) −i ( x−1 , ) ( 7.9 ) simpl approxim partial differenti oper ∂/∂xappli imag deﬁn term integ valu xand y.234 7 lossless compress algorithm ( ) ( b ) 00.511.522.533.54× 104 0 50 100 150 200 250 ( c ) 051015× 104 −80−60−40−20 0 20 40 60 80 ( ) fig . 7.16 distribut origin versu deriv imag . , borigin gray-level imag partial deriv imag ; c , dhistogram origin deriv imag . ﬁgure use commonli employ imag call barb anoth approach use discret version 2d laplacian oper deﬁn differ imag ( x , ) ( x , ) =4i ( x , ) −i ( x , y−1 ) −i ( x , y+1 ) −i ( x+1 , ) −i ( x−1 , ) ( 7.10 ) case , differ imag histogram fig . 7.16 , deriv ( x , ) partial deriv imag fig . 7.16 b origin imag iin fig . 7.16 . notic histogram unsubtract iitself much broader , fig . 7.16 c. shown imag iha larger entropi differ imag , sinc even distribut intens valu . consequ , huffman code variable-length code scheme produc shorter bit-length codeword differ imag . compress work better differ imag . 7.7.2 lossless jpeg lossless jpeg special case jpeg imag compress . differ drastic jpeg mode algorithm lossi step . thu , treat here7.7 lossless imag compress 235 fig . 7.17 neighbor pixel predictor lossless jpeg . note , b , c alreadi decod use predictor , decod side encode/decod cyclec b x consid use lossi jpeg method chap . 9 . lossless jpeg invok user select 100 % qualiti factor imag tool . essenti , lossless jpeg includ jpeg compress standard simpli complet . follow predict method appli unprocess origin imag ( color band origin color imag ) . essenti involv two step : form differenti predict encod . 1 . predictor combin valu three neighbor pixel predict valu current pixel , indic x fig . 7.17 . predictor use one seven scheme list tabl 7.6 . predictor p1 use , neighbor intens valu adopt predict intens current pixel ; predictor p4 use , current pixel valu deriv three neighbor pixel +b−c ; . 2 . encod compar predict actual pixel valu posit x encod differ use one lossless compress techniqu discuss , huffman code scheme . sinc predict must base previous encod neighbor , ﬁrst pixel imag ( 0,0 ) simpli use valu . pixel ﬁrst row alway use predictor p1 , ﬁrst column alway use p2 . lossless jpeg usual yield rel low compress ratio , render impract multimedia applic . empir comparison use 20 imag indic compress ratio lossless jpeg one seven predictor rang 1.0 3.0 , averag around 2.0 . predictor tabl 7.6 predictor lossless jpeg predictor predict p1 p2 b p3 c p4 a+b −c p5 a+ ( b −c ) / 2 p6 b+ ( −c ) / 2 p7 ( + b ) / 2236 7 lossless compress algorithm tabl 7.7 comparison lossless jpeg lossless compress program compress programcompress ratio lena footbal f-18 flower lossless jpeg 1.45 1.54 2.29 1.26 optim losslessjpeg 1.49 1.67 2.71 1.33 compress ( lzw ) 0.86 1.24 2.21 0.87 gzip ( lz77 ) 1.08 1.36 3.10 1.05 gzip-9 ( optimallz77 ) 1.08 1.36 3.13 1.05 pack ( huffmancod ) 1.02 1.12 1.19 1.00 4–7 consid neighbor node horizont vertic dimens offer slightli better compress ( approxim 0.2–0.5 higher ) predictor 1–3 . tabl 7.7show comparison compress ratio sever lossless com- pression techniqu use test imag lena , footbal , f-18 , ﬂower . stan- dard imag use mani purpos imag work shown textbook websit chapter . chapter devot discuss lossless compress algo- rithm . appar compress ratio gener limit ( maximum 2–3 ) . howev , mani multimedia applic address next sever chapter requir much higher compress ratio . thisi accomplish lossi compress scheme . 7.8 exercis 1 . calcul entropi “ checkerboard ” imag half pixel black half white . 2 . suppos eight charact distribut : ( 1 ) , b : ( 1 ) , c : ( 1 ) , : ( 2 ) , e : ( 3 ) , f : ( 5 ) , g : ( 5 ) , h : ( 10 ) . draw huffman tree distribut . ( thealgorithm may group subtre equal probabl differ order , answer strictli uniqu . ) 3 . ( ) entropi ηof imag , number ( 0 , 20 , 50 , 99 ) denot gray-level intens ? 99 99 99 99 99 99 99 99 20 20 20 20 20 20 20 20 00000000 0 0 50 50 50 50 0 0 0 0 50 50 50 50 0 00 0 50 50 50 50 0 0 0 0 50 50 50 50 0 0 000000007.8 exercis 237 ( b ) show step step construct huffman tree encod four intens valu imag . show result code intens valu . ( c ) averag number bit need pixel , use huffman code ? compar η ? 4 . consid alphabet two symbol , b , probabl p ( ) =xand p ( b ) =1−x . ( ) plot entropi function x. ou might want use log23=1.6 log27=2.8 . ( b ) discuss must case probabl two symbol 1/2+/epsilon1and 1 /2−/epsilon1 , small /epsilon1 , entropi less maximum . ( c ) gener result show , sourc gener n sym- bol , entropi maximum symbol equiprob . ( ) small program project , write code verifi conclus . 5 . extend huffman code assign one codeword group ksymbol . averag ( l ) ( averag number bit symbol ) still less entropi ηa indic eq . ( 7.7 ) ? 6 . ( ) suppos code binari sourc , i.e. , alphabet consist 0 1 . exampl , fax like this.suppos probabl fa0i 7/8 , fo ra1i 1/8 . entropi ? ( note : case ’ calcul , log 27≈ 2.81 . ) set huffman code ? averag bitrat ? ( b ) code problem term extend huffman compress , use n=2 group k=2 pair symbol . averag bitrat ? show work ( use fraction , decim number , like ) . 7 . arithmet code huffman code two popular lossless compress method . ( ) advantag disadvantag arithmet code compar huffman code ? ( b ) suppos alphabet [ , b , c ] , known probabl distribut pa=0.5 , pb=0.4 , pc=0.1 . simplic , let ’ also assum encod decod know length messag alway 3 , need termin . . mani bit need encod messag bbb huffman code ? ii . mani bit need encod messag bbb arithmet code ? 238 7 lossless compress algorithm fig . 7.18 adapt huffman tree b new1 01 0 2 02 24 8 . ( ) advantag adapt huffman code compar orig- inal huffman code algorithm ? ( b ) assum adapt huffman code use code inform sourc swith vocabulari four letter ( , b , c , ) . transmiss , initi code = 00 , b = 01 , c = 10 , = 11 . exampl illustr fig . 7.8 , special symbol new sent letter sent ﬁrst time . figur 7.18 adapt huffman tree send letter aabb . , addit bitstream receiv decod next letter 01010010101. . addit letter receiv ? ii . draw adapt huffman tree addit letter receiv . 9 . work detail scale increment code arithmet code probabl three symbol : 0.8 , b : 0.02 , c : 0.18 , input sequenc acba . 10 . use arithmet code encod imag . ( ) , mani bit take encod ﬁrst row imag , number gray-level intens valu ? 200 200 80 40 20 80 200 200 200 200 80 40 20 80 200 200 200 200 80 40 20 80 200 200 200 200 80 40 20 80 200 200 200 200 80 40 20 80 200 200 200 200 80 40 20 80 200 200 200 200 80 40 20 80 200 200 200 200 80 40 20 80 200 200 ( b ) ( ) show detail encod ﬁrst four number ( 200 , 200 , 80 , 40 ) imag use arithmet code . ( note : ou must use e1 e27.8 exercis 239 scale applic . ) ( ii ) code ( sequenc bit ) encod gener four number ? explain get code . 11 . work detail encod decod adapt binari arithmet code input symbol 01111 . 12 . compar rate adapt adapt huffman code adapt arith- metic code . prevent method adapt quick chang insourc statist ? 13 . consid dictionary-bas lzw compress algorithm . suppos alpha- bet set symbol { 0,1 } . show dictionari ( symbol set plu associ code ) output lzw compress input 0110011 14 . implement huffman code , lzw code , arithmet code algorithm use favorit program languag . gener least three type sta-tist differ artiﬁci data sourc test implement algorithm . compar comment algorithm ’ perform term compress ratio type data sourc . option , implement adapt huffman adapt arithmet code algo- rithm . refer 1 . m. nelson , j.l . gailli , data compress book , 2nd edn . ( & book , new ork , 1995 ) 2 . k. sayood , introduct data compress , 5th edn . ( morgan kaufmann , san francisco , 2017 ) 3 . c.e . shannon , mathemat theori commun . bell syst . tech . j . 27 , 379–423 , 623–656 ( 1948 ) 4 . c.e . shannon , w. weaver , mathemat theori commun ( univers illinoi press , 1971 ) 5 . r.c . gonzalez , r.e . wood , digit imag process , 3rd edn . ( prentice-hal , 2007 ) 6 . r. fano , transmiss inform . ( mit press , 1961 ) 7 . d.a . huffman , method construct minimum-redund code . proc . ire 40 ( 9 ) , 1098–1101 ( 1952 ) 8 . t.h . cormen , c.e . leiserson , r.l . rivest , introduct algorithm , 3rd edn . ( mit press , cambridg , massachusett , 2009 ) 9 . j. ziv , a. lempel , univers algorithm sequenti data compress . ieee tran . inf . theori 23 ( 3 ) , 337–343 ( 1977 ) 10 . j. ziv , a. lempel , compress individu sequenc via variable-r code . ieee tran . inf . theori 24 ( 5 ) , 530–536 ( 1978 ) 11 . t.a . welch , techniqu high perform data compress . ieee comput . 17 ( 6 ) , 8–19 ( 1984 ) 240 7 lossless compress algorithm 12 . j. rissanen , g.g . langdon , arithmet code . ibm j. re . dev . 23 ( 2 ) , 149–162 ( 1979 ) 13 . i.h . witten , r.m . neal , j.g . cleari , arithmet code data compress . commun . acm 30 ( 6 ) , 520–540 ( 1987 ) 14 . t.c . bell , j.g . cleari , i.h . witten , text compress ( prentic hall , englewood cliff , new jersey , 1990 ) 15 . n. abramson , inform theori code ( mcgraw-hil , new ork , 1963 ) 16 . f. jelinek , probabilist inform theori ( mcgraw-hil , new ork , 1968 ) 17 . r. pasco , sourc code algorithm data compress . ph.d. thesi , depart elec- trical engin . ( stanford univers , 1976 ) 18 . s.m . lei , m.t . sun , entropi code system digit hdtv applic . ieee tran . circuit syst . video technol . 1 ( 1 ) , 147–154 ( 1991 ) 19 . p .g . howard , j. . vitter , practic implement arithmet code , imag text compress , ed . j.a . storer , pp . 85–112 . ( kluwer academ publish , 1992 ) 8lossi compress algorithm chapter , consid lossi compress method . sinc inform loss impli trade-off error bitrat , ﬁrst consid measur ofdistort —e.g. , squar error . differ quantiz introduc , differ distort behavior . discuss transform code lead intro- duction discret cosin transform use jpeg compress ( see chap . 9 ) karhunen loèv transform . anoth transform scheme , wavelet-bas cod- ing , set . sayood [ 1 ] deal extens subject lossi data compress well-organ easy-to-understand manner . mathemat foundat develop mani lossi data compress algorithm studi stochast process . stark wood [ 2 ] excel textbook subject . 8.1 introduct discuss chap . 7 , compress ratio imag data use lossless com- pression techniqu ( e.g. , huffman code , arithmet code , lzw ) low imag histogram rel ﬂat . imag compress multimedia applic , higher compress ratio requir , lossi method usuallyadopt . lossi compress , compress imag origin imag meant form close approxim origin imag perceptu . quantit describ close approxim origin data , someform distort measur requir . © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_8241242 8 lossi compress algorithm 8.2 distort measur adistort measur mathemat quantiti speciﬁ close approxi- mation origin , use distort criteria . look compress data , natur think distort term numer differ origin data reconstruct data . howev , data becompress imag , measur may yield intend result . exampl , reconstruct imag origin imag except shift right one vertic scan line , averag human observ wouldhav hard time distinguish origin would therefor conclud distort small . howev , calcul carri numer , ﬁnd larg distort , larg chang individu pixel reconstruct imag . problem need measur perceptu distort , naiv numer approach . howev , studi perceptu distortionsi beyond scope book . mani numer distort measur deﬁn , present three commonli use imag compress . interest averagepixel differ , mean squar error ( mse ) σ 2 di often use . deﬁn σ2 d=1 nn/summationdisplay n=1 ( xn−yn ) 2 ( 8.1 ) xn , yn , nare input data sequenc , reconstruct data sequenc , length data sequenc , respect . interest size error rel signal , measur signal-to-nois ratio ( snr ) take ratio averag squar origin data sequenc mean squar error ( mse ) , discuss chap . 6 . decibel unit ( db ) , deﬁn snr=10 log10σ2 x σ2 ( 8.2 ) σ2 xi averag squar valu origin data sequenc σ2 di mse . anoth commonli use measur distort peak-signal-to-nois ratio ( psnr ) , measur size error rel peak valu signal xpeak.i ti sg v e nb psnr =10 log10x2 peak σ2 ( 8.3 ) 8.3 rate-distort theori 243 8.3 rate-distort theori lossi compress alway involv trade-off rate distort . rate averag number bit requir repres sourc symbol . within framework , trade-off rate distort repres form rate-distort function r ( ) . intuit , given sourc given distort measur , di toler amount distort , r ( ) speciﬁ lowest rate sourc data encod keep distort bound d. easi see d=0 , lossless compress sourc . rate-distort function meant describ fundament limit perform code algorithm use evalu perform differ algorithm . figur 8.1 show typic rate-distort function . notic minimum possibl rate d=0 , loss , entropi sourc data . distort correspond rate r ( ) ≡0 maximum amount distort incur “ noth ” code . find closed-form analyt descript rate-distort function given sourc difﬁcult , imposs . gyorgi [ 3 ] present analyt express rate-distort function variou sourc . sourc analyt solut readili obtain , rate-distort function calcul numer , use algorithm develop arimoto [ 4 ] blahut [ 5 ] . fig . 8.1 typic rate-distort function r ( ) 0h dmaxd244 8 lossi compress algorithm 8.4 quantiz quantiz form heart lossi scheme . without quantiz , would inde lose littl inform . , embark detail discuss quantiz sect . 6.3.2 . sourc interest compress may contain larg number distinct output valu ( even inﬁnit , analog ) . efﬁcient repres sourc output , reduc number distinct valu much smaller set , via quantiz . algorithm ( quantiz ) uniqu determin partit input rang , encod side , set output valu , decod side . input output quantiz either scalar valu vector valu , thu lead scalar quantiz andvector quantiz . section , examin design uniform nonuniform scalar quantiz brieﬂi introduceth topic vector quantiz ( vq ) . 8.4.1 uniform scalar quantiz uniform scalar quantiz partit domain input valu equal space interv , except possibl two outer interv . end point partit interv call quantiz ’ decis boundari . output reconstruct valu correspond interv taken midpoint interv . thelength interv refer step size , denot symbol /delta1 . uniform scalar quantiz two type : midris andmidtread . midris quantiz use even number output level , midtread quantizerwith odd number . midris quantiz partit interv bracket zero ( see fig . 8.2 ) . midtread quantiz zero one output valu , henc , also known dead-zon quantiz , turn rang nonzero input valu zero output . midtread quantiz import sourc data repres zero valu ﬂuctuat small posit neg number . appli midtread quantiz case would produc accur steadi represent valu zero . special case /delta1=1 , simpli comput output valu quantiz q midris ( x ) =⌈x⌉−0.5 ( 8.4 ) qmidtread ( x ) =⌊x+0.5⌋ ( 8.5 ) goal design success uniform quantiz minim distort given sourc input desir number output valu . done adjust step size /delta1to match input statistics.8.4 quantiz 245 1.0 −1.0 −2.0 −3.0 −4.0−4 −3 −2 −14 3 213.5 2.5 1.5 0.5 −3.5−0.5 −1.52.0q ( x ) q ( x ) xδ/ δ/4.5 −4.55.05 .15 .23 . 5 −3.5 −2.5 −1.5 −0.5 x4.0 3.0 −2.5 ( ) ( b ) fig . 8.2 uniform scalar quantiz : amidris ; bmidtread let ’ examin perform mlevel quantiz . let b= { b0 , b1 , ... , bm } set decis boundari y= { y1 , y2 , ... , ym } set reconstruc- tion output valu . suppos input uniformli distribut interv [ −xmax , xmax ] . rate quantiz r=⌈log2m⌉ ( 8.6 ) , ri number bit requir code mthings—in case , moutput level . step size /delta1i given /delta1=2xmax ( 8.7 ) sinc entir rang input valu −xmax toxmax . bound input , quantiz error caus quantiz refer granular distort . quantiz replac whole rang valu , maximum valu ∞ , similarli neg valu , part distort call overload distort . get overal ﬁgure granular distort , notic decis boundari bifor midris quantiz [ ( i−1 ) /delta1 , i/delta1 ] , i=1 .. m/2 , cover posit data x ( anoth half neg xvalu ) . output valu yiar midpoint i/delta1−/delta1/2 , i=1 .. m/2 , consid posit data . total distort twice sum posit data , or246 8 lossi compress algorithm fig . 8.3 quantiz error uniformli distribut sourceerror δ −δ/2δ/2 0 x dgran=2m 2/summationdisplay i=1i/delta1/integraldisplay ( i−1 ) /delta1/parenleftbigg x−2i−1 2/delta1/parenrightbigg21 2xmaxdx ( 8.8 ) divid rang xto normal valu 1 . sinc reconstruct valu yiar midpoint interv , quanti- zation error must lie within valu [ −/delta1 2 , /delta1 2 ] . figur 8.3i graph quantiz error uniformli distribut sourc . quantiz error case also uniformli distribut . therefor , averag squar error vari- anceσ2 dof quantiz error calcul interv [ 0 , /delta1 ] error valu [ −/delta1 2 , /delta1 2 ] . error valu xise ( x ) =x−/delta1/2 , varianc error given σ2 d=1 /delta1/delta1/integraldisplay 0 ( e ( x ) −¯e ) 2dx =1 /delta1/delta1/integraldisplay 0/parenleftbigg x−/delta1 2−0/parenrightbigg2 dx ( 8.9 ) =/delta12 128.4 quantiz 247 similarli , signal varianc σ2 x= ( 2xmax ) 2/12 random signal , quantiz nbit , m=2n , eq . ( 8.2 ) w eh v e sqnr =10 log10/parenleftbigg σ2 x σ2 d/parenrightbigg =10 log10/parenleftbigg ( 2xmax ) 2 12·12 /delta12/parenrightbigg =10 log10⎛ ⎜⎝ ( 2xmax ) 2 12·12 /parenleftbig 2xmax m/parenrightbig2⎞ ⎟⎠ =10 log10m2=20nlog102 ( 8.10 ) =6.02n ( db ) ( 8.11 ) henc , rederiv formula ( 6.3 ) deriv simpli sect . 6.1 . eq . ( 8.11 ) , import result increas one bit quantiz increas signal-to-quant nois ratio 6.02 db . sect . 6.1.5 , also show know signal probabl densiti function get accur ﬁgure sqnr : assum sinusoid signal deriv exact sqnr eq . ( 6.4 ) . well , sophist estim dresult sophist model probabl distribut error . 8.4.2 nonuniform scalar quantiz input sourc uniformli distribut , uniform quantiz may inefﬁci . increas number decis level within region sourc dens distribut effect lower granular distort . addit , without toincreas total number decis level , enlarg region sourc spars distribut . nonuniform quantiz thu nonuniformli deﬁn decis boundari . two common approach nonuniform quantiz : lloyd–max quantiz compand quantiz , introduc chap . 6 . lloyd–max quantiz * uniform quantiz , total distort equal granular distort , eq . ( 8.8 ) . sourc distribut uniform , must explicitli consid probabl distribut ( probabl densiti function ) fx ( x ) . need correct decis boundari biand reconstruct valu yi , solv both248 8 lossi compress algorithm simultan . , plug variabl bi , yiinto total distort measur dgran=m/summationdisplay j=1bj/integraldisplay bj−1/parenleftbig x−yj/parenrightbig21 xmaxfx ( x ) dx ( 8.12 ) minim total distort set deriv eq . ( 8.12 ) zero . differenti respect yjyield set reconstruct valu yj=/integraltextbj bj−1xfx ( x ) dx /integraltextbj bj−1fx ( x ) dx ( 8.13 ) say optim reconstruct valu weight centroid x interv . differenti respect bjand set result zero yield bj=yj+1+yj 2 ( 8.14 ) give decis boundari bjat midpoint two adjac reconstruct valu . solv two equat simultan carri iter . theresult term lloyd–max quantiz . algorithm 8.1 ( lloyd–max quantiz ) begin choos initi level set 0 i=0 repeat comput bius equat 8.14 i=i+1 comput yius equat 8.13 |yi−yi−1| < /epsilon1 end start initi guess optim reconstruct level , algorithm iter estim optim boundari , base current estim ofth reconstruct level . updat current estim reconstruct level , use newli comput boundari inform . process repeat reconstruct level converg . exampl algorithm oper , seeexercis 3.8.4 quantiz 249 compand quantiz compand quantiz , input map compressor function g quantiz use uniform quantiz . transmiss , quantiz valu map back use expand function g−1 . block diagram com- pand process shown fig . 8.4 , ˆxi quantiz version x . input sourc bound xmax , nonuniform quantiz repres compand quantiz . two commonli use compand µ-law a-law compand ( sect . 6.1 ) . 8.4.3 vector quantiz one fundament idea shannon ’ origin work inform theori compress system perform better oper vector group sampl rather individu symbol sampl . form vector input sampl concaten number consecut sampl singl vector . exampl , input vector might segment speech sampl , group consecut pixel imag , chunk data format . idea behind vector quantiz ( vq ) similar scalar quantiz extend multipl dimens . instead repres valu within interv 1d space reconstruct valu , scalar quantiz , vq n-compon code vector repres vector lie within region n-dimension space . collect code vector form codebook vector quantiz . sinc implicit order code vector , 1d case , index set also need index codebook . figur 8.5show basic vector quantiz procedur . diagram , encod ﬁnd closest code vector input vector output associ index . decod side , exactli codebook use . code index input vector receiv , simpl tabl lookup perform determin reconstruct vector . find appropri codebook search closest code vector encod end may requir consider comput resourc . howev , decod execut quickli , sinc constant time oper need obtain reconstruct . properti , vq attract system lot resourc encod end decod limit resourc , need quick execut time . multimedia applic fall categori . g−1uniform quantiz xx^ g fig . 8.4 compand quantization250 8 lossi compress algorithm ncode vectort lookup indexencod decod x x^ . . . 101 2 3 4 5 6 7 8 9 101 2 3 4 5 6 7 8 9 n . . . . . . fig . 8.5 basic vector quantiz procedur gersho gray [ 6 ] cover quantiz , especi vector quantiz , compre- hensiv . addit basic theori , book provid nearli exhaust descript avail vq method . 8.5 transform code basic principl inform theori , know code vector efﬁcient code scalar ( see sect . 7.4.2 ) . carri intent , need group block consecut sampl sourc input vector . letx= { x1 , x2 , ... , xk } tbe vector sampl . whether input data imag , piec music , audio video clip , even piec text , good chanc substanti amount correl inher among neighbor sampl xi . rational behind transform code yi result linear transform tof input vector xin way compon yare much less correl , ycan code efﬁcient x . exampl , inform rgb imag contain main axi , rotat direct ﬁrst compon mean lumin compress differ color inform . approxim lumin channel eye . higher dimens three , inform accur describ ﬁrst compon transform vector , remain compon coars quantiz , even set zero , littl signal distort . decorrel —that , less effect one dimens anoth ( orthog- onal axe ) —the chanc deal differ axe that8.5 transform code 251 store rel minor amount inform without affect reason accur reconstruct signal quantiz truncat transform coefﬁcient . gener , transform titself compress data . compress come process quantiz compon . section , studi discret cosin transform ( dct ) tool decorrel input signal . also examin karhunen–loèv transform ( klt ) , optim decorrel compon input x . 8.5.1 discret cosin transform ( dct ) discret cosin transform ( dct ) , wide use transform code techniqu , abl perform decorrel input signal data-independ manner [ 7,8 ] . , gain tremend popular . examin deﬁnitionof dct discuss properti , particular relationship familiar discret fourier transform ( dft ) . deﬁnit dct let ’ start 2d dct . given function f ( , j ) two integ variabl andj ( piec imag ) , 2d dct transform new function f ( u , v ) , integ uandvrun rang iandj . gener deﬁnit transform f ( u , v ) =2c ( u ) c ( v ) √ mnm−1/summationdisplay i=0n−1/summationdisplay j=0co ( 2i+1 ) uπ 2mco ( 2j+1 ) vπ 2nf ( , j ) ( 8.15 ) , u=0,1 , ... , m−1 , j , v=0,1 , ... , n−1 , constant c ( u ) c ( v ) determin c ( ξ ) =/braceleftbigg√ 2 2ifξ=0 , 1 otherwis . ( 8.16 ) jpeg imag compress standard ( see chap . 9 ) , imag block deﬁn dimens m=n=8 . therefor , deﬁnit 2d dct invers ( idct ) case follow . 2d discret cosin transform ( 2d dct ) f ( u , v ) =c ( u ) c ( v ) 47/summationdisplay i=07/summationdisplay j=0co ( 2i+1 ) uπ 16co ( 2j+1 ) vπ 16f ( , j ) , ( 8.17 ) 252 8 lossi compress algorithm , j , u , v=0,1 , ... , 7 , constant c ( u ) andc ( v ) determin eq . ( 8.16 ) . 2d invers discret cosin transform ( 2d idct ) invers function almost , role f ( , j ) f ( u , v ) revers , except c ( u ) c ( v ) must stand insid sum : ˜f ( , j ) =7/summationdisplay u=07/summationdisplay v=0c ( u ) c ( v ) 4co ( 2i+1 ) uπ 16co ( 2j+1 ) vπ 16f ( u , v ) ( 8.18 ) , j , u , v=0,1 , ... , 7 , constant c ( u ) andc ( v ) determin eq . ( 8.16 ) . 2d transform applic 2d signal , digit imag . shown , 1d version dct idct similar 2d version . 1d discret cosin transform ( 1d dct ) f ( u ) =c ( u ) 27/summationdisplay i=0co ( 2i+1 ) uπ 16f ( ) , ( 8.19 ) i=0,1 , ... , 7 , u=0,1 , ... , 7 , constant c ( u ) eq . ( 8.16 ) . 1d invers discret cosin transform ( 1d-idct ) ˜f ( ) =7/summationdisplay u=0c ( u ) 2co ( 2i+1 ) uπ 16f ( u ) , ( 8.20 ) i=0,1 , ... , 7 , u=0,1 , ... , 7 , constant c ( u ) eq . ( 8.16 ) . closer look 1d dct let ’ examin dct 1d signal ; almost concept readili extens 2d dct . electr signal constant magnitud known dc ( direct current ) signal . common exampl batteri carri 1.5 9 volt dc . electrical8.5 transform code 253 signal chang magnitud period certain frequenc known ac ( altern current ) signal . good exampl household electr power circuit , carri electr sinusoid waveform 110 v ac , 60 hz ( or220 v , 50 hz mani countri ) . real signal complex . speech signal row gray-level inten- siti digit imag exampl 1d signal . howev , signal beexpress sum multipl signal sine cosin waveform variou amplitud frequenc . known fourier analysi . term dc ac , origin electr engin , carri describ componentsof signal ( usual ) compos one dc sever ac compon . cosin function use , process determin amplitud ac dc compon signal call cosin transform , integ indic make discret cosin transform . u=0 , eq . ( 8.19 ) yield dc coefﬁcient ; u=1 , 2 , … , 7 , yield ﬁrst second , etc. , seventh ac coefﬁcient . equat ( 8.20 ) show invers discret cosin transform . use sum product dc ac coefﬁcient cosin function reconstruct ( recompos ) function f ( ) . sinc comput dct idct involv loss , f ( ) denot ˜f ( ) . short , role dct decompos origin signal dc ac compon ; role idct reconstruct ( recompos ) signal . dct idct use set cosin function ; known basi function . figur 8.6show famili eight 1d dct basi function : u=0 .. 7 . dct enabl new mean signal process analysi frequenc domain . origin signal process deal electr electron signal ( e.g. , electr speech ) , f ( ) usual repres signal chang time ( bother convent time usual denot ) . 1d dct transform f ( ) , time domain , ( u ) , frequenc domain . coefﬁcient f ( u ) known frequenc respons form frequenc spectrum ( ) .i nimag process , imag content f ( i.j ) chang spatial indic iandjin space domain . 2d dct transform f ( , j ) tof ( u , v ) , spatial frequenc domain . conveni discuss , sometim use 1d imag 1d dct exampl . let ’ use exampl illustr frequenc responses.254 8 lossi compress algorithm 0th basi function ( u = 0 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 ith 1st basi function ( u = 1 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 2nd basi function ( u = 2 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 ith 3rd basi function ( u = 3 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 4th basi function ( u = 4 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 ith 5th basi function ( u = 5 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 6th basi function ( u = 6 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 ith 7th basi function ( u = 7 ) −1.0−0.500.51.0 0 1 2 3 4 5 6 7 fig . 8.6 1d dct basi function exampl 8.1 left side fig . 8.7a show dc signal magnitud 100 , i.e. , f1 ( ) =100 . sinc examin discret cosin transform , input signal discret , domain [ 0,7 ] . u=0 , regardless ivalu , cosin term eq . ( 8.19 ) becom co 0 , equal 1 . take account c ( 0 ) =√ 2/2 , f1 ( 0 ) given f1 ( 0 ) =√ 2 2·2· ( 1·100+1·100+1·100+1·100 +1·100+1·100+1·100+1·100 ) ≈2838.5 transform code 255 050100150200 0 1 2 3 4 5 6 7 isign f1 ( ) chang 0100200300400 0 1 2 3 4 5 6 7 udct output f1 ( u ) ( ) −100−50050100 0 1 2 3 4 5 6 7 ia chang signal f2 ( ac compon 0100200300400 0 1 2 3 4 5 6 7 udct output f2 ( u ) ( b ) 050100150200 0 1 2 3 4 5 6 7 isign f3 ( ) = f1 ( ) + f2 ( ) 0100200300400 0 1 2 3 4 5 6 7 udct output f3 ( u ) ( c ) −100−50050100 0 1 2 3 4 5 6 7 ian arbitrari signal f ( ) −200−1000100200 0 1 2 3 4 5 6 7 udct output f ( u ) ( ) fig . 8.7 exampl 1d discret cosin transform : aa dc signal f1 ( ) ; ban ac signal f2 ( ) ; c f3 ( ) =f1 ( ) +f2 ( ) ; n dan arbitrari signal f ( ) u=1 , f1 ( u ) . cosπ 16=− cos15π 16 , cos3π 16=− cos13π 16 , etc. , c ( 1 ) =1 , f1 ( 1 ) =1 2· ( cosπ 16·100+cos3π 16·100+cos5π 16·100+cos7π 16·100 +cos9π 16·100+cos11π 16·100+cos13π 16·100+cos15π 16·100 ) =0256 8 lossi compress algorithm similarli , shown f1 ( 2 ) =f1 ( 3 ) = ... =f1 ( 7 ) =0 . 1d dct result f1 ( u ) dc signal f1 ( ) depict right side fig . 8.7a—onli dc ( i.e. , ﬁrst ) compon fi nonzero . exampl 8.2 left side fig . 8.7b show discret cosin signal f2 ( ) . incident ( , rather , purpos ) , frequenc phase second cosin basi function , amplitud 100 . u=0 , , cosin term eq . ( 8.19 ) equal 1 . cosπ 8= −cos7π 8 , cos3π 8=− cos5π 8 , , f2 ( 0 ) =√ 2 2·2·1· ( 100 cosπ 8+100 cos3π 8+100 cos5π 8+100 cos7π 8 +100 cos9π 8+100 cos11π 8+100 cos13π 8+100 cos15π 8 ) =0 calcul f2 ( u ) , ﬁrst note u=2 , cos3π 8=sinπ 8 , w e cos2π 8+cos23π 8=cos2π 8+sin2π 8=1 similarli , cos25π 8+cos27π 8=1 cos29π 8+cos211π 8=1 cos213π 8+cos215π 8=1 end f2 ( 2 ) =1 2· ( cosπ 8·cosπ 8+cos3π 8·cos3π 8+cos5π 8·cos5π 8 +cos7π 8·cos7π 8+cos9π 8·cos9π 8+cos11π 8·cos11π 8 +cos13π 8·cos13π 8+cos15π 8·cos15π 8 ) ·100 =1 2· ( 1+1+1+1 ) ·100=200 show deriv detail . turn f2 ( 1 ) =f2 ( 3 ) = f2 ( 4 ) =···= f2 ( 7 ) =0.8.5 transform code 257 exampl 8.3 third row fig . 8.7 , input signal dct sum previou two signals—that , f3 ( ) =f1 ( ) +f2 ( ) . output f ( u ) valu f3 ( 0 ) =283 , f3 ( 2 ) =200 , f3 ( 1 ) =f3 ( 3 ) =f3 ( 4 ) =···= f3 ( 7 ) =0 thu , discov f3 ( u ) =f1 ( u ) +f2 ( u ) . exampl 8.4 fourth row ﬁgure show arbitrari ( least rel complex ) input signal f ( ) dct output f ( u ) : f ( ) ( i=0 .. 7 ) :85−65 15 30 −56 35 90 60 f ( u ) ( u=0 .. 7 ) :69−49 74 11 16 117 44 −5 note gener case , dct coefﬁcient f ( u ) nonzero neg . exampl , characterist dct summar follow : 1 . dct produc spatial frequenc spectrum f ( u ) correspond spatial signal f ( ) . particular , 0th dct coefﬁcient f ( 0 ) dc compon sig- nalf ( ) . constant factor ( i.e.,1 2·√ 2 2·8=2·√ 2 1d dct 1 4·√ 2 2·√ 2 2·64=8 2d dct ) , f ( 0 ) equal averag magnitud signal . fig . 8.7a , averag magnitud dc signal obvious 100 , f ( 0 ) =2√ 2×100 ; fig . 8.7b , averag magnitud ac signal 0 , f ( 0 ) ; nf g . 8.7c , averag magnitud f3 ( ) appar 100 , f ( 0 ) =2√ 2×100 . seven dct coefﬁcient reﬂect variou chang ( i.e. , ac ) compo- nent signal f ( ) differ frequenc . denot f ( 1 ) ac1 , f ( 2 ) ac2 , ... , f ( 7 ) ac7 , ac1 ﬁrst ac compon , complet half cycl cosin function [ 0,7 ] ; ac2 complet full cycl ; ac3 complet one half cycl ; ... ; ac7 , three half cycl . thesear , cours , due cosin basi function , arrang exactli manner . word , second basi function correspond ac1 , third correspond ac2 , . exampl fig . 8.7b , sinc sig- nalf 2 ( ) third basi function exactli cosin waveform , ident frequenc phase , reach maximum ( posit ) minimum ( neg ) valu synchron . result , product alway posit , sum product ( f2 ( 2 ) ac2 ) larg . turn that258 8 lossi compress algorithm ac coefﬁcient zero , sinc f2 ( ) basi function happen orthogon . ( discuss orthogon later chapter . ) point dct coefﬁcient easili take neg val-u . dc , occur averag f ( ) less zero . ( imag , never happen dc nonneg . ) ac , special case occur f ( ) basi function frequenc one happen half cycl behind—thi yield neg coefﬁcient , possibl larg magnitud . gener , signal look like one fig . 8.7d . f ( ) pro- duce mani nonzero ac compon , one toward ac7 indic higher frequenc content . signal larg ( posit neg ) respons high-frequ compon altern rapidli within small rang [ 0,7 ] . exampl , ac7 larg posit number , indic sig-nalf ( ) compon altern synchron eighth basi function—thre half cycl . accord nyquist theorem , highest frequenc signal sampl eight discret valueswithout signiﬁc loss alias . 2 . dct linear transform . gener , transform ( function ) linear , f f ( αp+βq ) =αt ( p ) +βt ( q ) , ( 8.21 ) αandβar constant , pandqar function , variabl , constant . deﬁnit eq . ( 8.19 ) , properti readili proven dct , use simpl arithmet oper . 1d invers dct let ’ ﬁnish exampl fig . 8.7d show invers dct ( idct ) . recal f ( u ) contain follow : f ( u ) ( u=0 .. 7 ) :69−49 74 11 16 117 44 −5 1d idct , indic eq . ( 8.20 ) , readili implement loop eight iter , illustr fig . 8.8 . iter 0 : ˜f ( ) =c ( 0 ) 2·co 0·f ( 0 ) =√ 2 2·2·1·69≈24.3 . iter 1 : ˜f ( ) =c ( 0 ) 2·co 0·f ( 0 ) +c ( 1 ) 2·co ( 2i+1 ) π 16·f ( 1 ) ≈24.3+1 2· ( −49 ) ·co ( 2i+1 ) π 16≈24.3−24.5·co ( 2i+1 ) π 16.8.5 transform code 259 −100−50050100 0 1 2 3 4 5 6 7 iafter 0th iter ( dc ) −100−50050100 0 1 2 3 4 5 6 7 iafter 1st iter ( dc + ac1 ) −100−50050100 0 1 2 3 4 5 6 7 iafter 2nd iter ( dc + ac1 + ac2 ) −100−50050100 0 1 2 3 4 5 6 7 iafter 3rd iter ( dc + ac1 + ac2 + ac3 ) −100−50050100 0 1 2 3 4 5 6 7 iafter 4th iter ( dc + ac1 + . . . + ac4 ) −100−50050100 0 1 2 3 4 5 6 7 iafter 5th iter ( dc + ac1 + . . . + ac5 ) −100−50050100 0 1 2 3 4 5 6 7 iafter 6th iter ( dc + ac1 + . . . + ac6 ) −100−50050100 0 1 2 3 4 5 6 7 iafter 7th iter ( dc + ac1 + . . . + ac7 ) fig . 8.8 exampl 1d idct iter 2 : ˜f ( ) =c ( 0 ) 2·co 0·f ( 0 ) +c ( 1 ) 2·co ( 2i+1 ) π 16·f ( 1 ) +c ( 2 ) 2· co ( 2i+1 ) π 8·f ( 2 ) ≈24.3−24.5·co ( 2i+1 ) π 16+37·co ( 2i+1 ) π 8 . ... iter 0 , ˜f ( ) constant valu approxim 24.3 , recoveri dc compon f ( ) ; iter 1 , ˜f ( ) ≈24.3−24.5· co ( 2i+1 ) π 16 , sum dc ﬁrst ac compon ; iter 2 , ˜f ( ) reﬂect sum dc ac1 ac2 ; . shown , process sum-of-product idct eventu reconstruct ( recompos ) function f ( ) , approxim ˜f ( ) ( i=0 .. 7 ) :85−65 15 30 −56 35 90 60260 8 lossi compress algorithm happen , even though went integ integ via intermedi ﬂoat , recov signal exactli . alway true , answer alway close . cosin basi function better decomposit , basi function orthogon , oa st oh v e least redund among . function bp ( ) andbq ( ) orthogon /summationdisplay [ bp ( ) ·bq ( ) ] = 0 p/negationslash=q ( 8.22 ) function bp ( ) andbq ( ) areorthonorm orthogon /summationdisplay [ bp ( ) ·bq ( ) ] = 1 p=q ( 8.23 ) orthonorm properti desir . properti , signal ampli- ﬁed transform . basi function use trans- format invers ( sometim call forward transform andbackward trans- form ) , get ( approxim ) signal back . shown 7/summationdisplay i=0/bracketleftbigg co ( 2i+1 ) ·pπ 16·co ( 2i+1 ) ·qπ 16/bracketrightbigg =0 p/negationslash=q 7/summationdisplay i=0/bracketleftbiggc ( p ) 2co ( 2i+1 ) ·pπ 16·c ( q ) 2co ( 2i+1 ) ·qπ 16/bracketrightbigg =1 p=q cosin basi function dct inde orthogon . help constant c ( p ) andc ( q ) , also orthonorm . ( understand constant c ( u ) andc ( v ) deﬁnit dct idct seem taken arbitrari valu . ) recal orthogon , f2 ( ) fig . 8.7b , f2 ( 2 ) ( u=2 ) nonzero output wherea dct coefﬁcient zero . desir signal process analysi frequenc domain , sinc abl precis identifi frequenc compon origin signal . cosin basi function analog basi vector x , , zfor 3d cartesian space , so-cal 3d vector space . vector orthonorm , because8.5 transform code 261 x·y= ( 1,0,0 ) · ( 0,1,0 ) =0 x·z= ( 1,0,0 ) · ( 0,0,1 ) =0 y·z= ( 0,1,0 ) · ( 0,0,1 ) =0 x·x= ( 1,0,0 ) · ( 1,0,0 ) =1 y·y= ( 0,1,0 ) · ( 0,1,0 ) =1 z·z= ( 0,0,1 ) · ( 0,0,1 ) =1 point p= ( xp , yp , zp ) repres vector op= ( xp , yp , zp ) , oi origin , turn decompos xp·x+yp·y+zp·z . view sum-of-product oper eq . ( 8.19 ) dot product one discret cosin basi function ( speciﬁ u ) signal f ( ) , analog dct cartesian project remark . name , get thex-coordin point p , simpli project ponto x-axi . mathemat , equival dot product x·op=xp . obvious , goe obtain ypandzp . , compar exampl fig . 8.7 ( b ) , point p= ( 0,5,0 ) cartesian space . project onto y-axi yp=5 , project onto xandzax 0 . final , reconstruct p , use dot product ( xp , yp , zp ) ( x , , z ) obtain xp·x+yp·y+zp·z . 2d basi function 2d dct function , use basi depict 8 ×8imag fig . 8.9 , uandvind spatial frequenc , white indic posit valu , black indic neg . particular pair uandv , respect basi function co ( 2i+1 ) ·uπ 16·co ( 2j+1 ) ·vπ 16 , ( 8.24 ) iandjar row column indic . exampl , enlarg block shown fig . 8.9 , u=1 andv=2 , co ( 2i+1 ) ·1π 16·co ( 2j+1 ) ·2π 16 . obtain dct coefﬁcient , essenti form inner product 64 basi function 8 ×8 block origin imag . , talk origin signal index space , time . 64 product wecalcul make 8 ×8spatial frequenc respons f ( u , v ) . 8×8 imag block.262 8 lossi compress algorithm fig . 8.9 graphic illustr 8 ×82 dd c basi u vj 2d separ basi function cours , speed , softwar implement use ﬁxed point arithmet calcul dct transform . mathemat deriv fast fourier transform , also fast dct . fast implement approxim coefﬁ- cient multipli shift add . moreov , much simpler mechan use produc 2d dct coefﬁcients— factor two 1d dct transform . 2d dct separ sequenc two 1d dct step . first , calcul intermedi function g ( u , j ) perform 1d dct column—in way , taken care 1d transform vertic , i.e. , replac row index frequenc counterpart u . block size 8 ×8 , g ( u , j ) =1 2c ( u ) 7/summationdisplay i=0co ( 2i+1 ) uπ 16f ( , j ) ( 8.25 ) 8.5 transform code 263 calcul anoth 1d dct horizont row , time replac column index jbi frequenc counterpart v : f ( u , v ) =1 2c ( v ) 7/summationdisplay j=0co ( 2j+1 ) vπ 16g ( u , j ) ( 8.26 ) possibl 2d dct basi function separ ( multipli separ function iandj ) . straightforward see simpl chang save mani arithmet step . number iter requir reduc 8 ×8t o8 +8 . 2d dct matrix implement factor 2d dct two 1d dct implement two consecut matrix multipl , i.e. , f ( u , v ) =t·f ( , j ) ·tt , ( 8.27 ) superscript tmean transpos . name tthedct-matrix . [ , j ] =⎧ ⎨ ⎩1√ n , ifi=0/radicalbig 2 n·co ( 2j+1 ) ·iπ 2n , ifi > 0 ( 8.28 ) i=0 , ... , n−1 j=0 , ... , n−1 row column indic , block size n×n . n=8 , t8 [ , j ] =/braceleftbigg1 2√ 2 , ifi=0 1 2·co ( 2j+1 ) ·iπ 16 , ifi > 0 ( 8.29 ) henc , t8=⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣1 2√ 21 2√ 21 2√ 2···1 2√ 2 1 2·cosπ 161 2·cos3π 161 2·cos5π 16···1 2·cos15π 16 1 2·cosπ 81 2·cos3π 81 2·cos5π 8···1 2·cos15π 8 1 2·cos3π 161 2·cos9π 161 2·cos15π 16···1 2·cos45π 16 ............... 1 2·cos7π 161 2·cos21π 161 2·cos35π 16···1 2·cos105π 16⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ ( 8.30 ) 264 8 lossi compress algorithm closer look dct-matrix reveal row matrix basic 1d dct basi function , rang dc ac1 , ac2 , … , ac7 . compar function fig . 8.6 , differ ad constant taken care orthonorm properti dct basi function . inde , constant basi function eq . 8.19 8.29 exactli . leav exercis ( see exercis 8 . ) verifi row column t8are orthonorm vector , i.e. , t8i orthogon matrix . summari , implement 2d dct simpl matter appli two matrix multipl eq . 8.27 . ﬁrst multipl appli 1d dct vertic ( column ) , second appli 1d dct horizont ( row ) . achiev exactli two step indic eq . 8.25 8.26 . 2d idct matrix implement section , show reconstruct f ( , j ) f ( u , v ) losslessli matrix multipl . next sever chapter , discuss lossi compres- sion imag video , quantiz step usual appli dct coefﬁcient f ( u , v ) idct . turn 2d idct matrix implement simpli f ( , j ) =tt·f ( u , v ) ·t . ( 8.31 ) deriv follow : first , t·t−1=t−1·t=i , ii ident matrix , sim- pli rewrit f ( , j ) f ( , j ) =t−1·t·f ( , j ) ·tt· ( tt ) −1 . accord eq . 8.27 , f ( u , v ) =t·f ( , j ) ·tt . henc , f ( , j ) =t−1·f ( u , v ) · ( tt ) −1 . state , dct-matrix ti orthogon , therefor , tt=t−1 . follow : f ( , j ) =tt·f ( u , v ) ·t.8.5 transform code 265 comparison dct dft discret cosin transform close counterpart discret fourier transform ( dft ) [ 9 ] , world signal process , latter like common . start dct instead simpler also much use multimedia . nevertheless , entir ignor dft . continu signal , deﬁn continu fourier transform fa follow : f ( ω ) =∞/integraldisplay −∞f ( ) e−iωtdt ( 8.32 ) use euler ’ formula , eix=co ( x ) +isin ( x ) ( 8.33 ) thu , continu fourier transform compos inﬁnit sum sine cosin term . digit comput requir us discret input signal , deﬁn dft oper eight sampl input signal { f0 , f1 , ... , f7 } fω=7/summationdisplay x=0fx·e−2πiωx 8 ( 8.34 ) write sine cosin term explicitli , fω=7/summationdisplay x=0fxcos/parenleftbigg2πωx 8/parenrightbigg −i7/summationdisplay x=0fxsin/parenleftbigg2πωx 8/parenrightbigg ( 8.35 ) even without give explicit deﬁnit dct , guess dct like transform involv real part dft . intuit behindth formul dct allow use cosin basi function dft cancel imaginari part dft make symmetr copi origin input signal . work sine odd function ; thu , contribut sine term cancel signal symmetr extend . therefor , dct eight input sampl correspond dft 16 sampl made ofth origin eight input sampl symmetr copi , fig . 8.10 . symmetr extens , dct work triangular wave , wherea dft tri code repeat ramp . dft tri model artiﬁci discontinu creat copi sampl ramp function , lot high-frequ compon need . ( refer [ 9 ] thorough discuss comparison dct dft . ) tabl 8.1show calcul dct dft coefﬁcient . see energi concentr ﬁrst coefﬁcient dct dft . if266 8 lossi compress algorithm 10 11 12 13 14 150123457 6 x 123456789 fig . 8.10 symmetr extens ramp function tabl 8.1 dct dft coefﬁcient ramp function ramp dct dft 0 9.90 28.00 1 −6.44 −4.00 2 0.00 9.66 3 −0.67 −4.00 4 0.00 4.00 5 −0.20 −4.00 6 0.00 1.66 7 −0.51 −4.00 tri approxim origin ramp function use three term dct dft , notic dct approxim much closer . figur 8.11 show comparison . 8.5.2 karhunen–loèv transform * karhunen–loèv transform ( klt ) revers linear transform exploit statist properti vector represent . primari properti optim decorrel input . , ﬁt n-dimension ellipsoid around ( mean-subtract ) data . main ellipsoid axi major direct chang data . think cigar unfortun step . cigar data consist cloud point 3-space give coordin posit measur point cigar . long axi cigar identiﬁ statist program ﬁrst klt axi . second import axi horizont axi across squash cigar , perpendicular ﬁrst axi . third axi orthogon both8.5 transform code 267 01234567 x1 234567 ( ) 01234567 x1 234567 ( b ) fig . 8.11 approxim ramp function : athree-term dct approxim ; bthree-term dft approxim vertic , thin direct . klt compon program carri analysi . understand optim klt , consid autocorrel matrix rx set kinput vector x , deﬁn term expect valu e ( · ) rx=e [ xxt ] ( 8.36 ) =⎡ ⎢⎢⎢⎣rx ( 1,1 ) rx ( 1,2 ) ···rx ( 1 , k ) rx ( 2,1 ) rx ( 2,2 ) ···rx ( 2 , k ) ............ rx ( k,1 ) rx ( k,2 ) ···rx ( k , k ) ⎤ ⎥⎥⎥⎦ ( 8.37 ) rx ( , ) =e [ xtx ] autocorrel function . goal ﬁnd transform tsuch compon output yare uncorrelated—that , e [ yti ] = 0 , t/negationslash= . thu , autocorrel matrix ytake form posit diagon matrix . sinc autocorrel matrix symmetr nonneg deﬁnit , korthogon eigenvector u1 , u2 , ... , uk , kcorrespond real nonneg eigenvalu λ1≥λ2≥···≥ λk≥0 . deﬁn karhunen-loèv transform t= [ u1 , u2 , ··· , uk ] ( 8.38 ) 268 8 lossi compress algorithm , autocorrel matrix ybecom ry=e [ yyt ] ( 8.39 ) =e [ txxtt ] ( 8.40 ) =tr xtt ( 8.41 ) =⎡ ⎢⎢⎢⎣λ10··· 0 0λ2··· 0 0 ...... 0 00···λk⎤ ⎥⎥⎥⎦ ( 8.42 ) clearli , requir autocorrel matrix . therefor , klt optim , sens complet decorrel input . addit , sinc klt depend comput autocorrel matrix input vector , data depend : comput everi dataset . exampl 8.5 illustr mechan klt , consid four 3d input vector x1= ( 4,4,5 ) , x2= ( 3,2,5 ) , x3= ( 5,7,6 ) , x4= ( 6,7,7 ) . ﬁnd requir trans- form , must ﬁrst estim autocorrel matrix input . mean thefour input vector x=1 4⎡ ⎣18 20 23⎤ ⎦ estim autocorrel matrix use formula rx=1 nn/summationdisplay i=1xixt i−mxmt x ( 8.43 ) ni number input vector , 4 . equat , obtain rx=⎡ ⎣1.25 2 .25 0 .88 2.25 4 .50 1 .50 0.88 1 .50 0 .69⎤ ⎦ tri diagon matrix rx , form eigenvector–eigenvalu decomposit ( linear algebra ) . , want rewrit rxasrx=tdt−1 , matrix di diagon , off-diagon val- ue equal zero : d=diag ( λ1 , λ2 , λ3 ) , λvalu call eigenvalu column matrix tcall eigenvector . easi calcul use variou math librari ; tlab , function eig job.8.6 wavelet-bas code 269 , eigenvalu rxareλ1=6.1963 , λ2=0.2147 , λ3=0.0264 . clearli , ﬁrst compon far import . correspond eigen- vector u1=⎡ ⎣0.4385 0.8471 0.3003⎤ ⎦u2=⎡ ⎣0.4460 −0.4952 0.7456⎤ ⎦u3=⎡ ⎣−0.7803 0.1929 0.5949⎤ ⎦ therefor , klt given matrix t=⎡ ⎣0.4385 0 .8471 0 .3003 0.4460 −0.4952 0 .7456 −0.7803 0 .1929 0 .5949⎤ ⎦ subtract mean vector input vector appli klt , y1=⎡ ⎣−1.2916 −0.2870 −0.2490⎤ ⎦ y2=⎡ ⎣−3.4242 0.2573 0.1453⎤ ⎦ y3=⎡ ⎣1.9885 −0.5809 0.1445⎤ ⎦ y4=⎡ ⎣2.7273 0.6107 −0.0408⎤ ⎦ sinc row tare orthonorm vector , invers transform trans- pose : t−1=tt . obtain origin vector transform coefﬁcient use invers relat x=tty+mx ( 8.44 ) term transform coefﬁcient yi , magnitud ﬁrst compon usual consider larger compon . gener , klt , “ energi ” transform coefﬁcient concentr within theﬁrst compon . energi compact properti klt . input vector xwith ncompon , coars quantiz output vector ybi set last kcompon zero , call result vector ˆy , klt minim mean squar error origin vector reconstruct . 8.6 wavelet-bas code 8.6.1 introduct decompos input signal constitu allow us appli code tech-niqu suitabl constitu , improv compress perform . consideragain time-depend signal f ( ) ( best base discuss continu- ou function start ) . tradit method signal decomposit the270 8 lossi compress algorithm fourier transform . , discuss dct , consid special cosine-bas transform . carri analysi base sine cosin , concis notat assembl result function f ( ω ) , complex-valu function real-valu frequenc ωgiven eq . ( 8.32 ) . decomposit result ﬁne resolut frequenc domain . howev , sinc sinusoid theoret- ical inﬁnit extent time , decomposit give tempor resolut . anoth method decomposit gain great deal popular recent year wavelet transform . seek repres signal good reso- lution time frequenc , use set basi function call wavelet . two type wavelet transform : continu wavelet transform ( cwt ) discret wavelet transform ( dwt ) . assum cwt appli larg class function f ( x ) squar integr real line—that , /integraltext [ f ( x ) ] 2dx < ∞ . mathemat , written f ( x ) ∈l2 ( r ) . kind wavelet transform , dwt , oper discret sampl input signal . dwt resembl discret linear transform , dft dct , use imag process compress . begin discuss theori wavelet , let ’ develop intuit approach go exampl use simplest wavelet trans- form , so-cal haar wavelet transform , form averag differ sequenc float valu . repeatedli take averag differ keep result everi step , effect creat multiresolut analysi sequenc . imag , would equival creat smaller smaller summari imag , one-quart sizefor step , keep track differ averag well . mental stack full-siz imag , quarter-s imag , sixteenth-s imag , creat pyramid . full set , along differ imag , multiresolut decomposit . exampl 8.6 ( simpl wavelet transform ) . object wavelet transform decompos input signal , com-press purpos , compon easier deal , special inter- pretat , compon threshold away . furthermor , want abl least approxim reconstruct origin signal , given thesecompon . suppos given follow input sequenc : { x n , } = { 10,13,25,26,29,21,7,15 } ( 8.45 ) , i∈ [ 0 .. 7 ] index “ pixel , ” nstand level pyramid . top , n=3 sequenc , shall form three sequenc , forn=2 , 1 , 0 . level , less inform retain begin element transform signal sequenc . reach pyramid level n=0 , end sequenc averag store ﬁrst element . remainingel store detail information.8.6 wavelet-bas code 271 consid transform replac origin sequenc pairwis aver- age x n−1 , ianddiffer n−1 , , deﬁn follow : xn−1 , i=xn,2i+xn,2i+1 2 ( 8.46 ) dn−1 , i=xn,2i−xn,2i+1 2 ( 8.47 ) i∈ [ 0 .. 3 ] . notic averag differ appli consecut pair input sequenc whose ﬁrst element even index . therefor , number element set { xn−1 , } { dn−1 , } exactli half number element origin sequenc . form new sequenc length equal origin sequenc concaten two sequenc { x n−1 , } { dn−1 , } . result sequenc thu { xn−1 , , dn−1 , } = { 11.5,25.5,25,11 , −1.5 , −0.5,4 , −4 } ( 8.48 ) level n−1=2 . sequenc exactli number element input sequence—th transform increas amount ofdata . sinc ﬁrst half sequenc contain averag origin sequenc , view coarser approxim origin signal . second half sequenc view detail approxim error ﬁrst half . valu detail sequenc much smaller origin sequenc . thu , energi effect concentr ﬁrst half . therefor , potenti store { n−1 , } use fewer bit . easili veriﬁ origin sequenc reconstruct trans- form sequenc , use relat xn,2i=xn−1 , i+dn−1 , xn,2i+1=xn−1 , i−dn−1 , ( 8.49 ) transform discret haar wavelet transform . averag differenc carri appli so-cal scale function andwavelet function along signal . figur 8.12 show haar version function . appli transform { xn−1 , } , obtain anoth level approxim xn−2 , iand detail dn−2 , : { xn−2 , , dn−2 , , dn−1 , } = { 18.5,18 , −7,7 , −1.5 , −0.5,4 , −4 } ( 8.50 ) essenti idea multiresolut analysi . studi input signal three differ scale , along detail need go one scale anoth . process continu ntime , one element left approxim sequenc . case , n=3 , ﬁnal sequenc given : { xn−3 , , dn−3 , , dn−2 , , dn−1 , } = { 18.25,0.25 , −7,7 , −1.5 , −0.5,4 , −4 } ( 8.51 ) 272 8 lossi compress algorithm ( b ) 15 .1 0−2−1012 −2−1012 −0.5 15 .1 0 −0.5 ( ) 0.5 0.5 fig . 8.12 haar wavelet transform : ascal function ; bwavelet function fig . 8.13 input imag 2d haar wavelet transform : apixel valu ; ban 8×8i g e realiz nwa 3 three resolut chang avail reach ﬁnal form . valu 18 .25 , correspond coarsest approxim origin signal , averag element origin sequenc . exampl , easi see cost comput transform proport number element nin input sequence—that , ( n ) . extend 1d haar wavelet transform two dimens rel easi : simpli appli 1d transform row column 2d input separ . demonstr 2d haar transform appli 8 ×8 input imag shown fig . 8.13 .8.6 wavelet-bas code 273 exampl 8.7 ( 2d haar transform ) . exampl 2d haar transform serv illustr wavelet transform appli 2d input also point use interpret transform coefﬁcient . howev , intend provid reader intuit feel kind oper involv perform gener 2d wavelet transform . subsequ section provid detail descript forward invers 2d wavelet transform algorithm , well elabor exampl use complex wavelet . 2d haar wavelet transform begin appli 1d haar wavelet transform row input . ﬁrst last two row input trivial . perform averag differenc oper remain row , obtain intermedi output shown fig . 8.14 . continu appli 1d haar transform column inter- mediat output . step complet one level 2d haar transform . figur 8.15 give result coefﬁcient . natur divid result four quadrant . upper left quadrant contain averag coefﬁcient horizont vertic pass . there- fore , view low-pass-ﬁlt version origin imag , sens higher frequenc edg inform lost , low-spati frequenc smooth inform retain . upper right quadrant contain vertic averag horizont dif- ferenc interpret inform vertic edg within origin imag . similarli , lower left quadrant contain vertic differ horizont averag repres horizont edg origin imag . fig . 8.14 intermedi output 2d haar wavelet transform274 8 lossi compress algorithm fig . 8.15 output ﬁrst level 2d haar wavelet transform fig . 8.16 p l e graphic illustr wavelet transform lower right quadrant contain differ horizont vertic pass . coefﬁcient quadrant repres diagon edg . interpret shown clearli imag fig . 8.16 , bright pixel code posit dark pixel code neg imag valu . invers 2d haar transform calcul ﬁrst invert column use eq . ( 8.49 ) , invert result row . 8.6.2 continu wavelet transform * note motiv use wavelet provid set basi function decompos signal time paramet frequenc domain time domain simultan . fourier transform aim pin frequenc content signal , term spatial vari rather time-varying8.6 wavelet-bas code 275 signal . wavelet aim pin frequenc content differ part imag . exampl , one part imag may “ busi ” textur thu high- frequenc content , anoth part may smooth , littl high-frequ con- tent . natur , one think obviou way consid frequenc local area imag : divid imag part ﬁre away fourier analysi . thetime-sequ version idea call short-term ( orwindow ) fourier transform . idea also arisen . howev , turn wavelet , much newer develop , neater characterist . motiv subject , consid heisenberg uncertainti principl , physic . context signal process , say trade-off accuraci pin function ’ frequenc extent time . accur , gener , still use basi function . exampl , sine wave exact term frequenc inﬁnit extent . exampl function die away quickli also limit frequenc content , suppos start gaussian function , f ( ) =1 σ√ 2πe−t2 2σ2 ( 8.52 ) paramet σexpress scale gaussian ( bell-shap ) function . second deriv function , call ψ ( ) , look like mexican hat , fig . 8.17 . clearli , function ψ ( ) limit time . equat follow : ψ ( ) =1 σ3√ 2π/bracketleftbigg e−t2 2σ2/parenleftbiggt2 σ2−1/parenrightbigg/bracketrightbigg ( 8.53 ) explor frequenc content function ψ ( ) take fourier transform . turn given f ( ω ) =ω2e−σ2ω2 2 ( 8.54 ) figur 8.17 b display function : candid wavelet ( 8.53 ) inde limit frequenc well . gener , wavelet function ψ∈l2 ( r ) zero averag , +∞/integraldisplay −∞ψ ( ) dt=0 ( 8.55 ) satisﬁ condit ensur util multiresolut decom- posit . condit ensur use decomposit zoom local part imag , much might interest closer fartherview neighborhood map.276 8 lossi compress algorithm −10 −5 0 5 10−2−101234 timeψ ( ) ( ) −10 −5 0 5 1000.511.522.53 frequenc ωf ( ω ) ( b ) fig . 8.17 mexican-hat wavelet : aσ=0.5 ; bit fourier transform constraint ( 8.55 ) call admiss condit wavelet . function sum zero must oscil around zero . also , ( 8.32 ) , see dc valu , fourier transform ψ ( ) forω=0 , zero . anoth way state 0th moment m0ofψ ( ) zero . pth moment deﬁn mp=∞/integraldisplay −∞tpψ ( ) dt ( 8.56 ) function ψi normal /bardblψ/bardbl= 1 center neighborhood oft=0 . obtain famili wavelet function scale translat mother wavelet ψa follow : ψs , u ( ) =1√sψ/parenleftbiggt−u s/parenrightbigg ( 8.57 ) ifψ ( ) normal , ψs , u ( ) . thecontinu wavelet transform ( cwt ) f∈l2 ( r ) time uand scale deﬁn w ( f , , u ) =+∞/integraldisplay −∞f ( ) ψs , u ( ) dt ( 8.58 ) cwt 1d signal 2d function—a function scale andshift u . import issu , contradistinct ( 8.32 ) , fourier analysi function stipul sinusoid , ( 8.58 ) state ψ ( ) actual ! instead , creat set rule function must obey invent use function obey rules—differ function differ use . deﬁn dct term product function set basi function , transform wi written term inner product basi function scale shift version mother wavelet ψ ( ) .8.6 wavelet-bas code 277 mother wavelet ψ ( ) awav , sinc must oscillatori function . wave let ? spatial frequenc analyz paramet ( 8.58 ) ss , scale . choos scale sand see much content signal around scale . make function decay rapidli , away chosen , choos mother wavelet ψ ( ) decay fast power s. actual easi show , ( 8.58 ) , moment ψ ( ) nth zero ( quit small , practic speak ) , cwt coefﬁcient w ( f , , u ) taylor expans around u=0 order sn+2 ( see exercis 13 ) . local frequenc desir good mother wavelet . deriv wavelet coefﬁcient appli wavelet differ scale mani locat signal . excitingli , shrink wavelet small enough cover part function f ( ) polynomi degre less , coefﬁcient wavelet smaller one zero . condit wavelet vanish moment order one way ofcharacter mathemat regular condit mother wavelet . invers continu wavelet transform f ( ) =1 cψ+∞/integraldisplay 0+∞/integraldisplay −∞w ( f , , u ) 1√sψ/parenleftbiggt−u s/parenrightbigg1 s2du ds ( 8.59 ) cψ=+∞/integraldisplay 0|/psi1 ( ω ) |2 ωdω < +∞ ( 8.60 ) and/psi1 ( ω ) fourier transform ψ ( ) . equat ( 8.60 ) anoth phrase admiss condit . troubl cwt ( 8.58 ) nasti : wavelet analyt result simpli numer calcul . result inﬁnit set scale shift function necessari analysi sampl function , one aris imag process . reason , appli idea pertain cwt discret domain . 8.6.3 discret wavelet transform * discret wavelet form mother wavelet , scale shift discret step . multiresolut analysi discret wavelet transform connect wavelet continu time domain ﬁlter bank discret time domain multiresolut analysi ; discuss dwt within this278 8 lossi compress algorithm framework . mallat [ 10 ] show possibl construct wavelet ψsuch dilat translat famili /braceleftbigg ψj , n ( ) =1√ 2jψ/parenleftbiggt−2jn 2j/parenrightbigg/bracerightbigg ( j , n ) ∈z2 ( 8.61 ) orthonorm basi ofl2 ( r ) , zrepres set integ . known “ dyadic ” scale translat correspond notion zoom map factor 2 . ( draw cosin function co ( ) time 0 2 π draw co ( t/2 ) , see co ( ) goe whole cycl , co ( t/2 ) half cycl : function co ( 2−1t ) awid function thu broader scale . ) note chang scale translat along overal scale 2j , keep movement lower resolut imag proport . notic also notat use say larger index jcorrespond coarser version imag . multiresolut analysi provid tool adapt signal resolut rele- vant detail particular task . octav decomposit introduc mallat [ 11 ] initi decompos signal approxim compon detail com- ponent . approxim compon recurs decompos approx- imat detail success coarser scale . wavelet set approxim resolut 2−jcontain necessari inform comput approxim coarser resolut 2− ( j+1 ) . wavelet use character detail inform . averag inform formal determin kind dual mother wavelet , call scale function φ ( ) . main idea theori wavelet particular level resolut j , set translat index nform basi level . interestingli , set translat form basi j+1 next level , coarser level , written sum weight time level- jbasi . scale function chosen coefﬁcient translat necessarili bound ( less inﬁnit ) . scale function , along translat , form basi coarser level j+1 ( say 3 , 1/8 level ) level j ( say 2 , 1/4 level ) . instead , level jthe set translat scale function φalong set translat mother wavelet φdo form basi . left situat scale function describ smooth , approxim , inform wavelet describ leftover—detail inform . sinc set translat scale function φat coarser level written exactli weight sum translat ﬁner level , scale function must satisfi so-cal dilat equat [ 12 ] : φ ( ) =/summationdisplay n∈z√ 2h0 [ n ] φ ( 2t−n ) ( 8.62 ) squar bracket come theori ﬁlter , use carri . dilat equat recip ﬁnding function built a8.6 wavelet-bas code 279 sum copi ﬁrst scale , translat , dilat . equat ( 8.62 ) express condit function must satisfi scale function time form deﬁnit scale vector h 0 . scale function express sum translat , well wavelet coarser level also express ψ ( ) =/summationdisplay n∈z√ 2h1 [ n ] φ ( 2t−n ) ( 8.63 ) , ’ show set coefﬁcient h1for wavelet fact deriv scale function one h0 ( eq . ( 8.65 ) ) , also wavelet deriv scale function , one . equat read ψ ( ) =/summationdisplay n∈z ( −1 ) nh0 [ 1−n ] φ ( 2t−n ) ( 8.64 ) condit wavelet similar scale function , eq . ( 8.62 ) , fact use coefﬁcient , opposit order alternatingsign . clearli , efﬁcienc , would like sum ( 8.62 ) ( 8.63 ) ob ea sf e wa possibl , choos wavelet vector entri h 0andh1a possibl . effect scale function kind smooth , ﬁltere , oper signal . therefor act low-pass ﬁlter , screen high-frequ content.th vector valu h 0 [ n ] call low-pass ﬁlter impuls respons coefﬁcient , sinc describ effect ﬁltere oper signal consist singl spike magnitud uniti ( impuls ) time t=0 . complet discret signal made set spike , shift time 0 weight magnitud discret sampl . henc , specifi dwt , discret low-pass ﬁlter impuls respons h0 [ n ] need . specifi approxim ﬁltere , given scale func- tion . discret high-pass impuls respons h1 [ n ] , describ detail use wavelet function , deriv h0 [ n ] use follow equat : h1 [ n ] = ( −1 ) nh0 [ 1−n ] ( 8.65 ) number coefﬁcient impuls respons call number tap ﬁlter . h0 [ n ] ﬁnite number nonzero entri , result wavelet said compact support . addit constraint , orthonorm regular , impos coefﬁcient h0 [ n ] . vector h0 [ n ] andh1 [ n ] call low-pass high-pass analysi ﬁlter . toreconstruct origin input , invers oper need . invers ﬁlter call synthesi ﬁlter . orthonorm wavelet , forward transform invers transpos , analysi ﬁlter ident synthesi ﬁlter . without orthogon , wavelet analysi synthesi call biorthog- onal , weaker condit . case , synthesi ﬁlter ident the280 8 lossi compress algorithm tabl 8.2 orthogon wavelet ﬁlter wavelet number start coefﬁcient tap index haar 2 0 [ 0.707 , 0.707 ] daubechi 4 4 0 [ 0.483 , 0.837 , 0.224 , −0.129 ] daubechi 6 6 0 [ 0.332 , 0.807 , 0.460 , −0.135 , −0.085 , 0.0352 ] daubechi 8 8 0 [ 0.230 , 0.715 , 0.631 , −0.028 , −0.187 , 0.031 , 0.033 , −0.011 ] analysi ﬁlter . denot ˜h0 [ n ] and˜h1 [ n ] . specifi biorthogon wavelet transform , requir h0 [ n ] and˜h0 [ n ] . , comput discret high-pass ﬁlter term sum low-pass one : h1 [ n ] = ( −1 ) n˜h0 [ 1−n ] ( 8.66 ) ˜h1 [ n ] = ( −1 ) nh0 [ 1−n ] ( 8.67 ) tabl 8.2and 8.3 ( cf . [ 13 ] ) give commonli use orthogon biorthogon wavelet ﬁlter . “ start index ” column tabl refer start valu index nuse eq . ( 8.66 ) ( 8.67 ) . figur 8.18 show block diagram 1d dyadic wavelet transform . , x [ n ] discret sampl signal . box ↓2mean subsampl take everi second element , box ↑2mean upsampl replic . reconstruct phase yield seri [ n ] . analysi , level transform seri x [ n ] anoth seri length , ﬁrst half element approxim inform second half consist detail inform . n-tap ﬁlter , simpli seri { x [ n ] } → [ n ] =⎧ ⎨ ⎩/summationdisplay jx [ j ] h0 [ n−j ] ; /summationdisplay jx [ j ] h1 [ n−j ] ⎫ ⎬ ⎭ ( 8.68 ) half , odd-numb result discard . summat shift coefﬁcient ( 8.68 ) refer convolut . 2d discret wavelet transform extens wavelet transform two dimens quit straightforward . 2d scale function said separ factor product two 1d scale function . , φ ( x , ) =φ ( x ) φ ( ) ( 8.69 ) 8.6 wavelet-bas code 281 tabl 8.3 biorthogon wavelet ﬁlter wavelet filter number start coefﬁcient tap index antonini 9/7 h0 [ n ] 9 −4 [ 0.038 , −0.024 , −0.111 , 0.377 , 0.853 , 0.377 , −0.111 , −0.024 , 0.038 ] ˜h0 [ n ] 7 −3 [ −0.065 , −0.041 , 0.418 , 0.788 , 0.418 , −0.041 , −0.065 ] villa 10/18 h0 [ n ] 10 −4 [ 0.029 , 0.0000824 , −0.158 , 0.077 , 0.759 , 0.759 , 0.077 , −0.158 , 0.0000824 , 0.029 ] ˜h0 [ n ] 18 −8 [ 0.000954 , −0.00000273 , −0.009 , −0.003 , 0.031 , −0.014 , −0.086 , 0.163 , 0.623 , 0.623 , 0.163 , −0.086 , −0.014 , 0.031 , −0.003 , −0.009 , −0.00000273 , 0.000954 ] brislawn h0 [ n ] 10 −4 [ 0.027 , −0.032 , −0.241 , 0.054 , 0.900 , 0.900 , 0.054 , −0.241 , −0.032 , 0.027 ] ˜h0 [ n ] 10 −4 [ 0.020 , 0.024 , −0.023 , 0.146 , 0.541 , 0.541 , 0.146 , −0.023 , 0.024 , 0.020 ] simplic , separ wavelet consid section . furthermor , let ’ assum width height input imag power 2 . nbyninput imag , 2d dwt proce follow : 1 . convolv row imag h0 [ n ] andh1 [ n ] , discard odd-numb column result array , concaten form transform row . 2 . row transform , convolv column result h0 [ n ] andh1 [ n ] . discard odd-numb row concaten result . two step , one stage dwt complet . transform imag contain four subband , hl , lh , hh , stand low-low , high-low , , fig . 8.19 show . 1d transform , subband decompos yield yet anoth level decomposit . process continu desir number decomposit level reach llcompon singl element left . two-level decomposit shown fig . 8.19 b.282 8 lossi compress algorithm [ n ] 2 22 222 2 2 22 2 2x [ n ] h0 [ n ] h1 [ n ] h0 [ n ] h0 [ n ] h1 [ n ] h1 [ n ] h0 [ n ] h1 [ n ] h0 [ n ] h1 [ n ] h0 [ n ] h1 [ n ] fig . 8.18 block diagram 1d dyadic wavelet transform ll2 hl hhll lh ( ) ( b ) lh2hl2 hh2 lh1 hh1hl1 fig . 8.19 2d discret wavelet transform : aone-level transform ; btwo-level transform8.6 wavelet-bas code 283 invers transform simpli revers step forward transform . 1 . stage transform imag , start last , separ column low-pass high-pass coefﬁcient . upsampl low-pass high-pass array insert zero coefﬁcient . 2 . convolv low-pass coefﬁcient h0 [ n ] high-pass coefﬁcient h1 [ n ] add two result array . 3 . column process , separ row low-pass high- pass coefﬁcient upsampl two array insert zero aftereach coefﬁcient . 4 . convolv low-pass coefﬁcient h 0 [ n ] high-pass coefﬁcient h1 [ n ] add two result array . biorthogon ﬁlter use forward transform , must replac h0 [ n ] andh1 [ n ] ˜h0 [ n ] and˜h1 [ n ] invers transform . exampl 8.8 input imag subsampl version imag lena , shown fig . 8.20 . size input 16 ×16 . ﬁlter use exampl antonini 9/7 ﬁlter set given tabl 8.3 . begin , need comput analysi synthesi high-pass ﬁlter use eq . ( 8.66 ) ( 8.67 ) . result ﬁlter coefﬁcient h1 [ n ] = [ − 0.065,0.041,0.418 , −0.788,0.418,0.041 , −0.065 ] ˜h1 [ n ] = [ − 0.038 , −0.024,0.111,0.377 , −0.853,0.377,0.111 , −0.024 , −0.038 ] ( 8.70 ) fig . 8.20 lena : aorigin 128 ×128 imag ; b16×16 subsampl image284 8 lossi compress algorithm input imag numer form i00 ( x , ) =⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣158 170 97 104 123 130 133 125 132 127 112 158 159 144 116 91 164 153 91 99 124 152 131 160 189 116 106 145 140 143 227 53 116 149 90 101 118 118 131 152 202 211 84 154 127 146 58 58 95 145 88 105 188 123 117 182 185 204 203 154 153 229 46 147 101 156 89 100 165 113 148 170 163 186 144 194 208 39 113 159 103 153 94 103 203 136 146 92 66 192 188 103 178 47 167 159 102 146 106 99 99 121 39 60 164 175 198 46 56 56 156 156 99 146 95 97 144 61 103 107 108 111 192 62 65 128 153 154 99 140 103 109 103 124 54 81 172 137 178 54 43 159 149 174 84 133 107 84 149 43 158 95 151 120 183 46 30 147 142 201 58 153 110 41 94 213 71 73 140 103 138 83 152 143 128 207 56 141 108 58 92 51 55 61 88 166 58 103 146 150 116 21189 115 188 47 113 104 56 67 128 155 187 71 153 134 203 95 35 99 151 67 35 88 88 128 140 142 176 213 144 128 214 100 89 98 97 51 49 101 47 90 136 136 157 205 106 43 54 76 44 105 69 69 68 53 110 127 134 146 159 184 109 121 72 113⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ irepres pixel valu . ﬁrst subscript iindic current stage transform , second subscript indic current step within stage . start convolv ﬁrst row h 0 [ n ] andh1 [ n ] discard valu odd-numb index . result two oper ( i00 ( : ,0 ) ∗h0 [ n ] ) ↓2= [ 245,156,171,183,184,173,228,160 ] ( i00 ( : ,0 ) ∗h1 [ n ] ) ↓2= [ − 30,3,0,7 , −5 , −16 , −3,16 ] colon ﬁrst index posit indic show whole row . like , verifi oper use tlab ’ conv function . next , form transform output row concaten result coefﬁ- cient . ﬁrst row transform imag [ 245,156,171,183,184,173,228,160 , −30,3,0,7 , −5 , −16 , −3,16 ] similar simpl 1d haar transform exampl , energi con- centrat ﬁrst half transform imag . continu process remain row obtain follow result:8.6 wavelet-bas code 285 i11 ( x , ) = ⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣245 156 171 183 184 173 228 160 −30 3 0 7 −5−16 −31 6 239 141 181 197 242 158 202 229 −17 5 −20 3 26 −27 27 141 195 147 163 177 288 173 209 106 −34 2 2 19 −50−35−38−1 180 139 226 177 274 267 247 163 −45 29 24 −29−23 0 −101−78 191 145 197 198 247 230 239 143 −49 22 36 −11−26−14 101 −54 192 145 237 184 135 253 169 192 −47 38 36 4 −58 66 94 −4 176 159 156 77 204 232 51 196 −31 9 −48 30 11 58 29 4 179 148 162 129 146 213 92 217 −39 18 50 −10 33 51 −23 8 169 159 163 97 204 202 85 234 −29 1 −42 23 37 41 − 56−5 155 153 149 159 176 204 65 236 −32 32 85 39 38 44 −54−31 145 148 158 148 164 157 188 215 −55 59 −110 28 26 48 −1−64 134 152 102 70 153 126 199 207 −47 38 13 10 −76 3 −7−76 127 203 130 94 171 218 171 228 12 88 −27 15 1 76 24 85 70 188 63 144 191 257 215 232 −52 4 −28−91 9 −46 36 91 129 124 87 96 177 236 162 77 −22 0 −48 1 17 −56 30 −24 103 115 85 142 188 234 184 132 −37 0 27 −45 −35−22−33⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ go appli ﬁlter column result imag . , appli h0 [ n ] andh1 [ n ] column discard odd index result : ( i11 ( 0 , : ) ∗h0 [ n ] ) ↓2= [ 353,280,269,256,240,206,160,153 ] ( i11 ( 0 , : ) ∗h1 [ n ] ) ↓2= [ − 12,10 , −7 , −4,2 , −1,43,16 ] concaten result singl column appli procedur remain column , arriv ﬁnal transform imag : i12 ( x , ) = ⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣353 212 251 272 281 234 308 289 −33 6 −15 5 24 −29 38 120 280 203 254 250 402 269 297 207 −45 11 −29 −31−26−74 23 269 202 312 280 316 353 337 227 −70 43 56 −23−41 21 82 −81 256 217 247 155 236 328 114 283 −52 27 −14 23 −29 04 9 1 2 240 221 226 172 264 294 113 330 −41 14 31 23 57 60 −78 −3 206 204 201 192 230 219 232 300 −76 67 −53 40 4 46 −18−107 160 275 150 135 244 294 267 331 −29 0 −17 10 −24 49 29 89 153 189 113 173 260 342 256 176 −20 18 −38−42 4 −75 25 −5 −12 7 −9−13−61 11 2 −69−10−11 46 −38 3 −45−99 10 3 −31 16 −1−51−10−30 2 −12 0 24 −32−45 109 42 −75 −44−35 67 −10−17−15 3 −15−28 0 41 −30−18−19 −49 −1−37 41 6 −33 2 9 −12−67 31 −732 0 2−39 −25 2 −25 60 −8−11−4−123−12−6−41 4 −12 −12 23 24 61 04 8 −11 20 19 32 −59 9 70 50 16 73 43−18 32 −40−13−23−37−61 8 22 2 13 −12 43 −8−45 16 2 −6−32−75 −13−50 24 7 −61 2 11 −33 43 1⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦286 8 lossi compress algorithm complet one stage discret wavelet transform . perform anoth stage appli transform procedur upper left 8 ×8 dc imag i12 ( x , ) . result two-stag transform imag i22 ( x , ) = ⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣558 451 608 532 75 26 94 25 −33 6 −15 5 24 −29 38 120 463 511 627 566 66 68 −43 68 −45 11 −29 −31−26−74 23 464 401 478 416 14 84 −97−229−70 43 56 −23−41 21 82 −81 422 335 477 553 −88 46 −31 −6−52 27 −14 23 −29 04 9 1 2 14 33 −56 42 22 −43−36 1 −41 14 31 23 57 60 −78 −3 −13 36 54 52 12 −21 51 70 −76 67 −53 40 4 46 −18−107 25 −20 25 −7−35 35 −56−55−29 0 −17 10 −24 49 29 89 46 37 −51 51 −44 26 39 −74−20 18 −38−42 4 −75 25 −5 −12 7 −9−13−61 11 2 −69−10−11 46 −38 3 −45−99 10 3 −31 16 −1−51−10−30 2 −12 0 24 −32−45 109 42 −75 −44−35 67 −10−17−15 3 −15−28 0 41 −30−18−19 −49 −1−37 41 6 −33 2 9 −12−67 31 −732 0 2−39 −25 2 −25 60 −8−11−4−123−12−6−41 4 −12 −12 23 24 61 04 8 −11 20 19 32 −59 9 70 50 16 73 43−18 32 −40−13−23−37−61 8 22 2 13 −12 43 −8−45 16 2 −6−32−75 −13−50 24 7 −61 2 11 −33 43 1⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ notic i12correspond subband diagram shown fig . 8.19 , i22 correspond fig . 8.19 b . point , may appli differ level quantiz subband accord prefer bit alloc algorithm , given desir bitrat . basi simpl wavelet-bas compress algorithm . howev , sinc exampl illustr mechan dwt , simpli bypass quantiz step perform invers transform reconstruct input imag . refer top left 8 ×8 block valu innermost stage correspon- denc fig . 8.19 . start innermost stage , extract ﬁrst column separ low-pass high-pass coefﬁcient . low-pass coefﬁcient simpli ﬁrst half column , high-pass coefﬁcient second half . upsampl append zero coefﬁcient . tworesult array a= [ 558,0,463,0,464,0,422,0 ] b= [ 14,0 , −13,0,25,0,46,0 ] sinc use biorthogon ﬁlter , convolv aandbwith˜h0 [ n ] and˜h1 [ n ] , respect . result two convolut ad form singl 8×1 array . result column [ 414,354,323,338,333,294,324,260 ] column innermost stage process manner . result imag is8.6 wavelet-bas code 287 i/prim 21 ( x , ) = ⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣414 337 382 403 70 −16 48 12 −33 6 −15 5 24 −29 38 120 354 322 490 368 39 59 63 55 −45 11 −29 −31−26−74 23 323 395 450 442 62 25 −26 90 −70 43 56 −23−41 21 82 −81 338 298 346 296 23 77 −117−131−52 27 −14 23 −29 04 9 1 2 333 286 364 298 4 67 −75−176−41 14 31 23 57 60 −78 −3 294 279 308 350 −21 7 1 2 −53−76 67 −53 40 4 46 −18−107 324 240 326 412 −96 54 −25− 45−29 0 −17 10 −24 49 29 89 260 189 382 359 −47 14 −63 69 −20 18 −38−42 4 −75 25 −5 −12 7 −9−13−61 1 1 2 −69−10−11 46 −38 3 −45−99 10 3 −31 16 −1−51−10−30 2 −12 0 24 −32−45 109 42 −75 −44−35 67 −10−17−15 3 −15−28 0 41 −30−18−19 −49 −1−37 41 6 −33 2 9 −12−67 31 −732 0 2−39 −25 2 −25 60 −8−11−4−123−12−6−41 4 −12 −12 23 24 61 04 8 −11 20 19 32 −59 9 70 50 16 73 43−18 32 −40−13−23−37−61 8 22 2 13 −12 43 −8−45 16 2 −6−32−75 −13−50 24 7 −61 2 11 −33 43 1⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ readi process row . row upper left 8 ×8 subimag , separ low-pass high-pass coefﬁcient . upsampl ad zero coefﬁcient . result convolv theappropri ˜h 0 [ n ] and˜h1 [ n ] ﬁlter . step complet row , i/prim 12 ( x , ) = ⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣353 212 251 272 281 234 308 289 −33 6 −15 5 24 −29 38 120 280 203 254 250 402 269 297 207 −45 11 −29 −31−26−74 23 269 202 312 280 316 353 337 227 −70 43 56 −23−41 21 82 −81 256 217 247 155 236 328 114 283 −52 27 −14 23 −29 04 9 1 2 240 221 226 172 264 294 113 330 −41 14 31 23 57 60 −78 −3 206 204 201 192 230 219 232 300 −76 67 −53 40 4 46 −18−107 160 275 150 135 244 294 267 331 −29 0 −17 10 −24 49 29 89 153 189 113 173 260 342 256 176 −20 18 −38−42 4 −75 25 −5 −12 7 −9−13−61 11 2 −69−10− 11 46 −38 3 −45−99 10 3 −31 16 −1−51−10−30 2 −12 0 24 −32−45 109 42 −75 −44−35 67 −10−17−15 3 −15−28 0 41 −30−18−19 −49 −1−37 41 6 −33 2 9 −12−67 31 −732 0 2−39 −25 2 −25 60 −8−11−4−123−12−6−41 4 −12 −12 23 24 61 04 8 −11 20 19 32 −59 9 70 50 16 73 43−18 32 −40−13−23−37−61 8 22 2 13 −12 43 −8−45 16 2 −6−32−75 −13−50 24 7 −61 2 11 −33 43 1⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ repeat invers transform procedur i/prim 12 ( x , ) , obtain i/prim 00 ( x , ) . notic i/prim 00 ( x , ) exactli i00 ( x , ) , differ small . small differ caus round-off error forward invers transform , truncat error convert ﬂoating-point number integ grayscal values.288 8 lossi compress algorithm i/prim 00 ( x , ) = ⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣158 170 97 103 122 129 132 125 132 126 111 157 159 144 116 91 164 152 90 98 123 151 131 159 188 115 106 145 140 143 227 52 115 148 89 100 117 118 131 151 201 210 84 154 127 146 58 58 94 144 88 104 187 123 117 181 184 203 202 153 152 228 45 146 100 155 88 99 164 112 147 169 163 186 143 193 207 38 112 158 103 153 93 102 203 135 145 91 66 192 188 103 177 46 166 158 102 146 106 99 99 121 39 60 164 175 198 46 56 56 156 156 99 146 95 97 143 60 102 106 107 110 191 61 65 128 153 154 98 139 102 109 103 123 53 80 171 136 177 53 43 158 148 173 84 133 107 84 148 42 157 94 150 119 182 45 29 146 141 200 57 152 109 41 93 213 70 72 139 102 137 82 151 143 128 207 56 141 108 58 91 50 54 60 87 165 57 102 146 149 116 211 89 114 187 46 113 104 55 66 127 154 186 71 153 134 203 9435 99 150 66 34 88 88 127 140 141 175 212 144 128 213 100 88 97 96 50 49 101 47 90 136 136 156 204 105 43 54 76 43 104 69 69 68 53 110 127 134 145 158 183 109 121 72 113⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ figur 8.21 show three-level imag decomposit use haar wavelet . 8.7 wavelet packet wavelet packet view gener wavelet . ﬁrst intro- duce coifman , meyer , quak , wickerhaus [ 14 ] famili orthonorm base discret function rn . complet subband decomposit view decomposit input signal , use analysi tree depth log n. usual dyadic wavelet decomposit , low-pass-ﬁlt subband recurs decompos thu repres logarithm tree structur . howev , wavelet packet decomposit allow decomposit representedbi prune subtre full tree topolog . therefor , represent decomposit topolog isomorph permiss subband topolog [ 15 ] . leaf node prune subtre repres one permiss orthonorm basi . wavelet packet decomposit offer number attract properti , includ- ing •flexibl , sinc best wavelet basi sens cost metric found within larg librari permiss base . •favor local wavelet packet frequenc space . •low comput requir wavelet packet decomposit , decomposit comput order nlognus fast ﬁlter bank . wavelet packet current appli solv variou practic problem imag compress , signal de-nois , ﬁngerprint identiﬁc , on.8.8 embed zerotre wavelet coefﬁcient 289 fig . 8.21 haar wavelet decomposit 8.8 embed zerotre wavelet coefﬁcient far , describ wavelet-bas scheme imag decomposit . how- ever , asid refer idea quantiz away small coefﬁcient , realli address code wavelet transform values—how form bit- stream . problem precis dealt term new data structur , embed zerotre . embed zerotre wavelet ( ezw ) algorithm introduc shapiro [ 16 ] effect comput efﬁcient techniqu imag code . workha inspir number reﬁnement initi ezw algorithm , notabl said pearlman ’ set partit hierarch tree ( spiht ) algorithm [ 17 ] taubman ’ embed block code optim truncat ( ebcot ) algorithm [ 18 ] , adopt jpeg2000 standard . ezw algorithm address two problem : obtain best imag qualiti given bitrat accomplish task embed fashion . embed code290 8 lossi compress algorithm one contain lower rate code “ embed ” begin bitstream . bit effect order import bitstream . embed code allow encod termin encod point thu meet targetbitr exactli . similarli , decod ceas decod point produc reconstruct correspond lower rate encod . achiev goal , ezw algorithm take advantag import aspect low-bitr imag code . convent code method use achiev low bitrat , use scalar quantiz follow entropi code , say , like symbol , quantiz , zero . turn larg fraction bitbudget spent encod signiﬁc map , ﬂag whether input sampl ( case 2d discret wavelet transform , transform coefﬁcient ) zero nonzero quantiz valu . ezw algorithm exploit observ turn signiﬁc improv encod signiﬁc map correspond gain compress efﬁcienc . ezw algorithm consist two central compon : zerotre data structur method success approxim quantiz . 8.8.1 zerotre data structur code signiﬁc map achiev use new data structur calledthezerotre . wavelet coefﬁcient xi said insigniﬁc respect given threshold tif|x| < . zerotre oper hypothesi wavelet coefﬁcient coars scale insigniﬁc respect given threshold , wavelet coefﬁcient orient spatial locat ﬁner scale like insigniﬁc respect t. use hierarch wavelet decomposit present chap . 8 , relat everi coefﬁcient given scale set coefﬁcient next ﬁner scale similar orient . figur 8.22 provid pictori represent zerotre three-stag wavelet decomposit . coefﬁcient coars scale call parent correspond coefﬁcient next ﬁner scale spatial locat similar orient call children . given parent , set coefﬁcient ﬁner scale call descend . similarli , given child , set coefﬁcient coarser scale call ancestor . scan coefﬁcient perform way child node scan parent . figur 8.23 depict scan pattern three-level wavelet decomposit . given threshold , coefﬁcient xi element zerotre insigniﬁc descend insigniﬁc well . element zerotre zerotre root descend previous found zerotre root . signiﬁc map code use zerotre four-symbol alphabet . four symbol •the zerotre root . root zerotre encod special symbol indic insigniﬁc coefﬁcient ﬁner scale complet predictable.8.8 embed zerotre wavelet coefﬁcient 291 fig . 8.22 parent–child relationship zerotre fig . 8.23 ezw scan order •isol zero . coefﬁcient insigniﬁc signiﬁc descen- dant . •posit signiﬁc . coefﬁcient signiﬁc posit valu . •neg signiﬁc . coefﬁcient signiﬁc neg valu . cost encod signiﬁc map substanti reduc employ zerotre . zerotre work exploit self-similar transform coefﬁ- cient . underli justiﬁc success zerotre even though imag transform use decorrel transform , occurr insigniﬁc coefﬁcient independ event . addit , zerotre code techniqu base observ much easier predict insigniﬁc predict signiﬁc detail across scale . techniqu focus reduc cost encod signiﬁc map bit avail encod expens signiﬁc coefﬁcients.292 8 lossi compress algorithm 8.8.2 success approxim quantiz embed code ezw coder achiev use method call success approxim quantiz ( saq ) . one motiv develop method produc embed code provid coarse-to-ﬁn , multiprecis logarithm represent scale space correspond wavelet-transform image.anoth motiv take advantag efﬁcient encod signiﬁc map use zerotre data structur , allow encod signiﬁc map . saq method sequenti appli sequenc threshold 0 , ... , tn−1to determin signiﬁc coefﬁcient . threshold chosen ti=ti−1/2 . initi threshold t0i chosen |xj| < 2t0for transform coefﬁcient xj.adomin list subordin list maintain encod decod process . domin list contain coordin thecoefﬁci yet found signiﬁc rel order initi scan . use scan order shown fig . 8.23 , coefﬁcient given subband appear initi domin list prior coefﬁcient next subband . subordin list contain magnitud coefﬁcient found signiﬁc . list scan threshold . domin pass , coefﬁcient coordin domin list impli yet signiﬁc . coefﬁcient compar threshold ito determin signiﬁc . coefﬁcient found signiﬁc , magnitud append subordin list , coefﬁcient wavelet transform array set zero enabl possibl zerotre occur futur domin pass smaller threshold . result signiﬁc map zerotree-cod . domin pass follow subordin pass . coefﬁcient subordin list scan , magnitud , made avail decod , reﬁn addit bit precis . effect , width uncertainti interv true magnitud coefﬁcient cut half . eachmagnitud subordin list , reﬁnement encod use binari alphabet 1 indic true valu fall upper half uncertainti interv 0 indic fall lower half . string symbol binari alphabet entropy-cod . subordin pass , magnitud subordin list sort decreas order extent decod perform sort . process continu altern two pass , threshold halv domin pass . encod stop target stop criterion met.8.8 embed zerotre wavelet coefﬁcient 293 8.8.3 ezw exampl follow exampl demonstr concept zerotre code success approxim quantiz . shapiro [ 16 ] present exampl ezw code paper 8 ×8 three-level wavelet transform . howev , unlik exampl given shapiro , complet encod decod process show output bitstream point entropi code . figur 8.24 show coefﬁcient three-stag wavelet transform attempt code use ezw algorithm . use symbol p , n , , zto denot posit signiﬁc , neg signiﬁc , zerotre root , isol zero , respect . sinc largest coefﬁcient 57 , choos initi threshold t0to 32 . begin , domin list contain coordin coefﬁcient . begin scan order shown fig . 8.23 determin signiﬁc coefﬁcient . follow list coefﬁcient visit , order scan : { 57 , −37 , −29,30,39 , −20,17,33,14,6,10,19,3,7,8,2,2,3,12 , −9,33,20,2,4 } respect threshold t0=32 , easi see coefﬁcient 57 −37 signiﬁc . thu , output pand nto repres . coefﬁcient −29 insigniﬁc contain signiﬁc descend , 33 , lh1 . therefor , code z . coefﬁcient 30 also insigniﬁc , descend insigniﬁc respect current threshold , code t. sinc alreadi determin insigniﬁc 30 descend , scan bypass , addit symbol gener . continu fig . 8.24 coefﬁcient three-stag wavelet transform use input ezw algorithm 157 −37 −293039 −20 17 33 14 6 10 1915 13 −79 12 15 33 20 10 310 3 −714 12 −9 −2 1 4 0724 41−11379 8216 9 −42 213 0065201031 0294 8 lossi compress algorithm manner , domin pass output follow symbol : d0 : pnztpttptzttpttt five coefﬁcient found signiﬁc : 57 , −37 , 39 , 33 , anoth 33 . sinc know coefﬁcient greater 2 t0=64 , threshold use ﬁrst domin pass 32 , uncertainti interv thu [ 32,64 ) . therefor , know valu signiﬁc coefﬁcient lie somewher insid uncertainti interv . subordin pass follow domin pass reﬁn magnitud coefﬁcient indic whether lie ﬁrst half second half uncertainti interv . output 0 valu lie [ 32,48 ) 1 valu within [ 48,64 ) . accord order scan , subordin pass output follow bit : s0:10000 domin list contain coordin coefﬁcient except found signiﬁc , subordin list contain valu { 57,37,39 , 33,33 } . subordin pass complet , attempt rearrang valu subordin list larger coefﬁcient appear smaller one , constraint decod abl exactli . sinc subordin pass halv uncertainti interv , decod abl distinguish valu [ 32,48 ) [ 48,64 ) . sinc 39 37 distin- guishabl decod , order chang . therefor , subordin list remain reorder oper . move second round domin subordin pass , need set valu signiﬁc coefﬁcient 0 wavelet transform array prevent emerg new zerotre . new threshold second domin pass t1=16 . use pro- cedur , domin pass output follow symbol . note thecoefﬁci domin list scan . 1 : zznptnpttztptttttttttttttptttttt ( 8.71 ) subordin list { 57,37,39,33,33,29,30,20,17,19,20 } . subor- dinat pass follow halv three current uncertainti interv [ 48,64 ) , [ 32,48 ) , [ 16,32 ) . subordin pass output follow bit : 1:10000110000 set valu coefﬁcient found signiﬁc 0 wavelet transform array.8.8 embed zerotre wavelet coefﬁcient 295 output subsequ domin subordin pass shown : d2 : zzzzzzzzptpzpptnttptppttpttpttpnpp ttttttpttttttttttttttt s2:01100111001101100000110110 d3 : zzzzzzztzpztztnttp tttttptnnttttptttpptppttpttttt s3:00100010001110100110001001111101100010 d4 : zzzzzttztztzztzzpttppp ttttpttpttnpttptptttpt s4:1111101001101011000001011101101100010010010101010 d5 : zzzztz ttttzt zzzzttpttp tttttnptpptttppttp sinc length uncertainti interv last pass 1 , last subordin pass unnecessari . decod side , suppos receiv inform ﬁrst domin subordin pass . reconstruct lossi version transform coefﬁ- cient revers encod process . symbol d0 , obtain posit signiﬁc coefﬁcient . , use bit decod s0 , reconstruct valu coefﬁcient use center uncertainti interv . figur 8.25 show result reconstruct . evid stop decod process point reconstruct coarser represent origin input coefﬁcient . figur 8.26 show reconstruct decod receiv d0 , s0 , d1 , s1 , d2 , ﬁrst 10 bit s2 . coefﬁcient reﬁn last subordin pass appear quantiz use coarser quantiz . fact , reconstruct valu use coefﬁcient center uncertainti interv previou pass . heavili shade coefﬁcient ﬁgure reﬁn , lightli shade coefﬁcient reﬁn . result , easi see decod process end , elimin much visual artifact contain reconstruct . fig . 8.25 reconstruct transform coefﬁcient ﬁrst domin subordin passes296 8 lossi compress algorithm fig . 8.26 reconstruct transform coefﬁcient d0 , s0 , d1 , s1 , d2 , n dt h e ﬁrst 10 bit s2 8.9 set partit hierarch tree ( spiht ) spiht revolutionari extens ezw algorithm . base ezw ’ under- lie principl partial order transform coefﬁcient , order bitplan transmiss reﬁnement bit , exploit self-similar trans- form wavelet imag , spiht algorithm signiﬁcantli improv perform predecessor chang way subset coefﬁcient partit reﬁnement inform convey . uniqu properti spiht bitstream compact . result bit- stream spiht algorithm compact pass entropi coder would produc margin gain compress expens much comput . therefor , fast spiht coder implement without entropi coder possibl simpl patent-fre huffman coder . anoth signatur spiht algorithm order inform explicitli transmit decod . instead , decod reproduc execut path encod recov order inform . desir side effect encod decod similar execut time , rare case code method . said pearlman [ 17 ] give full descript algorithm . 8.10 exercis 1 . assum unbound sourc wish quantiz use m-bit midtread uniform quantiz . deriv express total distort step size 1.8.10 exercis 297 2 . suppos domain uniform quantiz [ −bm , bm ] . deﬁn load fraction γ=bm σ σi standard deviat sourc . write simpl program quantiz gaussian distribut sourc zero-mean unit varianc use 4-bit uniform quantiz . plot snr load fraction estim optim step size incur least amount distort graph . 3.∗suppos input sourc gaussian-distribut zero-mean unit variance—that , probabl densiti function deﬁn fx ( x ) =1√ 2πe−x2 2 ( 8.72 ) wish ﬁnd four-level lloyd–max quantiz . let yi= [ y0 , ... , y3 ] bi= [ b0 , ... , b3 ] . initi reconstruct level set y0= [ − 2 , −1,1,2 ] . sourc unbound , outer two boundari +∞ and−∞ . follow lloyd–max algorithm chapter : boundari valu calcul midpoint reconstruct valu . b0= [ −∞ , −1.5,0,1.5 , ∞ ] . continu one iter i=1 , use eq . 8.13 ﬁnd y1 0 , y1 1 , y1 2 , y1 3 , use numer integr . also calcul squar error differ y1andy0 . iter repeat squar error success estim ofth reconstruct level predeﬁn threshold /epsilon1 . write small program implement lloyd–max quantiz describ . 4 . block size 2d dct transform 8 ×8 , use dc compon creat thumbnail imag , fraction origin pixel would use ? 5 . block size 8 ×8 , deﬁnit dct given eq . 8.17 . ( ) 8 ×8 grayscal imag rang 0 .. 255 , largest valu dct coefﬁcient could , input imag ? ( also , state allth dct coefﬁcient valu imag . ) ( b ) ﬁrst subtract valu 128 whole imag carri dct , exact effect dct valu f [ 2,3 ] ? ( c ) would carri subtract ? subtract affect number bit need code imag ? ( ) would possibl invert subtract , idct ? , ? 6 . write simpl program refer sampl dct program dct_1d.c book ’ websit verifi result exampl 8.2of 1d dct exampl chapter.298 8 lossi compress algorithm 7 . eq . 8.27 indic , 2d dct implement follow matrix multipl : f ( u , v ) =t·f ( , j ) ·tt . ( ) row ? ( b ) explain achiev two matrix multipl . 8 . write program verifi dct-matrix t8a deﬁn eq . 8.29 8.30 orthogon matrix , i.e. , row column orthogon unit vector ( orthonorm vector ) . 9 . write program verifi 2d dct idct matrix implement deﬁn eq . 8.27 8.31 lossless , i.e. , transform 8 ×8 valu f ( , j ) tof ( u , v ) back f ( i.j ) . ( , concern possible/tini ﬂoat point calcul error . ) 10 . could use similar dct scheme video stream use 3d version dct . suppos one color compon video pixel fijkat posit ( , j ) time k. could deﬁn 3d dct transform ? 11 . suppos uniformli color sphere illumin shade vari smoothli across surfac , fig . 8.27 . ( ) would expect dct coefﬁcient imag look like ? ( b ) would effect dct coefﬁcient checkerboard color surfac sphere ? ( c ) uniformli color sphere , describ dct valu block straddl top edg sphere , meet black background . ( ) describ dct valu block straddl left edg sphere . 12 . haar wavelet scale function deﬁn follow : φ ( ) =/braceleftbigg10≤t≤1 0 otherwis ( 8.73 ) scale vector h0 [ 0 ] =h0 [ 1 ] = 1/√ 2 . ( ) draw scale function , verifi dilat translat φ ( 2t ) φ ( 2t−1 ) satisfi dilat eq . ( 8.62 ) . draw combin func- tion make full function φ ( ) . ( b ) deriv wavelet vector h1 [ 0 ] , h1 [ 1 ] eq . 8.65 deriv draw haar wavelet function ψ ( ) eq . 8.63 . 13 . suppos mother wavelet ψ ( ) vanish moment mpup includ mn . expand f ( ) taylor seri around t=0 , nth deriv f [ i.e. , leftov error order ( n+1 ) ] . evalu summat integrals8.10 exercis 299 fig . 8.27 sphere shade light produc substitut taylor seri ( 8.58 ) show result order ( sn+2 ) . 14 . program wavelet_compression.c book ’ websit fact simpl implement tlab function ( similar fourth-gener lan-guag ) . advantag imread function input imag format great mani type , imwrit output desir . use given program templat , construct tlab program wavelet-basedimag reduct , perhap number wavelet level function paramet . 15 . interest ﬁnd fourier transform function , easi avail symbol manipul system mapl . lan- guag , invok fourier function view answer directli ! exampl , tri follow code fragment : ( ’ inttran ’ ) ; f : =1 ; f : = fourier ( f , , w ) ; answer 2 πδ ( w ) . let ’ tri gaussian : f : = exp ( -tˆ2 ) ; f : = fourier ( f , , w ) ; answer be√ πe ( −w2/4 ) : fourier transform gaussian simpli anoth gaussian . 16 . suppos deﬁn wavelet function ψ ( ) =exp ( −t1/4 ) sin ( t4 ) , t≥0 ( 8.74 ) function oscil valu 0 . use plot packag convinc function zero moment mpfor valu p. 17 . implement dct-base wavelet-bas imag coder . design user interfac compress result coder seen sidebi side visual comparison . psnr code imag also shown , quantit comparisons.300 8 lossi compress algorithm includ slider bar control target bitrat coder . chang target bitrat , coder compress input imag real time show compress result immedi user interface.discuss qualit quantit compress result observ program target bitrat 4 , 1 , 0.25 bpp . refer 1 . k. sayood , introduct data compress , 5th edn . ( morgan kaufmann , san francisco , 2017 ) 2 . h. stark , j.w . wood , probabl , statist , random process engin , 4th edn . ( pearson , 2012 ) 3 . a. györgi , theoret limit lossi sourc code , 1998 . tudományo diákkör ( tdk ) confer ( hungarian scientiﬁc student ’ confer ) technic univers budapest.http : //www.szit.bme.hu/gya/mixed.p 4 . s. arimoto , algorithm calcul capac arbitrari discret memoryless channel . ieee tran . inf . theori 18 , 14–20 ( 1972 ) 5 . r. blahut , comput channel capac rate-distort function . ieee tran . inform . theori 18 , 460–473 ( 1972 ) 6 . a. gersho , r.m . gray , vector quantiz signal compress . ( springer , 1991 ) 7 . a.k . jain , fundament digit imag process ( prentice-hal , englewood cliff , nj , 1988 ) 8 . k.r . rao , p . yip , discret cosin transform : algorithm , advantag applic ( academ press , boston , , 1990 ) 9 . j.f . blinn , ’ deal dct ? ieee comput . graph . appl . 13 ( 4 ) , 78–83 ( 1993 ) 10 . s. mallat , wavelet tour signal process , 3rd edn . ( academ press , san diego , 2008 ) 11 . s. mallat , theori multiresolut signal decomposit : wavelet represent . ieee tran . pattern anal . mach . intel . 11 , 674–693 ( 1989 ) 12 . r.c . gonzalez , r.e . wood , digit imag process , 3rd edn . ( prentice-hal , 2007 ) 13 . b.e . usevitch , tutori modern lossi wavelet imag compress : foundat jpeg 2000 . ieee signal process . mag . 18 ( 5 ) , 22–35 ( 2001 ) 14 . r. coifman , . meyer , s. quak , v . wickerhaus , signal process compress wavelet packet ( yale univers , numer algorithm research group , 1990 ) 15 . k. ramachandran , m. v etterli , best wavelet packet basi rate-distort sens . ieee tran . imag process . 2 , 160–173 ( 1993 ) 16 . j. shapiro , embed imag code use zerotre wavelet coefﬁcient . ieee tran . signal process . 41 ( 12 ) ( 1993 ) 17 . . said , w.a . pearlman , new , fast , efﬁcient imag codec base set partit hierarch tree . ieee tran . csvt 6 ( 3 ) , 243–249 ( 1996 ) 18 . d. taubman , high perform scalabl imag compress ebcot . ieee tran . imag process . 9 ( 7 ) , 1158–1170 ( 2000 ) 9imag compress standard recent year seen explos avail digit imag , increas number digit imag devic smartphon , webcam , digit camera , scanner . need efﬁcient process store imag digit form motiv develop mani imag compress standard variou applic need . gener , standard greater longev thanparticular program devic therefor warrant care studi . chapter , examin imag compress standard demonstr topic present chap . 7and8ar appli practic . ﬁrst explor standard jpeg deﬁnit , go look wavelet- base jpeg 2000 standard . two standard , jpeg-ls—aim particularli lossless jpeg , outsid main jpeg standard—and jbig , bi-level imagecompress , includ complet . 9.1 jpeg standard jpeg imag compress standard develop joint photograph expert group . formal accept intern standard 1992 [ 1 ] . remark , almost 30 year later , still go strong—us imag . 25thanniversari , hudson et al. , four origin jpeg develop team member , present inform histor review develop standard [ 2 ] . jpeg consist number step , contribut compress . ’ look motiv behind step , take apart algorithm piec piec . © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_9301302 9 imag compress standard 9.1.1 main step jpeg imag compress know , unlik 1d audio signal , digit imag f ( , j ) deﬁn time domain . instead , deﬁn spatial domain —that , imag function two dimens iand j ( , convent , xandi ) . 2d dct use one step jpeg , yield frequenc respons function f ( u , v ) spatial frequenc domain , index two integ uandv . jpeg lossi imag compress method . effect dct trans- form code method jpeg reli three major observ : observ 1 . use imag content chang rel slowli across image— , unusu intens valu vari wide sever time small area—for exampl , 8 ×8 imag block . spatial frequenc indic mani time pixel valu chang across imag block . dct formal thisnot measur much imag content chang relat number cycl cosin wave per block . observ 2 . psychophys experi suggest human much less like notic loss high-spati frequenc compon lower frequenc compon . jpeg ’ approach use dct basic reduc high-frequ content efﬁcient code result bitstr . term spatial redund indic much inform imag repeat : pixel red , thenit neighbor like red also . observ 2 , dct coefﬁcient lowest frequenc import . therefor , frequenc get higher , becom less import repres dct coefﬁcient accur . may evenb safe set zero without lose much perceiv imag inform . clearli , string zero repres efﬁcient length run zero , compress bit requir possibl . sinc end use fewer number repres pixel block , remov location-depend inform , effect remov spatial redund . jpeg work color grayscal imag . case color imag , ycbcr , encod work compon separ , use routin . sourc imag differ color format , encod perform acolor-spac convers ycbcr . discuss chap . 5 , chromin imag crandcbar subsampl : jpeg use 4:2:0 scheme , make use anoth observ vision : observ 3 . visual acuiti ( accuraci distinguish close space line ) much greater gray ( “ black white ” ) color . simpli seemuch chang color occur close proximity—think blobbi ink use comic book . work simpli eye see black line best , brain push color place . fact , tradit , broadcast tvmake use phenomenon transmit much less color inform gray information.9.1 jpeg standard 303 dct quantiz entropi code rlcdpcmheader datadc acquantiz . tabl code tabl tabl zagzigycbcr 8×8f ( , j ) f ( u , v ) ˆf ( u , v ) fig . 9.1 block diagram jpeg encod jpeg imag need view , three compress compon imag decod independ eventu combin . color chan- nel , pixel must ﬁrst enlarg cover 2 ×2 block . without loss gener- aliti , simpli use one them—for exampl , yimag , descript compress algorithm . figur 9.1show block diagram jpeg encod . revers arrow ﬁgure , basic obtain jpeg decod . jpeg encod consist follow main step : •transform rgb ycbcr subsampl color •perform dct imag block •appli quantiz •perform zigzag order run-length encod •perform entropi code . dct imag block imag divid 8 ×8 block . 2d dct ( eq . 8.17 ) appli block imag f ( , j ) , output dct coefﬁcient f ( u , v ) block . choic small block size jpeg compromis reach committe : number larger 8 would made accuraci low frequenc better , use 8 make dct ( idct ) comput fast.304 9 imag compress standard use block , howev , effect isol block neigh- bore context . jpeg imag look choppi ( “ blocki ” ) user speciﬁ high compress ratio —we see block . fact , remov “ block artifact ” import concern research . calcul particular f ( u , v ) , select basi imag fig . 8.9that corre- spond appropri uandvand use eq . 8.17to deriv one frequenc respons f ( u , v ) . quantiz quantiz step jpeg aim reduc total number bit need compress imag [ 3 ] . consist simpli divid entri dct coefﬁcient block integ , round ˆf ( u , v ) =round/parenleftbiggf ( u , v ) q ( u , v ) /parenrightbigg ( 9.1 ) , f ( u , v ) repres dct coefﬁcient , q ( u , v ) aquant matrix entri , andˆf ( u , v ) repres quantiz dct coefﬁcient jpeg use succeed entropi code . default valu 8 ×8 quantiz matrix q ( u , v ) list tabl 9.1 and9.2for lumin chromin imag , respect . number result psychophys studi , goal maxim compress ratio minim perceptu loss jpeg imag . follow appar- : •sinc number q ( u , v ) rel larg , magnitud varianc ofˆf ( u , v ) signiﬁcantli smaller f ( u , v ) . ’ see later ˆf ( u , v ) code much fewer bit . quantiz step main sourc loss jpeg compress . •the entri q ( u , v ) tend larger valu toward lower right corner . aim introduc loss higher spatial frequencies—a practicesupport observ 1 2 . handili chang compress ratio simpli multipl scale number q ( u , v ) matrix . fact , qualiti factor ( qf ) , user choic offer everi jpeg implement , speciﬁ . usual rang 1 .. 100 , qf=100 correspond highest qualiti compress imag qf=1 lowest qualiti . relationship qfand scale _fa c r below:9.1 jpeg standard 305 tabl 9.1 lumin quantiz table16 11 10 16 24 40 51 61 12 12 14 19 26 58 60 55 14 13 16 24 40 57 69 56 14 17 22 29 51 87 80 62 18 22 37 56 68 109 103 77 24 35 55 64 81 104 113 92 49 64 78 87 103 121 120 101 72 92 95 98 112 100 103 99 tabl 9.2 chromin quantiz table17 18 24 47 99 99 99 99 18 21 26 66 99 99 99 99 24 26 56 99 99 99 99 99 47 66 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 99 // qf user-select compress qualiti // q default quantiz matrix// qx scale quantiz matrix// q1 quantiz matrix 1 ’ qf > = 50 scaling_factor = ( 100-qf ) /50 ; els scaling_factor = ( 50/qf ) ; endif scaling_factor ! = 0 // qf 100 qx = round ( q * scaling_factor ) ; els qx = q1 ; // quantiz endqx = uint8 ( qx ) ; // max clamp 255 qf=1 exampl , qf=50 , scale _fa c r 1 . result qvalu equal tabl entri . qf=10 , scale _fa c r 5 . result qvalu 5 time tabl entri valu . qf=100 , tabl entri simpli becom 1 valu , mean quantiz source.veri low-qual factor , like qf=1 , special case : inde qf=1 scale _fa c r 50 , quantiz matrix contain large306 9 imag compress standard number . howev , type-cast uint8 typic implement , tabl entri go effect maximum valu 255 . realist , almost applic , qfshould less 10 . jpeg also allow custom quantiz tabl speciﬁ put header ; interest use low-const high-const valu q≡2o rq≡128 observ basic effect qon visual artifact . figur 9.2and9.3show result jpeg imag code decod test imag lena . lumin imag ( ) shown . also , lossless cod- ing step quantiz shown , sinc affect quality/lossof jpeg imag . result show effect compress decompres- sion appli rel smooth block imag textur ( higher frequencycont ) block , respect . suppos f ( , j ) repres one 8 ×8 block extract imag , f ( u , v ) dct coefﬁcient , ˆf ( u , v ) quantiz dct coefﬁcient . let ˜f ( u , v ) denot de-quant dct coefﬁcient , determin simpli multipli byq ( u , v ) , let ˜f ( , j ) reconstruct imag block . illustr qualiti jpeg compress , especi loss , error /epsilon1 ( , j ) =f ( , j ) −˜f ( , j ) shown last row fig . 9.2and9.3 . fig . 9.2 , imag block ( indic black box imag ) chosen area lumin valu chang smoothli . actual , left side block brighter , right side slightli darker . expect , except dc ﬁrst ac compon , repres low spatial frequenc , dct coefﬁcient f ( u , v ) small magnitud . pixel valu block contain high-spati frequenc chang . explan small implement detail order . rang 8-bit lumin valu f ( , j ) [ 0,255 ] . jpeg implement , yvalu ﬁrst reduc 128 simpli subtract 128 encod . idea turn ycompon zero-mean imag , chromin imag . result , wast bit code mean valu . ( think 8 ×8 block intens valu rang 120 135 . ) use f ( , j ) −128 place ( , j ) affect output ac coefﬁcients—it alter dc coefﬁcient . decod , subtract 128 ad back onto yvalu . fig . 9.3 , imag block chosen rapidli chang lumin . henc , mani ac compon larg magnitud ( includ toward lower rightcorn , uandvar larg ) . notic error /epsilon1 ( , j ) also larger fig.9.2—jpeg introduc loss imag quickli chang detail . easy-to-us jpeg demo written java avail demo section text websit tri . prepar entropi code far seen two main step jpeg compress : dct quantiza-t . remain small step shown block diagram fig . 9.1all lead entropi code quantiz dct coefﬁcient . addit data compres-9.1 jpeg standard 307 8×8 block imag ‘ lena ’ 200 202 189 188 189 175 175 175 200 203 198 188 189 182 178 175 203 200 200 195 200 187 185 175 200 200 200 200 197 187 187 187 200 205 200 200 195 188 187 175 200 200 200 200 200 190 187 175 205 200 199 200 191 187 187 175 210 200 200 200 188 185 187 186 f ( , j ) 5 1 56 5- 1 2 4 1 2- 8 5 -16 3 2 0 0 -11 -2 3 -12 6 11 -1 3 0 1 -2 -8 3 -4 2 -2 -3 -5 -2 0 - 27 - 5 40 - 1 - 4 0- 3 - 1 0 4 1 - 1 0 3- 2 - 3 3 3 - 1 - 1 3 -2 5 -2 4 -2 2 -3 0 f ( u , v ) 3 26- 100000 -1 0 0 0 0 0 0 0 -1 0 1 0 0 0 0 0 -1 0 0 0 0 0 0 0 00 000000 00 000000 00 000000 00 000000 ˆf ( u , v ) 5 1 26 6- 1 000000 -12 0 0 0 0 0 0 0 -14 0 16 0 0 0 0 0 -14 0 0 0 0 0 0 0 0 0 000000 0 0 000000 0 0 000000 0 0 000000 ˜f ( u , v ) 199 196 191 186 182 178 177 176 201 199 196 192 188 183 180 178 203 203 202 200 195 189 183 180 202 203 204 203 198 191 183 179 200 201 202 201 196 189 182 177 200 200 199 197 192 186 181 177 204 202 199 195 190 186 183 181 207 204 200 194 190 187 185 184 ˜f ( , j ) 1 6 -2 2 7 -3 -2 -1 - 1 4 2- 4 1- 1- 2- 3 0- 3- 2- 5 5- 2 2- 5 -2 -3 -4 -3 -1 -4 4 8 0 4 -2 -1 -1 -1 5 -2 0013846 - 2 1- 2 0 5 1 1 4- 6 3- 4 0 6- 2- 2 2 2 /epsilon1 ( , j ) =f ( , j ) −˜f ( , j ) fig . 9.2 jpeg compress smooth imag block308 9 imag compress standard anoth 8 ×8 block imag ‘ lena ’ 70 70 100 70 87 87 150 187 85 100 96 79 87 154 87 113 100 85 116 79 70 87 86 196 136 69 87 200 79 71 117 96 161 70 87 200 103 71 96 113 161 123 147 133 113 113 85 161 146 147 175 100 103 103 163 187 156 146 189 70 113 161 163 197 f ( , j ) -80 -40 89 -73 44 32 53 -3 -135 -59 -26 6 14 -3 -13 -28 47 -76 66 -3 -108 -78 33 59 -2 10 -18 0 33 11 -21 1 -1 -9 -22 8 32 65 -36 -1 5- 2 0 2 8- 4 6 3 2 4- 3 0 2 4 6 -20 37 -28 12 -35 33 17 -5 -23 33 -30 17 -5 -4 20 f ( u , v ) -5 -4 9 -5 2 1 1 0 - 1 1- 5- 2 0 1 00- 1 3- 6 4 0- 3- 10 1 01 - 1010 00 00 - 1001 00 0- 1 1- 1 0 00 0 000000 00 000000 00 ˆf ( u , v ) -80 -44 90 -80 48 40 51 0 -132 -60 -28 0 26 0 0 -55 42 -78 64 0 -120 -57 0 56 01 7 - 2 2 0 5 1 0 0 0 00 - 3 70 0 1 0 9 00 0- 3 5 5 5- 6 4 0 0 0 0 0000 0 0 00 0000 0 0 00 ˜f ( u , v ) 70 60 106 94 62 103 146 176 85 101 85 75 102 127 93 144 98 99 92 102 74 98 89 167 132 53 111 180 55 70 106 145 173 57 114 207 111 89 84 90 164 123 131 135 133 92 85 162 141 159 169 73 106 101 149 224 150 141 195 79 107 147 210 153 ˜f ( , j ) 0 10 -6 -24 25 -16 4 11 0- 1 1 1 4 - 1 5 2 7- 6 - 3 1 2 -14 24 -23 -4 -11 -3 29 4 16 -24 20 24 1 11 -49 -12 13 -27 -7 -8 -18 12 23 -3 0 16 -2 -20 21 0 -1 5- 1 2 6 2 7 - 3 2 1 4- 3 7 6 5 -6 -9 6 14 -47 44 /epsilon1 ( , j ) =f ( , j ) −˜f ( , j ) fig . 9.3 jpeg compress textur imag block9.1 jpeg standard 309 fig . 9.4 zigzag scan jpeg sion step lossless . interestingli , dc ac coefﬁcient treat quit differ entropi code : run-length encod ac versu dpcm dc . run-length code ( rlc ) ac coefﬁcient notic fig . 9.2the mani zero ˆf ( u , v ) quantiz appli . run- length code ( rlc ) ( run-length encod , rle ) therefor use turn theˆf ( u , v ) valu set { # -zeros-to-skip , next nonzero valu } .r l ci se v e nm r e effect use address scheme , make like hit long run zero : zigzag scan turn 8 ×8 matrix ˆf ( u , v ) 64-vector , fig . 9.4 illustr . , imag block tend small high-spatial-frequ compon , zero quantiz . henc , zigzag-scan order good chanc concaten long run zero . exampl , ˆf ( u , v ) fig . 9.2 turn ( 32,6 , −1 , −1,0 , −1,0,0,0 , −1,0,0,1,0,0 , ... , 0 ) three run zero middl run 51 zero end . rlc step replac valu pair ( runlength , valu ) run zero ac coefﬁcient ˆf , runlength number zero run valu next nonzero coefﬁcient . save bit , special pair ( 0,0 ) indic end block last nonzero ac coefﬁcient reach . exampl , consid ﬁrst ( dc ) compon , thu ( 0,6 ) ( 0 , −1 ) ( 0 , −1 ) ( 1 , −1 ) ( 3 , −1 ) ( 2,1 ) ( 0,0 ) 310 9 imag compress standard differenti puls code modul ( dpcm ) dc coefﬁcient dc coefﬁcient code separ ac one . 8 ×8 imag block one dc coefﬁcient . valu dc coefﬁcient variou block could larg differ , dc valu reﬂect averag intens block , consist observ 1 , dc coefﬁcient unlikelyto chang drastic within short distanc . make dpcm ideal scheme code dc coefﬁcient . dc coefﬁcient ﬁrst ﬁve imag block 150 , 155 , 149 , 152 , 144 , dpcm would produc 150 , 5 , −6 , 3 , −8 , assum predictor ith block simpli i=dc i−dc i−1 , d0=dc0 . expect dpcm code gener smaller magnitud varianc , beneﬁci next entropi code step . worth note unlik run-length code ac coefﬁcient , perform individu block , dpcm dc coefﬁcient jpeg carri entir imag . entropi code dc ac coefﬁcient ﬁnalli undergo entropi code step . , willdiscuss basic ( baselin 1 ) entropi code method , use huffman code support 8-bit pixel origin imag ( color imag compo-n ) . let ’ examin two entropi code scheme , use variant huffman code dc slightli differ scheme ac . huffman code dc coefﬁcient . dpcm-code dc coefﬁcient rep- resent pair symbol ( size , amplitud ) , size indic mani bit need repres coefﬁcient amplitud contain actual bit . tabl 9.3illustr size categori differ possibl amplitud . notic dpcm valu could requir 8 bit could neg valu . one ’ s-complement scheme use neg numbers—that , binari code 10 2 , 01 −2 , 11 3 , 00 −3 , . exampl use , code 150 , 5 , −6 , 3 , −8 turn ( 8 , 10010110 ) , ( 3 , 101 ) , ( 3 , 001 ) , ( 2 , 11 ) , ( 4 , 0111 ) jpeg implement , size huffman code henc variable- length code . word , size 2 might repres singl bit ( 0 1 ) appear frequent . gener , smaller size occur much often—th 1the jpeg standard allow huffman code arithmet code ; entropi code method . also support 8-bit 12-bit pixel sizes.9.1 jpeg standard 311 tabl 9.3 baselin entropi code details—s categorys amplitud 1 −1 , 1 2 −3 , −2 , 2 , 3 3 −7 .. −4 , 4 .. 7 4 −15 .. −8 , 8 .. 15 ...... 10 −1023 .. −512 , 512 .. 1023 entropi size low . henc , deploy huffman code bring addit compress . encod , custom huffman tabl store jpeg imag header ; otherwis , default huffman tabl use . hand , amplitud huffman code . sinc valu chang wide , huffman code appreci beneﬁt . huffman code ac coefﬁcient . recal said ac coefﬁcient run-length code repres pair number ( runlength , valu ) . howev , actual jpeg implement , valu repre- sent size andamplitud , dc . save bit , runlength size alloc 4 bit squeez singl byte—let ’ call symbol 1 .symbol 2 amplitud valu ; number bit indic size : symbol 1 : ( runlength , size ) symbol 2 : ( amplitud ) 4-bit runlength repres zero-run length 0 15 . occasion- alli , zero-run length exce 15 ; special extens code , ( 15 , 0 ) , use symbol 1 . worst case , three consecut ( 15 , 0 ) extens need normal termin symbol 1 , whose runlength complet actual run length . dc , symbol 1 huffman code , wherea symbol 2 . 9.1.2 jpeg mode jpeg standard support numer mode ( variat ) . commonlyus one 1 . sequenti mode 2 . progress mode3 . hierarch mode 4 . lossless mode.312 9 imag compress standard 1.sequenti mode default jpeg mode . gray-level imag color imag compon encod singl left-to-right , top-to-bottom scan . implicitli assum mode discuss far . “ motion jpeg ” video codec use baselinesequenti jpeg , appli imag frame video . 2.progress mode progress jpeg deliv low-qual version imag quickli , follow higher qualiti pass , becom wide support web browser . mul- tipl scan imag cours use speed commun line low . progress mode , ﬁrst scan carri bit deliv arough pictur follow . addit scan , data receiv , imag qualiti gradual enhanc . advantag user end choic whether continu receiv imag data ﬁrst scan ( ) . progress jpeg realiz one follow two way . main step ( dct , quantiz , etc . ) ident sequenti mode . spectral select : scheme take advantag spectral ( spatial frequenc spectrum ) characterist dct coefﬁcient : higher ac compon provid detail inform . scan 1 : encod dc ﬁrst ac compon , e.g. , ac1 ac2 . scan 2 : encod ac compon , e.g. , ac3 , ac4 , ac5 . ... scan k : encod last ac , e.g. , ac61 , ac62 , ac63 . success approxim : instead gradual encod spectral band , dct coefﬁcient encod simultan , signiﬁc bit ( msb ) ﬁrst . scan 1 : encod ﬁrst msb , e.g. , bit 7 , 6 , 5 , 4 . scan 2 : encod less-signiﬁc bit , e.g. , bit 3 . ... scan : encod least signiﬁc bit ( lsb ) , bit 0 . 3.hierarch mode name suggest , hierarch jpeg encod imag hierarchi sev- eral differ resolut . encod imag lowest resolut basic compress low-pass-ﬁlt imag , wherea imag success higher res-olut provid addit detail ( differ lower resolut imag ) .9.1 jpeg standard 313 4 decod 2 + encod decod + 2 + encodeencod decod decode2 + 2 +decod 2− + +−ff4 f4 f~ 4 f~ 4 d2 = f2− e ( f~ 4 ) d2 d1 = f − e ( f~ 2 ) d1f~ 2f2d~ 2 d~ 1f~ 2= f~=e ( f~ 4 ) + d~ 2 e ( f~ 2 ) + d~ 1 fig . 9.5 block diagram hierarch jpeg similar progress jpeg , hierarch jpeg imag transmit mul- tipl pass progress improv qualiti . figur 9.5illustr three-level hierarch jpeg encod decod ( sepa- rate dash line ﬁgure ) . algorithm 9.1 ( three-level hierarch jpeg encod ) 1.reduct imag resolut . reduc resolut input imag f ( e.g. , 512×512 ) factor 2 dimens obtain f2 ( e.g. , 256 ×256 ) . repeat obtain f4 ( e.g. , 128 ×128 ) . 2.compress low-resolut imag f4 . encod f4use jpeg method ( e.g. , sequenti progress ) obtain f4 . 3.compress differ imag d2 . ( ) decod f4to obtain ˜f4 . use interpol method expand ˜f4to resolut f2and call e ( ˜f4 ) . ( b ) encod differ d2=f2−e ( ˜f4 ) use jpeg method ( e.g. , sequenti progress ) gener d2 . 4.compress differ imag d1 . ( ) decod d2to obtain ˜d2 ; add e ( ˜f4 ) get ˜f2=e ( ˜f4 ) +˜d2 , version f2after compress decompress . ( b ) encod differ d1=f−e ( ˜f2 ) use jpeg method ( e.g. , sequenti progress ) gener d1.314 9 imag compress standard algorithm 9.2 ( three-level hierarch jpeg decod ) 1.decompress encod low-resolut imag f4 . decod f4use jpeg method encod , obtain ˜f4 . 2.restor imag ˜f2at intermedi resolut . use e ( ˜f4 ) +˜d2to obtain ˜f2 . 3.restor imag ˜fat origin resolut . use e ( ˜f2 ) +˜d1to obtain ˜f . point step 3 encod , differ d2i taken asf2− ( f4 ) f2−e ( ˜f4 ) . employ ˜f4ha overhead , sinc addit decod step must introduc encod side , shown ﬁgure . , necessari ? , decod never chanc see origin f4 . restor step decod use ˜f4to obtain ˜f2=e ( ˜f4 ) +˜d2 . sinc ˜f4/negationslash=f4when lossi jpeg method use compress f4 , encod must use ˜f4ind2=f2− ( ˜f4 ) avoid unnecessari error decod time . kind decoder–encod step typic mani compress scheme . fact , seen sect . 6.3.5 . present simpli decod access encod , origin , valu . similarli , step 4 encod , d1use differ fand ( ˜f2 ) , note ( f2 ) . 4.lossless mode lossless jpeg special case jpeg inde loss imag qualiti . discuss chap . 7 , howev , employ simpl differenti code method , involv transform code . rare use , sinc compress ratio low compar lossi mode . hand , meet specialne , subsequ develop jpeg-l standard speciﬁc aim lossless imag compress ( see sect . 9.3 ) . 9.1.3 glanc jpeg bitstream figur 9.6provid hierarch view organ bitstream jpeg imag . , frame pictur , scan pass pixel ( e.g. , red compon ) , segment group block , block consist 8 ×8 pixel . exampl header inform •frame header – bit per pixel – ( width , height ) imag – number components– uniqu id ( compon ) – horizontal/vert sampl factor ( compon ) – quantiz tabl use ( compon ) .9.1 jpeg standard 315 frame scan scan headerstart_of_imag end_of_imag tabl , etc . tabl , etc . header segment restart segment restart block block block . . . . . . . . . fig . 9.6 jpeg bitstream •scan header – number compon scan – compon id ( compon ) – huffman/arithmet code tabl ( compon ) . 9.2 jpeg 2000 standard jpeg standard doubt success popular imag format date . main reason success qualiti output rel good compress ratio . howev , anticip need requir next- gener imageri applic , jpeg committe also deﬁn new standard : jpeg 2000 . main part , core code system , speciﬁ iso/iec 15444- 1 [ 4 ] . jpeg 2000 standard [ 5–7 ] aim provid better rate-distort trade-off improv subject imag qualiti also addit function jpeg standard lack . particular , jpeg 2000 standard address follow problem : •low-bitr compress . jpeg standard offer excel rate-distort perform medium high bitrat . howev , bitrat 0.25 bpp , subject distort becom unaccept . import hope receiv imag web-en ubiquit devic , web-awar wristwatch , . •lossless lossi compress . jpeg 2000 , standard could provid superior lossless compress lossi compress singl bitstream . •larg imag . new standard allow imag resolut greater 64 k × 64 k without tile . handl imag size 232−1 . •singl decompress architectur . jpeg standard 44 mode , mani application-speciﬁc use major jpeg decoders.316 9 imag compress standard •transmiss noisi environ . new standard provid improv error resili transmiss noisi environ wireless network internet . •progress transmiss . new standard provid seamless qualiti res- olut scalabl low high bitrat . target bitrat reconstruct resolut need known time compress . •region-of-interest code . new standard permit specifi region inter- est ( roi ) , code better qualiti rest imag . may , exampl , like code face someon make present withmor qualiti surround furnitur . •computer-gener imageri . jpeg standard optim natur imageri perform well computer-gener imageri . •compound document . new standard offer metadata mechan incor- porat addit non-imag data part ﬁle . may use forinclud text along imageri , one import exampl . addit , jpeg 2000 abl handl 256 channel inform , wherea jpeg standard abl handl three color channel . huge quantiti data routin produc satellit imageri . consequ , jpeg 2000 design address varieti applic , internet , color facsimil , print , scan , digit photographi , remot sens , mobil applic , medic imageri , digit librari , e-commerc , . method look ahead provid power carri remot brows largecompress imag . jpeg 2000 standard oper two code mode : dct base wavelet base . dct-base code mode offer backward compat withth jpeg standard implement baselin jpeg . new function improv perform resid wavelet-bas mode . date , jpeg 2000 mostli use high-end applic remot sens satellit imag , medic imag , digit cinema , high-resolut high-qual imag requir . 9.2.1 main step jpeg 2000 imag compress * main compress method use jpeg 2000 embed block code optim truncat algorithm ( ebcot ) , design taubman [ 8 ] . addi- tion provid excel compress efﬁcienc , ebcot produc bitstream number desir featur , includ qualiti , resolut scalabl , random access . basic idea ebcot partit subband , lh , hl , hh produc wavelet transform small block call code block . code block code independ , way inform blocki used.9.2 jpeg 2000 standard 317 separ , scalabl bitstream gener code block . block- base code scheme , ebcot algorithm improv error resili . ebcot algorithm consist three step : 1 . block code bitstream gener 2 . post compress rate-distort ( pcrd ) optimization3 . layer format represent . 1.block code bitstream gener subband gener 2d discret wavelet transform ﬁrst partit small code block , typic 64 ×64 , size less 32 ×32 . ebcot algorithm gener highli scalabl bitstream code block b . bitstream associ bimay independ truncat member predetermin collect differ length rn , associ distort dn . code block bi ( see fig . 9.7 ) , let si [ k ] =si [ k1 , k2 ] 2d sequenc small code block subband sampl , k1andk2th row column indic . ( deﬁnit , horizont high-pass subband hl must transpos k1andk2wil mean consist subband . transposit mean hl subband treat way lh , hh , llsubband use context model . ) fig . 9.7 code block structur ebcot318 9 imag compress standard x δ2δ 0 −1 −2 −3012 −1 −2123 fig . 9.8 dead-zon quantiz . length dead zone 2 δ . valu insid dead zone quantiz 0 algorithm use dead-zon quantiz shown fig . 9.8—a double-length region straddl 0 . let χi [ k ] ∈ { − 1,1 } sign si [ k ] let νi [ k ] quantiz magnitud . explicitli , νi [ k ] =/bardblsi [ k ] /bardbl δβi ( 9.2 ) δβii step size subband βi , contain code block bi . letνp [ k ] pth bit binari represent νi [ k ] , p=0 correspond least signiﬁc bit , let pmax ibe maximum valu psuch νpmax [ k ] /negationslash=0 least one sampl code block . encod process similar bitplan coder , signiﬁc bit νpmax [ k ] code ﬁrst sampl code block , follow next signiﬁc bit νp ( max−1 ) [ k ] , , bitplan code . way , bitstream truncat , sampl code block may miss one least-signiﬁc bit . equival use coarser dead-zon quantiz sampl . addit , import exploit previous encod inform particular sampl neighbor sampl . done ebcot deﬁn binary-valu state variabl σi [ k ] , initi 0 chang 1 relev sampl ’ ﬁrst nonzero bitplan vp [ k ] =1 encod . binari state variabl refer signiﬁc sampl . section 8.8introduc zerotre data structur way efﬁcient code bitstream wavelet coefﬁcient . underli observ behind zerotree9.2 jpeg 2000 standard 319 data structur signiﬁc sampl tend cluster , often possibl dispos larg number sampl code singl binari symbol . ebcot take advantag observ ; howev , efﬁcienc mind , exploit cluster assumpt rel larg sub-block size 16×16 . result , code block partit 2d sequenc sub- block bi [ j ] . bitplan , explicit inform ﬁrst encod identiﬁ sub-block contain one signiﬁc sampl . sub-block bypass remain code phase bitplan . letσp ( bi [ j ] ) signiﬁc sub-block bi [ j ] bitplan p. signiﬁc map code use quad-tre . tree construct identifi sub-block leaf nodes—that , b0 [ j ] =bi [ j ] . higher level built use recurs : bt [ j ] =∪z∈ { 0,1 } 2bt−1 [ 2j+z ] ,0≤t≤t . root tree repres entir code block : bt [ 0 ] =∪ jbi [ j ] . signiﬁc code block identiﬁ one quad level time , start root t=tand work toward leav t=0 . signiﬁc valu sent arithmet coder entropi code . signiﬁc valuesthat redund skip . valu taken redund follow condit met : •the parent insigniﬁc . •the current quad alreadi signiﬁc previou bitplan . •thi last quad visit among share signiﬁc parent , sibl insigniﬁc . ebcot use four differ code primit code new inform singl sampl bitplan p , follow : •zero code . use code νp [ k ] , given quantiz sampl satisﬁ νi [ k ] < 2p+1 . sampl statist measur approxim markovian , signiﬁc current sampl depend valu itseight immedi neighbor . signiﬁc neighbor classiﬁ three categori : –horizont .h [ k ] =/summationtext z∈ { 1 , −1 } σi [ k1+z , k2 ] , 0 ≤hi [ k ] ≤2 –vertic .vi [ k ] =/summationtext z∈ { 1 , −1 } σi [ k1 , k2+z ] , 0 ≤vi [ k ] ≤2 –diagon .di [ k ] =/summationtext z1 , z2∈ { 1 , −1 } σi [ k1+z1 , k2+z2 ] , 0 ≤di [ k ] ≤4 . neighbor outsid code block consid insigniﬁc , note sub-block independ . 256 possibl neighborhood conﬁgur reduc nine distinct context assign list intabl 9.4 . •run-length code . run-length code primit aim produc run 1-bit signiﬁc valu , prelud arithmet code engine.when horizont run insigniﬁc sampl insigniﬁc neighbor is320 9 imag compress standard tabl 9.4 context assign zero code primit , lh , hl subband hh subband label hi [ k ] vi [ k ] di [ k ] di [ k ] hi [ k ] +vi [ k ] 0 0 0 0 0 0 1 0 0 1 0 1 2 0 0 > 1 0 > 1 3 0 1 x 1 0 4 0 2 x 1 1 5 1 0 0 1 > 1 6 1 0 > 0 2 0 7 1 > 0 x 2 > 0 8 2 x x > 2 x found , invok instead zero code primit . follow four condit must met run-length code primit invok : – four consecut sampl must insigniﬁc . – sampl must insigniﬁc neighbor . – sampl must within sub-block . – horizont index k1of ﬁrst sampl must even . last two condit simpli efﬁcienc . four symbol satisfi thesecondit , one special bit encod instead , identifi whether sampl group signiﬁc current bitplan ( use separ context model ) . four sampl becom signiﬁc , index ﬁrst samplei sent 2-bit quantiti . •sign code . sign code primit invok sam- ple , immedi sampl make transit insigniﬁc tosigniﬁc zero code run-length code oper . sinc four horizont vertic neighbor , may insigniﬁc , posit , neg , 3 4=81 differ context conﬁgur . howev , exploit horizont vertic symmetri assum condit dis- tribut χi [ k ] , given neighborhood conﬁgur , −χi [ k ] , number context reduc 5 . let¯hi [ k ] 0 horizont neighbor insigniﬁc , 1 least one horizont neighbor posit , −1 least one horizont neighbor neg ( and¯vi [ k ] deﬁn similarli ) . let ˆχi [ k ] sign predict . binari symbol code use relev context χi [ k ] ·ˆχi [ k ] . tabl 9.5list context assign . •magnitud reﬁnement . primit use code valu νp [ k ] , g v e n thatνi [ k ] ≥2p+1 . three context model use magnitud reﬁne- ment primit . second state variabl ˜σi [ k ] introduc chang 0 1 magnitud reﬁnement primit ﬁrst appli si [ k ] . context model depend valu state variabl : vp [ k ] code context 0 if˜σ [ k ] =hi [ k ] =vi [ k ] =0 , context 1 ˜σi [ k ] =0 hi [ k ] +vi [ k ] /negationslash=0,9.2 jpeg 2000 standard 321 tabl 9.5 context assign sign code primit label ˆχi [ k ] ¯hi [ k ] ¯vi [ k ] 4 1 1 1 3 1 0 1 2 1 −1 1 1 −1 1 0 0 1 0 0 1 1 −1 0 2 −1 1 −1 3 −1 0 −1 4 −1 −1 −1 context 2 ˜σi [ k ] =1 . ensur code block ﬁneli embed bitstream , code bitplan pproce four distinct pass , ( pp 1 ) ( pp 4 ) : •forward-signiﬁcance-propag pass ( pp 1 ) . sub-block sampl vis- ite scan line order . insigniﬁc sampl sampl satisfi theneighborhood requir skip . lh , hl , subband , neighborhood requir least one horizont neighbor signiﬁc . hh subband , neighborhood requir least one four diagon neighbor must signiﬁc . signiﬁc sampl pass neighborhood requir , zero codingand run-length code primit invok appropri , determin whether sampl ﬁrst becom signiﬁc bitplan p. , sign code primit invok encod sign . call forward-signiﬁcance-propagationpass , sampl found signiﬁc help new signiﬁc determin step propag direct scan . •reverse-signiﬁcance-propag pass ( pp 2 ) . pass ident pp 1 , except proce revers order . neighborhood requir relax includ sampl least one signiﬁc neighbor direct . •magnitud reﬁnement pass ( pp 3 ) . pass encod sampl alreadi signiﬁc code previou two pass . sampl process magnitud reﬁnement primit . •normal pass ( pp 4 ) . valu νp [ k ] sampl consid previou three code pass code use sign code run-length code primit , appropri . sampl found signiﬁc , sign immedi code use sign code primitive.322 9 imag compress standard max max −1 spimax p4pipipipipipimax −1 max −1 max −1 max −1 p1p2p3p4p10p40 . . . p20p30 0 fig . 9.9 appear code pass quad-tre code block ’ embed bitstream figur 9.9show layout code pass quad-tre code block ’ embed bitstream . spdenot quad-tre code identifi signiﬁc sub- block bitplan p. notic bitplan p , spappear ﬁnal code pass pp 4 , initi code pass pp 1 . impli sub-block becom signiﬁc ﬁrst time bitplan pare ignor ﬁnal pass . 2.post compress rate-distort optim subband sampl compress , post compress rate distor- tion ( pcrd ) step perform . goal pcrd produc optim truncat code block ’ independ bitstream distort minim , sub- ject bitrat constraint . truncat embed bitstream code block bihav rate rni , overal distort reconstruct imag ( assum distort addit ) d=/summationdisplay idni ( 9.3 ) dni ii distort code block bihav truncat point ni . code block bi , distort comput dn i=w2 bi/summationdisplay k∈bi ( ˆsn [ k ] −si [ k ] ) 2 ( 9.4 ) si [ k ] 2d sequenc subband sampl code block biandˆsn [ k ] quantiz represent sampl associ truncat point n. valu w2 bii l2norm wavelet basi function subband bithat contain code block bi . optim select truncat point nican formul minimiza- tion problem subject follow constraint : r=/summationdisplay irni i≤rmax ( 9.5 ) rmaxi avail bitrat . λ , set truncat point { nλ } minim ( ( λ ) +λr ( λ ) ) =/summationdisplay i/parenleftbigg dnλ i+λrnλ i/parenrightbigg ( 9.6 ) optim rate-distort sens . thu , ﬁnding set truncat point minim eq . ( 9.6 ) total rate r ( λ ) =rmaxwould yield solut entir optim problem.9.2 jpeg 2000 standard 323 sinc set truncat point discret , gener possibl ﬁnd valu λfor r ( λ ) exactli equal rmax . howev , sinc ebcot algorithm use rel small code block , mani truncationpoint , sufﬁcient ﬁnd smallest valu λsuch r ( λ ) ≤r max . easi see code block bican minim independ . let ni set feasibl truncat point let j1 < j2 < ···be enumer feasibl truncat point correspond distortion-r slope given ratio sjk i=/delta1djk /delta1rjk ( 9.7 ) /delta1rjk i=rjk i−rjk−1 iand/delta1djk i=djk i−djk−1 . evid slope strictli decreas , sinc oper distortion-r curv convex strictli decreas . minim problem ﬁxed valu λi simpli trivial select nλ i=max/braceleftbig jk∈ni|sjk > λ/bracerightbig ( 9.8 ) optim valu λ∗can found use simpl bisect method oper distortion-r curv . detail descript method found [ 9 ] . 3.layer format represent ebcot algorithm offer resolut qualiti scalabl , oppos well-known scalabl imag compress algorithm ezw spiht , offer qualiti scalabl . function achiev use layer bitstream organ two-tier code strategi . ﬁnal bitstream ebcot produc compos collect qualiti layer . qualiti layer q1contain initi rn1 ibyt code block biand layer qqcontain increment contribut lq i=rnq i−rnq−1 i≥0 code block bi . quantiti nq ii truncat point correspond rate- distort threshold λqselect qth qualiti layer . figur 9.10 illustr layer bitstream ( [ 8 ] ) . along increment contribut , auxiliari inform length lq , number new code pass nq i=nq i−nq−1 , valu pmax iwhen bimak ﬁrst nonempti contribut qualiti layer qq , index qiof qualiti layer biﬁrst make nonempti contribut must explicitli store . auxiliari inform compress second-ti code engin . henc , two-tier architectur , ﬁrst tier produc embed block bitstream , second encod block contribut qualiti layer . focu subsect second-ti process auxiliari infor- mation accompani qualiti layer . second-ti code engin handl care two quantiti exhibit substanti interblock redund . thesetwo quantiti p max iand index qiof qualiti layer biﬁrst make nonempti contribution.324 9 imag compress standard fig . 9.10 three qualiti layer eight block empti emptyemptyempti empti empti b0 b5 b4 b3 b2 b1 b7 b6 quantiti qii code use separ embed quad-tre code within subband . let b0 i=bib leav bt ibe root tree repres entir subband . let qt i=min { qj|bj⊂bt } index ﬁrst layer code block quad bt imak nonempti contribut . singl bit identiﬁ whether qt > qfor quad level , redund quad omit . quad redund either qt < q−1o rqt+1 j > qfor parent quad bt+1 j . redund quantiti consid pmax . clear pmax ii irrelev code qualiti layer qq . thu , unnecessari inform concern- ingpmax ine sent readi encod qq . ebcot use modiﬁ embed quad-tre driven leav rather root . letbt ibe element quad-tre structur built top code block bifrom subband , let pmax , i=max { pmax j|bj⊂bt } . addit , let bt itb ancestor quad bidescend let pbe valu guarante larger pmax ifor code block bi . code block biﬁrst contribut bitstream qualiti layer qq , valu pmax i=pmax,0 i0i code use follow algorithm : •forp=p−1 , p−2 , ... , 0 – send binari digit identifi whether pmax , < p . redund bit skip . –i f pmax i=p , stop . redund bit correspond condit pmax , < pthat infer either ancestor pmax , t+1 it+1 < por partial quad-tre code use identifi pmax jfor differ code block bj.9.2 jpeg 2000 standard 325 9.2.2 adapt ebcot jpeg 2000 jpeg 2000 use ebcot algorithm primari code method . howev , algorithm slightli modiﬁ enhanc compress efﬁcienc reduc comput complex . enhanc compress efﬁcienc , oppos initi entropi coder use equiprob state context , jpeg 2000 standard make assumpt highli skew distribut context , reduc model adapt cost typic imag . sever small adjust made originalalgorithm reduc execut time . first , low-complex arithmet coder avoid multipl divis , known mq coder [ 10 ] , replac usual arithmet coder use origi- nal algorithm . furthermor , jpeg 2000 transpos hl subband ’ code block . instead , correspond entri zero code context assign mapar transpos . ensur consist scan direct , jpeg 2000 combin forward- reverse-signiﬁcance-propag pass singl forward-signiﬁcance-propaga-t pass neighborhood requir equal origin revers pass . addit , reduc sub-block size 4 ×4 origin 16 ×16 elimi- nate need explicitli code sub-block signiﬁc . result probabilitydistribut small sub-block highli skew , coder behav sub-block signiﬁc . cumul effect modiﬁc increas 40 % soft- ware execut speed , averag loss 0.15db rel origin algorithm . 9.2.3 region-of-interest code signiﬁc featur jpeg 2000 standard abil perform region- of-interest ( roi ) code . , particular region imag may code withbett qualiti rest imag background . method call maxshift , scaling-bas method scale coefﬁcient roi place higher bitplan . embed code process , theresult bit place front non-roi part imag . therefor , given reduc bitrat , roi decod reﬁn rest imag . result mechan , roi much better qualiti thebackground . one thing note regardless scale , full decod bitstream result reconstruct entir imag highest ﬁdeliti available.figur 9.11 demonstr effect region-of-interest code target bitrat sampl imag increased.326 9 imag compress standard fig . 9.11 region interest ( roi ) code imag increas bitrat use circularli shape roi : a0.4 bpp ; b0.5 bpp ; c0.6 bpp ; d0.7 bpp 9.2.4 comparison jpeg jpeg 2000 perform studi intern jpeg 2000 compress algorithm , natur question come mind : well jpeg 2000 perform compar well-known standard , particular jpeg ? mani comparison made jpeg well-known standard , compar jpeg 2000 popular jpeg . variou criteria , comput complex , error resili , compress efﬁcienc , , use evalu perform system . sinc main focu compress aspect jpeg 2000 standard , wesimpli compar compress efﬁcienc . ( interest reader refer [ 7,11 ] comparison use criteria . ) 9.2 jpeg 2000 standard 327 given ﬁxed bitrat , let ’ compar qualiti compress imag quantita- tive psnr : color imag , psnr calcul base averag mean squar error rgb compon . also , visual show resultsfor jpeg 2000 jpeg compress imag , make qualit assess . perform comparison three categori imag : natur , computer-gener , medic , use three imag category.th test imag use shown textbook websit . imag , compress use jpeg jpeg 2000 , four bitrat : 0.25 , 0.5 , 0.75 , 1.0 bpp . figur 9.12 show plot averag psnr imag categori bitrat . see jpeg 2000 substanti outperform jpeg categori . qualit comparison compress result , let ’ choos singl imag show decompress output two algorithm use low bitrat ( 0.75 bpp ) lowest bitrat ( 0.25 bpp ) . result fig . 9.13 , obviou imag compress use jpeg 2000 show signiﬁcantli fewer visual artifact . 9.3 jpeg-l standard gener , would like appli lossless compress scheme imag thatar critic sens , say medic imag brain , perhap imag difﬁcult costli acquir . scheme competit lossless mode providedin jpeg 2000 jpeg-l standard , speciﬁc aim lossless encod [ 12 ] . main advantag jpeg-l jpeg 2000 jpeg-l base low-complex algorithm . jpeg-l part larger iso effort aim bettercompress medic imag . jpeg-l fact current iso/itu standard lossless “ near lossless ” compress continuous-ton imag . core algorithm jpeg-l call low complex lossless compress imag ( loco-i ) , propos hewlett packard [ 12 ] . design algorithm motiv observ complex reduct often import overal small increas compress offer complex algorithm . jpeg-l standard 1999 huffman code . extend 2003 includ arithmet coding.typ , jpeg-l achiev compress ratio 4 better . loco-i exploit concept call context model . idea context model take advantag structur input source—condit probabilitiesof pixel valu follow imag . extra knowledg call context . input sourc contain substanti structur , usual case , could potenti compress use fewer bit order-0 entropi . simpl exampl , suppos binari sourc p ( 0 ) =0.4 p ( 1 ) =0.6 . order-0 entropi h ( ) =−0.4 log 2 ( 0.4 ) −0.6 log2 ( 0.6 ) = 0.97 . suppos also know sourc properti previou symbol 0 , probabl current symbol 0 0.8 , previou symbol 1 , probabl current symbol 0 0.1.328 9 imag compress standard 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 12022242628303234363840 bitratepsnr ( db ) j2k jpeg ( ) 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 12022242628303234363840 bitratepsnr ( db ) j2k jpeg ( b ) fig . 9.12 perform comparison jpeg jpeg 2000 differ imag type : anatur imag ; bcomput gener imag ; cmedic images9.3 jpeg-l standard 329 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 12022242628303234363840 bitratepsnr ( db ) j2k jpeg ( c ) fig . 9.12 ( continu ) use previou symbol context , divid input symbol two set , correspond context 0 context 1 , respect . entropi two set h ( s1 ) =−0.8 log2 ( 0.8 ) −0.2 log2 ( 0.2 ) =0.72 h ( s2 ) =−0.1 log2 ( 0.1 ) −0.9 log2 ( 0.9 ) =0.47 averag bitrat entir sourc would 0 .4×0.72+0.6×0.47=0.57 , substanti less order-0 entropi entir sourc case . loco-i use context model shown fig . 9.14 . raster scan order , context pixel , b , c , dall appear current pixel x . thu , call causal context . loco-i broken three compon : •predict . predict valu next sampl x/primeus causal templat •context determin . determin context x/primeoccur •residu code . entropi code predict residu condit context x/prime . 9.3.1 predict better version predict use adapt model base calcul local edg direct . howev , jpeg-l aim low complex , loco-i algorithm instead use ﬁxed predictor perform primit tests330 9 imag compress standard fig . 9.13 comparison jpeg jpeg 2000 : aorigin imag ; bjpeg ( left ) jpeg 2000 ( right ) imag compress 0.75 bpp ; cjpeg ( left ) jpeg 2000 ( right ) imag compress 0.25 bpp fig . 9.14 jpeg-l context model b xc a9.3 jpeg-l standard 331 detect vertic horizont edg . ﬁxed predictor use algorithm given follow : ˆx/prime=⎧ ⎪⎨ ⎪⎩min ( , b ) c≥max ( , b ) max ( , b ) c≤min ( , b ) a+b−cotherwis ( 9.9 ) easi see predictor switch three simpl predictor . output awhen vertic edg left current locat ; output bwhen horizont edg current locat ; ﬁnalli output a+b−c neighbor sampl rel smooth . 9.3.2 context determin context model condit current predict error ( residu ) index use three-compon context vector q= ( q1 , q2 , q3 ) , whose compo- nent q1=d−b q2=b−c ( 9.10 ) q3=c−a differ repres local gradient captur local smooth edg content surround current sampl . differ potenti take wide rang valu , underli context model huge , make context-model approach impract . solv problem , paramet reduct method need . effect method quantiz differ repre- sent limit number valu . compon qare quantiz use quantiz decis boundari −t , ··· , −1,0,1 , ··· , . jpeg-l , t=4 . context size reduc replac context vector qwhose ﬁrst element neg −q . therefor , number differ context state ( 2t+1 ) 3+1 2=365 total . vector qi map integ [ 0,364 ] . 9.3.3 residu code imag , predict residu ﬁnite size , α . given predict ˆx , residu εi rang −ˆx≤ε < α−ˆx . sinc valu ˆxcan gener decod , dynam rang residu εcan reduc modulo αand map valu −⌊α 2⌋and⌈α 2⌉−1 . shown error residu follow two-sid geometr distribut ( tsgd ) . result , code use adapt select code base golomb code , optim sequenc geometr distribut [ 13 ] .332 9 imag compress standard 9.3.4 near-lossless mode jpeg-l standard also offer near-lossless mode , reconstruct sampl deviat origin amount δ . main lossless jpeg-l mode consid special case near-lossless mode δ=0 . near-lossless compress achiev use quantiz : residu quantizedus uniform quantiz interv length 2 δ+1 . quantiz valu ofεar given q ( ε ) =sign ( ε ) /floorleftbigg|ε|+δ 2δ+1/floorrightbigg ( 9.11 ) sinceδcan take small number integ valu , divis oper implement efﬁcient use lookup tabl . near-lossless mode , predict context determin step describ previous base quantiz valu . 9.4 bi-level imag compress standard document handl electron form , efﬁcient methodsfor compress bi-level imag ( 1-bit , black-and-whit pixel ) aresometim call . familiar exampl fax imag . algorithm take advan- tage binari natur imag data often perform better gener imag compress algorithm . earlier facsimil standard , g3 g4 , use simplemodel structur bi-level imag . scan line imag treat run black-and-whit pixel . howev , consid neighbor pixel natur data code allow much efﬁcient algorithm constructed.thi section examin jbig standard successor , jbig2 , well underli motiv principl two standard . 9.4.1 jbig standard jbig code standard recommend joint bi-level imag process group binari imag . lossless compress standard use primarili codescan imag print handwritten text , computer-gener text , facsim- ile transmiss . offer progress encod decod capabl , sens result bitstream contain set progress higher resolut images.thi standard also use code grayscal color imag code bitplan independ , main object . jbig compress standard three separ mode oper : pro- gressiv , progressive-compat sequenti , single-progress sequenti . progressive-compat sequenti mode use bitstream compat pro- gressiv mode . differ data divid strip mode.9.4 bi-level imag compress standard 333 single-progress sequenti mode singl lowest resolut layer . therefor , entir imag code without refer higher res- olut layer . mode view special case progressivemod . therefor , discuss cover progress mode . jbig encod decompos two compon : •resolution-reduct differential-lay encod •lowest resolution-lay encod . input imag goe sequenc resolution-reduct differential- layer encod . equival function , except input imag differ resolut . implement jbig standard may choos recurs use one physic encod . lowest resolut imag code use lowest resolution-lay encod . design encod somewhatsimpl resolution-reduct differential-lay encod , sinc resolution-reduct deterministic-predict oper need . 9.4.2 jbig2 standard jbig standard offer lossless progress ( lossi lossless ) code abil , lossi imag produc standard signiﬁcantli lower qualiti origin , lossi imag contain one-quarterof number pixel origin imag . contrast , jbig2 standard explicitli design lossi , lossless , lossi lossless imag compress . design goal jbig2 aim provid superior lossless compressionperform exist standard also incorpor lossi compress much higher compress ratio , littl visibl degrad possibl . uniqu featur jbig2 qualiti progress andcont pro- gressiv . qualiti progress , mean bitstream behav similar jbig standard , imag qualiti progress lower higher ( possibl lossless ) qualiti . hand , content progress allow differ type imag data ad progress . jbig2 encod decompos input bi-level imag region differ attribut code separ , use differ code method . imag compress standard , jbig2 bitstream , thu decod , explicitli deﬁn . result , encod produc correctbitstream “ compliant ” , regardless action actual take . anoth featur jbig2 set apart imag compress standard abl repres multipl page document singl ﬁle , enabl exploit interpagesimilarities.334 9 imag compress standard exampl , charact appear one page , like appear page well . thu , use dictionary-bas techniqu , charact code instead multipl time everi page appear . compres-s techniqu somewhat analog video code , exploit inter-fram redund increas compress efﬁcienc . jbig2 offer content-progress code superior compress perform model-bas code , differ model construct differ data type imag , realiz addit code gain . model-bas code idea behind model-bas code essenti context-bas code . studi latter , know realiz better compressionperform care design context templat accur estim probabl distribut context . similarli , separ imag content differ categori deriv model speciﬁc , aremuch like accur model behavior data thu achiev higher compress ratio . jbig style code , adapt model templat captur structur within imag . model gener , sens appli kind data . howev , gener impli explicitli deal structur differ text halfton data compris nearli content ofbi-level imag . jbig2 take advantag design custom model data type . jbig2 speciﬁc expect encod ﬁrst segment input imag region differ data type , particular , text halfton region . region code independ , accord characterist . text-region code text region segment pixel block contain connect black pixel . block correspond charact make content region . , instead code pixel charact , bitmap one repres instanc charact code place dictionari . charact code , algorithm ﬁrst tri ﬁnd match charact dictionari . one found , pointer correspond entri dictionari posit charact page code . otherwis , pixel block iscod directli ad dictionari . techniqu refer pattern match substitut jbig2 speciﬁcation.9.4 bi-level imag compress standard 335 howev , scan document , unlik two instanc charact match pixel pixel . case , jbig2 allow option includ reﬁnement data reproduc origin charact page . reﬁnementdata code current charact use pixel match charact dictionari . encod freedom choos reﬁnement exact lossi . method call soft pattern match . numer data , index match charact dictionari posit charact page , either bitwis huffman encod . bitmap charact dictionari code use jbig-bas techniqu . halftone-region code jbig2 standard suggest two method halfton imag code . ﬁrst similar context-bas arithmet code use jbig . differ new standard allow context templat includ mani 16 templatepixel , four may adapt . second method call descreen . involv convert back grayscal code grayscal valu . method , bi-level region isdivid block size b×nb . m×nbi-level region , result grayscal imag dimens mg=⌊ ( m+ ( mb−1 ) ) /mb⌋byng=⌊ ( n+ ( nb− 1 ) ) /nb⌋ . grayscal valu comput sum binari pixel valu correspond mb×nbblock . bitplan grayscal imag code use context-bas arithmet code . grayscal valu use indic dictionari halfton bitmap pattern . decod use valueto index dictionari , reconstruct origin halfton imag . preprocess post-process jbig2 allow use lossi compress specifi method . decod point view , decod bitstream lossless respect imag encod encod , although necessarili respect theorigin imag . encod may modifi input imag preprocess step , increas code efﬁcienc . preprocessor usual tri chang origin imag lower code length way gener affect imag ’ sappear . typic , tri remov noisi pixel smooth pixel block . post-process , anoth issu address speciﬁc , espe- cialli use halfton , potenti produc visual pleas imag . isalso help tune decod imag particular output devic , laser printer.336 9 imag compress standard 9.5 exercis 1 . given comput cartoon pictur photograph . choic use either jpeg compress gif , compress would appli two imag ? justifi answer . 2 . suppos view decompress 512 ×512 jpeg imag use color part store imag inform , lumin part , decompress . 512 ×512 color imag look like ? assum jpeg compress use 4:2:0 scheme . 3 . x-ray photo usual gray-level imag . often low contrast low gray-level intens , i.e. , intens valu rang [ , b ] , andbar posit integ , much less maximum intens valu 255 8-bit imag . order enhanc appear imag , simpl “ stretch ” oper use convert origin intens valu f0tof : f=255 b−a· ( f0−a ) . simplic , assum f0 ( , j ) f ( , j ) 8×8 imag : ( ) dcvalu origin imag f0ism , dcvalu stretch imag f ? ( b ) one ac valu f0 ( 2,1 ) origin imag f0isn , f ( 2,1 ) valu stretch imag f ? 4 . ( ) jpeg use discret cosin transform ( dct ) imag compress . ( ) valu f ( 0 , 0 ) imag f ( , j ) ? ( ii ) ac coefﬁcient |f ( u , v ) |i largest f ( , j ) ? w h ? thisf ( u , v ) posit neg ? ? 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 80 80 80 80 80 80 80 8080 80 80 80 80 80 80 80 140 140 140 140 140 140 140 140 140 140 140 140 140 140 140 140200 200 200 200 200 200 200 200 200 200 200 200 200 200 200 200 ( b ) show detail three-level hierarch jpeg encod imag , assum ( ) encod decod three level use lossless jpeg . ( ii ) reduct simpli averag 2 ×2 block singl pixel valu . ( iii ) expans duplic singl pixel valu four times.9.5 exercis 337 5 . jpeg employ block-bas code method . ( ) 8 ×8 chosen block size jpeg ? ( b ) given ever-increas imag resolut , would better block size ? 6 . jpeg , discret cosin transform appli 8 ×8 block imag . , let ’ call dct-8 . gener , deﬁn dct- nto appli n×nblock imag . dct- ni deﬁn fn ( u , v ) =2c ( u ) c ( v ) nn−1/summationdisplay i=0n−1/summationdisplay j=0co ( 2i+1 ) uπ 2nco ( 2j+1 ) vπ 2nf ( , j ) c ( ξ ) =/braceleftbigg√ 2 2forξ=0 1 otherwis given f ( , j ) , show work deriv pixel valu f2 ( u , v ) . ( , show result appli dct-2 imag . ) 100−100 100 −100 100 −100 100 −100 100−100 100 −100 100 −100 100 −100 100−100 100 −100 100 −100 100 −100 100−100 100 −100 100 −100 100 −100 100−100 100 −100 100 −100 100 −100 100−100 100 −100 100 −100 100 −100 100−100 100 −100 100 −100 100 −100 100−100 100 −100 100 −100 100 −100 7 . accord dct- ndeﬁnit , fn ( 1 ) andfn ( n−1 ) ac coefﬁcient repres lowest highest spatial frequenc , respect . ( ) known f16 ( 1 ) andf8 ( 1 ) captur ( lowest ) frequenc respons imag ﬁltere . explain . ( b ) f16 ( 15 ) andf8 ( 7 ) captur ( highest ) frequenc respons ? 338 9 imag compress standard 8 . ( ) mani princip mode jpeg ? name ? ( b ) hierarch model , explain brieﬂi must includ encode/ decod cycl coder side transmit differ imag thedecod side . ( c ) two method use decod part inform jpeg ﬁle , imag coars display quickli iterativelyincreas qualiti ? 9 . could use wavelet-bas compress ordinari jpeg ? ? 10 . decid creat new imag compress standard base jpeg , use imag view alien speci . part jpeg workﬂow would like chang ? 11 . unlik ezw , ebcot explicitli take advantag spatial relation- ship wavelet coefﬁcient . instead , use pcrd optim approach . discuss rational behind approach . 12 . jpeg 2000 bitstream snr scalabl ? , explain achiev use ebcot algorithm . 13 . implement transform code , quantiz , hierarch code encod decod three-level hierarch jpeg . code includ ( minim ) graphic user interfac purpos demonstr result . need implement entropi ( lossless ) code part ; option , may includ publicli avail code . refer 1 . w.b . pennebak , j.l . mitchel , jpeg still imag data compress standard ( van nos- trand reinhold , new york , 1992 ) 2 . g. hudson , a. léger , b. niss , i. sebestyén , jpeg 25 : still go strong . ieee multim . 24 ( 2 ) , 96–103 ( 2017 ) 3 . v. bhaskaran , k. konstantinid , imag video compress standard : algorithm architectur , 2nd edn . ( kluwer academ publish , boston , 1997 ) 4 . iso/iec 15444-1 , inform technology—jpeg 2000 imag code system : core code system . ( iso/iec , 2004 ) 5 . d. . taubman , m.w . marcellin , jpeg2000 : imag compress fundament ( springer , standard practic , 2013 ) 6 . m. rabbani , r. joshi , overview jpeg 2000 still imag compress standard . signal process . imag commun . 17 , 3–48 ( 2002 ) 7 . p. schelken , a. skodra , t. ebrahimi ( ed . ) , jpeg 2000 suit . ( wiley , 2009 ) 8 . d. taubman , high perform scalabl imag compress ebcot . ieee tran . imag process . 9 ( 7 ) , 1158–1170 ( 2000 ) 9 . k. ramachandran , m. vetterli , best wavelet packet basi rate-distort sens . ieee tran . imag process . 2 , 160–173 ( 1993 ) 10 . i. ueno , f. ono , t. yanagiya , t. kimura , m. yoshida . propos arithmet coder jpeg2000 . ( iso/iec jtc1/sc29/wg1 n1143 , 1999 ) 11 . d. santa-cruz , r. grosboi , t. ebrahimi , jpeg 2000 perform evalu assess . signal proce . imag commun . 17 , 113–130 ( 2002 ) refer 339 12 . m. weinberg , g. seroussi , g. sapiro , loco-i lossless imag compress algorithm : principl standard jpeg-l . technic report hpl-98-193r1 , hp technicalreport ( 1998 ) 13 . n. merhav , g. seroussi , m.j. weinberg , optim preﬁx code sourc two-sid geometr distribut . ieee tran . inf . theori 46 ( 1 ) , 121–135 ( 2000 ) 10basic video compress echniqu discuss chap . 7 , volum uncompress video data could extrem larg . even modest cif video pictur resolut 352 ×288 , uncompress , would carri 35 mbp . hdtv uhdtv , bitrat far exce 1 gbp . pose challeng problem storag network commun . chapter introduc basic video compress techniqu illustr standard h.261 h.263—two video compress standard aim mostli videoconferenc . next two chapter introduc sever mpeg videocompress standard latest , h.264 , h.265 , h.266 . tekalp [ 1 ] poynton [ 2 ] set fundament digit video process . provid good overview mathemat foundat problem tobe address video . book bhaskaran konstantinid [ 3 ] wang et al . [ 4 ] includ good descript earli video compress algorithm . 10.1 introduct video compress video consist time-ord sequenc frames—imag . obviou solut video compress would predict code base previou frame . forexampl , suppos simpli creat predictor predict equal previou frame . compress proce subtract imag : instead subtract imag ( i.e. , use spatial-domain deriv ) , subtractin time order code residu error . work . suppos video unchang time , get nice histogram peak sharpli zero—a great reduct term entropi ofth origin video , wish . © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_10341342 10 basic video compress techniqu howev , turn accept cost , even better search right part imag subtract previou frame . , naiv subtract scheme like work well background ofﬁc furnitureand sedentari univers type . ’ footbal game player zoom around frame , produc larg valu subtract previous static green play ﬁeld ? next section , examin better . idea look footbal player next frame call motion estim , concept shift piec frame around best subtract away player calledmot compens . 10.2 video compress base motion compens imag compress techniqu discuss previou chapter ( e.g. , jpeg jpeg 2000 ) exploit spatial redund , phenomenon pictur content often chang rel slowli across imag , make larg suppress higherspati frequenc compon viabl . video view sequenc imag stack tempor dimens . sinc frame rate video often rel high ( e.g. , > 15 frame per second ) camera paramet ( focal length , posit , view angl , etc . ) usual chang rapidli frame , content consecut frame usual similar , unless certain object scene move extrem fast scene changes.in word , video tempor redund . tempor redund often signiﬁc inde exploit , everi frame video need code independ new imag . instead , thediffer current frame frame ( ) sequenc code . redund great enough , differ imag could consist mainli small valu low entropi , good compress . modern digit video compress algorithm ( includ h.264 , h.265 , h.266 ) adopt hybrid code approach , i.e. , predict compens differ video frame remov tempor redund , transform code residu error ( differ ) . mention , although simplist way deriv differ imag subtract one imag ( pixel pixel ) , approach ineffec- tive yield high compress ratio . sinc main caus differ frame camera and/or object motion , motion gener “ compens ” detect displac correspond pixel region frame measur differ . video compress algorithm adopt approach said base motion compens ( mc ) . threemain step algorithm 1 . motion estim ( motion vector search ) 2 . motion-compensation-bas predict 3 . deriv predict error—th difference.10.2 video compress base motion compens 343 target frame refer frame macroblockn n match macroblock search window ( x , ) ( x0 , y0 ) 2p+ 1 2p+ 1mv ( x0 , y0 ) ( x , ) fig . 10.1 macroblock motion vector video compress : arefer frame ; btarget frame efﬁcienc , imag divid macroblock size n×n ; default , n=16 lumin imag . chromin imag , n=8 4:2:0 chroma subsampl adopt . motion compens perform pixel level , level video object , later video standard ( mpeg-4 ) . instead , macroblock level . current imag frame refer target frame . match sought macroblock consider target frame similar macroblock previou and/or futur frame ( ) [ refer refer frame ( ) ] . sens , target macroblock predict refer macroblock ( ) . displac refer macroblock target macroblock call amot vector mv . figur 10.1 show case forward predict , refer frame taken previou frame . refer frame futur frame , refer backward predict . differ two correspond macroblock predict error . video compress base motion compens , ﬁrst frame , motion vector differ macroblock need code , sinc sufﬁ- cient decod regener macroblock subsequ frame . return discuss common video compress standard follow section , discuss search algorithm motion vector . 10.3 search motion vector search motion vector mv ( u , v ) deﬁn match problem , also call correspond problem [ 5 ] . sinc mv search comput expens , usual limit small immedi neighborhood . horizont vertic displac iandjar rang [ −p , p ] , pi posit integ rel small valu . make search window size ( 2p+1 ) × ( 2p+ 1 ) , sf g . 10.1 show . center macroblock ( x0 , y0 ) place grid posit window.344 10 basic video compress techniqu conveni , use upper left corner ( x , ) origin mac- roblock target frame . let c ( x+k , y+l ) pixel macroblock target ( current ) frame r ( x+i+k , y+j+l ) pixel macroblock refer frame , kandlar indic pixel macroblock iand jare horizont vertic displac , respect . differ two macroblock measur mean absolut differ- enc ( mad ) , deﬁn mad ( , j ) =1 n2n−1/summationdisplay k=0n−1/summationdisplay l=0|c ( x+k , y+l ) −r ( x+i+k , y+j+l ) | , ( 10.1 ) ni size macroblock . goal search ﬁnd vector ( , j ) motion vector mv= ( u , v ) , mad ( , j ) minimum : ( u , v ) = [ ( , j ) |mad ( , j ) minimum , i∈ [ − p , p ] , j∈ [ − p , p ] ] ( 10.2 ) use mean absolut differ discuss . howev , measur mean possibl choic . fact , encod ( e.g. , h.263 ) simpli use sum absolut differ ( sad ) . common error measur , mean squar error ( mse ) , would also appropri . 10.3.1 sequenti search simplest method ﬁnding motion vector sequenti search whole ( 2p+1 ) × ( 2p+1 ) window refer frame ( also refer full search ) . macroblock center posit within window compar macroblock target frame , pixel pixel , respect mad deriv use eq . ( 10.1 ) . vector ( , j ) offer least mad design themv ( u , v ) macroblock target frame . procedur 10.1 ( motion-vector : sequenti search ) begin min_mad =larg _number ; / * initi * / fori=− ptop forj=− ptop { cur_mad =mad ( , j ) ; ifcur_mad < min_mad { min_mad =cur_mad ; u=i ; / * get coordin mv . * / v=j ; 10.3 search motion vector 345 } } end clearli , sequenti search method costli . eq . ( 10.1 ) , pixel comparison requir three oper ( subtract , absolut valu , addit ) . thu cost obtain motion vector singl macroblock ( 2p+1 ) · ( 2p+1 ) ·n2·3⇒o ( p2n2 ) . exampl , let ’ assum video resolut 720 ×480 frame rate 30 fp ; also , assum p=15 n=16 . number oper need motion vector search thu ( 2p+1 ) 2·n2·3=312×162×3 . consid singl imag frame has720×480 n·nmacroblock , 30 frame second , total oper need per second ops_per_second = ( 2p+1 ) 2·n2·3·720×480 n·n·30 =312×162×3×720×480 16×16×30≈29.89×109 . would certainli make real-tim encod video difﬁcult . 10.3.2 2d logarithm search efﬁcient version , suboptim still usual effect , call logarithm search . procedur 2d logarithm search motion vector take sever iter akin binari search . fig . 10.2 illustr , nine locat search window , mark “ 1 , ” initi use seed mad-bas search . one yield minimum mad locat , center new search region move , step size ( offset ) reduc half . next iter , nine new locat mark “ 2 , ” on.1for macroblock center ( x0 , y0 ) target frame , procedur follow : 1the procedur heurist . assum gener continu ( monoton ) imag contents—that chang randomli within search window . otherwis , procedur might ﬁnd best match.346 10 basic video compress techniqu 1 1 11 11 12 222 23 3333 ( x0−p , y0−p ) ( x0+p , y0−p ) ( x0−p , y0+p ) ( x0+p , y0+p ) 333 1 1 2 22 ( x0 , y0 ) ⎡p/2⎤mv fig . 10.2 2d logarithm search motion vector procedur 10.2 ( motion-vector : 2d-logarithmic-search ) begin offset =⌈p 2⌉ ; specifi nine macroblock within search window refer frame , center ( x0 , y0 ) separ offset horizont and/or vertic ; last /negationslash=tru { find one nine speciﬁ macroblock yield minimum mad ; offset =1 last = true ; offset =⌈offset/2⌉ ; form search region new offset new center found ; } end instead sequenti compar ( 2p+1 ) 2macroblock refer- enc frame , 2d logarithm search compar 9 · ( ⌈log2p⌉+1 ) macroblock . fact , would 8 · ( ⌈log2p⌉+1 ) +1 , sinc comparison yield least mad last iter reus . therefor , complex- iti drop ( logp·n2 ) . sinc pi usual order magnitud asn , save substanti compar ( p2n2 ) .10.3 search motion vector 347 use exampl previou subsect , total oper per second drop ops_per_second =/parenleftbig 8· ( ⌈log2p⌉+1 ) +1/parenrightbig ·n2·3·720×480 n·n·30 =/parenleftbig 8·⌈log215⌉+9/parenrightbig ×162×3×720×480 16×16×30 ≈1.25×109 . 10.3.3 hierarch search search motion vector beneﬁt hierarch ( multiresolut ) approach initi estim motion vector obtain imag signiﬁcantli reduc resolut . figur 10.3 depict three-level hier- archic search origin imag level 0 , imag level 1 2 obtain downsampl previou level factor 2 , initi search conduct level 2 . sinc size macroblock smaller p also proport reduc level , number oper requir greatli reduc ( factor 16 level ) . initi estim motion vector coars lack imag detail resolut . reﬁn level level toward level 0 . given estim motion vector ( uk , vk ) level k , a3×3 neighborhood center ( 2· uk,2·vk ) level k−1 search reﬁn motion vector . word , reﬁnement level k−1 , motion vector ( uk−1 , vk−1 ) satisﬁ ( 2uk−1≤uk−1≤2uk+1,2vk−1≤vk−1≤2vk+1 ) , yield minimum mad macroblock examin . let ( xk 0 , yk 0 ) denot center macroblock level kin target frame . procedur hierarch motion vector search macroblock center ( x0 0 , y0 0 ) target frame outlin follow : procedur 10.3 ( motion-vector : hierarchical-search ) begin // get macroblock center posit lowest resolut level k , e.g. , level 2. xk 0=x0 0/2k ; yk 0=y0 0/2k ; use sequenti ( 2d logarithm ) search method get initi estim mv ( uk , vk ) level k ; last /negationslash=true348 10 basic video compress techniqu downsampl factor 2 downsampl factor 2 motion estim motion estimationmot estimationmot vector level 0 level 1 level 2 fig . 10.3 three-level hierarch search motion vector { find one nine macroblock yield minimum mad level k−1 center ( 2 ( xk 0+uk ) −1≤x≤2 ( xk 0+uk ) +1,2 ( yk 0+vk ) −1≤y≤2 ( yk 0+ vk ) +1 ) ; ifk=1 last = true ; k=k−1 ; assign ( xk 0 , yk 0 ) ( uk , vk ) new center locat motion vector ; } end use exampl previou section estim total oper need second three-level hierarch search . simplic , overhead initi gener multiresolut target refer frame includ , assum sequenti search use level.10.3 search motion vector 349 tabl 10.1 comparison comput cost motion vector search method accord exampl search method ops_per_second 720 ×480 30 fp p=15 p=7 sequenti search 29.89×1097.00×109 2d logarithm search 1.25×1090.78×109 three-level hierarch search0.51×1090.40×109 total number macroblock process second still720×480 n·n×30 . howev , oper need macroblock reduc /bracketleftbigg/parenleftbig 2/ceilingleftbigp 4/ceilingrightbig +1/parenrightbig2/parenleftbiggn 4/parenrightbigg2 +9/parenleftbiggn 2/parenrightbigg2 +9n2/bracketrightbigg ×3 . henc , ops_per_second =/bracketleftbigg/parenleftbig 2/ceilingleftbigp 4/ceilingrightbig +1/parenrightbig2/parenleftbiggn 4/parenrightbigg2 +9/parenleftbiggn 2/parenrightbigg2 +9n2/bracketrightbigg ×3×720×480 n·n×30 =/bracketleftbigg/parenleftbigg9 4/parenrightbigg2 +9 4+9/bracketrightbigg ×162×3×720×480 16×16×30 ≈0.51×109 . tabl 10.1 summar comparison three motion vector search method 720 ×480 , 30 fp video p=15 7 , respect . 10.4 h.261 h.261 earlier digit video compress standard . principl motion-compensation-bas compress much retain later videocompress standard , start detail discuss h.261 . intern telegraph telephon consult committe ( ccitt ) ini- tiat develop h.261 1988 . ﬁnal recommend adopt byth itu ( intern telecommun union ) —telecommun standard- izat sector ( itu-t ) , formerli ccitt , 1990 [ 6 ] . standard design videophon , videoconferenc , audio- visual servic isdn telephon line . initi , intend support multipl ( 1 5 ) 384 kbp channel . end , howev , video codec support bitrat p×64 kbp , prang 1 30 . henc , standard350 10 basic video compress techniqu known p∗64 , pronounc “ pstar 64 ” . standard requir video encod delay less 150 ms , video use real-tim , bidirect video conferenc . h.261 belong follow set itu recommend visual telephoni system : •h.221 . frame structur audiovisu channel support 64–1,920 kbp •h.230 . frame control signal audiovisu system •h.242 . audiovisu commun protocol •h.261 . video encoder/decod audiovisu servic p×64 kbp •h.320 . narrowband audiovisu termin equip p×64 kbp transmis- sion . tabl 10.2 list video format support h.261 . chroma subsampl h.261 4:2:0 . consid rel low bitrat network commun time , support ccir 601 qcif speciﬁ requir , wherea support cif option . figur 10.4 illustr typic h.261 frame sequenc . two type imag frame deﬁn : intra-fram ( i-fram ) inter-fram ( p-frame ) . i-fram treat independ imag . basic , transform code method similar jpeg appli within i-fram , henc name “ intra ” . p-frame independ . code forward predict code method current macroblock predict similar macroblock preced i- p-frame , differ macroblock code . tempor redund remov henc includ p-frame code , wherea i-fram tabl 10.2 video format support h.261 video lumin chromin bitrat ( mbp ) h.261 format imag imag ( 30 fp support resolut resolut uncompress ) qcif 176×144 88×72 9.1 requir cif 352×288 176×144 36.5 option fig . 10.4 h.261 frame sequenc ippp ppp i10.4 h.261 351 code perform spatial redund remov . import rememb predict previou p-frame allow ( previou i-fram ) . interv pair i-fram variabl determin encod . usual , ordinari digit video coupl i-fram per second . motion vector h.261 alway measur unit full pixel limit rang ±15 pixels—that , p=15 . 10.4.1 intra-fram ( i-fram ) code macroblock size 16 ×16 pixel frame origin imag . cb cr frame , correspond area 8 ×8 , sinc 4:2:0 chroma subsampl employ . henc , macroblock consist four block , one cb , one cr , 8×8 block . 8 ×8 block , dct transform appli . jpeg ( discuss detail chap . 9 ) , dct coefﬁcient go quantiz stage . afterward , zigzag-scan eventu entropy-cod ( shown fig . 10.5 ) . 10.4.2 inter-fram ( p-frame ) predict code figur 10.6 show h.261 p-frame code scheme base motion compens . macroblock target frame , motion vector alloc one search method discuss earlier . predict , differ macroblock deriv measur predict error . also carri form four block , one cb , one cr block . 8 ×8 block goe dct , quantiz , zigzag scan , entropi code . motion vector also code . sometim , good match found—th predict error exce cer- tain accept level . macroblock encod ( treat intra macroblock ) case term non-motion-compens macroblock . p-frame code encod differ macroblock ( target macroblock ) . sinc differ macroblock usual much smaller entropi target macroblock , larg compress ratio attain . dct quantiz entropi codingfor i-framemacroblock ycb cr8 × 8 block 1010010 . . . fig . 10.5 i-fram coding352 10 basic video compress techniqu dct quantiz entropi codingtarget frame refer frame best match motion vectorcurr macroblock −differ macrobloc k16 16 cb cr 01100010 . . .for 8 × fig . 10.6 h.261 p-frame code base motion compens fact , even motion vector directli code . instead , differ , mvd , motion vector preced macroblock current macroblock sent entropi code : mvd =mv preced −mv current ( 10.3 ) 10.4.3 quantiz h.261 quantiz h.261 use 8 ×8 quantiz matric , jpeg mpeg . instead , use constant , call step _size , dct coefﬁcient within macroblock . accord need ( e.g. , bitrat control video ) , step_siz take one 31 even valu 2 62 . one except , howev , made dc coefﬁcient intra mode , step_siz 8 alway use . usedct andqdct denot dct coefﬁcient quantiz , dc coefﬁcient intra mode , qdct =round/parenleftbiggdct step_size/parenrightbigg =round/parenleftbiggdct 8/parenrightbigg . ( 10.4 ) coefﬁcient : qdct =/floorleftbiggdct step_size/floorrightbigg =/floorleftbiggdct 2×scale/floorrightbigg , ( 10.5 ) scale integ rang [ 1,31 ] .10.4 h.261 353 midtread quantiz , discuss sect . 8.4.1 typic use round oper . equat ( 10.4 ) use type quantiz . howev , eq . ( 10.5 ) use floor oper- ator , result , leav center dead zone ( fig . 9.8show ) quantiz space , larger input rang map zero . 10.4.4 h.261 encod decod figur 10.7 show rel complet pictur h.261 encod decod work . , qand q−1stand quantiz invers , respec- tive . switch intra- inter-fram mode readili implement multiplex . avoid propag code error , 3 24 6 1 23 451 motion estimationidct frame memoryquant control dct ( b ) decodermot vectoridctquant controlpredictioncurr input codeoutput code decod frameintra-fram inter-fram intra-fram inter-fram intra-fram inter-fram prediction0 0frame ( ) encod vlevl mc-base predict frame memorymc-bas predictionmot vectoroutput buffer bufferinput+ +−q q −1 q −1 fig . 10.7 h.261 : aencod ; bdecoder354 10 basic video compress techniqu tabl 10.3 data ﬂow observ point h.261 encod current frameobserv point 1 2 3 4 5 6 ˜i 0 ˜i p1 p1 p/prime 1d1˜d1 p/prime 1˜p1 p2 p2 p/prime 2d2˜d2 p/prime 2˜p2 tabl 10.4 data ﬂow observ point h.261 decod current frame observ point 1 2 3 4 ˜i 0 ˜i p1˜d1 p/prime 1p/prime 1˜p1 p2˜d2 p/prime 2p/prime 2˜p2 •an i-fram usual sent coupl time second video . •a discuss earlier ( see dpcm sect . 6.3.5 ) , decod frame ( origin frame ) use refer frame motion estim . illustr oper detail encod decod , let ’ use scenario frame , p1 , p2are encod decod . data goe observ point , indic circl number fig . 10.7 , summar tabl 10.3 and10.4 . use , p1 , p2for origin data , ˜i , ˜p1 , ˜p2for decod data ( usual lossi version origin ) , p/prime 1 , p/prime 2for predict inter-fram mode . encod , current frame intra-fram , point number 1 receiv macroblock i-fram , denot iin tabl 10.3 . iundergo dct , quantiz , entropi code step , result sent outputbuff , readi transmit . meanwhil , quantiz dct coefﬁcient iar also sent q −1and idct henc appear point 4 ˜i . combin zero input point 5 , data point 6 remain ˜iand store frame memori , wait use motion estim motion-compensation-bas predict subsequ frame p1 . quantiz control serv feedback—that , output buffer full , quantiz step_siz increas , reduc size codeddata . known encod rate control process . subsequ current frame p 1arriv point 1 , motion estim process invok ﬁnd motion vector best match macroblock infram ˜ifor macroblock p 1 . estim motion vector sent motion-compensation-bas predict variable-length encod ( vle ) .10.4 h.261 355 mc-base predict yield best match macroblock p1 . denot asp/prim 1appear point 2 . point 3 , “ predict error ” obtain , d1=p1−p/prime 1.n w d1 undergo dct , quantiz , entropi code , result sent output buffer . , dct coefﬁcient d1are also sent q−1and idct appear point 4 ˜d1 . ad p/prime 1at point 5 , ˜p1=p/prime 1+˜d1at point 6 . store frame memori , wait use motion estim motion-compensation-bas predict subsequ frame p2 . step encod p2are similar forp1 , except p2will current frame p1becom refer frame . decod , input code frame decod ﬁrst entropi decod- ing , q−1 , idct . intra-fram mode , ﬁrst decod frame appear point 1 point 4 ˜i . sent ﬁrst output time store frame memori . subsequ , input code inter-fram p1i decod , predict error ˜d1i receiv point 1 . sinc motion vector current macroblock also entropy-decod sent motion-compensation-bas predict , cor-respond predict macroblock p /prime 1can locat frame ˜iand appear point 2 3 . combin ˜d1 , w eh v e ˜p1=p/prime 1+˜d1at point 4 , sent decod frame also store frame memori . , step decod p2are similar p1 . 10.4.5 glanc h.261 video bitstream syntax let ’ take brief look h.261 video bitstream syntax ( see fig . 10.8 ) . consist hierarchi four layer : pictur , group block ( gob ) , macroblock , andblock . 1.pictur layer .pictur start code ( psc ) delin boundari pictur . tempor refer ( tr ) provid timestamp pictur . sinc tempor subsampl sometim invok pictur trans- mit , import tr , maintain synchron audio . pictur type ( ptype ) speciﬁ , exampl , whether cif qcif pictur . 2.gob layer . h.261 pictur divid region 11 ×3 macroblock ( i.e. , region 176 ×48 pixel lumin imag ) , call group block ( gob ) . figur 10.9 depict arrang gob cif qcif lumin imag . instanc , cif imag 2 ×6 gob , correspond imag resolut 352 ×288 pixel . gob start code ( gbsc ) group number ( gn ) . gbsc uniqu identiﬁ without decod entir variable-length code bitstream . case network error caus bit error loss bit , theh.261 video recov resynchron next identiﬁ gob , prevent possibl propag errors.356 10 basic video compress techniqu gob gob gob ptype tr psc mb mb b5 0b1 b cbp eobgbsc gn address typeh.261 pictur frame ( run , level ) ( run , level ) gquant mquant mvd dclayer gob macroblocklay layerblockpictur layer ptypepsc cbpgbsc gquant mquantgobtr mb eobgn mvdpictur start code pictur type gob start code gob quantiz mb quantiz code block patterntempor refer group block group number macroblock motion vector data end block . . . . . . . . . . . . fig . 10.8 syntax h.261 video bitstream fig . 10.9 arrang gob h.261 lumin imagesgob 0 gob 1 gob 2 gob 0 gob 1 gob 2 gob 3 gob 4 gob 5 gob 6 gob 7 gob 8 gob 9 gob 10 gob 11 cifqcif gquant indic quantiz use gob , unless overridden subsequ macroblock quantiz ( mquant ) . gquant mquant refer scale eq . ( 10.5 ) . 3.macroblock layer . macroblock ( mb ) address , indic posit within gob , quantiz ( mquant ) , six 8 ×8 imag block ( 4 , 1 cb , 1 cr ) . type denot whether intra- inter- , motion-compens non-motion-compens macroblock . motion vector data ( mvd ) obtain take differ motion vector preced current macroblock . moreov , sinc block macroblock match well match poorli motion estim , bitmask code block pattern ( cbp ) use indic inform . well-match block coefﬁcient transmitted.10.4 h.261 357 4.block layer . 8 ×8 block , bitstream start dc valu , follow pair length zero-run ( run ) subsequ nonzero valu ( level ) ac , ﬁnalli end block ( eob ) code . rang “ run ” [ 0,63 ] . “ level ” reﬂect quantiz values—it rang [ −127,127 ] , level /negationslash=0 . 10.5 h.263 h.263 improv video code standard [ 7 ] videoconferenc audiovisu servic transmit public switch telephon network ( pstn ) . aim low bitrat commun bitrat less 64 kbp . adopt itu-t studi group 15 1995 . similar h.261 , use predict cod- inter-fram , reduc tempor redund , transform code remain signal , reduc spatial redund ( intra-fram differ macroblock inter-fram predict ) [ 7 ] . addit cif qcif , h.263 support sub-qcif , 4cif , 16cif . tabl 10.5 summar video format support h.263 . compress assum 30 fp , bitrat high-resolut video ( e.g. , 16cif ) could high ( > 500 mbp ) . compress video , standard deﬁn maximum bitrat per pictur ( bppmaxkb ) , measur unit 1,024 bit . practic , lower bitrat forcompress h.263 video achiev . h.261 , h.263 standard also support notion group block . differ gob h.263 ﬁxed size , alway startand end left right border pictur . fig . 10.10 show , qcif lumin imag consist 9 gob gob 11 ×1 mb ( 176 ×16 pixel ) , wherea 4cif lumin imag consist 18 gob gobha 44 ×2 mb ( 704 ×32 pixel ) . 10.5.1 motion compens h.263 process motion compens h.263 similar h.261 . motion vector ( mv ) , howev , simpli deriv current macroblock . tabl 10.5 video format support h.263 video lumin chromin bitrat ( mbp ) bitrat ( kbp ) format imag imag ( 30 fp bppmaxkb resolut resolut uncompress ) ( compress ) sub-qcif 128×96 64×48 4.4 64 qcif 176×144 88×72 9.1 64 cif 352×288 176×144 36.5 256 4cif 704×576 352×288 146.0 512 16cif 1408×1152 704×576 583.9 1024358 10 basic video compress techniqu gob 0 gob 1 gob 2 gob 3 gob 4 gob 5 gob 15 gob 16 gob 17gob 0 gob 1 gob 2 gob 3 gob 4 gob 5 gob 6 gob 7 qcifgob 8gob 0 gob 1 gob 2 gob 3 gob 4 gob 5 sub-qcif cif , 4cif , 16cif fig . 10.10 arrang gob h.263 lumin imag horizont vertic compon mv predict median valu horizont vertic compon , respect , mv1 , mv2 , mv3 “ previou , ” “ , ” “ right ” macroblock ( see fig . 10.11 ) . name , macroblock mv ( u , v ) , up=median ( u1 , u2 , u3 ) , vp=median ( v1 , v2 , v3 ) . ( 10.6 ) instead code mv ( u , v ) , error vector ( δu , δv ) code , δu=u−upandδv=v−vp . shown fig . 10.11 b , current mb border pictur gob , either ( 0 , 0 ) mv1 use motion vector out-of-bound mb ( ) . improv qualiti motion compensation—that , reduc predict error—h.263 support half-pixel precis oppos full-pixel precis h.261 . default rang horizont vertic compon uandvof mv ( u , v ) [ −16,15.5 ] . pixel valu need half-pixel posit gener simpl bilinear interpol method , shown fig . 10.12 , , b , c , , b , c , pixel valu full-pixel posit half-pixel posit , respect , “ / ” indic divis truncat ( also known integ divis ) . 10.5.2 option h.263 code mode besid core code algorithm , h.263 speciﬁ mani negoti code option variou annex . four common option follows:10.5 h.263 359 mv1 mv2 mv3mv bordermv2 mv3 mv1 mv mv2 mv3 mv1mv2 mv1 ( 0 , 0 ) mv1 mv1 ( 0 , 0 ) mv mv mvcurrent motion vector previou motion vector motion vector right motion vecto r ( ) ( b ) fig . 10.11 predict motion vector h.263 : apredict mv current macroblock median ( mv1 , mv2 , mv3 ) ; bspecial treatment mv current macroblock border pictur gob = b = ( + b + 1 ) / 2 c = ( + c + 1 ) / 2 = ( + b + c + + 2 ) / 4half-pixel positionb cafull-pixel positionab cd fig . 10.12 half-pixel predict bilinear interpol h.263 •unrestrict motion vector mode . pixel referenc longer restrict within boundari imag . motion vector point outsid imag boundari , valu boundari pixel geometr closest referenc pixel use . beneﬁci imag content move across edg imag , often caus object and/or camera movement . mode also allow extens rang motion vector . maximum rang motion vector [ −31.5,31.5 ] , enabl efﬁcient code fast-mov object video . •syntax-bas arithmet code mode . like h.261 , h.263 use variable-length code ( vlc ) default code method dct coefﬁcient . variable- length code impli symbol must code ﬁxed , integr number bit . employ arithmet code , restrict remov , higher360 10 basic video compress techniqu compress ratio achiev . experi show bitrat save 4 % inter-fram 10 % intra-fram mode . h.261 , syntax h.263 structur hierarchi four layer , use combin ﬁxed- variable-length code . syntax-bas arithmet code ( sac ) mode , variable-length code oper replac arithmet code oper . accord syntax layer , thearithmet encod need code differ bitstream variou compon . sinc bitstream differ distribut , h.263 speciﬁ model distribut , arithmet coder switch model ﬂy , accord syntax . •advanc predict mode . mode , macroblock size motion com- pensat reduc 16 8 . four motion vector ( 8 ×8 block ) gener macroblock lumin imag . afterward , pixel 8 ×8 lumin predict block take weight sum three predict valu base motion vector current lumin block two four motion vector neighbor blocks—that , one block left right side current lumin block one fromth block . although send four motion vector incur addit overhead , use mode gener yield better predict henc consider gain compress . •pb-frame mode . shown mpeg ( detail discuss next chapter ) , introduct b-frame , predict bidirect previou frame futur frame , often improv qualiti predictionand henc compress ratio without sacriﬁc pictur qualiti . h.263 , pb-frame consist two pictur code one unit : one p-frame , predict previou decod i-fram p-frame ( p-frame part pb-frame ) , oneb-fram , predict previou decod i- p-frame p-frame current decod ( fig . 10.13 ) . use pb-frame mode indic ptype . sinc p- b-frame close coupl pb-frame , bidirect motion vector b- frame need independ gener . instead , tempor scaledand enhanc forward motion vector p-frame [ 8 ] oa st reduc bitrat overhead b-frame . pb-frame mode yield satisfactori result video moder motion . larg motion , pb-frame donot compress b-frame . improv mode develop h.263 version 2 . 10.5.3 h.263+ h.263++ second version h.263 , also known h.263+ , approv januari 1998 itu-t studi group 16 . fulli backward-compat design h.263version 1.10.5 h.263 361 fig . 10.13 pb-frame h.263pb-frame p b p aim h.263+ broaden potenti applic offer addit ﬂexibl term custom sourc format , differ pixel aspect ratio , clock frequenc . h.263+ includ numer recommend improv code efﬁ- cienci error resili [ 9 ] . also provid 12 new negoti mode , addit four option mode h.263 . sinc develop came standard mpeg-1 2 , surpris also adopt mani aspect mpeg standard . , mention brieﬂi featur leav detail discuss next chapter , studi mpeg standard . •the unrestrict motion vector mode redeﬁn h.263+ . use revers variabl length code ( rvlc ) encod differ motion vector . rvlc encod abl minim impact transmiss error allow decod decod forward revers direct . rang motion vector extend [ −256,256 ] . refer [ 10,11 ] detail discuss construct rvlc . •aslic structur use replac gob addit ﬂexibl . slice contain variabl number macroblock . transmiss order either sequenti arbitrari , shape slice requir rectangular . •h.263+ implement tempor , snr , spatial scalabl . scalabl refer abil handl variou constraint , display resolut , bandwidth , hardwar capabl . enhanc layer tempor scalabl increas perceptu qualiti insert b-frame two p-frame . snr scalabl achiev use variou quantiz smaller-and-smal step_siz encod addit enhanc layer bitstream . thu , decod decid mani enhanc layer decod accord com- putat network constraint . concept spatial scalabl similar to362 10 basic video compress techniqu snr scalabl . case , enhanc layer provid increas spatial resolut . •h.263+ support improv pb-frame mode , two motion vector b-frame deriv forward motion vector p-frame , version 1 . instead , gener independ , mpeg-1 2 . •deblock ﬁlter code loop reduc block effect . ﬁlter appli edg boundari four lumin two chromin block . coefﬁcient weight depend quantiz step_siz block . techniqueresult better predict well reduct block artifact . develop h.263 continu beyond second version . third ver- sion , h.263 v3 , also known h.263++ , initi approv year 2000 . develop version approv 2005 [ 7 ] . h.263++ includ baselin code method h.263 addit recommend enhanc refer pictur select ( erp ) , data partit slice ( dp ) , addit supplement enhanc inform . erp mode oper manag multifram buffer store frame , enhanc code efﬁcienc error resili . dp mode provid addit enhanc error resili separ header motion-vector data fromth dct coefﬁcient data bitstream protect motion-vector data use revers code . addit supplement enhanc inform provid abil add backward-compat enhanc h.263 bitstream . sinc describ detail newer standard h.264 , h.265 , h.266 chap . 12 , mani fundament idea quit similar latest h.263 , leav rest discuss chapter . 10.6 exercis 1 . describ h.261 deal tempor andspati redund video . 2 . h.261 video three color channel , cr , cb . mvsb e comput channel transmit ? justifi answer . , channel use motion compens ? 3 . think larg collect jpeg imag ( famili taken variou local ) , decid unifi make access simpli combin big h.261-compress ﬁle . reason ican simpli use viewer step ﬁle , make cohes whole collect . comment util idea , term compress ratio achiev set imag . 4 . block-bas video code , take effort : compress decom- pression ? brieﬂi explain . 5 . work follow problem 2d logarithm search motion vector detail ( see fig . 10.14 ) .10.6 exercis 363 refer frame target frame pixel intens valu 10 back ground ( unmark ) pixel intensit valu 100xt xt yt yt fig . 10.14 2d logarithm search motion vector target ( current ) frame p-frame . size macroblock 4 ×4 . motion vector mv ( /delta1x , /delta1i ) , /delta1x∈ [ − p , p ] , /delta1y∈ [ − p , p ] . question , assum p≡5 . macroblock question ( darken ) frame upper left corner ( xt , yt ) . contain 9 dark pixel , intens valu 10 ; 7 pixel part background , uniform intens valu 100 . refer ( previou ) frame 8 dark pixel . ( ) best /delta1x , /delta1i , mean absolut error ( mae ) macroblock ? ( b ) show step step 2d logarithm search perform , includ locat pass search intermedi /delta1x , /delta1i , mae . 6 . logarithm mv search method suboptim , reli continu residu frame . ( ) explain assumpt necessari , offer justiﬁc . ( b ) give exampl assumpt fail . ( c ) hierarch search method suffer suboptim ? 7 . video sequenc encod use h.263 pb-mode , frame size 4cif , frame rate 30 fp , video length 90 min . follow known compress paramet : averag , two i-fram encod per second . video requir qualiti i-fram averag compress ratio 10:1 , averag p-frame compress ratio twice good i-fram , averag b-frame compress ratio twice good p-frame . assuming364 10 basic video compress techniqu compress paramet includ necessari header , calcul encod video size . 8 . assum search window size 2 p+1 , complex motion estim qcif video advanc predict mode h.263 , use ( ) brute-forc ( sequenti search ) method ? ( b ) 2d logarithm method ? ( c ) hierarch method ? 9 . discuss advanc predict mode h.263 achiev better compres- sion . 10 . h.263 motion estim , median motion vector three pre- cede macroblock ( see fig . 10.11 ) use predict current macroblock . argu median may necessarili reﬂect best predict . describ possibl improv current method . 11 . h.263+ allow independ forward mv b-frame pb-frame . compar h.263 pb-mode , trade-off ? point pb joint code b-frame independ motion vector ? refer 1 . a.m. tekalp , digit video process , 2nd edn . ( prentic hall , 2015 ) 2 . c.a . poynton , digit video hd : algorithm interfac , 2nd edn . ( elsevi , 2012 ) 3 . v . bhaskaran , k. konstantinid , imag video compress standard : algorithm architectur , 2nd edn . ( kluwer academ publish , boston , 1997 ) 4 . . wang , j. ostermann , .q . zhang , video process commun . ( prentic hall , 2002 ) 5 . d. marr , vision . ( mit press , san francisco , 2010 ) 6.video codec audiovisu servic p ×64 kbit/ . itu-t recommend h.261 , version 1 , dec. 1990 , version 2 , ( 1993 ) 7.video code low bit rate commun . itu-t recommend h.263 , version 1 , 1995 , version 2 , 1998 , version 3 , 2000 ( 2005 ) 8 . b.g . haskel , a. puri , a. netravali , digit video : introduct mpeg-2 ( chapman & hall , new york , 1996 ) 9 . g. cote , b. erol , m. gallant , h.263+ : video code low bit rate . ieee tran . circuit syst . video technol . 8 ( 7 ) , 849–866 ( 1998 ) 10 . . takishima , m. wada , h. murakami , revers variabl length code . ieee tran . commun . 43 ( 2–4 ) , 158–162 ( 1995 ) 11 . c.w . tsai , j.l . wu , construct huffman-code-bas revers variable-length code . ieee tran . commun . 49 ( 9 ) , 1506–1509 ( 2001 ) 11mpeg video code : mpeg-1 , 2 , 4 , 7 11.1 overview move pictur expert group ( mpeg ) establish 1988 creat standard deliveri digit video audio . membership grew rapidli 25 expert 1988 commun hundr compani organ [ 1 ] . appropri recogn proprietari interest need maintain within famili mpeg standard . accomplish deﬁn mpeg- compliant compress bitstream implicitli deﬁn decod . continu improv optim compress algorithm encod side complet manufactur . chapter , studi import design issu mpeg- 1 2 , follow basic later standard , mpeg-4 7 , differ object . modern video compress standard h.264 , h.265 , h.266 ( discuss next chapter ) , one might view mpeg standard old , i.e. , outdat . simpli concern ( ) fundament technologyof hybrid code import concept introduc , motion compens , dct-base transform code , scalabl , use old new standard . ( b ) although visual object-bas video representationand compress approach develop mpeg-4 7 commonli use current popular standard , great potenti adopt futur necessari comput vision technolog automat object detect andrecognit becom readili avail . © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_11365366 11 mpeg video code : mpeg-1 , 2 , 4 , 7 11.2 mpeg-1 mpeg-1 audio/video digit compress standard [ 2,3 ] approv intern organ standardization/intern electrotechn com- mission ( iso/iec ) mpeg group novemb 1991 code move pictur associ audio digit storag media 1.5 mbit/ [ 4 ] . common digit storag media includ compact disc ( cd ) video compact disc ( vcd ) . speciﬁ 1.5 , 1.2 mbp intend code video , 256 kbp use stereo audio . yield pictur qualiti compar tovh cassett sound qualiti equal cd audio . gener , mpeg-1 adopt ccir601 digit tv format , also known sourc input format ( sif ) . mpeg-1 support noninterlac video . normal , pictur resolut 352 ×240 ntsc video 30 fp , 352 ×288 pal video 25 fp . use 4:2:0 chroma subsampl . mpeg-1 standard , also refer iso/iec 11172 [ 4 ] , ﬁve part : 11172-1 system , 11172-2 video , 11172-3 audio , 11172-4 conform , 11172-5 softwar . brieﬂi , system take care , among mani thing , divid out-put packet bitstream , multiplex , synchron video audio stream . conform ( complianc ) speciﬁ design test veri- fy whether bitstream decod compli standard . softwar includesa complet softwar implement mpeg-1 standard decod sampl softwar implement encod . h.261 h.263 , mpeg-1 employ hybrid code , i.e. , combin motion compens transform code predict residu error . examin main featur mpeg-1 video code leav discuss mpeg audio code chap . 14 . 11.2.1 motion compens mpeg-1 discuss last chapter , motion-compensation-bas video encod h.261 work follow : motion estim , macroblock target p- frame assign best match macroblock previous code i- p-frame . call predict . differ macroblock match macroblock predict error , sent dct subsequ encod step . sinc predict previou frame , call forward predict . due unexpect movement occlus real scene , target macroblock may good match entiti previou frame . figur 11.1 illustr macroblock contain part ball target frame ﬁnd good matchingmacroblock previou frame , half ball occlud anoth object . howev , match readili obtain next frame . mpeg introduc third frame type— b-frame —and accompani bidi- rection motion compens . figur 11.2 illustr motion-compensation- base b-frame code idea . addit forward predict , backward pre-11.2 mpeg-1 367 previou frame next frame target frame fig . 11.1 need bidirect search target frame dct quantiz entropi coding−futur refer frame previou refer frame motion vector % differ macroblock cb cr 8 × 8 block fig . 11.2 b-frame code base bidirect motion compens diction also perform , match macroblock obtain futur i- p-frame video sequenc . consequ , macroblock b-frame specifi two motion vector , one forward one backward predict . match direct success , two motion vector sent , two correspond match macroblock averag ( indic “ % ” ﬁgure ) compar target macroblock gener predict error . accept match found one refer frame , one motion vector correspond macroblock use either forward backward prediction.368 11 mpeg video code : mpeg-1 , 2 , 4 , 7 code transmiss ordertim display order ib pp p pb b b b bbb bb bb fig . 11.3 mpeg frame sequenc figur 11.3 illustr possibl sequenc video frame . actual frame pattern determin encod time speciﬁ video ’ header . mpeg use mto indic interv p-frame preced i- p- frame , nto indic interv two consecut i-fram . fig . 11.3 , m=3 , n=9 . special case m=1 , b-frame use . sinc mpeg encod decod work macroblock b- frame without succeed p- i-fram , actual code transmiss order ( shown bottom fig . 11.3 ) differ display order video ( shown ) . inevit delay need buffer becom import issu real-tim network transmiss , especi stream mpeg video . 11.2.2 major differ h.261 besid introduc bidirect motion compens ( b-frame ) , mpeg-1 also differ h.261 follow aspect : •sourc format . h.261 support cif ( 352 ×288 ) qcif ( 176 ×144 ) sourc format . mpeg-1 support sif ( 352 ×240 ntsc 352 ×288 pal ) . also allow speciﬁc format , long constrain paramet set ( cp ) , shown tabl 11.1 , satisﬁ . •slice . instead gob , h.261 , mpeg-1 pictur divid one slice ( fig . 11.4 ) , ﬂexibl gob . may contain variabl number macroblock singl pictur may also start end anywher , long ﬁll whole pictur . slice code independ . exampl , slice differ scale factor quantiz . provid addit ﬂexibl bitrat control . moreov , slice concept import error recoveri , slice uniqu slice_start_cod . slice mpeg similar gob h.26111.2 mpeg-1 369 tabl 11.1 mpeg-1 constrain paramet set paramet va l u e horizont size pictur ≤768 v ertic size pictur ≤576 number macroblocks/pictur ≤396 number macroblocks/ ≤9,900 frame rate ≤30 fp bitrat ≤1,856 kbp fig . 11.4 slice mpeg-1 pictur ( h.263 ) : lowest level mpeg layer hierarchi fulli recov without decod entir set variable-length code bitstream . •quantiz . mpeg-1 quantiz use differ quantiz tabl intra- inter-cod ( tabl 11.2 11.3 ) . quantiz number intra- code ( tabl 11.2 ) vari within macroblock . differ h.261 , quantiz number ac coefﬁcient constant within macroblock . thestep _size [ , j ] valu determin product q [ , j ] andscal , q1orq2i one quantiz tabl scale integ rang [ 1 , 31 ] . use dct andqdct denot dct coefﬁcient before370 11 mpeg video code : mpeg-1 , 2 , 4 , 7 tabl 11.2 default quantiz tabl ( q1 ) f r intra-coding8 16 19 22 26 27 29 34 16 16 22 24 27 29 34 37 19 22 26 27 29 34 34 38 22 22 26 27 29 34 37 40 22 26 27 29 32 35 40 48 26 27 29 32 35 40 48 58 26 27 29 34 38 46 56 69 27 29 35 38 46 56 69 83 tabl 11.3 default quantiz tabl ( q2 ) f r inter-coding16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 quantiz , dct coefﬁcient intra mode , qdct [ , j ] = round/parenleftbigg8×dct [ , j ] step _size [ , j ] /parenrightbigg =round/parenleftbigg8×dct [ , j ] q1 [ , j ] ×scale/parenrightbigg , ( 11.1 ) dct coefﬁcient inter mode , qdct [ , j ] =/floorleftbigg8×dct [ , j ] step _size [ , j ] /floorrightbigg =/floorleftbigg8×dct [ , j ] q2 [ , j ] ×scale/floorrightbigg , ( 11.2 ) q1andq2ref tabl 11.2 11.3 , respect . , round oper typic use eq . ( 11.1 ) henc leav dead zone , wherea floor oper use eq . ( 11.2 ) , leav center dead zone quantiz space . •to increas precis motion-compensation-bas predict henc reduc predict error , mpeg-1 allow motion vector sub- pixel precis ( 1/2 pixel ) . techniqu bilinear interpol discuss insect . 10.5.1 h.263 use gener need valu half-pixel locat . •mpeg-1 support larger gap i- p-frame consequ much larger motion-vector search rang . compar maximum rang ±15 pixel motion vector h.261 , mpeg-1 support rang [ −512,511.5 ] half-pixel precis [ −1,024,1,023 ] full-pixel precis motion vector . howev , due practic limit pictur resolut , larg maximum rang might never used.11.2 mpeg-1 371 tabl 11.4 typic compress perform mpeg-1 frame type size ( kb ) compress 18 7:1 p 6 20:1 b 2.5 50:1 averag 4.8 27:1 •the mpeg-1 bitstream allow random access . accomplish group pictur ( gop ) layer , gop time-cod . addit , ﬁrst frame gop i-fram , elimin need refer frame . thu , gop layer allow decod seek particular posit within bitstream start decod . tabl 11.4 list typic size ( kilobyt ) type mpeg-1 frame . seen typic size compress p-frame signiﬁcantli smaller i-fram , inter-fram compress exploit tempor redund . notabl , b-frame even smaller p-frame , due partial advantageof bidirect predict . also b-frame often given lowest prioriti term preserv qualiti ; henc , higher compress ratio assign . 11.2.3 mpeg-1 video bitstream figur 11.5 depict six hierarch layer bitstream mpeg-1 video . 1.sequenc layer . video sequenc consist one group pictur ( gop ) . alway start sequenc header . header contain inform pictur , horizontal_s andvertical_s , pixel_aspect_ratio , frame_r , bit_rat , buffer_s , quantization_matrix , . option sequenc header gop indic paramet chang . 2.group pictur ( gop ) layer . gop contain one pictur , one must i-pictur . gop header contain inform time_cod indic hour-minute-second-fram start sequenc . 3.pictur layer . three common mpeg-1 pictur type i-pictur ( intra- code ) , p-pictur ( predict code ) , b-pictur ( bidirect predict code ) , discuss . also uncommon type , d-pictur ( dc code ) , dc coefﬁcient retain . mpeg-1 allow mix d-pictur type , make d-pictur impract . 4.slice layer . mention earlier , mpeg-1 introduc slice notion bitrat control recoveri synchron lost corrupt bit . slice may variabl number macroblock singl pictur . length posit slice speciﬁ header.372 11 mpeg video code : mpeg-1 , 2 , 4 , 7 macroblock macroblock macroblockslic macroblockblock 0 block 1 block 2 block 3 block 4 block 5 end_of_block vlc run vlc rundc coefficientpictur pictur pictur pictur ( intra macroblock ) video sequenc gop gop gopend codesequ layer layer layer layer layerlayersequ group pictur pictur slice macroblock blockheaderslic slice slice slicepictur header headersequ header gop header differenti . . . . . . . . . . . . . . . fig . 11.5 layer mpeg-1 video bitstream 5.macroblock layer . macroblock consist four yblock , one cbblock , one crblock . block 8 ×8 . 6.block layer . block intra-cod , differenti dc coefﬁcient ( dpcm dc , jpeg ) sent ﬁrst , follow variable-length code ( vlc ) , ac coefﬁcient . otherwis , dc ac coefﬁcient code use variable-length code . mitchel et al . [ 5 ] provid detail inform header variou mpeg-1 layer . 11.3 mpeg-2 develop mpeg-2 standard start 1990 . unlik mpeg-1 , basic standard store play video cd singl comput low bitrat ( 1.5 mbp ) , mpeg-2 [ 6 ] higher qualiti video bitrat 4 mbp . initi develop standard digit broadcast tv . late 1980 , advanc tv ( atv ) envis , broadcast hdtv via terrestri network . develop mpeg-2 , digit tv ﬁnalli took preced variou earli attempt analog solut hdtv . mpeg-2 manag meet compress bitrat requir digit tv/hdtv11.3 mpeg-2 373 tabl 11.5 proﬁl level mpeg-2 level simpl proﬁlemainproﬁl snrscalableproﬁl spatiallyscalableproﬁl highproﬁl 4:2:2proﬁl multiviewproﬁl high * * * high 1440 * * * * main * * * * * * low * * * fact supersed separ standard , mpeg-3 , initi thought necessari hdtv . mpeg-2 audio/video compress standard , also refer iso/iec 13818 [ 7 ] , approv iso/iec move pictur expert group novemb 1994 . similar mpeg-1 , part system , video , audio , conform , softwar , plu aspect . part 2 , video compress part standard iso/iec 13818-2 also known h.262 itu-t ( intern telecommunica- tion union—telecommun ) . mpeg-2 gain wide accept beyondbroadcast digit tv terrestri , satellit , cabl network . among variou applic interact tv , also adopt digit video disc digit versatil disc ( dvd ) . mpeg-2 deﬁn seven proﬁl aim differ applic ( e.g. , low-delay videoconferenc , scalabl video , hdtv ) . proﬁl simpl , main , snr scalabl , spatial scalabl , high , 4:2:2 , multiview ( two view would refer stereoscop video ) . within proﬁl , four level deﬁn . tabl 11.5 show , proﬁl four level . exampl , simpl proﬁl main low level , wherea high proﬁl low level . tabl 11.6 list four level main proﬁl , maximum amount data target applic . exampl , high level support high pictur resolut 1 ,920×1,152 , maximum frame rate 60 fp , maximum pixel rate 62 .7×10 6per second , maximum data rate code 80 mbp . low level target sif video ; henc , provid backward compat mpeg-1 . main level ccir601 video , wherea high 1440 high level aim european hdtv north american hdtv , respect . dvd video speciﬁc allow four display resolut : exampl , 29.97 frame per second , interlac , 720 ×480 , 704 ×480 , 352 ×480 , 352 × 240 . henc , dvd video standard use restrict form mpeg-2 main proﬁl main low levels.374 11 mpeg video code : mpeg-1 , 2 , 4 , 7 tabl 11.6 four level main proﬁl mpeg-2 level maximum resolutionmaximum fp maximumpixels/ maximumcod datar ( mbp ) applic high 1,920×1,152 60 62.7×10680 film product high 1440 1,440×1,152 60 47.0×10660 consum hdtv main 720×576 30 10.4×10615 studio tv low 352×288 30 3.0×1064 consum tapeequival 11.3.1 support interlac video mpeg-1 support noninterlac ( progress ) video . sinc mpeg-2 adopt digit broadcast tv , must also support interlac video , one option digit broadcast tv hdtv . mention earlier , interlac video frame consist two ﬁeld , refer top-ﬁeld bottom-ﬁeld .i na frame-pictur , scan line ﬁeld interleav form singl frame . divid 16 ×16 mac- roblock code use motion compens . hand , ﬁeld treat separ pictur , call ﬁeld-pictur . fig . 11.6 show , frame-pictur split two ﬁeld-pictur . ﬁgure show 16 scan linesfrom frame-pictur left , oppos 8 scan line two ﬁeld portion ﬁeld-pictur right . see , term display area monitor/tv , 16-column × 16-row macroblock ﬁeld-pictur correspond 16 ×32 block area frame-pictur , wherea 16 ×16 macroblock frame-pictur correspond 16 ×8 block area ﬁeld-pictur . shown , observ becom import factor develop differ mode predict motion- compensation-bas video code . five mode predict mpeg-2 deﬁn frame predict andﬁeld predict well ﬁve differ pre- diction mode , suitabl wide rang applic requir forth accuraci speed motion compens vari . 1.frame predict frame-pictur . ident mpeg-1 motion- compensation-bas predict method p-frame b-frame . frame predict work well video contain slow moder object camera motions.11.3 mpeg-2 375 . . . p p ( b ) ( ) bottom-fieldtop-field b fig . 11.6 field-pictur ﬁeld predict ﬁeld-pictur mpeg-2 : aframe-pictur versu ﬁeld-pictur ; bﬁeld predict ﬁeld-pictur 2.field predict ﬁeld-pictur . ( see fig . 11.6 b ) . mode use mac- roblock size 16 ×16 ﬁeld-pictur . p-ﬁeld-pictur ( rightmost one shown ﬁgure ) , predict made two recent encod ﬁeld . macroblock top-ﬁeld pictur forward-predict top-ﬁeld bottom-ﬁeld pictur preced i- p-frame . macroblock bottom-ﬁeld pictur predict top-ﬁeld pictur frame bottom-ﬁeld pictur preced i- p-frame . b-ﬁeld-pictur , forward backward predict made ﬁeld- pictur preced succeed i- p-frame . regul requir ﬁeld “ pariti ” maintained—that , top-ﬁeld bottom-ﬁeld pictur predict either top bottom ﬁeld refer pictur . 3.field predict frame-pictur . mode treat top-ﬁeld bottom- ﬁeld frame-pictur separ . accordingli , 16 ×16 macroblock target frame-pictur split two 16 ×8 part , come one ﬁeld . field predict carri 16 ×8 part manner similar shown fig . 11.6 b . besid smaller block size , differ the376 11 mpeg video code : mpeg-1 , 2 , 4 , 7 bottom-ﬁeld predict top-ﬁeld frame , sinc deal frame-pictur . exampl , p-frame-pictur , bottom 16 ×8 part instead pre- dict either ﬁeld preced i- p-frame . two motion vector thu gener 16 ×16 macroblock p-frame-pictur . similarli , four motion vector gener macroblock b-frame-pictur . 4.16×8 mc ﬁeld-pictur . 16 ×16 macroblock target ﬁeld- pictur split top bottom 16 ×8 halves—that , ﬁrst eight row next eight row . field predict perform half . result , two motion vector gener 16 ×16 macroblock p-ﬁeld-pictur four motion vector macroblock b-ﬁeld- pictur . mode good ﬁner motion compens motion rapid irregular . 5.dual-prim p-pictur . mode use either frame-pictur ﬁeld-pictur . ﬁrst , ﬁeld predict previou ﬁeld pariti ( top bottom ) made . motion vector mv use deriv calcul motion vector cv ﬁeld opposit pariti , take account tempor scale vertic shift line top bottom ﬁeld . way , pair mv andcv yield two preliminari predict macroblock . predict error averag use ﬁnal predict error . mode aim mimick b-pictur predict p-pictur without adopt backward predict ( henc less encodingdelay ) . altern scan field_dct altern scan andfield_dct techniqu aim improv effect dct predict error . applic frame-pictur interlac video . frame predict frame-pictur , predict error sent dct , block size 8 ×8 . due natur interlac video , consecut row block differ ﬁeld ; henc , less correl betweenthem altern row . suggest dct coefﬁcient low vertic spatial frequenc tend reduc magnitud , compar one noninterlac video . base analysi , altern scan introduc . may appli picture-by-pictur basi mpeg-2 altern zigzag scan . fig . 11.7 indic , zigzag scan assum noninterlac video , dct coefﬁcientsat upper left corner block often larger magnitud . altern scan ( fig . 11.7 b ) recogn interlac video , vertic higher spatial frequenc compon may larger magnitud thu allow scan earlierin sequenc . experi shown [ 6 ] altern scan improv the11.3 mpeg-2 377 ( ) ( b ) fig . 11.7 azigzag ( progress ) baltern ( interlac ) scan dct coefﬁcient video mpeg-2 psnr 0.3 db zigzag scan effect video fast motion . mpeg-2 , field_dct address issu . appli dct , row macroblock frame-pictur reorder , ﬁrst eight row top-ﬁeld last eight bottom-ﬁeld . restor higher spatial redund ( correl ) consecut row . reorder revers idct . field_dct applic chromin imag , macroblock 8 ×8 pixel . 11.3.2 mpeg-2 scalabl jpeg 2000 , scalabl also import issu mpeg-2 . sinc mpeg-2 design varieti applic , includ digit tv hdtv , video often transmit network differ characterist . therefor , necessari singl code bitstream scalabl variou bitrat . mpeg-2 scalabl code also known layer code , base layer one enhanc layer deﬁn . base layer inde- pendent encod , transmit , decod , obtain basic video qualiti . encod decod enhanc layer , howev , depend base layer previou enhanc layer . often , one enhanc layer employ , call two-lay scalabl code . scalabl code suitabl mpeg-2 video transmit network follow characterist . •veri differ bitrat . link speed slow , bitstream base layer sent . otherwis , bitstream one enhanc layer also sent , achiev improv video quality.378 11 mpeg video code : mpeg-1 , 2 , 4 , 7 •variable-bitr ( vbr ) channel . bitrat channel deterior , bitstream fewer enhanc layer transmit , vice versa . •noisi connect . base layer better protect sent via channel known less noisi . moreov , scalabl code ideal progress transmiss : bitstream base layer sent ﬁrst , give user fast basic view video , follow gradual increas data improv qualiti . use deliveringcompat digit tv ( tv ) hdtv . mpeg-2 support follow scalabl : •snr scalabl . enhanc layer provid higher snr . •spatial scalabl . enhanc layer provid higher spatial resolut . •tempor scalabl . enhanc layer facilit higher frame rate . •hybrid scalabl . combin two three scalabl . •data partit . quantiz dct coefﬁcient split partit . snr scalabl figur 11.8 illustr snr scalabl work mpeg-2 encod decod . mpeg-2 snr scalabl encod gener output bitstream bits_bas andbits_enh two layer . base layer , coars quantiz dct coefﬁcient employ , result fewer bit rel low-qual video . variable-length code , bitstream call bits_bas . coars quantiz dct coefﬁcient invers quantiz ( q−1 ) fed enhanc layer , compar origin dct coefﬁcient . differ ﬁneli quantiz gener dct coefﬁcient reﬁnement , , variable-length code , becom bitstream call bits_enh . invers quantiz coars reﬁn dct coefﬁcient ad back , invers dct ( idct ) , use motion-compens predict nextfram . sinc enhancement/reﬁn base layer improv signal- to-nois ratio , type scalabl call snr scalabl . , reason ( e.g. , breakdown network channel ) , bits_enh enhanc layer obtain , scal- abl scheme still work use bits_bas . case , input invers quantiz ( q −1 ) enhanc layer simpli treat zero . decod ( fig . 11.8 b ) oper revers order encod . bits_bas andbits_enh variable-length decod ( vld ) invers quantiz ( q−1 ) ad togeth restor dct coefﬁcient . remain step motion-compensation-bas video decod . bitstream ( bits_bas andbits_enh ) use , output video11.3 mpeg-2 379 idct frame memorymot estimationidct frame memori predictiondctsnr enhanc encod base encodervlc ( ) encoderbits_bas mc-base predictionframecurrentbits_enh vldvld base decodersnr enhanc decod motion vector ( b ) decoderpredictionmc-basedoutput_highbits_enh bits_basemot vector output_basevlc + +++ + +−−q q −1 q −1q q −1 q −1 fig . 11.8 mpeg-2 snr scalabl : aencod ; bdecoder380 11 mpeg video code : mpeg-1 , 2 , 4 , 7 isoutput_high enhanc qualiti . bits_bas use , output video output_bas basic qualiti . spatial scalabl base enhanc layer mpeg-2 spatial scalabl tightli coupl snr scalabl ; henc , type scalabl somewhat less com- plicat . show detail encod decod , , explain encod process , use high-level diagram . base layer design gener bitstream reduced-resolut pictur . combin enhanc layer produc pictur origin reso- lution . fig . 11.9 show , origin video data spatial decim factor 2 sent base layer encod . normal code step motion com-pens , dct predict error , quantiz , entropi code , output bitstream bits_bas . fig . 11.9 b indic , predict macroblock base layer spatial interpol get resolut 16 ×16 . combin normal , tempor predict macroblock enhanc layer , form predict macroblock purpos motion compens layeredcod . spatial interpol adopt bilinear interpol , discuss . combin macroblock use simpl weight tabl , valu weight wi rang [ 0 , 1.0 ] . w=0 , consider given predict macroblock base layer . w=1 , predict entir base layer . normal , predict macroblock linearli combin , use weight wand 1−w , respect . achiev minimum predict error , mpeg-2 encod analyz choos differ wvalu weight tabl macroblock basi . tempor scalabl tempor scalabl code base enhanc layer video ata reduc tempor rate ( frame rate ) . reduc frame rate layer often ; howev , could also differ . pictur base layer enhanc layer ( ) spatial resolut input video . whencombin , restor video origin tempor rate . figur 11.10 illustr mpeg-2 implement tempor scalabl . input video tempor demultiplex two piec , carri half orig-in frame rate . , base layer encod carri normal single- layer code procedur input video yield output bitstream bits_bas .11.3 mpeg-2 381 spatial interpol decimatorspatialspati encoderenhanc layerbits_enh bits_basecurr frame encoderbas layerspati ( ) exampl weight tabl 1.0 0.5. . . 0+ interpol mbpredict mb base layerfrom enhanc spatial interpol base layerpredict mblayer16 × 16 16 × 1616 × 16 8 × 8ww1 − w ( b ) fig . 11.9 encod mpeg-2 spatial scalabl : ablock diagram ; bcombin tempor spatial predict encod enhanc layer predict match macroblock enhanc layer obtain two way [ 6 ] : interlay motion-compens predict orcombin motion- compens predict interlay motion-compens predict . •interlay motion-compens predict ( fig . 11.10 b ) . macroblock b-frame motion compens enhanc layer predict preced succeed frame ( either i- , p- , b- ) base layer , exploit possibl interlay redund motion compens . •combin motion-compens predict interlay motion- compens predict ( fig . 11.10 c ) . combin advantag ordinari forward predict interlay predict . macroblocks382 11 mpeg video code : mpeg-1 , 2 , 4 , 7 encoderbits_enh demultiplexertempor framecurrenttempor enhanc layer bits_bas encodertempor base layer ( ) base layerenhanc layertempor b . . .bb b ib b p ( b ) base layerenhanc layertempor p . . .bb b ib b p ( c ) fig . 11.10 encod mpeg-2 tempor scalabl : ablock diagram ; binterlay motion- compens predict ; ccombin motion-compens predict interlay motion- compens predict b-frame enhanc layer forward-predict preced frame layer “ backward ” -predict preced ( , alterna- tive , succeed ) frame base layer . ﬁrst frame , p-frame enhanc layer adopt forward predict i-fram base layer.11.3 mpeg-2 383 hybrid scalabl two three scalabl combin form hybrid scalabl . combin •spatial tempor hybrid scalabl •snr spatial hybrid scalabl •snr tempor hybrid scalabl . usual , three-lay hybrid coder adopt , consist base layer , enhanc layer 1 , enhanc layer 2 . exampl , spatial tempor hybrid scalabl , base layer enhanc layer 1 provid spatial scalabl , enhanc layer 1 2 provid tempor scalabl , enhanc layer 1 effect servinga base layer . encod , incom video data ﬁrst tempor demultiplex two stream : one enhanc layer 2 ; enhanc layer 1 thebas layer ( spatial decim base layer ) . encod gener three output bitstream : ( ) bits_bas base layer , ( b ) spatial enhanc bits_enhance1 enhanc layer 1 , ( c ) spatial tempor enhanc bits_enhance2 enhanc layer 2 . implement two hybrid scalabl similar left exercis . data partit compress video stream divid two partit . base partit con-tain lower frequenc dct coefﬁcient , enhanc partit contain high- frequenc dct coefﬁcient . although partit sometim also refer layer ( base layer enhanc layer ) , strictli speak , data partit doesnot conduct type layer code , sinc singl stream video data simpli divid depend base partit gener enhanc partit . nevertheless , data partit use transmissionov noisi channel progress transmiss . 11.3.3 major differ mpeg-1 •better resili bit error . sinc mpeg-2 video often transmit variou network , noisi unreli , bit error inevit . cope , mpeg-2 system two type stream : program transport . program stream similar system stream mpeg-1 ; henc , also facilit backward compat mpeg-1.384 11 mpeg video code : mpeg-1 , 2 , 4 , 7 tabl 11.7 possibl nonlinear scale mpeg-2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 scale i1 2 3 4 5 6 7 8 10 12 14 16 18 20 22 24 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 scale i28 32 36 40 44 48 52 56 64 72 80 88 96 104 112 transport stream aim provid error resili abil includ multipl program independ time base singl stream , asyn-chron multiplex network transmiss . instead use long , variable- length packet , mpeg-1 mpeg-2 program stream , use ﬁxed- length ( 188-byte ) packet . also new header syntax , better error checkingand correct . •support 4:2:2 4:4:4 chroma subsampl . addit 4:2:0 chroma subsampl , h.261 mpeg-1 , mpeg-2 also allow 4:2:2 4:4:4 toincreas color qualiti . discuss chap . 5 , chromin pictur 4:2:2 horizont subsampl factor 2 , wherea 4:4:4 special case , chroma subsampl actual take place . •nonlinear quantiz . quantiz mpeg-2 similar mpeg-1 . itsstep_s also determin product q [ , j ] andscal , q one default quantiz tabl intra- inter- code . two type ofscal allow . ﬁrst , scale mpeg-1 , integ rang [ 1 , 31 ] scale i=i . second type , howev , nonlinear relationship exists—that , scale i/negationslash≡i . ith scale valu look tabl 11.7 . •more restrict slice structur . mpeg-1 allow slice cross macroblock row boundari . result , entir pictur singl slice . mpeg-2 slice must start end macroblock row . word , left edg pictur alway start new slice , longest slice mpeg-2 onlyon row macroblock . •more ﬂexibl video format . accord standard , mpeg-2 pictur size larg 16 k ×16 k pixel . realiti , mpeg-2 use mainli support variou pictur resolut deﬁn dvd , tv , hdtv . similar h.261 , h.263 , mpeg-1 , mpeg-2 speciﬁ bitstream syntax decod . leav much room futur improv , especi encod side . mpeg-2 video-stream syntax complex ofmpeg-1 , good refer found [ 6,7 ] .11.4 mpeg-4 385 11.4 mpeg-4 11.4.1 overview mpeg-4 mpeg-1 2 employ frame-bas code techniqu , rectangular video frame divid macroblock block compress . also known block-bas code . main concern high compress ratio satisfactori qualiti video compress techniqu . mpeg-4 differ emphasi [ 8 ] . besid compress , pay great attent user interact . allow larger number user creat commun multimedia present applic new infrastructur , internet , world wide web ( www ) , mobile/wireless network . mpeg-4 depart predecessor adopt new object-bas code approach— media object entiti mpeg-4 code . media object ( also known audio visual object ) either natur orsynthet ; say , may captur video camera creat comput program . object-bas code potenti offer higher compress ratio also beneﬁci digit video composit , manipul , index , retriev . figur 11.11 illustr mpeg-4 video compos manipul simpl oper insertion/delet , translation/rot , scale , , visual object . mpeg-4 ( version 1 ) ﬁnaliz octob 1998 becam intern standard earli 1999 , refer iso/iec 14496 [ 9 ] . improv version ( ver- sion 2 ) ﬁnaliz decemb 1999 acquir intern standard statu 2000 . similar previou mpeg standard , ﬁrst ﬁve part system , video , manipul vop 3vop 2vop 1 vopencod decod content−basedscen segment fig . 11.11 composit manipul mpeg-4 video ( vop = video object plane ) 386 11 mpeg video code : mpeg-1 , 2 , 4 , 7 audio , conform , softwar . chapter discuss video compress issu mpeg-4 part 2 ( formal iso/iec 14496-2 ) .1 origin target low-bitr commun ( 4.8–64 kbp mobil appli- cation 2 mbp applic ) , bitrat mpeg-4 video cover larg rang , 5 kbp 10 mbp . refer model fig . 11.12 show , mpeg-1 system simpli deliv- er audio video data storag allow user interact . mpeg-2 ad interact compon ( indic dash line fig . 11.12 ) thu permit limit user interact applic network video andinteract tv . mpeg-4 ( fig . 11.12 b ) standard emphas ( ) compos media object creat desir audiovisu scene , ( b ) multiplex synchro- nize bitstream media data entiti transmit guarante qualiti servic ( qo ) , ( c ) interact audiovisu scene receiv end . mpeg-4 provid toolbox advanc code modul algorithm audio video compress . mpeg-4 deﬁn binari format scene ( bif ) [ 10 ] facilit com- posit media object scene . bif often repres scene graph , node describ audiovisu primit attribut , graph structur enabl descript spatial tempor relationship object thescen . bif enhanc virtual realiti model languag ( vrml ) . particular , emphas time synchron object , lack origin vrml design . addit bif , mpeg-4 ( version 2 ) provid aprogram environ , mpeg-j [ 11 ] , java applic ( call mpe- glet ) access java packag api enhanc end user ’ interact . hierarch structur mpeg-4 visual bitstream differ mpeg-1 2 much video-object-ori . figur 11.13 illustr ﬁve level hierarch descript scene mpeg-4 visual bitstream . gener , video-object sequenc ( vs ) one video object ( vo ) , vo one video object layer ( vol ) , . syntact , ﬁve level uniqu start code bitstream , enablerandom access . 1.video-object sequenc ( vs ) . vs deliv complet mpeg-4 visual scene , may contain 2d 3d natur synthet object . 2.video object ( vo ) . vo particular object scene , arbitrari ( nonrectangular ) shape , correspond object background ofth scene . 3.video object layer ( vol ) . vol facilit way support ( multilay ) scalabl code . vo multipl vol scalabl code singlevol nonscal code . special case , mpeg-4 also support special 1mpeg-4 part 10 ident itu-t h.264 vc discuss next chapter.11.4 mpeg-4 387 de u l p lex u r c ede l v e r yvideo audio interact ( ) audio anim text interactionbif videoco p onp r e e n ion u r c ede l v e r yde u l p lex ( b ) fig . 11.12 comparison interact mpeg standard : arefer model mpeg-1 2 ( interact dash line support mpeg-2 ) ; bmpeg-4 refer model388 11 mpeg video code : mpeg-1 , 2 , 4 , 7 fig . 11.13 video-object- orient hierarch descript scene mpeg-4 visual bitstream type vol shorter header . provid bitstream compat baselin h.263 [ 12 ] . 4.group video object plane ( gov ) . gov group video object plane . option level . 5.video object plane ( vop ) . vop snapshot vo particular moment , reﬂect vo ’ shape , textur , motion paramet instant . gen- eral , vop imag arbitrari shape . degener case mpeg-4 video code occur entir rectangular video frame treat vop . case , equival mpeg-1 2 . mpeg-4 allow overlap vops—that , vop partial occlud anoth vop scene . 11.4.2 video object-bas code mpeg-4 mpeg-4 encodes/decod vop separ ( instead consid whole frame ) . henc , video-object-bas code also known vop-bas code . discuss start code natur object ( detail found [ 13,14 ] ) . section 11.4.3 describ synthet object code . vop-bas code versu frame-bas code mpeg-1 2 support vop concept ; henc , code method refer frame-bas . sinc frame divid mani macroblock motion-compensation-bas code conduct , also known block-bas code . figur 11.14 show three frame video sequenc vehicl move toward left pedestrian walk opposit direct . figur 11.14 b show typic block-bas code motion vector ( mv ) obtain one macroblock . mpeg-1 2 video code concern compress ratio consid exist visual object . therefor , motion vector gener may inconsist object-level motion would use object-bas video analysi index . figur 11.14 c illustr possibl exampl potenti match yield small predict error . potenti match 2 yield ( slightli ) smaller prediction11.4 mpeg-4 389 previou frameprevi frame vop2vop1 motionsvop2 vop1curr frame ( ) ( b ) ( ) current frame potenti match 1 potenti match 2mv2mv1 ( c ) next frame codingblock motion estimationblock-bas object ( vop ) mpeg-4mpeg-1 2 object base codingmv fig . 11.14 comparison block-bas code object-bas code : aa video sequenc ; bmpeg-1 2 block-bas code ; ctwo potenti match mpeg-1 2 ; dobject-bas code mpeg-4390 11 mpeg video code : mpeg-1 , 2 , 4 , 7 error potenti match 1 , mv 2 chosen motion vector macroblock block-bas code approach , although mv 1 consist vehicl ’ direct motion . object-bas code mpeg-4 aim solv problem , addit improv compress . figur 11.14 show vop arbitrari shape ideal obtain uniqu motion vector consist object ’ motion . mpeg-4 vop-bas code also employ motion compens techniqu . intra-frame-cod vop call i-vop . inter-frame-cod vop call p- vop forward predict employ b-vop bidirect predict employ . new difﬁculti vop may arbitrari shape . therefor , addit textur , shape inform must code . worth note textur actual refer visual content , , gray-level chroma valu pixel vop . mpeg-1 2 code shape inform , sinc frame rectangular , code valu ofth pixel frame . mpeg-1 2 , code explicitli refer textur code . term “ textur ” come comput graphic show disciplin enter video code world mpeg-4 . , start discuss motion-compensation-bas code vop , follow introduct textur code , shape code , static textur cod- ing , sprite code , global motion compens . motion compens section address issu vop-bas motion compens mpeg-4 . sinc i-vop code rel straightforward , discuss concentr cod- p-vop and/or b-vop unless i-vop explicitli mention . , motion-compensation-bas vop code mpeg-4 involv three step : motion estim , motion-compensation-bas predict , code predict error . facilit motion compens , vop divid mani macroblock , previou frame-bas method . macroblock bydefault 16 ×16 lumin imag 8 ×8 chromin imag treat special straddl boundari arbitrarili shape vop . mpeg-4 deﬁn rectangular bound box vop . left top bound left top bound vop , turn specifi shift origin vop origin ( 0,0 ) video frame absolut ( frame ) coordin system ( see fig . 11.15 ) . horizont vertic dimens bound box must multipl 16 lumin imag . therefor , box usual slightli larger convent bound box . macroblock entir within vop refer interior macroblock .a appar fig . 11.15 , mani macroblock straddl boundari vop call boundari macroblock . motion compens interior macroblock carri manner mpeg-1 2 . howev , boundari macroblock could difﬁcult match motion estim , sinc vop often arbitrari ( nonrectangular ) shape , and11.4 mpeg-4 391 boundari macroblock interior macroblock ( 0 , 0 ) vopvideo frame shift fig . 11.15 bound box boundari macroblock vop horizont repetit paddingvert repetit paddingpaddingextend fig . 11.16 sequenc pad refer vop mpeg-4 shape may chang one instant video anoth . help match everi pixel target vop meet mandatori requir rectangular block transform code ( e.g. , dct ) , preprocess step pad appli refer vop prior motion estim . pixel within vop current ( target ) vop consid match- ing motion compens , pad take place refer vop . qualiti , better extrapol method pad could devel- ope . pad adopt mpeg-4 larg due simplic speed . ﬁrst two step motion compens pad motion-vector code . pad . boundari macroblock refer vop , horizont repet- itiv pad invok ﬁrst , follow vertic repetit pad ( fig . 11.16 ) . afterward , exterior macroblock outsid vop adjac one boundari macroblock , extend pad appli . horizont repetit pad algorithm examin row boundari macroblock refer vop . boundari pixel replic left and/or right ﬁll valu interv pixel outsid vop macroblock . interv bound two boundari pixel , averag adopted.392 11 mpeg video code : mpeg-1 , 2 , 4 , 7 algorithm 11.1 ( horizont repetit pad ) begin row boundari macroblock refer vop if∃ ( boundari pixel ) row inter valoutsid vop ifint vali bound one boundari pixel b assign valu bto pixel inter val els inter vali bound two boundari pixel b1andb2 assign valu ( b1+b2 ) /2 pixel inter val end subsequ vertic repetit pad algorithm work similarli . examin column , newli pad pixel preced horizont pad process treat pixel insid vop purpos vertic pad . exampl 11.1 figur 11.17 illustr exampl repetit pad bound- ari macroblock refer vop . figur 11.17 show lumin ( chromi- nanc ) intens valu pixel vop , vop ’ boundari shown darken line . simplic , macroblock ’ resolut reduc 6 ×6i n exampl , although actual macroblock size 16 ×16 lumin imag 8×8 chromin imag . 1.horizont repetit pad ( fig . 11.17 b ) row 0 . rightmost pixel vop boundari pixel . intens valu , 60 , use repetit valu pixel outsid vop . row 1 . similarli , rightmost pixel vop boundari pixel . intens valu , 50 , use repetit pixel valu outsid vop . row 2 3 . horizont pad , sinc boundari pixel exist . row 4 . exist two interv outsid vop , bound singl boundari pixel . intens valu , 60 70 , use pixel valu two interv , respect . ( ) ( b ) ( c ) 45 52 55 60 248405 40 50 80 9060 60 50 50 50 60 60 60 6045 52 55 60 248405 40 5070 70 56560 90851 5154 5455 5555 5560 6060 6060 60 50 50 50 60 60 60 6045 52 55 60 248405 40 5070 70 56560 90860 70 fig . 11.17 exampl repetit pad boundari macroblock refer vop : aorigin pixel within vop ; bafter horizont repetit pad ; cfollow vertic repetit padding11.4 mpeg-4 393 row 5 . singl interv outsid vop bound pair boundari pixel vop . averag intens valu , ( 50+80 ) /2=65 , use repetit valu pixel . 2.vertic repetit pad ( fig . 11.17 c ) column 0 . singl interv bound pair boundari pixel vop . one 42 vop ; 60 , aros horizont padding.th averag intens valu , ( 42+60 ) /2=51 , repetit use valu pixel . column 1 , 2 , 3 , 4 , 5 . column pad similar column 0 . extend pad . macroblock entir outsid vop exterior mac- roblock . exterior macroblock immedi next boundari macroblock ﬁlled replic valu border pixel boundari macroblock . note boundari macroblock fulli pad , horizont ver-tic border pixel deﬁn valu . exterior macroblock one boundari macroblock immedi neighbor , boundari macroblock use extend pad follow prioriti list : left , top , right , bottom . later version mpeg-4 allow averag valu macroblock use . extend pad process repeat ﬁll exterior macroblock within rectangular bound box vop . motion-vector code . macroblock target vop ﬁnd best match macroblock refer vop follow motion estim procedur . letc ( x+k , y+l ) pixel macroblock target vop , r ( x+i+ k , y+j+l ) pixel macroblock refer vop . similar mad eq . ( 10.1 ) , asum absolut differ ( sad ) measur differ two macroblock deﬁn sad ( , j ) = n−1/summationdisplay k=0n−1/summationdisplay l=0|c ( x+k , y+l ) −r ( x+i+k , y+j+l ) | ·map ( x+k , y+l ) ni size macroblock . map ( p , q ) =1 c ( p , q ) pixel within target vop ; otherwis , map ( p , q ) =0 . vector ( , j ) yield minimum sad adopt motion vector mv ( u , v ) : ( u , v ) = { ( , j ) |sad ( , j ) minimum , i∈ [ − p , p ] , j∈ [ − p , p ] } ( 11.3 ) pi maxim allow magnitud uandv . motion compens , motion vector mv code . h.263 ( see fig . 10.11 ) , motion vector target macroblock simpli taken mv . instead , mv predict three neighbor macroblock . predict error motion vector variable-length code . follow advanc motion compens techniqu adopt similar one h.263 ( see sect . 10.5 ) .394 11 mpeg video code : mpeg-1 , 2 , 4 , 7 •four motion vector ( 8 ×8 block ) gener mac- roblock lumin compon vop . •motion vector subpixel precis . half-pixel precis , rang motion vector [ −2,048,2,047 ] . mpeg-4 also allow quarter-pixel precis lumin compon vop . •unrestrict motion vector allow : mv point beyond boundari refer vop . pixel outsid vop referenc , valu still deﬁn , due pad . textur code textur refer gray-level ( chroma ) variat and/or pattern vop . textur code mpeg-4 base either dct shape-adapt dct ( sa-dct ) . textur code base dct . i-vop , gray ( chroma ) valu pixel macroblock vop directli code , use dct follow vlc , similar done jpeg still pictur . p-vop b-vop use motion-compensation-bas code ; henc , predict error sent dct vlc . follow discuss focus motion-compensation- base textur code p-vop b-vop . code interior macroblock , 16 ×16 lumin vop 8 ×8 chromin vop , similar convent motion-compensation-bas code h.261 , h.263 , mpeg-1 2 . predict error six 8 ×8 block macroblock obtain convent motion estim step . sent dct routin obtain six 8 ×8 block dct coefﬁcient . boundari macroblock , area outsid vop refer vop pad use repetit pad , describ . motion compens , textur predict error within target vop obtain . portion boundari macroblock target vop outsid vop , zero pad theblock sent dct , sinc ideal , predict error would near zero insid vop . repetit pad extend pad better match motion compens , addit zero pad better dct result texturecod . quantiz step _size dc compon 8 . ac coefﬁcient , one follow two method employ : •the h.263 method , coefﬁcient receiv quantiz control singl paramet , differ macroblock differ quantiz . •the mpeg-2 method , dct coefﬁcient macroblock differ quantiz control step _size paramet . shape-adapt dct ( sa-dct ) -base code boundari macroblock . sa-dct [ 15 ] anoth textur code method boundari macroblock . due effect , sa-dct adopt code boundari macroblock mpeg-4 version 2.11.4 mpeg-4 395 1d dct-n variat 1d dct describ earlier ( eq . ( 8.19 ) ( 8.20 ) ) , nelement use transform instead ﬁxed n=8 . ( short , denot 1d dct-n transform dct-n section . ) equat ( 11.4 ) ( 11.5 ) describ dct-n transform invers , idct-n. 1d discret cosin transform-n ( dct-n ) f ( u ) =/radicalbigg 2 nc ( u ) n−1/summationdisplay i=0co ( 2i+1 ) uπ 2nf ( ) ( 11.4 ) 1d invers discret cosin transform-n ( idct-n ) ˜f ( ) =n−1/summationdisplay u=0/radicalbigg 2 nc ( u ) co ( 2i+1 ) uπ 2nf ( u ) ( 11.5 ) i=0,1 , ... , n−1 , u=0,1 , ... , n−1 , c ( u ) =/braceleftbigg√ 2 2ifu=0 , 1 otherwis sa-dct 2d dct comput separ 2d transform two itera- tion dct-n . figur 11.18 illustr process textur code boundari macroblock use sa-dct . transform appli 8 ×8 block boundari macroblock . figur 11.18 show one 8 ×8 block boundari macroblock , pixel insid macroblock , denot f ( x , ) , shown gray . gray pixel ﬁrst shift upward obtain f/prime ( x , ) , fig . 11.18 b show . ﬁrst iter , dct-n appli column f/prime ( x , ) , ndetermin number gray pixel column . henc , use dct-2 , dct-3 , dct-5 , . result dct-n coefﬁcient denot f/prime ( x , v ) , fig . 11.18 c show , dark dot indic dc coefﬁcient dct-n . element f/prime ( x , v ) shift left obtain f/prime/prim ( x , v ) fig . 11.18 d. second iter , dct-n appli row f/prime/prim ( x , v ) obtain g ( u , v ) ( fig . 11.18 e ) , singl dark dot indic dc coefﬁcient g ( 0,0 ) 2d sa-dct . code consider : •the total number dct coefﬁcient g ( u , v ) equal number gray pixel insid 8 ×8 block boundari macroblock , less 8×8 . henc , method shape adapt efﬁcient comput . •at decod time , sinc array element must shift back properli iter idct-n , binari mask origin shape requir todecod textur inform code sa-dct . binari mask binari alpha map describ below.396 11 mpeg video code : mpeg-1 , 2 , 4 , 7 dct-6 dct-5 dct-4 dct-2 dct-1 dct-2 dct-3 dct-5 dct-3 dct-4 dct-1i yv vvuxx x x ( ) f ( x , ) ( b ) f ' ( x , ) ( c ) f ' ( x , v ) ( ) f '' ( x , v ) ( e ) g ( u , v ) fig . 11.18 textur code boundari macroblock use shape-adapt dct ( sa-dct ) shape code unlik mpeg-1 2 , mpeg-4 must code shape vop , sinc shape one intrins featur visual object . mpeg-4 support two type shape inform : binari andgrayscal . binari shape inform form binari map ( also known binari alpha map ) size vop ’ rectangular bound box . valu 1 ( opaqu ) 0 ( transpar ) bitmap indic whether pixel insid outsid vop . altern , grayscal shape inform actual refer shape ’ transpar , gray valu rang 0 ( transpar ) 255 ( opaqu ) . binari shape code . encod binari alpha map efﬁcient , map divid 16 ×16 block , also known binari alpha block ( bab ) . bab entir opaqu transpar , easi code , special techniqu shape code necessari . boundari bab contain contour henc shape inform vop . subject binari shape code . v ariou contour-bas bitmap-bas ( area-bas ) algorithm studi compar code boundari bab . two ﬁnalist bitmap-bas . one modiﬁ modiﬁ read ( mmr ) algorithm , also option enhanc fax group 3 ( g3 ) standard [ 16 ] the11.4 mpeg-4 397 mandatori compress method group 4 ( g4 ) standard [ 17 ] . ﬁnalist wascontext-bas arithmet encod ( cae ) , initi develop jbig [ 18 ] . cae ﬁnalli chosen binari shape-cod method mpeg-4 simplic compress efﬁcienc . mmr basic seri simpliﬁc rel element address design ( read ) algorithm . basic idea behind read algorithm code current line rel pixel locat previous code line . algorithm start identifi ﬁve pixel locat previou current line : •a0 : last pixel valu known encod decod •a1 : transit pixel right a0 •a2 : second transit pixel right a0 •b1 : ﬁrst transit pixel whose color opposit a0in previous code line •b2 : ﬁrst transit pixel right b1on previous code line . read work examin rel posit pixel . time , encod decod know posit a0 , b1 , b2 , posit a1anda2ar known encod . three code mode use : •if run length previou current line similar , distanc a1andb1should much smaller distanc a0anda1 . thu , vertic mode encod current run length a1−b1 . •if previou line similar run length , current run length code use 1d run-length code . call horizont mode . •ifa0≤b1 < b2 < a1 , simpli transmit codeword indic pass mode advanc a0to posit b2 , continu code process . simpliﬁc made read algorithm practic imple- mentat . exampl , |a1−b1| < 3 , enough indic appli vertic mode . also , prevent error propag , k-factor deﬁn , everi kline must contain least one line code use convent run- length code . modiﬁc constitut modiﬁ read algorithm use g3 standard . modiﬁ modiﬁ read ( mmr ) algorithm simpli remov restrict impos k-factor . context-bas arithmet encod , fig . 11.19 illustr “ context ” pixel boundari bab . intra-ca mode , target alpha map involv ( fig . 11.19 ) , ten neighbor pixel ( number 0 9 ) alpha map form context . ten binari number associ pixelscan offer 2 10=1,024 possibl context . , appar certain context ( e.g. , 1s 0s ) appear fre- quentli other . prior statist , probabl tabl built toindic probabl occurr 1,024 contexts.398 11 mpeg video code : mpeg-1 , 2 , 4 , 7 ( b ) current frame refer frame ( ) current frame 8 75 40987 6543 2 10632 1 fig . 11.19 context cae binari shape code mpeg-4 . /circlecopyrtind current pixel , digit indic pixel neighborhood : aintra-ca ; binter-ca recal arithmet code ( chap . 7 ) capabl encod sequenc probabilist symbol singl number . , pixel look tabl ﬁnd probabl valu context . cae simpli scan 16 ×16 pixel bab sequenti appli arithmet code eventu deriv singl ﬂoating-point number bab . inter-ca mode natur extens intra-ca : involv target refer alpha map . boundari macroblock target frame , process motion estim ( integ precis ) compens invok ﬁrst locat match macroblock refer frame . establish correspond posit pixel boundari bab . figur 11.19 b show context pixel includ four neighbor pixel target alpha map ﬁve pixel refer alpha map . accord context , pixel boundari bab assign one 29=512 probabl . afterward , cae algorithm appli . 16 ×16 binari map origin contain 256 bit inform . compress singl ﬂoat number achiev substanti save . cae method lossless ! mpeg-4 group also examin simpl lossi version shape-cod method . exampl , binari alpha map simpli subsampl factor 2 4 arithmet code . trade-off , cours , deterior shape . grayscal shape code . term grayscal shape code mpeg-4 could mislead , true shape inform code binari alpha map . grayscal use describ transpar shape , textur ! addit bitplan rgb frame buffer , raster graphic use extra bitplan alpha map , use describ transpar graphic object . alpha map one bitplan , multipl level transpar introduced—for exampl , 0 transpar , 255 opaqu , number variou degre intermedi transpar . term grayscal use transpar code mpeg-4 simpli trans- parenc number happen rang 0 255—the convent 8-bit grayscal intens . grayscal shape code mpeg-4 employ techniqu textur code describ . use alpha map block-bas motion compens encod predict error dct . boundari macroblock need pad , , sinc pixel vop .11.4 mpeg-4 399 code transpar inform ( grayscal shape code ) lossi , oppos code binari shape inform , default lossless . static textur code mpeg-4 use wavelet code textur static object . particularlyapplic textur use map onto 3d surfac . introduc chap . 8 , wavelet code recurs decompos imag subband multipl frequenc . embed zerotre wavelet ( ezw ) algorithm [ 19 ] provid compact represent exploit potenti larg number insigniﬁc coefﬁcient subband . code subband mpeg-4 static textur code conduct follow : •the subband lowest frequenc code use dpcm . predict coefﬁcient base three neighbor . •code subband base multiscal zerotre wavelet code method . multiscal zerotre parent–child relat ( pcr ) tree coefﬁ- cient lowest frequenc subband . result , locat inform allcoefﬁci better track . addit origin magnitud coefﬁcient , degre quantiz affect data rate . magnitud coefﬁcient zero quantiz , isconsid insigniﬁc . ﬁrst , larg quantiz use ; signiﬁc coefﬁcient select subsequ code use arithmet code . differ- enc quantiz origin coefﬁcient kept residu subband , code next iter smaller quantiz employ . process continu addit iter ; henc , scalabl . sprite code video photographi often involv camera movement pan , tilt , zoom in/out , . often , main object track examin foreground ( move ) object . circumst , background treat static imag . creat new vo type , sprite —a graphic imag freeli move around within larger graphic imag set imag . separ foreground object background , introduc notion asprit panorama —a still imag describ static background sequenc video frame . gener use imag “ stitch ” warp techniqu [ 20 ] . larg sprite panoram imag encod sent decod , begin video sequenc . decod receiv separately400 11 mpeg video code : mpeg-1 , 2 , 4 , 7 fig . 11.20 sprite code : ath sprite panoram imag background ; bthe foreground object ( case , piper ) bluescreen imag ; cthe compos video scene . piper imag courtesi simon fraser univers pipe band code foreground object paramet describ camera movement thu far , efﬁcient reconstruct scene . figur 11.20 show sprite panoram imag stitch sequenc video frame . combin sprite background piper bluescreen imag ( fig . 11.20 b ) , new video scene ( fig . 11.20 c ) readili decod aid sprite code addit pan/tilt zoom paramet . clearli , foreground object either origin video scene newli creat realiz ﬂexibl object-bas composit mpeg-4 video . global motion compens common camera motion , pan , tilt , rotat , zoom ( so-cal global motion , sinc appli everi block ) , often caus rapid content chang success video frame . tradit block-bas motion compens would result larg number signiﬁc motion vector . also , type camera motionscannot describ use translat motion model employ block- base motion compens . global motion compens ( gmc ) design solv problem . four major components:11.4 mpeg-4 401 •global motion estim . global motion estim comput motion current imag respect sprite . “ global , ” mean overal chang due camera change—zoom , pan side , . computedbi minim sum squar differ sprite sand global motion-compens imag /prime . e=n/summationdisplay i=1 ( ( xi , yi ) −i/prim ( x/prime , y/prime ) ) 2 . ( 11.6 ) idea background ( possibl stitch ) imag sprite ( xi , yi ) , expect new frame consist mainli background , alter global camera motion . constrain global motionestim problem , motion whole imag parameter per- spectiv motion model use eight paramet , deﬁn x /prime i=a0+a1xi+a2yi a6xi+a7yi+1 , y/prime i=a3+a4xi+a5yi a6xi+a7yi+1 . ( 11.7 ) result constrain minim problem solv use gradient- descent-bas method [ 21 ] . •warp blend . motion paramet comput , back- ground imag warp align respect sprite . coordin warp imag comput use eq . ( 11.7 ) . afterward , warp imag blend current sprite produc new sprite . done usingsimpl averag form weight averag . •motion trajectori code . instead directli transmit motion paramet , encod displac refer point . call trajectori code [ 21 ] . point corner vop bound box use refer point , correspond point sprite calcul . differencebetween two entiti code transmit differenti motion vector . •choic local motion compens ( lmc ) gmc . final , decis made whether use gmc lmc . purpos , appli gmcto move background lmc foreground . heurist ( much detail skip ) , sad gmc < sad lmc , use gmc gener predict refer vop . otherwis , use lmc . 11.4.3 synthet object code mpeg-4 number object video creat comput graphic anima-t softwar increas . denot synthet object often present togeth natur object scene game , tv ad program , anim featur ﬁlms.402 11 mpeg video code : mpeg-1 , 2 , 4 , 7 section , brieﬂi discuss 2d mesh-bas and3d model-bas code anim method synthet object . beek , petajan , ostermann [ 22 ] provid detail survey subject . 2d mesh object code a2d mesh tessel ( partit ) 2d planar region use polygon patch . vertic polygon refer node mesh . popular mesh triangular mesh , polygon triangl . mpeg- 4 standard make use two type 2d mesh : uniform mesh anddelaunay mesh [ 23 ] . triangular mesh use model natur video object well synthet anim object . sinc triangul structur ( edg node ) known readili regener decod , code explicitli bitstream . henc , 2d mesh object code compact . coordin valu mesh code half-pixel precis . 2d mesh treat mesh object plane ( mop ) . figur 11.21 illustr encod process 2d mop . code divid geometri code andmot code . shown , input data x- y- coordin node triangl ( tm ) mesh . output data displac ( dxn , dyn ) predict error motion ( exn , eyn ) , explain . 2d mesh geometri code . mpeg-4 allow four type uniform mesh differ triangul structur . figur 11.22 show mesh 4 ×5 mesh node . uniform mesh speciﬁ ﬁve paramet : ﬁrst two specifi number node row column , respect ; next two specifi horizont vertic size rectangl ( contain two triangl ) respect ; last speciﬁ type uniform mesh . uniform mesh simpl especi good repres 2d rectan- gular object ( e.g. , entir video frame ) . use object arbitrari shape , code memorycodingcodingmesh dataencod mesh datadxn , dyn exn , eynxn , yn , tm fig . 11.21 2d mesh object plane ( mop ) encod process11.4 mpeg-4 403 ( ) ype 0 ( b ) ype 1 ( c ) ype 2 ( ) ype 3 fig . 11.22 four type uniform mesh : atyp 0 ; btype 1 ; ctype 2 ; dtype3 appli ( overlaid ) bound box vop , incur inefﬁci . delaunay mesh better object-bas mesh represent arbitrary-shap 2d object . deﬁnit 1 ifdi delaunay triangul , triangl tn= ( pi , pj , pk ) ∈dsatisﬁ properti circumcircl tndoe con- tain interior node point pl . delaunay mesh video object obtain follow step : 1.select boundari node mesh . polygon use approxim bound- ari object . polygon vertic boundari node delaunay mesh . possibl heurist select boundari point high curvatur boundari node . 2.choos interior node . featur point within object ’ boundari edg point corner chosen interior node mesh . 3.perform delaunay triangul .aconstrain delaunay triangul per- form boundari interior node , polygon boundari use constraint . triangul use line segment connect consecut boundari node edg form triangl within boundari . constrain delaunay triangul . interior edg ﬁrst ad form new triangl . algorithm examin interior edg make sure local delaunay . given two triangl ( pi , pj , pk ) ( pj , pk , pl ) share edg jk , f ( pi , pj , pk ) contain plor ( pj , pk , pl ) contain piin interior circumcircl , jki local delaunay replac new edg il . ifplfal exactli circumcircl ( pi , pj , pk ) ( accordingli , pialso fall exactli circumcircl ( pj , pk , pl ) ) , jkwill view local delaunay piorplha largest x-coordin among four node . figur 11.23 , b show set delaunay mesh node result constrain delaunay triangul . total number node n , n= nb+niwher nbandnidenot number boundari node interior node , respect , total number triangl delaunay mesh nb+2ni− 2 . ﬁgure , sum 8 +2×6−2=18.404 11 mpeg video code : mpeg-1 , 2 , 4 , 7 fig . 11.23 delaunay mesh : aboundari node ( p0top7 ) interior node ( p8to p13 ) ; btriangular mesh obtain constrain delaunay triangulationp0 p8p9 p1 p2p3p4p5p6p7 p13 p12p11p10 ( ) p0 p8p9 p1 p2p3p4p5p6p7 p13 p12p11p10 ( b ) unlik uniform mesh , node locat delaunay mesh irregular ; henc , must code . convent mpeg-4 , locat ( x0 , y0 ) top left boundari node.2i code ﬁrst , follow boundari point counterclockwis ( see fig . 11.23 ) clockwis . afterward , locat interior node code order . except ﬁrst locat ( x0 , y0 ) , subsequ coordin code differentially—that , n≥1 , dxn=xn−xn−1 , dyn=yn−yn−1 , ( 11.8 ) afterward , dxnanddynar variable-length code . 2d mesh motion code . motion mop triangl either uniform delaunay mesh describ motion vector three vertex node . new mesh structur creat intra-fram , triangular topolog alter subsequ inter-fram . enforc one-to-on map 2d mesh motion estim . 2the top left boundari node deﬁn one minimum x+ycoordin valu . one boundari node x+i , one minimum yi chosen.11.4 mpeg-4 405 mop triangl ( pi , pj , pk ) , motion vector piandpjar known mv iandmv j , predict pred kwill made motion vector pk , round half-pixel precis : pred k=0.5· ( mv i+mv j ) . ( 11.9 ) predict error eki code ek=mv k−pred k. ( 11.10 ) three motion vector ﬁrst mop triangl t0are code , least one neighbor mop triangl share edg t0 , motion vector third vertex node code , . estim motion vector start initi triangl 0 , triangl contain top left boundari node boundari node next , clockwis . motion vector node mop code differenti , accord eq . ( 11.10 ) . breadth-ﬁrst order establish travers mop triangl 2d mesh motion code process . figur 11.24 show span tree gener obtain breadth- ﬁrst order triangl . shown , initi triangl t0ha two neighbor triangl t1andt2 , visit yet . becom child node t0in span tree . triangl t1andt2 , turn , unvisit neighbor triangl ( henc child node ) t3 , t4 , t5 , t6 , respect . travers order far t0 , t1 , t2 , t3 , t4 , t5 , breadth-ﬁrst fashion . one level span tree , t3ha one child node t7 , sinc neighbor t1i alreadi visit ; t4ha one child node t8 ; . 2d object anim . mesh motion code establish one-to-on map mesh triangl refer mop target mop . gener motion vector node point 2d mesh . mesh-bas textur map use gener textur new anim surfac warp [ 20 ] textur triangl refer mop onto correspond triangl target mop . facilit anim 2d synthet video object . fig . 11.24 breadth-ﬁrst order mop triangl 2d mesh motion code t0 t8t9t1t2 t3t4t5t6 t7t13 t12 t11t10 t16 t14t15 t17406 11 mpeg video code : mpeg-1 , 2 , 4 , 7 triangular mesh , common map function warp afﬁn transform , sinc map line line guarante triangl map triangl . shown given six vertic two matchingtriangl , paramet afﬁn transform obtain , transform appli point within target triangl textur map . given point p= ( x , ) 2d plane , linear transform speciﬁ , [ x /primey/prim ] = [ xy ] /bracketleftbigga11a12 a21a22/bracketrightbigg ( 11.11 ) transform ti linear ( αx+βi ) =αt ( x ) +βt ( ) , αandβar scalar . linear transform suitabl geometr oper rotat scale translat , sinc addit constant vector notposs . deﬁnit 2 transform ai afﬁn transform exist vector cand linear transform tsuch ( x ) =t ( x ) +c . point ( x , ) repres [ x , y,1 ] homogen coordin system commonli use graphic [ 24 ] , afﬁn transform transform [ x , y,1 ] [ x /prime , y/prime,1 ] deﬁn [ x/primey/prime1 ] = [ xy 1 ] ⎡ ⎣a11a120 a21a220 a31a321⎤ ⎦ . ( 11.12 ) realiz follow map : x/prime=a11x+a21y+a31 ( 11.13 ) y/prime=a12x+a22y+a32 ( 11.14 ) 6 degre freedom repres paramet a11 , a21 , a31 , a12 , a22 , a32 . follow 3 ×3 matric afﬁn transform translat ( tx , ty ) , rotat counterclockwis θ , scale factor sxandsi : ⎡ ⎣10 0 01 0 txty1⎤ ⎦ , ⎡ ⎣cosθsinθ0 −sinθcosθ0 00 1⎤ ⎦ , ⎡ ⎣sx00 0sy0 00 1⎤ ⎦ follow afﬁn transform shear along x-axi y-axi , respect : ⎡ ⎣10 0 hx10 00 1⎤ ⎦ , ⎡ ⎣1hy0 010 001⎤ ⎦11.4 mpeg-4 407 hxandhyar constant determin degre shear . simpl afﬁn transform combin ( matrix multipl ) yield composit afﬁn transforms—for exampl , translat follow arot , shear follow transform . proven ( see exercis 15 ) composit transform thu gener exactli matrix form 6 degre freedom , speciﬁ 11 , a21 , a31 , a12 , a22 , a32 . triangl target mop ( p0 , p1 , p2 ) = ( ( x0 , y0 ) , ( x1 , y1 ) , ( x2 , y2 ) ) match triangl refer mop ( p/prime 0 , p/prime 1 , p/prime 2 ) = ( ( x/prime 0 , y/prime 0 ) , ( x/prime 1 , y/prime 1 ) , ( x/prime 2 , y/prime 2 ) ) , map two triangl uniqu deﬁn follow : ⎡ ⎣x/prime 0y/prim 01 x/prime 1y/prim 11 x/prime 2y/prim 21⎤ ⎦=⎡ ⎣x0y01 x1y11 x2y21⎤ ⎦⎡ ⎣a11a120 a21a220 a31a321⎤ ⎦ ( 11.15 ) equat ( 11.15 ) contain six linear equat ( three x/prime three y/prime ) requir resolv six unknown coefﬁcient a11 , a21 , a31 , a12 , a22 , a32 . let eq . ( 11.15 ) state x/prime=xa . known a=x−1x/prim , invers matrix given x−1=adj ( x ) /det ( x ) , adj ( x ) adjoint xanddet ( x ) determin . therefor , ⎡ ⎣a11a120 a21a220 a31a321⎤ ⎦=⎡ ⎣x0y01 x1y11 x2y21⎤ ⎦−1⎡ ⎣x/prime 0y/prim 01 x/prime 1y/prim 11 x/prime 2y/prim 21⎤ ⎦ =1 det ( x ) ⎡ ⎣y1−y2 y2−y0 y0−y1 x2−x1 x0−x2 x1−x0 x1y2−x2y1x2y0−x0y2x0y1−x1y0⎤ ⎦⎡ ⎣x/prime 0y/prim 01 x/prime 1y/prim 11 x/prime 2y/prim 21⎤ ⎦ ( 11.16 ) det ( x ) =x0 ( y1−y2 ) −y0 ( x1−x2 ) + ( x1y2−x2y1 ) . sinc three vertic mesh triangl never colinear point , ensur thatxi singular—that , det ( x ) /negationslash=0 . therefor eq . ( 11.16 ) alway uniqu solut . afﬁn transform piecewise—that , triangl afﬁn transform . work well object mildli deform theanim sequenc . figur 11.25 show delaunay mesh simpl word map onto . figur 11.25 b show warp word subsequ mop anim sequenc afﬁn transform.408 11 mpeg video code : mpeg-1 , 2 , 4 , 7 fig . 11.25 mesh-bas textur map 2d object anim 3d model-bas code frequent appear human face bodi video , mpeg- 4 deﬁn special 3d model face object andbodi object . potenti applic new video object includ teleconferenc , human–comput interfac , game , e-commerc . past , 3d wirefram model anim studi 3d object anim [ 25 ] . mpeg-4 goe beyond wirefram , surfac face bodi object shade texture-map . face object code anim . face model individu face could either creat manual gener automat comput vision andpattern recognit techniqu . howev , former cumbersom nevertheless inadequ , latter yet achiev reliabl . mpeg-4 adopt gener default face model , develop virtual realiti model languag ( vrml ) consortium [ 26 ] .face anim paramet ( fap ) speciﬁ achiev desir animations—devi origin “ neutral ” face . addit , face deﬁnit paramet ( fdp ) speciﬁ better describ individu face . figur 11.26 show featur point fdp . featur point affect anim ( fap ) shown solid circl , affect shown empti circl . sixty-eight fap deﬁn [ 22 ] : fap 1 visem fap 2 facial express . visem code highli realist lip motion model speaker ’ current mouth posit . fap possibl movement head , jaw , lip , eyelid , eyebal , eyebrow , pupil , chin , cheek , tongu , nose , ear , . exampl , express includ neutral , joy , sad , anger , fear , disgust , surpris . express set features—sad , exampl , slightli close eye , relax mouth , upward-b inner eyebrow . fap move- ment includ head_pitch , head_yaw , head_rol , open_jaw , thrust_jaw , shift_jaw , push_bottom_lip , push_top_lip , . compress , fap code use predict code . predict fap target frame made base fap previou frame , predictionerror code use arithmet code . dct also employ improv compress ratio , although consid comput expens . fap also quantiz , differ quantiz step size employ explore11.4 mpeg-4 409 ) b ( ) ( fig . 11.26 featur point face deﬁnit paramet ( fdp ) . ( featur point teeth tongu shown . ) fact certain fap ( e.g. , open_jaw ) need less precis other ( e.g. , push_top_lip ) . bodi object code anim . mpeg-4 v ersion 2 introduc bodi object , natur extens face object . work humanoid anim ( h-anim ) group vrml consor- tium , mpeg adopt gener virtual human bodi default postur . default stand , feet point front , arm side , palm face inward . 296 bodi anim paramet ( bap ) . appli mpeg-4-compli gener bodi , produc anim . larg number bap describ joint angl connect differ bodi part , includ spine , shoulder , clavicl , elbow , wrist , ﬁnger , hip , knee , ankl , toe . yield 186 degre freedom bodi , 25 hand alon . furthermor , bodi movement speciﬁ multipl level detail . exampl , ﬁve differ level , support 9 , 24 , 42 , 60 , 72 degre freedom use spine , depend complex anim . speciﬁc bodi , bodi deﬁnit paramet ( bdp ) speciﬁ bodi dimens , bodi surfac geometri , , option , textur . bodi surfac geometri use 3d polygon mesh represent , consist set polygon planar surfac 3d space [ 24 ] . 3d mesh represent popular comput graphic surfac model . coupl textur map , deliv good ( photorealist ) render . code bap similar fap : quantiz predict code use , predict error compress arithmet code . 11.4.4 mpeg-4 part , proﬁl , level far , mpeg-4 28 part [ 9 ] , still develop . speciﬁ visual part 2 audio part 3 , also special subjects410 11 mpeg video code : mpeg-1 , 2 , 4 , 7 graphic , anim , music , scene descript , object descriptor , deliveri multimedia integr framework ( dmif ) , stream , intellectu properti manag protect ( ipmp ) variou part . mpeg-4 part 10 aboutadvanc video code ( vc ) ident itu-t h.264 vc . mpeg-4 part 2 deﬁn 20 visual proﬁl , like simpl , advanc simpl , core , main , simpl studio , etc . commonli use one simpl proﬁl ( sp ) andadvanc simpl proﬁl ( asp ) . latter adopt sever popular video code softwar divx , nero digit , quicktim 6 . open-sourc softwar xvid support sp asp . target variou applic , mpeg-4 part 2 also deﬁn multipl level proﬁl , e.g. , l0 l3 sp l0 l5 asp . gener , lower level proﬁl support low-bitr video format ( cif , qcif ) applic videoconferenc web , wherea higher level support higher qualiti video . 11.5 mpeg-7 multimedia content becom integr part variou applica-t , effect efﬁcient retriev becom primari concern . octob 1996 , mpeg group therefor took develop anoth major standard , mpeg-7 , follow mpeg-1 , 2 , 4 . one common ground mpeg-4 mpeg-7 focu audiovisu object . main object mpeg-7 [ 27–29 ] serv need audiovisu content-bas retriev ( audiovisu object retriev ) applic digit librari . nevertheless , certainli limit retrieval—it applic toani multimedia applic involv gener ( content creation ) usag ( content consumpt ) multimedia data . unlik mpeg-1 , 2 4 , “ yet anoth ” standard video code . mpeg-7 becam intern standard septemb 2001 . formal name multimedia content descript interfac , document iso/iec 15938 [ 30 ] . standard ’ ﬁrst seven part system , descript deﬁnit languag , visual , audio , multimedia descript scheme , refer softwar , conform test . sinc 2002 , develop part 8–13 , mostli focusingon variou proﬁl queri format . exampl , part 13 releas 2015 compact descriptor visual search . mpeg-7 support varieti multimedia applic . data may includ still pictur , graphic , 3d model , audio , speech , video , composit inform ( combin element ) . mpeg-7 data element repres textual binari format , . part 1 ( system ) speciﬁ syntax binari format mpeg-7 ( bim ) data . part 2 ( descript deﬁnit languag ) speciﬁ syntax textual format adopt xml schema languag choic . bidirect lossless map deﬁn textual binaryrepresentations.11.5 mpeg-7 411 storag transmiss media agentspul pushdescript descript encod engin ( manual/automat ) ( mm data ) ( mm data ) ( user mm system applicaton ) ds dss ddl fig . 11.27 possibl applic use mpeg-7 figur 11.27 illustr possibl applic beneﬁt mpeg- 7 . shown , featur extract use instanti mpeg-7 descript . code mpeg-7 encod sent storag transmiss media . v ariou search queri engin issu search brows request , constitut pull activ internet , wherea agent ﬁlter numer materi push onto termin —user and/or comput system applic consum data . multimedia content descript , mpeg-7 develop descriptor ( ) , descript scheme ( ds ) , descript deﬁnit languag ( ddl ) . follow import term : •featur . characterist data •descriptor ( ) . deﬁnit ( syntax semant ) featur •descript scheme ( ds ) . speciﬁc structur relationship ds dss ( see salembi smith [ 31 ] ) •descript . set instanti ds dss describ structur conceptu inform content , storag usag content , •descript deﬁnit languag ( ddl ) . syntact rule express combin dss ds ( see hunter nack [ 32 ] ) . made clear [ 30 ] scope mpeg-7 standard ds , dss , ddl descript . mechan process produc consum descript beyond scope mpeg-7 . left open industry412 11 mpeg video code : mpeg-1 , 2 , 4 , 7 innov competit , importantli , arriv ever-improv new technolog . similar simul model ( sm ) mpeg-1 video , test model ( tm ) mpeg-2 video , veriﬁc model ( vm ) mpeg-4 ( video , audio , snhc , system ) , mpeg-7 name work model experiment model ( xm ) — alphabet pun ! xm provid descript variou tool evalu ds , dss , ddl , experi veriﬁc conduct compar multipl independ parti world . ﬁrst set experi call core experi . 11.5.1 descriptor ( ) mpeg-7 descriptor design describ low-level featur , color , textur , shape , motion , high-level featur semant object , event abstract concept . mention , method process automat even semiautomat featur extract part standard . despit theeffort progress ﬁeld imag video process , comput vision , pattern recognit , automat reliabl featur extract expect near futur , especi high level . descriptor chosen base comparison perform , efﬁcienc , size . low-level visual descriptor basic visual featur [ 33 ] includ •color –color space . ( ) rgb , ( b ) ycbcr , ( c ) hsv ( hue , satur , valu ) [ 24 ] , ( ) hmmd ( huemaxmindiff ) [ 34 ] , ( e ) 3d color space deriv 3 ×3 matrix rgb , ( f ) monochrom . –color quantiz . ( ) linear , ( b ) nonlinear , ( c ) lookup tabl . –domin color . small number repres color region imag . use imag retriev base color similar . –scalabl color . color histogram hsv color space . encod haar transform henc scalabl . –color layout . spatial distribut color color-layout-bas retriev . –color structur . frequenc color structur element describ color content structur imag . color structur element compos sever imag sampl local neighborhood thesam color . –group frames/group pictur ( gof/gop ) color . similar scal- abl color , except appli video segment group still images.an aggreg color histogram obtain applic averag , median , rintersect oper respect bin color histogram gof/gop sent haar transform . •textur –homogen textur . use orient scale-tun gabor ﬁlter [ 35 ] quantit repres region homogen textur . advantage11.5 mpeg-7 413 gabor ﬁlter provid simultan optim resolut space spatial frequenc domain [ 36 ] . also , bandpass ﬁlter conform human visual proﬁl . ﬁlter bank consist 30 gaborﬁlt , ﬁve differ scale six differ direct scale , use extract textur descriptor . –textur brows . describ regular , coars , direction edg use repres brows homogen textur . , gabor ﬁlter use . –edg histogram . repres spatial distribut four direct ( 0 ◦,45◦,90◦,135◦ ) edg one nondirect edg . imag divid small subimag , edg histogram ﬁve bin gener subimag . •shape –region-bas shape . set angular radial transform ( art ) [ 28 ] coef- ﬁcient use describ object ’ shape . object consist one region , possibl hole object . art transform 2d complex transform deﬁn term polar coordin unit disk.art basi function separ along angular radial dimens . thirty-six basi function , 12 angular three radial , use extract shape descriptor . –contour-bas shape . use curvatur scale space ( css ) represent [ 37 ] invari scale rotat , robust nonrigid motion partial occlus shape . –3d shape . describ 3d mesh model shape index [ 38 ] . histogram shape indic entir mesh use descriptor . •motion –camera motion . fix , pan , tilt , roll , dolli , track , boom . ( see fig . 11.28 [ 39 ] . ) –object motion trajectori . list keypoint ( x , , z , ) . option interpola- tion function use specifi acceler along path . ( see [ 39 ] . ) –parametr object motion . basic model 2d afﬁn model transla- tion , rotat , scale , shear , combin . planar perspect model quadrat model use perspect distort complex movement . –motion activ . provid descript intens , pace , mood , , video—for exampl , “ score hockey game ” “ interview person. ” •local –region locat . speciﬁ local region imag box polygon . –spatiotempor locat . describ spatiotempor region video sequenc . use one set descriptor region motion . •other –face recognit . normal face imag repres 1d vector , project onto set 49 basi vector , repres possibl face vectors.414 11 mpeg video code : mpeg-1 , 2 , 4 , 7 fig . 11.28 camera motion : pan , tilt , roll , dolli , track , boom . ( camera effect focal length f.i shown initi origin , point direct z-axi . ) dollyxi zboom pan tilt f zoom rolltrack 11.5.2 descript scheme ( ds ) section provid brief overview mpeg-7 descript scheme ( dss ) area basic element , content manag , content descript , navig access , content organ , user interact . •basic element –datatyp mathemat structur . v ector , matric , histogram , . –construct . link media ﬁle local segment , region , . –schema tool . includ root element ( start element mpeg-7 xml document descript ) , top-level element ( organ dss speciﬁc content-ori descript ) , packag tool ( group relat ds com- ponent descript packag ) . •content manag –media descript . involv singl ds , mediainform ds , com- pose mediaidentiﬁc one media proﬁl ds contain inform code method , transcod hint , storag deliveri format , . –creation product descript . includ inform creation ( titl , creator , creation locat , date , etc . ) , classiﬁc ( genr , languag , parent guidanc , etc . ) , relat materi . –content usag descript . v ariou dss provid inform usag right , usag record , avail , ﬁnanc ( cost product incom content use ) .11.5 mpeg-7 415 fig . 11.29 mpeg-7 video segment •content descript –structur descript .aseg ds describ structur aspect content . segment section audiovisu object . relationship among segment often repres segment tree . relationship pure hierarch , segment graph use . theseg ds implement class object . ﬁve subclass : audiovisu segment ds , audio segment ds , still region ds , move region ds , video segment ds . subclass dss recurs subclasses.a still region ds , exampl , use describ imag term creation ( titl , creator , date ) , usag ( copyright ) , media ( ﬁle format ) , textual annot , color histogram , possibl textur descriptor , . initi region ( imag , case ) decompos sever region , turn dss.figur 11.29 show video segment marin rescu mission , person lower onto boat helicopt . three move region insid video segment . segment graph construct includ suchstructur descript composit video frame ( helicopt , person , boat ) spatial relationship motion ( , , close-to , move-toward , etc . ) region . –conceptu descript . involv higher level ( nonstructur ) descrip- tion content , event ds basketbal game laker ballgam , object ds john person , state ds semant properti given time locat , concept ds abstract notat “ freedom ” “ mystery. ” segment dss , concept dss also organ tree graph . •navig access –summari . provid video summari quick brows nav- igat content , usual present keyfram . fol- low dss support : summar ds , hierarchicalsummari ds , highlightlevel ds , sequentialsummari ds . hierarch summari provide416 11 mpeg video code : mpeg-1 , 2 , 4 , 7 fig . 11.30 video summari keyfram hierarchi multipl level , wherea sequenti summari often provid slide show audiovisu skim , possibl synchron audio text.figur 11.30 illustr summari video “ dragon-boat ” parad race park . summari organ three-level hierarchi . video segment level depict keyfram thumbnail size . –partit decomposit . refer view partit decompo- sition . view partit ( speciﬁ view dss ) describ differ space frequenc view audiovisu data , spatial view ( couldb spatial segment imag ) , tempor view ( tempor segment video ) , frequenc view ( wavelet subband imag ) , resolu- tion view ( thumbnail imag ) , . view decomposit dss specifi differ tree graph decomposit organ view audiovisu data , spacetre ds ( quad-tre imag decomposit ) . –variat content .avari ds speciﬁ variat origin data imag resolut , frame rate , color reduct , compress , . use server adapt audiovisu data deliveri network termin characterist given qualiti servic ( qo ) . •content organ –collect . collectionstructur ds group audiovisu content cluster . speciﬁ common properti cluster element relation- ship among cluster . –model .model dss includ probabl model ds , analyt model ds , classiﬁ ds extract model statist attribut featur collect . •user interact –userprefer . dss describ user prefer consumpt audio- visual content , content type , brows mode , privaci characterist , whether prefer alter agent analyz user behavior.11.5 mpeg-7 417 11.5.3 descript deﬁnit languag ( ddl ) mpeg-7 adopt xml schema languag initi develop www con- sortium ( w3c ) descript deﬁnit languag ( ddl ) . sinc xml schema languag design speciﬁc audiovisu content , extens made . without detail , mpeg-7 ddl follow compon : •xml schema structur compon – schema—th wrapper around deﬁnit declarations– primari structur compon , simpl complex type deﬁnit , attribut element declar – secondari structur compon , attribut group deﬁnit , identity- constraint deﬁnit , group deﬁnit , notat declar – “ helper ” compon , annot , particl , wildcard . •xml schema datatyp compon – primit deriv data type – mechan user deriv new data types– type check better xml 1.0 . •mpeg-7 extens – array matrix data types– multipl media type , includ audio , video , audiovisu present – enumer data type mimetyp , countrycod , regioncod , currencycod , andcharactersetcod –intellectu properti manag protect ( ipmp ) ds dss . 11.6 exercis 1 . know , mpeg video compress use i- , p- , b-frame . howev , earlier h.261 standard use b-frame . describ situat whichvideo compress would effect without b-frame . ( answer differ one fig . 11.1 . ) 2 . mpeg-1 standard introduc b-frame , motion-vector search rang accordingli increas [ −15,15 ] h.261 [ −512,511.5 ] .w h necessari ? calcul number b-frame consecut p- frame would justifi increas . 3 . b-frame provid obviou code advantag , increas snr low bitrat bandwidth save . disadvantag b-frame ? 4 . redraw fig . 11.8 mpeg-2 two-lay snr scalabl encod decod includ second enhanc layer . 5 . draw block diagram mpeg-2 encod decod ( ) snr spatial hybrid scalabl , ( b ) snr tempor hybrid scalabl . 6 . b-frame use refer frame motion compens ? sup- pose mode frame type speciﬁ refer frame.418 11 mpeg video code : mpeg-1 , 2 , 4 , 7 base encod frame memori predictiondctvlc bits_bas mc−base predictionframecurrentbits_enh motion vectorsvlcsnr enhanc encod motion estimationidct fabcd ++ ++ q−1 1q−1 2− −q1q2 fig . 11.31 mpeg-2 encod snr scalabl discuss trade-off use refer b-frame instead p-frame video sequenc ( i.e. , elimin p-frame complet ) . 7 . scalabl import issu video compress . ( ) describ snr scalabl mpeg-2 work . ( b ) fig . 11.31 , six checkpoint ( i.e. , , b , c , , e , f ) indic . assum block size transform code 4 ×4 , quantiz done f/prime ( u , v ) =round ( f ( u , v ) q ( u , v ) ) . quantiz matric q1=⎛ ⎜⎜⎝10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10⎞ ⎟⎟⎠ , q 2=⎛ ⎜⎜⎝2222 2222 2222 2222⎞ ⎟⎟⎠ . use ato indic 4 ×4 block checkpoint , a=⎛ ⎜⎜⎝32 5−12 0 70 0 0 00 0 0 00 0 0⎞ ⎟⎟⎠ , show number observ 5 checkpoint , i.e. , b , c , , e , f.11.6 exercis 419 8 . write program implement snr scalabl mpeg-2 . program abl work macroblock use quantiz step_siz output bits_bas andbits_enh bitstream . variable-length code step omit . 9 . mpeg-4 motion compens suppos vop-bas . end , vop still divid macroblock ( interior macroblock , boundari macroblock , etc . ) motion compens . ( ) potenti problem current implement ? improv ? ( b ) true vop-bas motion compens ? would com- pare current implement ? 10 . mpeg-1 , 2 , 4 known decod standard . compress algo- rithm , henc detail encod , left open futur improv develop . mpeg-4 , major issu video object segment —how obtain vops—i left unspeciﬁ . ( ) propos approach video object segment . ( b ) potenti problem approach ? 11 . pad introduc mpeg-4 vop-bas code ? name potenti problem pad . 12 . motion vector subpixel precis . particular , mpeg-4 allow quarter-pixel precis lumin vop . describ algorithm realiz precis . 13 . program project , comput sa-dct follow 8 ×8 block : 00001 600 0 408 1 63 2 1 68 0 4 0 16 32 64 32 16 0 0 0 32 64 128 64 32 0 400 3 26 4 3 20 0 01 6 0 0 3 2 0 00 00001 600 00000 000 0 14 . comput cost sa-dct , compar ordinari dct ? assum video object 4 ×4 squar middl 8 ×8 block . 15 . afﬁn transform combin yield composit afﬁn transform . prove composit transform exactli form matrix ( [ 001 ] ta last column ) 6 degre freedom , speciﬁ paramet a11 , a21 , a31 , a12 , a22 , a32 . 16 . mesh-bas motion code work rel well 2d anim face anim . main problem appli bodi anim ? 420 11 mpeg video code : mpeg-1 , 2 , 4 , 7 17 . major motiv behind develop mpeg-7 ? give three exampl real-world applic may beneﬁt mpeg-7 . 18 . two main shape descriptor mpeg-7 “ region-bas ” “ contour- based. ” , cours , numer way describ shape region contour . ( ) would favorit shape descriptor ? ( b ) would compar art css mpeg-7 ? refer 1 . l. chiariglion , develop integr audiovisu code standard : mpeg . proc . ieee 83 , 151–157 ( 1995 ) 2 . d.j . le gall , mpeg : video compress standard multimedia applic . commun . acm 34 ( 4 ) , 46–58 ( 1991 ) 3 . r. schafer , t. sikora , digit video code standard role video commun . proc . ieee 83 ( 6 ) , 907–924 ( 1995 ) 4.inform technology– code move pictur associ audio digit storag media 1.5 mbit/ . int . stand . : iso/iec 11172 , part 1–5 ( 1992 ) 5 . j.l . mitchel , w.b . pennebak , c.e . fogg , d.j . legal , mpeg video compress standard . ( chapman & hall , new ork , 1996 ) 6 . b.g . haskel , a. puri , a. netravali , digit video : introduct mpeg-2 . ( c h p n & hall , new ork , 1996 ) 7.inform technology—gener code move pictur associ audio inform . int . stand . : iso/iec 13818 , part 1–11 ( 2004 ) 8 . t. sikora , mpeg-4 video standard veriﬁc model . ieee tran . circuit syst . video technol . ( special issu mpeg-4 ) 9.inform technology—gener code audio-visu object . intern standard : iso/iec 14496 , part 1–28 ( 2012 ) 10 . a. puri , t. chen ( ed . ) , multimedia system , standard , network . ( marcel dekker , new ork , 2000 ) 11 . g. fernando et al. , java mpeg-4 ( mpeg-j ) , multimedia , system , standard , net- work , ed . a. puri , t. chen ( marcel dekker , new ork , 2000 ) , pp . 449–460 12.video code low bit rate commun . itu-t recommend h.263 , v ersion 1 , 1995 , v ersion 2 , 1998 , v ersion 3 , 2000 ( 2005 ) 13 . a. puri et al. , mpeg-4 natur video coding—part , multimedia , system , standard , network , ed . a. puri , t. chen ( marcel dekker , new ork , 2000 ) , pp . 205–244 14 . t. ebrahimi , f. dufaux , . nakaya , mpeg-4 natur video coding—part ii , multimedia , system , standard , network , ed . a. puri , t. chen ( marcel dekker , new ork , 2000 ) , pp . 245–269 15 . p . kauff , et al. , function code video use shape-adapt dct algorithm object- base motion predict toolbox . ieee tran . circuit syst . video technol . ( special issu onmpeg-4 ) 16.standard group 3 facsimil apparatu document transmiss . itu-t recom- mendat t.4 ( 1980 ) 17.facsimil code scheme code control function group 4 facsimil apparatu . itu-t recommend t.6 ( 1984 ) refer 421 18.inform technology—cod represent pictur audio information—progress bi-level imag compress . intern standard : iso/iec 11544 , also itu-t recommen- dation t.82 ( 1992 ) 19 . j.m . shapiro , embed imag code use zerotre wavelet coefﬁcient . ieee tran . signal process . 41 ( 12 ) , 3445–3462 ( 1993 ) 20 . g. wolberg , digit imag warp . ( comput societi press , lo alamito , ca , 1990 ) 21 . m.c . lee , et al. , layer video object code system use sprite afﬁn motion model . ieee tran . circuit syst . video technol . 7 ( 1 ) , 130–145 ( 1997 ) 22 . p . van beek , mpeg-4 synthet video , multimedia , system , standard , network , e . a. puri , t. chen , pp . 299–330 . ( marcel dekker , new ork , 2000 ) 23 . a.m. tekalp , p . van beek , c. toklu , b. gunsel , 2d mesh-bas visual object represent interact synthetic/natur digit video . proc . ieee 86 , 1029–1051 ( 1998 ) 24 . j.f . hugh , a. van dam , m. mcguir , d.f . sklar , j.d . foley , s.k . feiner , k. akeley , comput graphic : principl practic , 3rd edn . ( addison-wesley , 2013 ) 25 . a. watt , m. watt , advanc anim render techniqu . ( addison-wesley , 1992 ) 26.inform technology—th virtual realiti model language—part 1 : function speciﬁ- cation utf-8 encod . intern standard : iso/iec 14772-1 ( 1997 ) 27 . s.f . chang , t. sikora , a. puri , overview mpeg-7 standard . ieee tran . circuit syst video technol . ( special issu mpeg-7 ) ,11 ( 6 ) , 688–695 ( 2001 ) 28 . b. . manjunath , p . salembi , t. sikora ( ed . ) , introduct mpeg-7 : multimedia content descript interfac . ( wiley , 2002 ) 29 . h.g . kim , n. moreau , t. sikora , mpeg-7 audio beyond : audio content index retriev . ( wiley , 2005 ) 30.inform technology—multimedia content descript interfac . intern standard : iso/iec 15938 , part 1–13 ( 2002–2015 ) 31 . p . salembi , j. r. smith , mpeg-7 multimedia descript scheme . ieee tran . circuit syst . video technol , 11 ( 6 ) , 748–759 ( 2001 ) 32 . j . hunter , f. nack , overview mpeg-7 descript deﬁnit languag ( ddl ) pro- posal . signal process . : imag commun . 16 ( 1–2 ) , 271–293 ( 2001 ) 33 . t. sikora , mpeg-7 visual standard content description—-an overview . ieee tran . circuit syst . video technol . ( special issu mpeg-7 ) . 11 ( 6 ) , 696–702 ( 2001 ) 34 . b. . manjunath , j.-r. ohm , v .v . v asudevan , a. yamada , color textur descriptor . ieee tran . cicuit sy . video tech . 11 , 703–715 ( 2001 ) 35 . b. . manjunath , g.m . haley , w.i . . multiband techniqu textur classiﬁc segment , handbook imag video process , ed . a. bovik , pp . 367–381 . ( academ press , 2000 ) 36 . t.p . weldon , w.e . higgin , d.f . dunn , efﬁcient gabor ﬁlter design textur segment . pattern recogn . ( 1996 ) 37 . f. mokhtarian , a.k . mackworth , theori multiscal , curvature-bas shape represent planar curv . ieee tran pattern anal . mach . intel . 14 ( 8 ) , 789–805 ( 1992 ) 38 . j.j. koenderink , a.j . van doorn , surfac shape curvatur scale . imag vi . comput . 10 , 557–565 ( 1992 ) 39 . s. jeannin et al. , motion descriptor content-bas video represent . signal process . : imag commun . 16 ( 1–2 ) , 59–85 ( 2000 ) 12modern video code standard : h.264 , h.265 , h.266 12.1 overview video code standard h.264 , h.265 , h.266 jointli develop iso/iec mpeg itu-t vceg ( video code expert group ) . main objec- tive h.264 ( aka . vc ) h.265 ( aka . hevc ) improv code efﬁ-cienc deal ever-increas amount video data due increas video resolut frame rate , initi introduct high deﬁni- tion ( hd ) later ultra-high deﬁnit ( uhd ) video/tv . late , h.266 ( aka . vvc ) develop address issu , well emerg applic high dynam rang ( hdr ) video , 360 ◦video , other ( e.g. , panoram video ) . chapter , studi principl techniqu essenti superior per- formanc modern video code standard . last decad also wit success sever open royalty-fre cod- ing standard . exampl , googl develop vp8 vp9 ﬁrst employ compress youtub video . sinc 2018 successor v1 develop allianc open media ( aomedia ) use netﬂix , ini-ti android mobil app , sever stream video server internet . anoth exampl develop audio video code standard ( vs ) china independ intellectu properti right , current phase2 vs3 . larg , standard share video code principl h.264 , h.265 , h.266 . 12.2 h.264 joint video team ( jvt ) iso/iec mpeg itu-t vceg ( video code expert group ) develop h.264 video compress standard . formerlyknown work titl “ h.26l. ” version 1 h.264 approv may 2003 © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_12423424 12 modern video code standard : h.264 , h.265 , h.266 [ 1 ] . h.264 also known mpeg-4 part 10 , advanc video code ( vc ) [ 2–4 ] . often refer h.264/a vc ( h.264/mpeg-4 vc ) video code standard . h.264/a vc provid higher video code efﬁcienc , 50 % better com- pression mpeg-2 30 % better h.263+ mpeg-4 advanc simpl proﬁl , maintain qualiti compress video . cov- er broad rang applic , high bitrat low bitrat . vastli improv h.264 core featur , togeth new code tool offer signiﬁc improv compress ratio , error resili , subject qualiti pre- viou itu-t mpeg standard . sinc becom default standard variou applic , e.g. , blu-ray disk , hdtv broadcast , stream video internet , web softwar flash silverlight , app mobil portabl devic . similar previou video compress standard , h.264 speciﬁ block-bas hybrid code scheme support combin inter-pictur motion predict intra-pictur spatial predict , transform code predict residu error . , pictur separ macroblock ( 16 ×16 block ) , arbitrary-s slice group multipl macroblock self-contain unit . basic h.264/a vc encod shown fig . 12.1 . main featur h.264/a vc •integ transform 4 ×4 block . low complex , drift . •variabl block-siz motion compens , 16 ×16 4 ×4 luma imag . •quarter-pixel accuraci motion vector , accomplish interpol . transforminteg inv . integ transformsc & quantiz inv . quant . filter motion estimationmot compensationpredictionintra−framecodingentropyoutput code motion vectorscontrol data controlcod _ deblockingmacroblocksdivid +video frameinput scale & 16×16 fig . 12.1 basic encod h.264/a vc12.2 h.264 425 •multipl refer pictur motion compens . p b frame motion estim . •direct spatial predict intra-fram . •in-loop deblock ﬁltere . •context-adapt variabl length code ( ca vlc ) context-adapt binari arithmet code ( cabac ) . •more robust data error data loss , ﬂexibl synchron switch video stream produc differ decod . decod follow ﬁve major block : •entropi decod •invers quantiz transform residu pixel •motion compens intra predict •reconstruct •in-loop deblock ﬁlter reconstruct pixel . 12.2.1 motion compens variabl block-siz motion compens , inter-fram motion estim h.264 also block-bas . default , macroblock size 16 ×16 . macroblock also divid four 8 ×8partit . conduct motion estim , macroblock partit seg- ment smaller partit shown fig . 12.2 . top four option 16 ×16 macroblock ( so-cal type ) , bottom four option 8 ×8 partit ( so-cal 8 ×8 type ) . fig . 12.2 segment macroblock motion estim h.264 . top : segment macroblock . bottom : segment 8 ×8 partition426 12 modern video code standard : h.264 , h.265 , h.266 fig . 12.3 interpol fraction sampl h.264 . upper-cas letter indic pixel imag grid . lower-cas letter indic pixel half-pixel quarter-pixel posit quarter-pixel precis accuraci motion compens quarter-pixel precis luma imag . figur 12.3 illustr pixel valu half-pixel quarter-pixel posit deriv interpol . order deriv pixel valu half-pixel posit label band h , intermedi valu b1and h1are ﬁrst deriv appli 6-tap ﬁlter . b1=e−5f+20g+20h−5i+j h1=a−5c+20g+20m−5r+t . valu band hare obtain follow , clip rang 0–255 . b= ( b1+16 ) /greatermuch5 h= ( h1+16 ) /greatermuch5 . special symbol “ /greatermuch ” formula indic right shift . exampl , b= ( b1+16 ) /greatermuch5 equival b=round ( b1/25 ) =round ( b1/32 ) .howev , shift oper much efﬁcient compar round function call.12.2 h.264 427 middl pixel “ j ” obtain j1=aa1−5bb1+20h1+20m1−5cc1+dd1 , intermedi valu aa1 , bb1 , m1 , cc1 , dd1are deriv similar manner h1 . , valu ji obtain follow , clip rang 0–255 . j= ( j1+512 ) /greatermuch10 . pixel valu quarter-pixel posit label , c , , n , f , , k , qare obtain averag valu two nearest pixel integ half-pixelposit . exampl , a= ( g+b+1 ) /greatermuch1 . final , pixel valu quarter-pixel posit label e , g , p , rare obtain averag valu two nearest pixel half-pixel positionsin diagon direct . exampl , e= ( b+h+1 ) /greatermuch1 . addit option group pictur ( gop ) shown fig . 11.3 , previou mpeg standard , group pictur ( gop ) start end i-fram . , p-frame b-frame . either i-fram p-frame use refer frame . macroblock p-frame predict forward predict , macroblock b-frame predict combin forward predict backward predict . h.264 continu support “ classic ” gop structur . addit , support followinggop structur : b-framesth predict macroblock b-frame incur delay requir storag necessari i- p-frame bidirect predict . option , i- p-frame allow . although compress efﬁcienc rel low , suitabl certain applic , e.g. , videoconferencingwher minim delay desir . compat goal baselin proﬁl constrain baselin proﬁl h.264 . multipl refer frame order ﬁnd best match macroblock p-frame , h.264 allow nrefer frame . figur 12.4 illustr exampl n=4 . refer frame p 1isi0 , refer frame p2arei0and p1 , ... p4 , refer frame i0 , p1 , p2 , p3 . improv compress efﬁcienc , requir much comput motion estim encod . moreov , requir larger buffer store nframe encod decoder.428 12 modern video code standard : h.264 , h.265 , h.266 fig . 12.4 illustr multi-refer frame hierarch predict structur hierarch predict structur also allow h.264 ’ ﬂexibl predict option . exampl , gop start end i0and i12 . , 11 consecut b-frame , b1tob11 . first , b6i predict use i0and i12a refer . next , b3i predict use i0and b6 , b9i predict use b6and i12a refer . last , b1and b2are predict use i0and b3 , b4and b5are predict use b3and b6 , . hierarch structur seen layer . exampl : layer 0 : i0 , i12 ; layer 1 : b6 ; layer 2 : b3 , b9 ; layer 3 : b1 , b2 , b4 , b5 , b7 , b8 , b10 , b11 . usual , increasingli larger quantiz paramet associ higher layer control compress efﬁcienc . shown efﬁcient ibbp ... structur use previou video code standard tempor predict . 12.2.2 integ transform previou video code standard , h.264 employ transform code dif- ferenc macroblock obtain . one import featur h.264/a vc use integ transform . discret cosin transform ( dct ) previou video code standard known caus predict shift ﬂoat point calcul round error transform invers transform . also slow due mani ﬂoat point mul- tiplic . h.264 allow 4 ×4 block variou predict ; even intra-cod reli spatial predict follow transform code . henc , sensit predict shift . exampl , 4 ×4 block may predict neigh- bore intrablock , neighbor block may predict anoth neighbor block , . result , predict shift could accumul , caus larg error . given power accur p- i-predict scheme h.264 , rec- ogniz spatial correl residu pixel typic low . henc , simpl integer-precis 4 ×4 dct sufﬁcient compact energi . the12.2 h.264 429 integ arithmet allow exact invers transform processor elimin encoder/decod mismatch problem previou transform-bas codec . h.264 also provid quantiz scheme nonlinear step size obtain accur rate con- trol high low end quantiz scale . 4 ×4 transform h.264 approxim dct idct . involv integ , 16-bit arithmet oper . implement efﬁcient . discuss chap . 8 , 2d dct separ : realiz two consecut 1d transform , i.e. , vertic direct ﬁrst horizont direct . implement two matrix multipl : f=t×f×tt , fi input data , fi transform data , ti so-cal dct-matrix . dct-matrix orthonorm , i.e. , row orthogon , norm 1 . 4 ×4 dct-matrix t4can written t4=⎡ ⎢⎢⎣aaaa bc −c−b a−a−aa c−bb −c⎤ ⎥⎥⎦ a=1/2 , b=√ 2 2cosπ 8 , c=√ 2 2cos3π 8 . deriv scale 4 ×4 integ transform approxim t4 , simpli scale entri t4up round nearest integ [ 5 ] : h=round ( α·t4 ) . ( 12.1 ) α=26 , h=⎡ ⎢⎢⎣13 13 13 13 17 7 −7−17 13−13−13 13 7−17 17 −7⎤ ⎥⎥⎦ similar t4 , matrix nice properti : row orthogon ; also norm , 4 ×132=2× ( 172+72 ) . howev , matrix dynam rang gain 52 ( i.e. , 4 ×13 ) . sinc use twice f= h×f×htin order transform column row f , total gain 522=2704 . log22704≈11.4 , would requir 12 bit coefﬁcient fthan number bit requir data origin f. would make 16-bit arithmet insufﬁci would requir 32-bit arithmet . henc , propos [ 5 ] thatα=2.5 eq . 12.1 . yield h=⎡ ⎢⎢⎣1111 21−1−2 1−1−11 1−22−1⎤ ⎥⎥⎦ ( 12.2 ) 430 12 modern video code standard : h.264 , h.265 , h.266 new matrix still orthogon , although row longer norm . restor orthonorm properti , could simpli deriv follow matrix ¯hbi divid row entri hby/radicalbig/summationtext jh2 ij , hiji jth entri theith row h. howev , would longer integ transform . ¯h=⎡ ⎢⎢⎣1/21 /21 /21 /2 2/√ 10 1 /√ 10−1/√ 10−2/√ 10 1/2−1/2−1/21 /2 1/√ 10−2/√ 10 2 /√ 10−1/√ 10⎤ ⎥⎥⎦ h.264 implement , normal issu postpon . merg quantiz process next step , sinc simpli adjust val- ue quantiz matrix achiev object quantiz andnorm . orthogon , could use h ta invers transform h−1 , long normal issu taken care . , sinc also resolv issu later de-quant step , simpli introduc ad hoc invers transform hinvto use hinv=⎡ ⎢⎢⎣1 111 /2 11/2−1−1 1−1/2−11 1−11−1/2⎤ ⎥⎥⎦ ( 12.3 ) hinvi basic ht , second fourth column scale 1/2 . dynam rang input data hinvi larger toh . henc , scale appli column would otherwis higher dynam rang gain . h.264 also support 8 ×8 integ transform h8×8.i ti sa si ne q . 12.4.w e use h , 4 ×4 version , discuss unless otherwis note . h8×8=⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣88888888 12 10 6 3 −3−6−10−12 84 −4−8−8−448 10−3−12−6 6 12 3 −10 8−8−888 −8−88 6−12 3 10 −10−31 2 −6 4−88 −4−48 −84 3−61 0 −12 12 −10 6 −3⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ ( 12.4 ) 12.2.3 quantiz scale previou video compress standard , quantiz use transform . instead design simpl quantiz matric , h.264 sophisticateddesign [ 5 ] accomplish task quantiz scale ( normaliza- tion ) h.12.2 h.264 431 integ transform quantiz letfb 4 ×4 input matrix , ˆfthe transform quantiz output . forward integ transform , scale , quantiz implement accordingto ˆf=round/bracketleftbig ( h×f×h ) ·mf/215/bracketrightbig . ( 12.5 ) , “ × ” denot matrix multipl , “ · ” denot element-by-el multipl . eq . 12.2.mfi 4 ×4 quantiz matrix deriv mwhich 6 ×3 matrix ( see tabl 12.1 ) .qpi quantizaton paramet . 0≤qp < 6 , mf=⎡ ⎢⎢⎢⎢⎢⎢⎣m ( qp,0 ) ( qp,2 ) ( qp,0 ) ( qp,2 ) ( qp,2 ) ( qp,1 ) ( qp,2 ) ( qp,1 ) ( qp,0 ) ( qp,2 ) ( qp,0 ) ( qp,2 ) ( qp,2 ) ( qp,1 ) ( qp,2 ) ( qp , 1 ) ⎤ ⎥⎥⎥⎥⎥⎥⎦ ( 12.6 ) forqp≥6 , element ( qp , k ) replac ( qp % 6 , k ) /2 ⌊qp/6⌋ . quantiz follow anoth scale step , implement right shift “ /greatermuch15. ” invers integ transform de-quant let˜fb de-quant invers transform result . scale , de- quantiz , invers integ transform implement accord ˜f=round/bracketleftbig ( hinv× ( ˆf·vi ) ×hinvt ) /26/bracketrightbig . ( 12.7 ) tabl 12.1 matrix m—use gener mf qp posit mf posit mf remain ( 0,0 ) , ( 0,2 ) ( 1,1 ) , ( 1,3 ) mfposit ( 2,0 ) , ( 2,2 ) ( 3,1 ) , ( 3,3 ) 0 13107 5243 8066 1 11916 4660 7490 2 10082 4194 6554 3 9362 3647 5825 4 8192 3355 5243 5 7282 2893 4559432 12 modern video code standard : h.264 , h.265 , h.266 tabl 12.2 matrix v—use gener vi qp posit vi posit vi remain ( 0,0 ) , ( 0,2 ) ( 1,1 ) , ( 1,3 ) viposit ( 2,0 ) , ( 2,2 ) ( 3,1 ) , ( 3,3 ) 0 10 16 13 1 11 18 14 2 13 20 16 3 14 23 18 4 16 25 20 5 18 29 23 hinvi eq . 12.3.vii 4 ×4 de-quant matrix deriv vwhich 6 ×3 matrix ( see tabl 12.2 ) . 0 ≤qp < 6 , vi=⎡ ⎢⎢⎢⎢⎢⎢⎣v ( qp,0 ) v ( qp,2 ) v ( qp,0 ) v ( qp,2 ) v ( qp,2 ) v ( qp,1 ) v ( qp,2 ) v ( qp,1 ) v ( qp,0 ) v ( qp,2 ) v ( qp,0 ) v ( qp,2 ) v ( qp,2 ) v ( qp,1 ) v ( qp,2 ) v ( qp,1 ) ⎤ ⎥⎥⎥⎥⎥⎥⎦ ( 12.8 ) forqp≥6 , element v ( qp , k ) replac v ( qp % 6 , k ) ·2 ⌊qp/6⌋ . de-quant also follow anoth scale step , imple- ment right shift “ /greatermuch6. ” 12.2.4 exampl h.264 integ transform quantiz section show exampl h.264 integ transform quantiz invers use variou quantiz paramet qp . input data 4×4 matrix fwith arbitrari valu ; transform quantiz coefﬁcient ˆf.mfandviar quantiz de-quant matric , ˜fi de-quant invers transform output . comparison , also show compress loss /epsilon1=f−˜f . order improv rate-distort perform , h.264 adopt dead-zon quantiz ( also known midtread discuss chap . 8 ) . describ function turn real number xto integ z , follow : z=⌊x+b⌋ , xi scale valu discuss last section . default , b=0.5 , function equival round function speciﬁ eq . 12.5 or12.2 h.264 433 f fˆf vi˜f =f−˜f qp=0 f fˆf vi˜f =f−˜f qp=6 f fˆf vi˜f =f−˜f qp=1 8 f fˆf vi˜f =f−˜f qp=3 0 fig . 12.5 exampl h.264 integ transform quantiz variou qp eq.12.7 . minim quantiz error , h.264 actual adopt adapt quan- tizat width dead zone control b . exampl , b=1/3 intra-cod b=1/6 inter-cod . simplic , follow- ing exampl , use b=0.5.434 12 modern video code standard : h.264 , h.265 , h.266 ( b ) cdefgh ab k lj1 4 56 78 03 ( ) fig . 12.6 h.264 intra-fram predict . aintra_4 ×4 predict use neighbor sampl m.beight direct intra_4 ×4 predict mode 0 : vertic mode 5 : vertical−rightcdb k lj8 neighbor , laverag ofmod 2 : dc abcdmod 1 : horizont j k lia jiabc mmode 3 : diagon down−left mode 4 : diagon down−right k l mode 6 : horizontal−down mode 7 : vertical−left mode 8 : horizontal−up e abcd fgh ba j k lcd b j k lcdd dcba dcb ah gf e j lk fig . 12.7 nine intra_4 ×4 predict mode h.264 intra-fram prediction12.2 h.264 435 figur 12.5a show result qp=0 . option offer least possibl compress loss . valu mfandviar determin accord eq . 12.6 and12.8 . sinc scale-down fvalu quantiz step , reconstruct ˜fi exactli f , i.e. , ˜f=f . figur 12.5b show result qp=6 . expect , compar corre- spond matrix entri qp=0 , valu mfare reduc half , valu viar twice . quantiz factor approxim 1.25 ( i.e. , equival qstep ≈1.25 ) . result , ˜f/negationslash=f . slight loss observ /epsilon1 . similarli , qp=18 , result fig . 12.5c . valu mfand valu viar decreas increas , respect , factor 4 compar qp=6 . quantiz factor approxim 5 ( i.e. , equival qstep ≈5 ) . loss shown /epsilon1i signiﬁc . perhap interest result shown fig . 12.5d qp=30 . quantiz factor approxim 20 ( i.e. , equival qstep ≈20 ) . except larger quantiz dc valu ˆfthat remain nonzero , ac coefﬁcient becom zero . result , reconstruct ˜fha 80 entri . compress loss /epsilon1i longer accept . 12.2.5 intra-cod h.264 exploit much spatial predict previou video standard mpeg-2 h.263+ . intra-cod macroblock predict use theneighbor reconstruct pixel ( use either intra- inter-cod reconstruct pixel ) . similar variabl block size inter-pictur motion compens , differ intra predict block size ( 4 ×4o r1 6 ×16 ) chosen intra-cod macroblock . shown fig . 12.6 , nine predict mode 4 ×4 block intra_4 ×4 . figur 12.7 illustr detail . predict mode 0 , 1 , 3 , 4 fairli straightforward . exampl , mode 0 , valu pixel use predict valu pixel ﬁrstcolumn ( i.e. , column ) , valu pixel b use predict valu pixel second column , etc . mode 2 ( dc ) special mode averag eight previous code neighbor ( l ) useda predict valu pixel 4 ×4 block . mode 5 ( vertical-right ) , mode 6 ( horizontal-down ) , mode 7 ( vertical-left ) , mode 8 ( horizontal-up ) similar . shown fig . 12.7 , direct predict mode 5 right ratio 2:1 ( i.e. , 2 pixel 1 pixel right , approxim 26.6 ◦to right ) . work well pixel second fourth row . exampl , row column indic ofth 4×4 block rang 0 .. 3 , predict valu pixel [ 1,1 ] [ 3,2 ] valu . howev , pixel ﬁrst third row abl use singl valu previous code neighbor . instead , itmust extrapol two . exampl , predict valu pixel [ 0,0 ] [ 2,1 ] proport combin valu a.436 12 modern video code standard : h.264 , h.265 , h.266 predict mode , predict valu actual valu com- pare produc predict error . mode produc least predict error chosen predict mode block . predict error ( residu ) sent transform code 4 ×4 integ transform employ . 4 ×4 block macroblock may differ predict mode . sophist intra predict power drastic reduc amount ofdata transmit tempor predict fail . four predict mode 16 ×16 block intra_16 ×16 . mode 0 ( vertic ) , mode 1 ( horizont ) , mode 2 ( dc ) similar tointra_4 ×4 except larger block size . mode 3 ( plane ) uniqu 16×16 block , plane ( linear ) function ﬁtted upper left sampl 16 ×16 block predict . summari , follow four mode speciﬁ intra-cod : •intra_4 ×4 luma macroblock •intra_16 ×16 luma macroblock •intra-cod chroma macroblocks—it use four predict mode intra_16 ×16 luma . predict block size 8 ×8 4:2:0 , 8 ×16 4:2:2 , 16 ×16 4:4:4 chroma sampl . •i_pcm ( puls code modul ) —bypass spatial predict transform code , directli send pcm code ( ﬁxed-length ) luma chroma pixel valu . invok rare case predict mode fail produc data compression/reduct . 12.2.6 in-loop deblock filter one promin deﬁcienc block-bas code method genera-t unwant visibl block structur . pixel block boundari usual reconstruct less accur : tend look like interior pixel block , henc artiﬁci appear block . h.264 speciﬁ signal-adapt deblock ﬁlter set ﬁlter appli 4 ×4 block edg . filter length , strength , type ( deblock- ing/smooth ) vari , depend macroblock code paramet ( intra- orinter-cod , reference-fram differ , coefﬁcient code , etc . ) spatial activ- iti ( edg detect ) , block artifact elimin without distort visual featur . h.264 deblock ﬁlter import increas subject qualityof video . shown fig . 12.1 , h.264 deblock ﬁltere take place loop , invers transform encod , decod block data fed tomot estim . figur 12.8depict simpliﬁ 1d edg , height pixel p 0 , q0 , etc. , indic valu . function deblock ﬁltere basic smooth block edg . exampl , “ 4-tap ﬁltere ” take weight averag valu p1 , p0 , q0 , q1to gener new p0orq0.12.2 h.264 437 fig . 12.8 deblock 1d edg block boundari appar , real edg across block boundari need protect deblock ﬁltere . deblock ﬁltere p0andq0wil appli follow criteria met : |p0−q0| < α ( qp ) , |p0−p1| < β ( qp ) , |q0−q1| < β ( qp ) , αandβar threshold , function quantiz paramet qpa deﬁn standard . lower qpi smaller . qpi small , rel signiﬁc differ , e.g. , |p0−q0|i like caus real edg . addit p0andq0 , deblock ﬁltere p1orq1wil appli |p0−p2| < β ( qp ) or|q0−q2| < β ( qp ) 12.2.7 entropi code h.264 develop set sophist entropi code method . entropy_coding_mod = 0 , simpl exponential-golomb ( exp-golomb ) code use header data , motion vector , nonresidu data , complex context-adapt variabl length code ( cavlc ) use quantiz residu coefﬁcient . entropy_coding_mod = 1 , context-adapt binari arithmet code ( cabac ) use ( see sect . 12.2.9 ) .438 12 modern video code standard : h.264 , h.265 , h.266 simpl exp-golomb code simpl exponential-golomb ( exp-golomb ) code use header data , etc. , so-cal order-0 exp-golomb code ( eg 0 ) . binari code , consist three part : [ preﬁx ] [ 1 ] [ sufﬁx ] preﬁx sequenc lzero . given unsign ( posit ) number nto code , l=⌊log2 ( n+1 ) ⌋ . sufﬁx si binari number n+1−2lrepres inlbit . shown tabl 12.3 , unsign n=4 , l=⌊log2 ( 4+1 ) ⌋=2 , preﬁx 00 , sufﬁx si binari number s=4+1−22=1 repres 2 bit , i.e. , 01 . henc , exp-golomb code n=4 00101 . decod exp-golomb codeword eg 0for unsign n , follow step follow : 1 . read sequenc consecut zero , l=number_of_zero . 2 . skip next “ 1. ” 3 . read next lbit assign s. 4.n=s−1+2l . unsign number use indic , e.g. , macroblock type , refer frame index , etc . sign number , e.g. , motion vector differ , simpli besqueez produc new set tabl entri list second column ( tabl 12.3 ) . tabl 12.3 order-0 exp-golomb codeword ( eg 0 ) unsign n sign n codeword 0 0 1 1 1 010 2 −1 011 3 2 00100 4 −2 00101 5 3 00110 6 −3 00111 7 4 0001000 8 −4 0001001 ......... 12.2 h.264 439 order-k exp-golomb code ( eg k ) gener , exp-golomb code higher order , i.e. , order-k eg k. similarli , binari code consist three part : [ preﬁx ] [ 1 ] [ sufﬁx ] . preﬁx sequenc lzero . given unsign ( posit ) number nto code , l=⌊log2 ( n/2k+1 ) ⌋ . sufﬁx si binari number n+2k ( 1−2l ) repre- sent l+kbit . exampl , eg 1code n=4 0110 . l=⌊log2 ( 4/21+1 ) ⌋ = 1 , preﬁx 0 ; sufﬁx binari represent 4 +21 ( 1−21 ) =2 , l+k=1+1=2 bit , 10 . tabl 12.4 provid exampl ﬁrst- second-ord exp-golomb code nonneg number . decod order-k exp-golomb codeword eg kfor unsign n , follow step follow : 1 . read sequenc consecut zero , l=number_of_zero . 2 . skip next “ 1. ” 3 . read next l+kbit assign s. 4.n=s−2k ( 1−2l ) . tabl 12.4 first- second-ord exp-golomb codeword ( eg 1and eg 2 ) unsign n eg 1codeword eg 2codeword 0 10 100 1 11 101 2 0100 110 3 0101 111 4 0110 01000 5 0111 01001 6 001000 01010 7 001001 01011 8 001010 01100 9 001011 01101 10 001100 01110 11 001101 01111 12 001110 0010000 13 001111 0010001 14 00010000 0010010 15 00010001 0010011 ......... 440 12 modern video code standard : h.264 , h.265 , h.266 12.2.8 context-adapt variabl length code ( cavlc ) previou video code standard mpeg-2 h.263 use ﬁxed vlc . ca vlc [ 6,7 ] , multipl vlc tabl predeﬁn data type ( zero-run , level , etc . ) , predeﬁn rule predict optim vlc tabl base context , e.g. , previous decod neighbor block . known matric ( default 4 ×4 ) contain quantiz fre- quenci coefﬁcient residu data typic spars , i.e. , contain mani zero . even nonzero , quantiz coefﬁcient higher frequenc often+1o r−1 ( so-cal “ trailing_1 ” ) . ca vlc exploit characterist care extract follow paramet current block data : •total number nonzero coefﬁcient ( totalcoeff ) number trail ±1 ( trailing_1 ) . •sign trailing_1 . •level ( sign magnitud ) nonzero coefﬁcient ( trailing_1 ) . •total number zero last nonzero coefﬁcient . •run zero ( zeros_left run_befor ) nonzero coefﬁcient . figur 12.9show exampl 4 ×4 block residu data transform quantiz . zigzag scan , 1d sequenc s030−210−11000000 0 0 . tabl 12.5 give detail ca vlc code gener . nonzero coefﬁcient process revers order , i.e. , last one index “ 4 ” ( trailing_1 [ 4 ] ) examin ﬁrst , forth . brieﬂi explain code gener process exampl . •a code 0000100 gener totalcoeff = 5 , trailing_1 = 3 . look “ tabl 9.5—coeff_token map totalcoeff trailingon ” h.264 standard ( 2003 ) . observ , gener , number nonzero coefﬁcient neighbor block similar , henc code coeff_token context-adapt . pair totalcoeff trailing_1 , code assign one four possibl valu depend number nonzero coefﬁcient block left current block . neigh- fig . 12.9 exampl : 4 ×4 block data ca vlc encod 0000 0 00 003 110 −1 −2 012.2 h.264 441 tabl 12.5 ca vlc code gener data fig . 12.9 data valu code coeff_token totalcoeff = 5 , trailing_1 = 3 0000100 trailing_1 [ 4 ] sign+ 0 trailing_1 [ 3 ] sign− 1 trailing_1 [ 2 ] sign+ 0 level [ 1 ] −2 ( sufﬁxlength = 0 ) 0001 ( preﬁx ) level [ 0 ] 3 ( sufﬁxlength = 1 ) 001 ( preﬁx ) 0 ( sufﬁx ) total zero 3 111 run_befor [ 4 ] zeros_left = 3 , run_befor = 0 11 run_befor [ 3 ] zeros_left = 3 , run_befor = 1 10 run_befor [ 2 ] zeros_left = 2 , run_befor = 0 1 run_befor [ 1 ] zeros_left = 2 , run_befor = 1 01 run_befor [ 0 ] zeros_left = 1 , run_befor = 1 code requir bore block small number nonzero , code assign favor small totalcoeff current block use ( i.e. , small totalcoeff assign short code larg totalcoeff assign particularli long code ) , vice versa . exampl , assum number nonzero coefﬁcient two neighbor block less 2 . •sign “ + ” assign code 0 , “ − ” code 1 . •the choic vlc code level context-adapt ; depend magnitud recent code level . revers order , ﬁrst nonzerocoefﬁci −2 . initi , sufﬁxlength = 0 , code −2 0001 ( preﬁx ) . afterward , sufﬁxlength increas 1 , henc next nonzero 3 get code 001 ( preﬁx ) 0 ( sufﬁx ) . magnitud level tend increas ( examinedin revers order ) , sufﬁxlength increas adapt accommod larger magnitud . detail , reader refer [ 4,6,7 ] . •the total number zero 3 . get code 111 . •the last ﬁve row tabl 12.5 record inform run zero current block . exampl , last nonzero coefﬁcient “ 1 , ” 3 zero front , zero immedi front . code 11 look upfrom tabl 9.10 h.264 standard . illustr , extract part tabl 12.6 . also explain code next three row , 10 1 01 . come last row , one zero left ( last ) nonzerocoefﬁci , encod decod unambigu determin , code run_befor need . exampl , result sequenc code 0000100 0 1 0 0001 001 0 111 11 10 1 01 . base , decod abl reproduc block data.442 12 modern video code standard : h.264 , h.265 , h.266 tabl 12.6 code variou run_befor run_befor zeros_left 1 2 3 4 5 6 > 6 0 1 1 11 11 11 11 111 1 0 01 10 10 10 000 110 2 – 00 01 01 011 001 101 3 – – 00 001 010 011 100 4 – – – 000 001 010 011 5 – – – – 000 101 010 ... 12.2.9 context-adapt binari arithmet code ( cabac ) vlc-base entropi code method ( includ ca vlc ) inefﬁci deal- ing symbol probabl greater 0.5 , usual minimum of1 bit assign symbol , could much larger self- inform measur log 21 pi , pii symbol ’ probabl . better code efﬁcienc h.264 main high proﬁl , context-adapt binari arith-met code ( cabac ) [ 8 ] use data quantiz residu coefﬁcient entropy_coding_mod = 1 . shown fig . 12.10 , cabac three major compon : •binar . non-binari data convert binari bit ( bin ) string ﬁrst sinc cabac use binari arithmet code . five scheme use thebinar : ( ) unari ( u ) —for n≥0 , n 1s follow termin 0 . exampl , 111110 5 . ( b ) truncat unari ( tu ) —similar u , without termin 0 . ( c ) kth order exp-golomb code . ( ) concaten ( ) ( c ) . ( e ) fixed-length binari scheme . •context model . step deal context model select access . regular code mode symbol , e.g. , macroblock type , mvd , infor- mation predict mode , inform slice macroblock control , residu data . variou “ context model ” built store condit prob- abil bin binar symbol 1 0 . probabl model deriv statist context , i.e. , recent code symbol bin . bypass code mode use context model ; use speed code process . •binari arithmet code . efﬁcienc , binari arithmet code method develop [ 8 ] . brief descript binari arithmet code h.264 . shown chap . 7 , arithmet code involv recurs subdivis current rang . numer multipl involv main disadvan- tage term comput cost compar entropi coding12.2 h.264 443 fig . 12.10 block diagram cabac h.264 method . binari arithmet code involv two symbol , number multipl greatli reduc . binari case , name two symbol lp ( least probabl symbol ) mp ( probabl symbol ) , rang r , lower bound rasl . ( note : lp upper interv mp lower interv r. ) proba- biliti lp plp , pmps=1−plp , follow procedur employ gener next rang given new symbol : procedur calcul rang binari arithmet code begin ifsi mp r=r× ( 1−plp ) ; els // si lp . l=l+r× ( 1−plp ) ; r=r×plp ; end howev , multipl r×plpswould comput expens . variou “ multiplication-fre ” binari arithmet code scheme devel-444 12 modern video code standard : h.264 , h.265 , h.266 ope , exampl , q-coder binari imag , improv qm-coder , mq-coder adopt jpeg 2000 . h.264 binari arithmet code method develop marp et al . [ 8 ] so-cal m-coder ( modulo coder ) . , multipl r×plpsi replac tabl lookup . regular bin code mode , tabl 4 ×64 pre-calcul product valu allow 4 differ- ent valu rand 64 valu plp . ( bypass bin code mode assum uniform probabl model , i.e. , pmps≈plpsin order simplifi speed process . ) appar , due limit size lookup tabl , precis product valu limit . multiplication-fre method henc known perform- ingreduced-precis arithmet code . previou studi show impact reduc precis code length minim . implement cabac tremend amount detail . reader refer [ 8 ] detail discuss . 12.2.10 h.264 proﬁl , number proﬁl provid suit need variou applic rang mobil devic broadcast hdtv . figur 12.11 provid overview h.264 proﬁl [ 4,9 ] . baselin proﬁl baselin proﬁl h.264 intend real-tim convers applic , videoconferenc . contain core code tool h.264 discuss follow addit error-resili tool , allow error-pron carrier ip wireless network : fig . 12.11 h.264 proﬁles12.2 h.264 445 •arbitrari slice order ( aso ) . decod order slice within pictur may follow monoton increas order . allow decod out-of-ord packet packet-switch network , thu reduc latenc . •flexibl macroblock order ( fmo ) . macroblock decod order , checkerboard pattern , raster scan order . use error- prone network , loss slice result loss macroblock scatter inth pictur , easili mask human eye . featur also help reduc jitter latenc , decod may decid wait late slice still abl produc accept pictur . •redund slice . redund copi slice decod , improv error resili . main proﬁl main proﬁl deﬁn h.264 repres non-low-delay applic standard deﬁnit ( sd ) digit broadcast tv store medium . main proﬁlecontain baselin proﬁl featur ( except aso , fmo , redund slice ) plu follow non-low-delay higher complex featur , maximum com- pression efﬁcienc : •b slice . bi-predict mode h.264 made ﬂexibl exist standard . bi-predict pictur also use refer frames.two refer frame macroblock tempor direct , long avail refer frame buffer . henc , addit normal forward + backward bi-predict , legal backward + backwardor forward + forward predict well . •context-adapt binari arithmet code ( cabac ) . code mode replac vlc-base entropi code binari arithmet code use differ adapt statist model differ data type context . •weight predict . global weight ( multipli offset ) modifi motion-compens predict sampl speciﬁ slice , predict light chang global effect , fade . extend proﬁl extend proﬁl ( proﬁl x ) design new video stream appli-c . proﬁl allow non-low-delay featur , bitstream switch featur , also error-resili tool . includ baselin proﬁl featur plu thefollow : •b slice •weight prediction.446 12 modern video code standard : h.264 , h.265 , h.266 •slice data partit . partit slice data differ import separ sequenc ( header inform , residu inform ) impor- tant data transmit reliabl channel . •sp ( switch p ) si ( switch ) slice type . slice con- tain special tempor predict mode , allow efﬁcient switch bitstream produc differ decod . also facilit fast forward/backward andrandom access . high proﬁl h.264/a vc also four high proﬁl applic demand higher video qualiti , i.e. , high deﬁnit ( hd ) . •high proﬁl —thi proﬁl adopt blu-ray disk format dvb hdtv broadcast . support 8 ×8 integ transform part pictur much detail , 4 ×4 integ transform part detail . also allow 8 ×8 intra predict better code efﬁcienc especi higher resolut video . provid adjust quantiz scale matric , separ quantiz paramet cb cr . also support monochrom video ( 4:0:0 ) . •high 10 proﬁl —support 9 10 bit per sampl . •high 4:2:2 proﬁl —support 4:2:2 chroma subsampl . •high 4:4:4 predict proﬁl —it support 4:4:4 chroma sampl , 14 bit per sampl , code separ color plane , efﬁcient lossless predict code . 12.2.11 h.264 scalabl video code ( svc ) thescal video code ( svc ) extens h.264/a vc standard approv 2007 [ 10 ] . provid bitstream scalabl especi import mul- timedia data transmiss variou network may differ bandwidth . similar mpeg-2 mpeg-4 , h.264/a vc svc provid tempor scalabl , spatial scalabl , qualiti scalabl , possibl combin . compar previou standard , code efﬁcienc greatli improv . functionssuch bitrat power adapt , grace degrad lossi network transmiss also provid . cover issu tempor scalabl , spatial scalabl , qualiti ( snr ) scalabl , possibl combin sufﬁcient detail mpeg-2 chap . 11 . sinc fundament concept approach similar , discuss topic detail chapter . inform h264/a vcsvc , reader refer [ 10 ] annex g h.264/a vc standard.12.2 h.264 447 12.2.12 h.264 multiview video code ( mvc ) multiview video code ( mvc ) emerg issu . potenti applic new area free viewpoint video ( fvv ) user specifi prefer view . merkl et al . [ 11 ] describ possibl mvc predict structur . figur 12.12 show small exampl 4 view . two import featur •interview predict —sinc appar redund among multipl view , ippp structur , exampl , employ so-cal key pictur ( ﬁrst ninth pictur view ﬁgure ) . interview predict structur cours extend structur , e.g. , ibbp . would even beneﬁci mani view involv . •hierarch b pictur —for tempor predict view , hierarchi b pictur , e.g. , b1 , b2 , b3 , similar one discuss sect . 12.2.1 iview 0 : view 1 : view 2 : view 3 : p p p p p pb3 b3 b3 b3b1 b2 b2 b3 b3 b3 b3 b1 b2 b2 b3 b3 b3 b3 b1 b2 b2 b3 b3 b3 b3 b1 b2 b2 b3 b3 b3 b3 fig . 12.12 h.264 mvc predict structure448 12 modern video code standard : h.264 , h.265 , h.266 employ . made feasibl h.264/a vc ﬂexibl support variou predict scheme picture/sequ level . discuss earlier , increasingli larger quantiz paramet usual appli downth hierarchi control compress efﬁcienc . inform h264/a vc mvc , reader refer [ 12 ] annex h h.264/a vc standard . 12.3 h.265 high efﬁcienc video code ( hevc ) [ 13,14 ] standard jointli develop joint collabor team video code ( jct-vc ) group itu- vceg ( video code expert group ) iso/iec mpeg . version 1 thestandard approv april 2013 . iso/iec , hevc becam mpeg-h part 2 ( iso/iec 23008-2 ) . also known itu-t recommend h.265 [ 15 ] , term use book . develop h.265 larg motiv two factor : ( ) need improv code efﬁcienc due ever-increas video resolut ( e.g. , 7,680 ×4,320 8k uhdtv ) . ( b ) need speed complex coding/decod method exploit increasingli avail parallel process devic algorithm . initi goal 50 % reduct size compress video ( visual qualiti ) h.264 , report goal wasexceed . superior compress perform mpeg-2 , h.264 h.265 current lead candid carri whole rang video content mani potenti applic . default format color video h.265 ycbcr . main proﬁl , chroma subsampl 4:2:0 . main featur h.265 •variabl block-siz motion compens , 4 ×4u pt o6 4 ×64 luma imag . macroblock structur replac quad-tre structur code block variou level size . •explor parallel process . •integ transform variou size , 4 ×4 , 8×8 , 16×16 32 ×32 . •improv interpol method quarter-pixel accuraci motion vector . •expand direct spatial predict ( 33 angular direct ) intra-cod . •the potenti use discret sine transform ( dst ) luma intra-cod . •in-loop ﬁlter includ deblocking-ﬁlt sampl adapt offset ( sao ) . •onli context-adapt binari arithmet code ( cabac ) use , i.e. , ca vlc.12.3 h.265 449 12.3.1 motion compens previou video code standard , h.265 still use technolog hybrid cod- ing , i.e. , combin inter/intra predict transform code predict residu error . variabl block size use inter/intra predict h.264 . howev , partit predict transform block encourag order reduc predict error . unlik previou video code standard , h.265 use simpl ﬁxed structur macroblock . instead , quad-tre hierarchi variou block introduc efﬁcienc . •ctb andctu ( code tree block code tree unit ) : ctb largest block : root quad-tre hierarchi . size luma ctb n×n , ncan 16 , 32 , 64 . chroma ctb half-siz , i.e. , n/2×n/2 . ctu consist 1 luma ctb 2 chroma ctb . •cbandcu ( code block code unit ) : ctb consist cb organ quad-tre structur . cb squar block small 8 ×8i n luma 4 ×4 chroma imag . cb ctb travers code z-order . one luma cb two chroma cb form cu . •pbandpu ( predict block predict unit ) : cb split pb purpos predict . predict mode cu intra- pictur ( spatial ) inter-pictur ( tempor ) . intra predict , size cb pb usual ; except cb 8 ×8 , split 4 pb allow pb may differ predict mode . inter predict , luma chroma cb split one , two , four pb , i.e. , pb may squar albeit alway rectangular . pu contain luma andchroma pb predict syntax . •tbandtu ( transform block transform unit ) : cb split tb purpos transform code residu error . repres quad-tre structur , henc efﬁcient . rang tb size 32 ×32 4 ×4 . h.265 , tb allow span across pb boundari inter-predict cu order gain higher code efﬁcienc . tu consist tb luma chroma imag . figur 12.13 illustr exampl ctb partit cb tb quad-tre structur . exampl , origin ctb 64×64 smallest tb 4 ×4 . slice tile h.264 , h.265 support slice length consist sequenc ctu ( fig . 12.14 ) . i-slic , p-slice , b-slices.450 12 modern video code standard : h.264 , h.265 , h.266 ( b ) ( ) fig . 12.13 partit ctb . ath ctb partit ( solid lines—cb boundari , dot line—tb boundari ) . bthe correspond quad-tre ctu ctu ctu ctu ctu ctuctuctuctu ctu ctu ctu ctuctuctuctu ctu ctuctuslic 2slice 1 slice n utcu tcu tc utcu tcctuctuctu ctu ctu ctu ctuctu ctu ctuutcu tcu tc . . .. . . ( ) slice ( b ) tile ( c ) wavefrontsthread 3 thread 4thread 1 thread 2. . . . . .. . . tile mtile 1 tile 2ctu ctu ctu utcu tcu tcu tcctu ctu utcu tc ctu ctu utcu tc ctuutcu tc ctuctu utcu tcctu fig . 12.14 slice , tile , wavefront parallel process ( wpp ) h.265 addit slice , concept tilei introduc facilit parallel process among multipl tile . tile rectangular structur consist ctu ( fig . 12.14 b ) ; may also contain multipl slice . addit featur inclus wavefront parallel process ( wpp ) technolog . basic , row ctu process parallel , multipl thread wavefront manner shown ( fig . 12.14 c ) . time , standard allow mix use tile wavefronts.12.3 h.265 451 quarter-pixel precis luma imag inter-pictur predict luma imag , precis motion vector quarter-pixel h.264 . valu subpixel posit deriv interpol . shown tabl 12.7 , 8-tap ﬁlter hﬁlter use half-pixel posit ( e.g. , posit bin fig . 12.15 ) , 7-tap ﬁlter qﬁlter use quarter- pixel posit ( e.g. , posit aandcin fig . 12.15 ) . shown , valu subpixel posit deriv separ ﬁltere step vertic horizont . differ h.264 use 6-tap ﬁltere get valu half-pixel posit , averag obtain valu quarter-pixel posit . valu posit , b , c deriv use follow : ai , j=3/summationdisplay t=−3ai , j+t·qﬁlter [ ] , ( 12.9 ) bi , j=4/summationdisplay t=−3ai , j+t·hﬁlter [ ] , ( 12.10 ) ai , j bi , j ci , j di , j ei , j ki , j ji , jii , j hi , j gi , j mi , j ni , jpi , j qi , j fi , jai , j−1 ai , j ai , j+1 ai , j+2 ai+1 , jai−1 , j ai+1 , jai−1 , j ai+2 , jai+2 , jbi−1 , jci−1 , j bi+1 , jci+1 , j bi+2 , jci+2 , j fig.12.15 interpol fraction sampl h.265 . lower-cas letter ( ai , j , bi , j , etc . ) indic pixel quarter-pixel half-pixel posit . ai , j , ai , j+1 , etc. , indic pixel imag grid . ( save space , ai , j−2 , ai , j+3 , etc. , drawn ﬁgure , although use calcul . ) 452 12 modern video code standard : h.264 , h.265 , h.266 tabl 12.7 filter sampl interpol luma imag h.265 filter number array index tap −3 −2 −1 0 1 2 3 4 hﬁlter 8 −1 4 −11 40 40 −11 4 −1 qﬁlter 7 −1 4 −10 58 17 −5 1 ci , j=4/summationdisplay t=−2ai , j+t·qﬁlter [ 1−t ] . ( 12.11 ) numer , accord tabl 12.7 , ai , j=− ai , j−3+4·ai , j−2−10·ai , j−1+58·ai , j+17·ai , j+1−5·ai , j+2 +ai , j+3 , bi , j=− ai , j−3+4·ai , j−2−11·ai , j−1+40·ai , j+40·ai , j+1−11·ai , j+2 +4·ai , j+3−ai , j+4 , ci , j=ai , j−2−5·ai , j−1+17·ai , j+58·ai , j+1−10·ai , j+2+4·ai , j+3 −ai , j+4 . actual implement involv right shift ( b−8 ) bit calcul , b≥8 number bit per imag sampl . obviou 8-tap hﬁlter symmetr , work well half-pixel posit middl pixel imag grid . 7-tap qﬁlter asymmetr , well-suit quarter-pixel posit arenot middl . subtli differ treatment aandcin eq . 12.9 and12.11 reﬂect natur asymmetr oper . basic , qﬁlter [ 1−t ] ﬂip version qﬁlter [ ] . exampl , , ji closest ai.j , draw ai , jwith weight 58 , wherea ai , jwill draw ai , j+1with weight 58 . similarli , valu posit , e , fcan deriv use follow : di , j=3/summationdisplay t=−3ai+t , j·qﬁlter [ ] , ( 12.12 ) ei , j=4/summationdisplay t=−3ai+t , j·hﬁlter [ ] , ( 12.13 ) fi , j=4/summationdisplay t=−2ai+t , j·qﬁlter [ 1−t ] . ( 12.14 ) 12.3 h.265 453 subpixel sampl obtain vertic nearbi , b , rc pixel . enabl 16-bit oper , right shift 6 bit introduc . gi , j=/parenleftbigg3/summationdisplay t=−3ai+t , j·qﬁlter [ ] /parenrightbigg /greatermuch6 , ji , j=/parenleftbigg4/summationdisplay t=−3ai+t , j·hﬁlter [ ] /parenrightbigg /greatermuch6 , ni , j=/parenleftbigg4/summationdisplay t=−2ai+t , j·qﬁlter [ 1−t ] /parenrightbigg /greatermuch6 , hi , j=/parenleftbigg3/summationdisplay t=−3bi+t , j·qﬁlter [ ] /parenrightbigg /greatermuch6 , ki , j=/parenleftbigg4/summationdisplay t=−3bi+t , j·hﬁlter [ ] /parenrightbigg /greatermuch6 , pi , j=/parenleftbigg4/summationdisplay t=−2bi+t , j·qﬁlter [ 1−t ] /parenrightbigg /greatermuch6 , ii , j=/parenleftbigg3/summationdisplay t=−3ci+t , j·qﬁlter [ ] /parenrightbigg /greatermuch6 , mi , j=/parenleftbigg4/summationdisplay t=−3ci+t , j·hﬁlter [ ] /parenrightbigg /greatermuch6 , qi , j=/parenleftbigg4/summationdisplay t=−2ci+t , j·qﬁlter [ 1−t ] /parenrightbigg /greatermuch6 . 12.3.2 integ transform h.264 , transform code appli predict error residu . 2d transform accomplish appli 1d transform vertic andthen horizont direct . implement two matrix multipl : f=h×f×h , fi input residu data fi transform data . integ transform matrix approxim dct-matrix.454 12 modern video code standard : h.264 , h.265 , h.266 transform block size 4 ×4 , 8×8 , 16×16 , 32 ×32 support . one integ transform matrix , i.e. , h32×32i speciﬁ h.265 . matric smaller tb subsampl version h32×32 . exampl , h16×16shown 16 ×16 tb . h16×16=⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 90 87 80 70 57 43 25 9 −9−25−43−57−70−80−87−90 89 75 50 18 −18−50−75−89−89−75−50−18 18 50 75 89 87 57 9 −43−80−90−70−25 25 70 90 80 43 −9−57−87 83 36 −36−83−83−36 36 83 83 36 −36−83−83−36 36 83 80 9 −70−87−25 57 90 43 −43− 90−57 25 87 70 −9−80 75−18−89−50 50 89 18 −75−75 18 89 50 −50−89−18 75 70−43−87 9 90 25 −80−57 57 80 −25−90−98 74 3 −70 64−64−64 64 64 −64−64 64 64 −64−64 64 64 −64−64 64 57−80−25 90 −9−87 43 70 −70−43 87 9 −90 25 80 −57 50−89 18 75 −75−18 89 −50−50 89 −18−75 75 18 −89 50 43−90 57 25 −87 70 9 −80 80 −9−70 87 −25−57 90 −43 36−83 83 −36−36 83 −83 36 36 −83 83 −36−36 83 −83 36 25−70 90 −80 43 9 −57 87 −87 57 −9−43 80 −90 70 −25 18−50 75 −89 89 −75 50 −18−18 50 −75 89 −89 75 −50 18 9−25 43 −57 70 −80 87 −90 90 −87 80 −70 57 −43 25 −9⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ ( 12.15 ) h8×8can obtain use ﬁrst 8 entri row 0 , 2 , 4 , 6 , ... h16×16 . forh4×4 , use ﬁrst 4 entri row 0 , 4 , 8 , 12 . h4×4=⎡ ⎢⎢⎣64 64 64 64 83 36 −36−83 64−64−64 64 36−83 83 −36⎤ ⎥⎥⎦ ( 12.16 ) compar eq . 12.2 , entri h4×4clearli much larger magnitud . order use 16-bit arithmet 16-bit memori , dynam rang inter- mediat result ﬁrst matrix multipl must reduc introducinga 7-bit right shift 16-bit clip oper . 12.3.3 quantiz scale unlik hmatrix h.264 ( eq . 12.2 ) , number h.265 integ transform matric , e.g. , eq . 12.15 , proport close actual valu dct basi function . henc , ad hoc scale factor built tabl 12.1 12.2 longer need . quantiz , quantiz matrix paramet qp h.264 employ . rang qp [ 0 , 51 ] . similarli , quantiz step size doubl qp valu increas 6.12.3 h.265 455 12.3.4 intra-cod h.264 , spatial predict use intra-cod h.265 . neighbor boundari sampl block top and/or left current block use predict . predict error sent transform code . transform block ( tb ) size rang 4 ×4t o3 2 ×32 intra-cod h.265 . ( ) potenti much larger tb size , ( b ) effort reduc predict error , possibl number predict mode increas 9 h.264 35 h.265 . shown fig . 12.16 , mode 2 mode 34 intra_angular predict mode . note , angl differ mode deliber made uneven , e.g. , make denser near horizont vertic direct . sampl need angular predict subpixel posit . bilinear interpol two nearest pixel integ posit employ , precis 1/32 pixel . two special predict mode mode 0 : intra_planar mode 1 : intra_dc . similar h.264 . intra_dc , averag refer sampl use predict . intra_planar , differ h.264 , four corner use planar predict , i.e. , two plane predict made averag valu adopt . 12.3.5 discret sine transform ( dst ) intra_4 ×4 , luma residu block , hevc introduc altern transform base one variant discret sine transform ( dst ) ( so-cal dst- vii ) [ 16 ] . intra predict base neighbor boundari sampl top left block . predict error tend increas ( ) mode intra predict directionsexampl : direct mode 30 current pbboundari sampl decod pb block ( b ) intra predict 0 : planar 1 : dc 10 13 16 20 2829313215 18 19 26305 6 7 8 22 24171412 33342 3 4 21 2327 259 11 8×8 fig . 12.16 h.265 intra prediction456 12 modern video code standard : h.264 , h.265 , h.266 node block farther away top left neighbor sampl . gener , dst found cope situat better dct transform code step . integ matrix dst describ hdst [ , j ] =round/parenleftbigg 128×2√2n+1sin ( 2i+1 ) ( j+1 ) π 2n+1/parenrightbigg , ( 12.17 ) i=0 , ... , n−1 j=0 , ... , n−1 row column indic , block size n×n . n=4 , follow hdsti obtain : hdst=⎡ ⎢⎢⎣29 55 74 84 74 74 0 −74 84−29−74 55 55−84 74 −29⎤ ⎥⎥⎦ ( 12.18 ) saxena fernand [ 17,18 ] studi beneﬁt combin dct dst , i.e. , allow either dct dst one two 1d transform , dst dct shown win either vertic and/or horizont direct ( ) certain predict mode . although 30 differ intra predict direct h.265 , classifi predict mode •categori 1—the sampl predict either left neighbor current block ( fig . 12.17 ) , top neighbor current block ( fig . 12.17 b ) . •categori 2—the sampl predict top left neighbor current block ( fig . 12.17 c , ) . •dc—a special predict mode averag ﬁxed set neighbor sampl use . tabl 12.8 show recommend . ( ) ( b ) ( c ) ( ) fig . 12.17 intra predict direct h.265 . acategori 1 , predict left neighbor , bcategori 1 , predict top neighbor , canddcategori 2 , predict top left neighbors12.3 h.265 457 tabl 12.8 combin dct dst intra-cod intra predict neighbor vertic ( column ) horizont ( row ) categori sampl use transform transform categori 1 left dct dst categori 1 top dst dct categori 2 top left dst dst dc special ( ﬁxed set ) dct dct 12.3.6 in-loop filter similar h.264 , in-loop ﬁltere process appli order remov blocki artifact . addit deblock filter , h.265 also introduc asampl adapt offset ( sao ) process . deblock filter instead appli deblock ﬁltere 4 ×4 block h.264 , appli edg 8 ×8 imag grid . reduc comput complex , especi good parallel process sinc chanc cascad chang nearbi sampl greatli reduc . visual qualiti still good , partli due sao process describ . deblock ﬁltere appli ﬁrst vertic edg , horizont edg pictur , thu enabl parallel process . altern , appli ctb ctb . sampl adapt offset ( sao ) sao process invok option deblock filter . basic , offset valu ad sampl base certain condit describ . two mode deﬁn appli sao : band offset mode andedg offset mode . ( ) ( b ) ( ) ( c ) n0 n0 n0 n1 n1 n1 n1n0 p ppp fig . 12.18 neighbor sampl consid sao edg offset mode458 12 modern video code standard : h.264 , h.265 , h.266 band offset mode , rang sampl amplitud split 32 band . band offset ad sampl valu four consecut band simultan . help reduc “ band artifact ” smooth area . edg offset mode , gradient ( edg ) inform analyz ﬁrst . figur 12.18 depict four possibl gradient ( edg ) direct : ( ) horizont , ( b ) vertic , ( c , ) diagon . posit neg offset , zero offset , bead sampl pbase follow : •posit : pi local minimum ( p < n 0 & p < n1 ) , pi edg pixel ( p < n0 & p=n1orp=n0 & p < n1 ) . •neg : pi local maximum ( p > n0 & p > n1 ) , pi edg pixel ( p > n0 & p=n1orp=n0 & p > n1 ) . •zero : none . 12.3.7 entropi code h.265 use cabac entropi code , i.e. , ca vlc longer use . newli introduc code tree transform tree structur , tree depth becom import part context model addit spatial neighbor context h.264/a vc . result , number context reduc , entropi code efﬁcienc improv . unlik previou video standard , three simpl scan method deﬁn read transform coefﬁcient , i.e. , diagon up-right , horizont , vertic . goal still maxim length zero-run . scan alway take place 4 ×4 sub-block regardless tb size . diagon up-right scan use inter-predict block intra-predict block 16 ×16 32×32 . intra-predict block 4 ×4o r8 ×8 , follow use : horizontal—for predict direct close vertic ; vertical—for predict direct close horizont ; diagon up-right—for predict direct . mani improv code nonzero transform coefﬁcient efﬁcient [ 13,15 ] . also , one goal new implement cabac h.265 simplifi context represent throughput increas . detail , reader refer [ 19 ] provid excel refer . 12.3.8 special code mode three special code mode deﬁn h.265 . appli cu tu level . •i_pcm : h.264 , predict , transform code , quantiz , entropi code step bypass . pcm code ( ﬁxed-length ) sampl sentdirectli . invok predict mode fail produc data reduc- tion.12.3 h.265 459 •lossless : residu error inter- intra predict sent entropi code directli , thu avoid lossi step , especi quantiz transform code . •transform skip : transform step bypass . work certain data ( e.g. , computer-gener imag graphic ) . appli 4 ×4 tb . 12.3.9 h.265 proﬁl version 1 hevc , three proﬁl deﬁn : main proﬁl , main 10 proﬁl , andmain still pictur proﬁl . version 2 hevc creat 21 addit proﬁl [ 20 ] , e.g. , main 12 , main 4:2:2 10 , main 4:2:2 12 , main 4:4:4 12 , main 4:4:4 16 intra , main 4:4:4 16 still pictur , monochrom , monochrom 12 , monochrom 16 , ... proﬁl . default format color ycbcr . exampl , video format support variou level main proﬁl list tabl 12.9 . shown , total number level propos 13 . cover low-resolut video , e.g. , qcif ( 176 ×144 ) level 1 , well high- resolut video , e.g. , uhdtv ( 8 ,192×4,320 ) level 6 , 6.1 , 6.2 . calcul max luma pictur size , width height round nearest multipl 64 ( implement requir ) . example,176×144 becom 192 ×192=36,864 . shown , hdtv level 4 4.1 frame rate 30 60 fp . maximum bitrat compress video so-cal main tier 12mbits/sec 20 mbits/sec , respect . high tier , much 2.5 time higher . uhd video level 5 demand much higher bitrat remain challeng aspect multimedia includ storag , data transmiss , display devic . ohm et al . [ 21 ] report mani experiment result compar code efﬁcienc h.264 h.265 . exampl , tabl 12.10 list averag bitrat reduct differ video compress method compar psnr , case , rang 32–42 db . test data entertainmentvideo gener higher qualiti higher resolut . nota- tion follow : mp—main proﬁl , hp—high proﬁl , asp—advanc simpl proﬁl . exampl , h.265 mp compar h264/mpeg-4a vc hp , save 35.4 % realiz . code efﬁcienc also compar subject h.264 h.265 . doubl stimulu method describ sect . 5.6.2 employ . report [ 21 ] compar h.264/mpeg-4 vc hp , approxim subject qualiti , 9 test video entertain applic , averag bitrat reduct h.265 mp rang 29.8 66.6 % , averag 49.3 % .thi close origin goal 50 % reduction.460 12 modern video code standard : h.264 , h.265 , h.266 tabl 12.9 sampl video format support h.265 main proﬁl level ( ) max luma pictur width × heightmax lumapictur size ( sampl ) frame rate ( fp ) main tier maxbitr ( mb/ ) 1 176×144 36,864 15 0.128 2 352×288 122,880 30 1.5 2.1 640×360 245,760 30 3.0 3 960×540 552,960 30 6.0 3.1 1280×720 983,040 30 10 4/4 . 1 2048×1080 2,228,224 30 / 60 12 / 20 5 / 5.1 / 5.2 4096×2160 8,912,896 30 / 60 / 120 25 / 40 / 60 6 / 6.1 / 6.2 8192×4320 35,651,584 30 / 60 / 120 60 / 120 / 240 tabl 12.10 averag bitrat reduct equal psnr video compress methodh.264/mpeg-4 vchp mpeg-4 asp mpeg-2/h.262 mp ( % ) h.265 mp 35.4 % 63.7 % 70.8 h.264/mpeg-4 vchp – 44.5 % 55.4 mpeg-4 asp – – 19.7 12.3.10 h.265 extens due new develop video technolog broader rang appli- cation , joint collabor team video code ( jct-vc ) continu workon extens h.265 [ 22 ] . initi , version 2 hevc , extens includ rang extens ( rext ) , scalabl hevc ( shvc ) , screen content code ( scc ) . later , joint collabor team 3d video code extensiondevelop ( jct-3v ) establish work multiview 3d video code extens ( mv-hevc 3d-hevc , respect ) . version 3 hevc includ extens approv april 2015 . scc extens proﬁl , shvc extens proﬁl , high throughput extens proﬁl includ version 4 approv decemb 2016 . rang extens version 1 hevc mostli design applic 4:2:0 chroma subsam-pl 8 10 bit per sampl . becam inadequ variou new applic . exampl , mani digit video broadcast applic use 4:2:2 chroma format 10 bit per sampl , profession camera use 4:4:4 r ’ g ’ b ’ color space , high dynam rang ( hdr ) content may need 16 bit per sampl . moreov , increas need lossless compress ( e.g. , content preserv medic imag ) , well code screen content 4:4:4 8 10 bit per sampl commonli employed.12.3 h.265 461 main object rang extens describ hevc rext [ 20 ] support 4:2:2 4:4:4 chroma format bit-depth 10 bit ( e.g. , 12 16 bit ) per sampl . addit , extend function increas codingefﬁci support , exampl , code screen content , direct code r ’ g ’ b ’ sourc materi , code auxiliari pictur , e.g. , alpha plane , depth map , lossless video code . implement rang extens mostli realiz enhanc code algorithm tool , although mani case , also demand higher dynam rang process element . flynn et al . [ 20 ] provid detail descript rext . scalabl extens standard scalabl high efﬁcienc video code ( shvc ) [ 23 ] ﬁnaliz version 2 hevc . addit tempor scalabl alreadi support version 1 hevc , shvc support spatial scalabl , snr ( signal- to-nois ratio ) scalabl , well bit-depth scalabl andcolor gamut scalabl need uhd video higher bit-depth wider color gamut employ . shvc also support combin . scalabl code usual involv multipl layer , i.e. , base layer ( bl ) enhanc layer ( el ) . scalabl extens h.264 , scalabl video code ( svc ) develop , use so-cal “ single-loop decod constraint , ” i.e. , decod bitstream contain multipl layer tempor scalabl , partial decod refer layer may sufﬁcient . result , efﬁcient , could handl sophist extens , e.g. , arbitrari switch multipl layer spatial scalabl , etc . shvc employ multi-loop code frame-work refer layer must fulli decod ﬁrst use predict refer . two spatial snr layer , inter- mediat el may also use refer layer . moreov , shvc use multipl repurpos single-lay hevc codec core , addit interlay refer pictur process modul . goal adopt scalabl code architectur thatr make high-level syntax ( hls-onli ) chang underli single- layer hevc standard . due success , gener multilay high-level syntax design becom common multilay hevc extens , includ shvc , mv-hevc , 3d-hevc . boyc et al . [ 23 ] provid detail descript shvc . multiview 3d video extens multiview extens ( mv-hevc ) [ 24 ] enabl efﬁcient code multipl cam- era view associ auxiliari pictur . implement reus single- layer decod without chang block-level process modul . inter-viewrefer motion-compens predict employ order realiz bitrat save compar hevc simulcast.462 12 modern video code standard : h.264 , h.265 , h.266 autostereoscop display , sever imag emit time , user ( need glass ) see one stereo pair imag depend his/her view posit . techniqu depth-image-bas render ( dibr ) isoften employ gener imag . natur , heavili reli high-qual depth imag . 3d extens ( 3d-hevc ) [ 24 ] design video consist multipl view associ depth map . also support gener ofaddit intermedi view advanc 3d display . new block-level video code tool speciﬁ realiz addit bitrat reduct compar mv-hevc especi case depth map must code . tool explicitli exploitth uniqu characterist depth map , statist depend video textur depth . mv-hevc 3d-hevc develop support stereoscop autostereoscop display , henc far limit abil handl arrang larg number view arbitrari view posit . tech et al . [ 24 ] provid detail descript mv-hevc 3d-hevc . 12.4 h.266 joint video explor team ( jvet ) itu-t video code expert group ( vceg ) form 2015 , 2 year h.265 ( hevc ) version 1 ﬁnal- ize . sinc , expert vceg iso/iec mpeg collabor explor next major advanc code efﬁcienc new gener thevideo code standard . joint explor model ( jem ) softwar imple- mentat develop ; last version ( jem-7.0 ) achiev 30 % bitrat reduct compar hevc test model [ 25 ] . convinc vceg mpeg formal call propos octob 2017 new video code standard . new standard suitabl standard dynam rang ( sdr ) video , high dynam rang ( hdr ) video , 360 ◦video , new video format ( e.g. , panoram for- mat ) , henc name versatil video code ( vvc ) , also known mpeg-i part 3 , h.266 . h.266 standard ﬁnaliz 2020 . h.266 support 16k uhd video , ycbcr 4:4:4 , 4:2:2 , 4:2:0 10 16 bit sampl . support hdr 16 stop ( peak bright 10,000 nits1 ) bt.2100 wide color gamut , auxiliari channel depth , transpar , etc . aim achiev 50 % compress h.265 perceptu qualiti . current , compar h.265 , propos h.266 method much higher comput complex encod side . decod side , rang 200 % 300 % . major effort still made reduc comput complex encod decod side . 1nit measur unit lumin , equival cd/m2 ( candela per squar meter ) . 1nit=1cd/m2.12.4 h.266 463 surprisingli , increasingli studi deep learn technolog video code [ 26,27 ] . liu et al . [ 27 ] provid survey recent develop . divid two categori : ( ) deep network-bas code tool use tradit code scheme , ( b ) new code scheme primarili built deep network . new techniqu h.266 codec tremend amount detail . gener , develop increment h.264 h.265 . major deviat block-bas hybrid code propos . discuss essenti new develop chapter . paper [ 25,28–31 ] other may 2020 special issu ieee transact circuit system video technolog provid much detail . 12.4.1 motion compens h.264 h.265 , h.266 employ block-bas hybrid code scheme support combin inter-pictur motion predict intra-pictur spatialpredict , transform code predict residu error . one-sixteenth-pixel precis h.264 h.265 , precis motion vector ( mv ) one-quart pixel forluma imag ( one-eighth chroma imag 4:2:0 video ) . jem , highest mv precis increas 1 /16 pixel luma imag ( 1 /32 chroma imag 4:2:0 video ) . 1 /16 precis alway use ; use inter predict code unit ( cu ) code skip/merg mode , exampl . gener , search best mv start integ pixel precis . “ optim ” mv found stage , search continu progress 1/2 , 1/4 , ... pixel precis . imag sampl fraction posit deriv interpol . similar h.265 , separ 2d interpol ﬁlter long tap , e.g. , 8 , employ . 1/32 fraction posit sampl obtain simpl averag two neighbor 1 /16 sampl . block partit h.266 , maximum size code tree unit ( ctu ) increas 256 ×256 64 ×64 h.265 . , ctu partit code unit ( cu ) —basic unit transform quantiz predict residu error . improv code efﬁcienc , addit quad-tre ( qt ) ctu h.265 , binari tree ( bt ) partit introduc jem , henc term qtbt.in [ 28 ] , recommend h.266 may offer follow option block partit ctu illustr fig . 12.19 : •multi-typ tree ( mtt ) : qt leaf ctu partit bybinari tree ( bt ) orternari tree ( tt ) . bt tt partit be464 12 modern video code standard : h.264 , h.265 , h.266 quad binari ternarymtt 1/4 , 3/4 3/8 , 5/8 1/5 , 2/5 , 3/5 , 4/5 1/3 , 2/3 non−rectangular triangular geometricpqabt / gb ( leaf split ) jem fig . 12.19 h.266 block partit appli vertic horizont . appli recurs interleav . tt use 1:2:1 ratio make sure height width power two . bt/tt partit appli , qt partit allow . mtt shown effect . compar jem-7.0 qtbt allow , luma bd-rates2 [ 32 ] rang approxim −2t o−3 % report [ 28 ] . •asymmetr binari tree ( abt ) gener binari tree shift ( gb ) : shown fig . 12.19 , abt use ratio 1:3 ( 3:1 ) . combin abt qtbt report yield luma bd-rate −3.2 % . gb allow binari split ratio 1:2 , 2:3 , 1:4 , 3:5 ( revers ) long width height result cu multipl 4 luma pixel . •non-rectangular partit : leaf node , addit triangular partition- ingand geometr partit ( geo ) also propos . geo , parti- tion line speciﬁ point p q boundari block . 2see chap . 5for deﬁnit bd-rate.12.4 h.266 465 luma block size 16 ×16 smaller , lookup tabl employ total 16 predeﬁn geo partit . otherwis , partit line predict spatial tempor neighbor block . due block ’ snonrectangular shape , shape adapt dct ( sa-dct ) also employ . 12.4.2 adapt multipl transform mention sect . 12.3.5 , discret sine transform ( dst-vii ) introduc h.265 predict residu error intra-cod , sine basi function ﬁt pattern error better . studi conclud follow transform beneﬁci differ mode h.266 intra-cod [ 16,25 ] . 16 variant dct ( dct type i–viii ) dst ( dst type i–viii ) differ symmetri oftheir symmetric-period sequenc ( tabl 12.11 ) . intercod h.266 , dct-viii dst-vii adopt . intra-cod h.266 , three transform set list tabl 12.12 predeﬁn . h.265 use 35 mode intra predict , i.e. , planar ( mode 0 ) , dc ( mode 1 ) , plu 33 direct angular mode ( see fig . 12.16 ) . h.266 , reﬁn total 67 mode , i.e. , planar ( mode 0 ) , dc ( mode 1 ) , plu 65 directionalangular mode , basic doubl number ( henc precis ) angular mode h.265 . tabl 12.13 list transform set consid two consecut 1d transform appli vertic ( v ) horizont ( h ) . foreach v h transform , encod tri transform set , one better deal residu error adopt . intra predict direct symmetr , select trans- form set also symmetr , i.e. , except ﬁrst two special mode ( planar dc ) , select transform set h angular mode ii one v mode 68 −i , vice versa . 12.4.3 non-separ secondari transform dct/dst transform known separ . 2d separ transform implement two consecut 1d transform yield much lower comput complex . howev , complex textur pattern , arbitrari edg direct imag , non-separ secondari transform ( nsst ) may provid better ﬁt predict residu error . limit complex , nsst appli frequenc coefﬁcient primari separ transform ( dct/dst ) , i.e. , secondari transform improv code efﬁcienc . nsst studiedat time h.265 develop , includ ﬁnal version h.265 . jem , mode depend non-separ secondari transform ( md- nsst ) introduc primari transform quantiz encod , de-quant invers primari transform decoder.466 12 modern video code standard : h.264 , h.265 , h.266 tabl 12.11 basi function certain type dct dst transform transform type basi function ti ( j ) , w h e r e , j=0,1 , ... , n−1 dct-ii ti ( j ) =c0 ( ) ·/radicalbig 2 n·cos/parenleftbig i· ( 2j+1 ) ·π 2n/parenrightbig , c0 ( ) =/braceleftbigg/radicalbig 2 ni=0 1i/negationslash=0 dct-v ti ( j ) =c0 ( ) ·c1 ( j ) ·/radicalbig 2 2n−1·cos/parenleftbig 2i·j·π 2n−1/parenrightbig , c0 ( ) =/braceleftbigg/radicalbig 2 ni=0 1i/negationslash=0 , c1 ( j ) =/braceleftbigg/radicalbig 2 nj=0 1j/negationslash=0 dct-viii ti ( j ) =/radicalbig 4 2n+1·cos/parenleftbig ( 2i+1 ) · ( 2j+1 ) ·π 4n+2/parenrightbig dst-i ti ( j ) =/radicalbig 2 n+1·sin/parenleftbig ( i+1 ) · ( j+1 ) ·π n+1/parenrightbig dst-vii ti ( j ) =/radicalbig 4 2n+1·sin/parenleftbig ( 2i+1 ) · ( j+1 ) ·π 2n+1/parenrightbig tabl 12.12 predeﬁn transform set h.266 intra-cod transform set transform candid 0 dst-vii , dct-viii 1 dst-vii , dst-i 2 dst-vii , dct-v tabl 12.13 select transform set intra predict mode h.266 intra mode0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 v 2 1 0 1 0 1 0 1 0 1 0 1 0 1 0 0 0 0 h 2 1 0 1 0 1 0 1 0 1 0 1 0 1 2 2 2 2 intramod 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 v 0 0 0 0 0 1 0 1 0 1 0 1 0 1 0 1 0 h 2 2 2 2 2 1 0 1 0 1 0 1 0 1 0 1 0 intramod 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 v 1 0 1 0 1 0 1 0 1 0 1 2 2 2 2 2 2 h 1 0 1 0 1 0 1 0 1 0 1 0 0 0 0 0 0 intramod 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 v 2 2 2 1 0 1 0 1 0 1 0 1 0 1 0 h 0 0 0 1 0 1 0 1 0 1 0 1 0 1 012.4 h.266 467 lower complex , md-nsst appli low-frequ coef- ﬁcient primari transform . width ( w ) height ( h ) coefﬁcient block larger equal 8 , 8 ×8 nsst appli top-left corner block . otherwis , 4 ×4 nsst appli . exampl , implement nsst 4 ×4 block describ . letxb 4 ×4 coefﬁcient block primari transform , x=⎡ ⎢⎢⎣x00x01x02x03 x10x11x12x13 x20x21x22x23 x30x31x32x33⎤ ⎥⎥⎦ ( 12.19 ) turn 1d vector−→x , −→x=⎡ ⎢⎢⎢⎢⎢⎢⎢⎢⎢⎢⎣x 00 x01 x02 . .. x 32 x33⎤ ⎥⎥⎥⎥⎥⎥⎥⎥⎥⎥⎦ ( 12.20 ) 16 ×16 transform matrix ti use calcul nsst , −→f=t·−→x . ( 12.21 ) 1d nsst coefﬁcient vector−→fcan reorgan anoth 4 ×4 block follow coefﬁcient scan order appli block entropi code . jem , 35 ×3 transform ts md-nsst predeﬁn 4 ×4 8×8 nsst , 3 number nsst candid intra predict mode . mode index number > 34 , candid transform mode 68 −i use . exampl , candid transform mode 35 one mode 33 , etc . order reduc complex nsst , instead matrix multipl ( indic eq . 12.21 ) , hypercube-given transform ( hygt ) butterﬂi implement recommend jem [ 25 ] . hygt implement requir number iter input subsequ iter dependedon output previou iter , still deem inefﬁci . henc , reduc secondari transform ( rst ) propos . reduc transform ( rt ) realiz r×nmatrix , r < n . shown , 4 ×4 block , length nof 1d vector−→xi 16 ; 8×8 block , n=64.468 12 modern video code standard : h.264 , h.265 , h.266 trt=⎡ ⎢⎢⎢⎢⎢⎢⎣t 00 t01 t02 ... t0 ( n−1 ) t10 t11 t12 ... t1 ( n−1 ) . .. ( r−1 ) 0t ( r−1 ) 1t ( r−1 ) 2 ... ( r−1 ) ( n−1 ) ⎤ ⎥⎥⎥⎥⎥⎥⎦ ( 12.22 ) use rt , matrix multipl yield 1d vector−−→frtof length r. −−→frt=trt·−→x . ( 12.23 ) ratio n/ri reduct factor . trtbasic provid ﬁrst rbase n-dimension space . n=64 r=16 8 ×8 block , exampl , 16 nonzero rst coefﬁcient gener , use ﬁll top-left 4 ×4 sub-block . decod , transpos matrix trtwill use . 12.4.4 in-loop filter jem propos four in-loop ﬁlter appli sequenti . ( ) bilater ﬁlter , ( b ) deblock ﬁlter , ( c ) sampl adapt offset ( sao ) ﬁlter , ( ) adapt loop filter ( alf ) . filter ( b ) ( c ) basic h.265 , although stronger deblock ﬁlter longer tap propos respons call propos jem [ 28 ] . bilater filter bilater ﬁlter appli luma block nonzero transform coefﬁcient . take place right invers transform loop encod . four neigh- bore ( top , bottom , right , left ) sampl use ﬁlter current sampl . distanc current neighbor sampl larger 1 , andit control spatial paramet σ ddetermin transform block size . addit distanc , differ intens valu also impact ﬁltere amount , control rang paramet σrdetermin qp use block . given current sampl locat ( , j ) , weight w ( , j , k , l ) determin amount ﬁltere neighbor sampl ( k , l ) w ( , j , k , l ) =exp/parenleftbigg − ( i−k ) 2+ ( j−l ) 2 2σ2 d− ( r ( , j ) −r ( k , l ) ) 2 2σ2r/parenrightbigg , ( 12.24 ) r ( , j ) r ( k , j ) origin reconstruct intens valu ( , j ) ( k , l ) , respectively.12.4 h.266 469 adapt loop filter ( alf ) adapt loop filter ( alf ) appli sao . horizont vertic gradi- ent block deriv ﬁrst use determin direct dof block . block classiﬁ 15 categori base dand 2d-laplacian activ differ set ﬁlter coefﬁcient appli alf ﬁltering.detail alf found [ 25 ] . convolut neural network ( cnn ) in-loop filter zhou et al . [ 33 ] train cnn in-loop ﬁlter alf intra- code , thu replac bilater ﬁlter , deblock ﬁlter , sao . addit reconstruct intens valu , quantiz paramet ( qp ) map also fed cnn , consist 8 convolut layer rectiﬁ linear unit ( relu ) . deep learn video code ( dlvc ) , liu et al . [ 26 ] design deep cnn 16 residu block ( resblock ) 2 convolut layer . resblock consist 2 convolut layer separ relu skip connect . henc , network total 34 layer . propos cnn-base in-loop ﬁlter place deblock ﬁlter sao . cnn-base ﬁltere method report good improv , rang approxim −3t o−7 % bd-rate jem target luma chroma imag . cnn-base method video code appear promis . nevertheless , develop still earli stage . 12.4.5 tool high dynam rang ( hdr ) video xiu et al . [ 29 ] françoi et al . [ 30 ] discuss variou tool hdr video . tool softwar design convers differ hdr video format , analyz evalu qualiti hdr video . code tool areof three type : 1.encoder-onli adapt : encod appli follow adapt : ( ) local adapt distort metric , ( b ) local adapt quantiz paramet ( see lumadqp ) , ( c ) adjust luma chroma qualiti balanc . 2.out-of-loop sampl map : possibl preprocess step signal sent encod , post-process step thesign recov decod . includ ( ) color volum transform ( b ) out-of-loop luma map . 3.in-loop sampl map : name suggest , map realiz motion compens loop encod decod . includ ( ) qp inference—to better control quantiz paramet , ( b ) in-loop reshap ( see in-loop luma reshap ) , ( c ) luma-adapt deblock ﬁlter—to470 12 modern video code standard : h.264 , h.265 , h.266 adjust strength deblock accord averag luma level block boundari , ( ) intern bit-depth increase—so encod decod oper higher bit-depth . luma-depend quantiz scheme ( lumadqp ) addit higher dynam rang wider color gamut ( bt.2100 colorrepresent ) , hdr video also adopt perceptu quantiz ( pq ) whichmani bit redistribut bright area video frame dark area . initi studi h.266 found pq introduc undesir artifact bright area compress video . lumadqp luma-depend adapt quantiz scheme [ 29 ] enabl adjust quantiz step depend lumin hdr content atth ctu level order shift bit ( back ) dark area bright area . dqp ( ) =max ( −3 , min ( 6,0.015·y−1.5−6 ) ) , ( 12.25 ) yi averag luma valu ctu . maximum valu , exampl , 10-bit video 1023. dqp use adapt modifi qp , i.e. , origin qp subtract amount indic dqp . in-loop luma reshap gener , quantiz ( e.g. , pq hdr ) design cover full rang video signal ( e.g. , 0 10,000 nit ) . due larg variat actual scene , intent person creat video , limit display devic , larg portion full rang may unus . better code efﬁcienc , reshap introduc modifi re-quant signal . earlier work mpeg/jct-vcstudi out-of-loop reshap . basic , video signal preprocess encod reduc unus rang henc reduc excess number unus codeword . decod , video post-process beingdisplay . usual appli group pictur video , readili adapt slice block level . [ 29 ] , in-loop reshap introduc . implement , pair lookup tabl ( lut ) employ , i.e. , forward lut encod invers lut decod . forward lut ( fwdlut ) obtain follow three step : 1 . deriv slope reshap curv : slope [ ] =2 dqp ( ) /6 ( 12.26 ) 12.4 h.266 471 2 . calcul luma reshap curv : f [ y+1 ] = f [ ] +slope [ ] , ( 12.27 ) yi rang [ 0 , maxi ] , e.g. , [ 0,1023 ] 10-bit hdr video . 3 . obtain fwdlut [ ] normal valu f [ ] [ 0 , maxi ] . accordingli , invers lut ( invlut ) deriv simpl revers map- ping fwdlut . see [ 29 ] comparison in-loop out-of-loop luma reshap , joint optim luma qp adapt reshap . 12.4.6 tool 360◦video xiu et al . [ 29 ] ye et al . [ 31 ] discuss sever code tool 360◦video . brieﬂi describ . hybrid angular cubemap project ( hac ) equirectangular project ( erp ) , 360◦ ( spheric ) video project onto singl 2d plane . commonli use view due convenience.howev , erp known produc larg distort ( see fig . 5.9 ) , especi video content near pole sphere . caus undesir nonuniform sampl use 360 ◦video represent compress . cubemap project ( cmp ) use six face cube project plane ; distort reduc compar erp . therefor , recommend h.266 better 360◦ video compress . order reduc nonuniform sampl , especiallytoward edg face cmp cube , hybrid angular cubemap projec- tion ( hac ) propos [ 29 ] . deriv equi-angular cubemap project ( eac ) describ sect . 5.4.2 . forward map function cmp hac deﬁn f x ( x ) =4 a·πarctan/bracketleftbig x·tan ( a·π 4 ) /bracketrightbig , ( 12.28 ) fy ( ) =4 b·πarctan/bracketleftbig y·tan ( b·π 4 ) /bracketrightbig , ( 12.29 ) aand bare adjust paramet horizont vertic map function , respect ; rang [ 0.3,1.5 ] .472 12 modern video code standard : h.264 , h.265 , h.266 fig . 12.20 3×2 frame pack cmp-like project format left front rightbottombacktop adapt frame pack code efﬁcienc , frame pack adopt six project imag six face cmp cube pack 2d rectangular pictur , either 3 ×2 conﬁgur ( see fig . 12.20 ) , 4 ×3 conﬁgur . appar , matter one arrang six imag , discontinu vertic and/or horizont boundari face , henc “ face seam ” artifact . caus hardship motion estim , refer block happen beyond boundari current face ( partial entir ) neighbor face pack frame may offer continu video content . handl face discontinu , adapt frame pack ( afp ) use six face imag “ shufﬂ ” and/or yaw-rot 0◦,90◦,180◦ , 270◦to dynam creat need continu frame-pack face motion estim . two type neighbor deﬁn block-bas motion compens : ( ) spheric neighbor —neighbor block origin 3d geometri , ( b ) frame- pack neighbor —neighbor block pack frame . propos [ 29 ] frame-pack neighbor block use motion estim current block also spheric neighbor . geometri pad motion estim , need video content goe beyond refer imag boundari , techniqu pad employ . convent , repeti- tive pad use , e.g. , describ chap . 11 . neighbor face imag pack frame often discontinu ( “ face seam ” ) describ ; readili use pad . geometri pad [ 29,31 ] techniqu content spheric neighbor util pad provid continu usabl sampl area outsid face boundaries.12.4 h.266 473 tabl 12.14 h.266 bd-rate sdr-a ( random access ) categori h.265 test model jem-7.0 test model u v u v averag 9 testvideo ( % ) −35.7 −44.7 −45.0 −4.0 −3.3 −3.2 tabl 12.15 h.266 bd-rate sdr-b ( low delay ) categori h.265 test model jem-7.0 test model u v u v averag 5 testvideo ( % ) −27.2 −43.8 −44.5 −3.6 −2.6 −4.5 12.4.7 h.266 perform report bd-rate ( short bjontegaard ’ delta-r ) [ 32 ] employ measur perform propos h.266 compress method . bd-rate averag differ bitrat rang psnr ( qualiti level ) , exampl , h.265 ( hevc ) h.266 , jem h.266 test model . negativebd-r indic save bitrat achiev h.266 . compar h.265 ( hevc ) , xiu et al . [ 29 ] report luma bd-rate −35.7 −27.2 % standard dynam rang ( sdr ) test video random access low delay conﬁgur , averag 9 5 test video , respec- tive ( see tabl 12.14 and12.15 ) . −4.0 % −3.6 % , respect , compar jem-7.0 . due substanti differ sdr hdr content ( gray-level color ) distribut , sever new evalu metric introduc hdr perform measur : ( ) wpsnr ( weight psnr ) larger weight given brighter area darker area imag , ( b ) psnr-l100 , ( c ) de100 . psnr-l100 de100 deriv cie de2000 metric known provid better perceptu uniform measur color differ cielab color space . tabl 12.16 show bd-rate hdr ( common code engin plu default reshap random access , averag 5 testvideo ) { −31.3 , −31.7 , −38.1 % } { wpsnr-i , psnr-l100 , de100 } compar h.265 ( hevc ) . { −4.7 , −5.2 , −2.0 % } compar jem-7.0 360 ◦video encod pad erp format , luma bd-rate ( averag 5 test video ) −33.9 % −13.5 % , respect , compar h.265 ( hevc ) jem-7.0 ( see tabl 12.17 ) .474 12 modern video code standard : h.264 , h.265 , h.266 tabl 12.16 h.266 bd-rate hdr-b ( pq ) categori h.265 test model jem-7.0 test model wpsnr-i psnr-l100 de100 wpsnr-i psnr-l100 de100 averag 5 testvideo ( % ) −31.3 −31.7 −38.1 −4.7 −5.2 −2.0 tabl 12.17 h.266 bd-rate 360◦video categori h.265 test model jem-7.0 test model u v u v averag 5 testvideo ( % ) −33.9 −54.0 −56.8 −13.5 −18.3 −21.0 12.5 exercis 1 . integ transform use h.264 , h.265 , h.266 . ( ) relationship dct integ transform ? ( b ) main advantag use integ transform instead dct ? 2 . h.264 h.265 use quarter-pixel precis motion compens . ( ) main reason subpixel ( case , quarter-pixel ) precis advoc ? ( b ) h.264 h.265 differ obtain quarter-pixel posit ? 3 . eq . 12.15 , deriv h8×8for integ transform h.265 . 4 . h.264 , h.265 , h.266 support in-loop deblock ﬁltere . ( ) deblock good idea ? disadvantag ? ( b ) main differ h.264 h.265 implement ? ( c ) besid deblock ﬁltere , h.265 improv visual qualiti ? h.266 ? 5 . name least three featur h.265 facilit parallel process . 6 . p-frame code h.264 use integ transform . exercis , assum f ( u , v ) =h·f ( , j ) ·ht , h=⎡ ⎢⎢⎣1111 21−1−2 1−1−11 1−22−1⎤ ⎥⎥⎦.12.5 exercis 475 ( ) two advantag use integ transform ? ( b ) assum target frame p-frame . simplic , assum size macroblock 4 ×4 . macroblock shown target frame : ( ) motion vector ? ( ii ) valu f ( , j ) case ? ( iii ) show valu f ( u , v ) . 20 40 60 80 100 120 140 155 110 132 154 176 −−−− 30 50 70 90 110 130 150 165 120 142 164 186 −−−− 40 60 80 100 120 140 160 175 130 152 174 196 −−−− 50 70 90 110 130 150 170 185 140 162 184 206 −−−− 60 80 100 120 140 160 180 195 − − − −−−−− 70 90 110 130 150 170 190 205 − − − −−−−− 80 100 120 140 160 180 200 215 − − − −−−−− 85 105 125 145 165 185 205 220 − − − −−−−− refer frame target frame 7 . mini exampl h.264 video compress . simplic , instead 2d frame ( imag ) , “ video ” consist 1d frame shown fig.12.21 . target frame p-frame . size macroblock 1 ×4 , darken box indic current macroblock . ( ) show detail use logarithm search , rang search p=7 , ﬁnd motion vector current macroblock . ( b ) ﬁnd block [ 200 , 200 , 200 , 200 ] best match macroblock search ? ? ( c ) complet step motion compens ( mc ) -base compress quantiz ( i.e. , need quantiz , scale , etc . ) encod . make sure show detail integ transform . current macroblock200 200 200 200180 190 200 21050 50 050 50 5 50 200 200 200 200 50 50 50 50 refer frame : target frame : fig . 12.21 mc-base video compress 1d frames476 12 modern video code standard : h.264 , h.265 , h.266 8 . h.264 , h.265 , h.266 support intra-cod . ( ) main object intra-cod ? ( b ) tri simpliﬁ h.26 * intra_4 ×4 code method three mode ( vertic , horizont , dc ) use . 8 ×8 imag , show least predict error ( , j ) method lower- right 4 ×4 block , i.e. , block contains80 80 100 100 80 80 100 100 90 90 110 110 90 90 110 110 . explain detail deriv result . 20 20 40 40 60 60 80 80 20 20 40 40 60 60 80 8030 30 50 50 70 70 90 9030 30 50 50 70 70 90 9040 40 60 60 80 80 100 10040 40 60 60 80 80 100 10050 50 70 80 90 90 110 11050 50 70 80 90 90 110 110 ( c ) show ﬁnal result ( ( u , v ) valu ) produc encod 4×4 block integ transform . 9 . write program order-k exp-golomb encod decod . ( ) eg 0codeword unsign n=110 ? ( b ) given eg 0code 000000011010011 , decod unsign n ? ( c ) eg 3codeword unsign n=110 ? 10 . write program implement video compress motion compens , transform code , quantiz simpliﬁ h.26 * encod decod . •use 4:2:0 chroma subsampl . •choos video frame sequenc ( i- , p- , b-frame ) similar mpeg-1 , 2 . interlac . •for i-fram , implement h.264 intra_4 ×4 predict code . •for p- b-frame , use 8 ×8 motion estim . use logarithm search motion vector . afterward , use 4 ×4 integ transform h.264 . •use quantiz scale matric speciﬁ eq . 12.5 and12.7 . control show effect variou level compress quantizationloss . •do implement entropi code part . option , may includ publicli avail code this.2.5 exercis 477 11 . write program verifi result tabl 12.8 , exampl , show dst produc shorter code dct categori 2 direct predict . 12 . intra-cod h.266 , predeﬁn transform set indic tabl 12.12 . shown tabl 12.13 , except ﬁrst two special mode ( planar dc ) , select transform set h angular mode ii one v mode 68 −i . explain . 13 . perceptu quantiz ( pq ) use high dynam rang ( hdr ) video . ( ) pq , use hdr video ? ( b ) lumadqp h.266 ? adopt ? refer 1 . t. wiegand , g.j . sullivan , g. bjøntegaard , a. luthra , overview h.264/a vc video code standard . ieee tran . circuit syst . video technol . 13 ( 7 ) , 560–576 ( 2003 ) 2 . itu-t h.264 | iso/iec 14496-10 , advanc video code gener audio-visu servic . ( itu-t iso/iec , 2009 ) 3 . iso/iec 14496 , part 10 , inform technology—cod audio-visu objects—part 10 : advanc video code . ( iso/iec , 2012 ) 4 . i.e . richardson , h.264 advanc video compress standard , 2nd ed . ( wiley , 2010 ) 5 . h. . malvar , et al. , low-complex transform quantiz h.264/a vc . ieee tran . circuit syst . video technol . 13 ( 7 ) , 598–603 ( 2003 ) 6 . g. bjontegaard , k. lillevold , context-adapt vlc code coefﬁcient . jvt document jvt-c028 ( 2002 ) 7 . i.e . richardson , h.264 mpeg-4 video compress . ( wiley , 2003 ) 8 . d. marp , h. schwarz , t. wiegand , context-bas adapt binari arithmet code h.264/a vc video compress standard . ieee tran . circuit syst . video technol . 13 ( 7 ) , 620–636 ( 2003 ) 9 . d. marp , t. wiegand , h.264/mpeg4 advanc video code standard applic . ieee communi . mag . 44 ( 8 ) , 134–143 ( 2006 ) 10 . h. schwarz , et al. , overview scalabl video code extens h.264/a vc standard . ieee tran . circuit syst . video technol . 17 ( 9 ) , 1103–1120 ( 2007 ) 11 . p. merkl , et al. , efﬁcient predict structur multiview video code . ieee tran . circuit syst . video technol . 17 ( 11 ) , 1461–1473 ( 2007 ) 12 . a. vetro , t. wiegand , g.j . sullivan , overview stereo multiview video code exten- sion h.264/mpeg-4 vc standard . proc . ieee . 99 ( 4 ) , 626–642 ( 2011 ) 13 . g.j . sullivan , et al. , overview high efﬁcienc video code ( hevc ) standard . ieee tran . circuit syst . video technol . 22 ( 12 ) , 1649–1668 ( 2012 ) 14 . j.r. ohm , g.j . sullivan , high efﬁcienc video code : next frontier video compress . ieee signal process . mag . 30 ( 1 ) , 152–158 ( 2013 ) 15 . itu-t h.265 | iso/iec 23008-2 , h.265 : high efﬁcienc video code . ( itu-t iso/iec , 2013 ) 16 . j. wang et al. , joint separ non-separ transform next-gener video code . ieee tran . imag process . 27 ( 5 ) , 2514–2525 ( 2018 ) 17 . a. saxena , f.c . fernand , mode depend dct/dst intra predict block-bas image/video code , ieee intern confer imag process , pp . 1685–1688 ( 2011 ) 18 . a. saxena , f.c . fernand , dct/dst base transform code intra predict image/video code . ieee tran . imag process . 22 ( 10 ) , 3974–3981 ( 2013 ) 478 12 modern video code standard : h.264 , h.265 , h.266 19 . v. sze , m. budagavi , high throughput cabac entropi code hevc . ieee tran . circuit syst . video technol . 22 ( 12 ) , 1778–1791 ( 2012 ) 20 . d. flynn , d. marp , m. naccari , t. nguyen , c. rosewarn , k. sharman , j . sole , j. xu , overview rang extens hevc standard : tool , proﬁl , perform . ieee trans.circuit syst . video technol . 26 ( 1 ) , 4–19 ( 2016 ) 21 . j.r. ohm , et al. , comparison code efﬁcienc video code standards—includ high efﬁcienc video code ( hevc ) . ieee tran . circuit syst . video technol . 22 ( 12 ) , 1669–1684 ( 2012 ) 22 . g.j . sullivan et al. , standard extens high efﬁcienc video code ( hevc ) . ieee j. sel . top . signal process . 7 ( 6 ) , 1001–1016 ( 2013 ) 23 . j.m . boyc , y. ye , j. chen , a.k . ramasubramonian , overview shvc : scalabl extens high efﬁcienc video code standard . ieee tran . circuit syst . video technol . 26 ( 1 ) , 20–34 ( 2016 ) 24 . g. tech , y. chen , k. müller , j.r. ohm , a. vetro , y.k . wang , overview multiview 3d extens high efﬁcienc video code . ieee tran . circuit syst . video technol . 26 ( 1 ) , 35–49 ( 2016 ) 25 . j. chen , m. karczewicz , y.w . huang , k. choi , j.r. ohm , g.j . sullivan , joint explor model ( jem ) video compress capabl beyond hevc . ieee tran . circuit syst.video technol . 30 ( 5 ) , 1208–1225 ( 2020 ) 26 . d. liu , et al. , deep learning-bas technolog respons joint call propos video compress capabl beyond hevc . ieee tran . circuit syst . video technol . 30 ( 5 ) , 1267–1280 ( 2020 ) 27 . d. liu , et al. , deep learning-bas video code : review case studi . acm comput . surv . 53 ( 1 ) , 11 , 1–11 , 35 ( 2020 ) 28 . b. bross , et al. , gener video code technolog respons joint call propos video compress capabl beyond hevc . ieee tran . circuit syst . video technol.30 ( 5 ) , 1226–1240 ( 2020 ) 29 . x. xiu , et al. , uniﬁ video codec sdr , hdr , 360 ◦video applic . ieee tran . circuit syst . video technol . 30 ( 5 ) , 1296–1310 ( 2020 ) 30 . e. françoi , et al. , high dynam rang video code technolog respons joint call propos video compress capabl beyond hevc . ieee tran . circuit syst.video technol . 30 ( 5 ) , 1253–1266 ( 2020 ) 31 . y. ye , j.m . boyc , p. hanhart , omnidirect 360 ◦video code technolog respons joint call propos video compress capabl beyond hevc . ieee trans.circuit syst . video technol . 30 ( 5 ) , 1241–1252 ( 2020 ) 32 . g. bjontegaard , calcul averag psnr differ rd-curv . technic report vceg-m33 ( 2001 ) 33 . l. zhou , et al. , convolut neural network ﬁlter ( cnnf ) intra frame . technic report jvet-10022 ( 2018 ) 13basic audio compress echniqu compress audio inform somewhat special multimedia system . techniqu use familiar , other new . chapter , take lookat basic audio compress techniqu appli speech compress , set gener introduct larg topic long histori . extens inform found refer section end chapter . next chapter , consid set tool develop gener audio compress aegi motion pictur expert group ( mpeg ) . sinc gener high interest reader focus multimedia , treat thatsubject greater detail . begin , let us recal issu cover chap . 6on digit audio multimedia , µ-law compand audio signal . usual combin simpl techniqu exploit tempor redund present audio signal . saw chap . 10 , video compress , differ signal present past time could effect reduc size signal valu , importantli , concentr histogram pixel valu ( differ , ) much smaller rang . result reduc varianc valu theentropi greatli reduc , subsequ huffman code produc greatli compress bitstream . appli . recal chap . 6that quantiz sampl output call puls code modul , pcm . differenti version call dpcm , adapt version call adpcm . variant take account speech properti follow . chapter , look adpcm , v ocod , gener speech com- pression : lpc , celp , mbe , melp . also introduc recent open sourc speech audio codec speex opu . © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_13479480 13 basic audio compress techniqu 13.1 adpcm speech code 13.1.1 adpcm adpcm form heart itu ’ speech compress standard g.721 , g.723 , g.726 , g.727 , g.728 , g.729 . differ among standard involv thebitr detail algorithm . default input µ-law-cod pcm 16-bit sampl . speech perform adpcm perceiv qualiti speech 32 kbp slightli poorer standard 64 kbp pcmtransmiss better dpcm . figur 13.1 show one second speech sampl voic speak word “ audio. ” fig . 13.1a , audio signal store linear pcm ( oppos default µ-law pcm ) record 8,000 sampl per second , 16 bit per sampl . compress adpcm use itu standard g.721 , signal appear infig . 13.1b . figur 13.1c show differ actual reconstruct , compress signal . although differ appar electron two , compress origin signal perceptu similar . 13.1.2 g.726 adpcm , g.727-9 itu g.726 provid anoth version g.711 , includ compand , lower bitrat . g.726 encod 13- 14-bit pcm sampl 8-bit µ-law a-law encod data 2- , 3- , 4- , 5-bit codeword . use speech transmiss digit network . g.726 standard work adapt ﬁxed quantiz simpl way . differ size codeword use yield bitrat 16 , 24 , 32 , 40 kbp . stan- dard deﬁn multipli constant αthat chang everi differ valu en , depend current scale signal . deﬁn scale differ signal fna follow : en=sn−ˆsn fn=en/α ( 13.1 ) ˆsni predict signal valu . fni fed quantiz quantiza- tion . quantiz display fig . 13.2 . , input valu deﬁn ratio differ factor α . chang valu α , quantiz adapt chang rang differ signal . quantiz nonuniform midtread quantiz , includ valu zero . quantiz backward adapt . backward-adapt quantiz work principl notic mani valu quantiz valu far zero ( would happen quantiz step size infwa small ) mani valu fell close zero much time ( would happen quantiz step size larg ) .13.1 adpcm speech code 481 fig . 13.1 waveform word “ audio : ” aspeech sampl , linear pcm 8 khz 16 bit per sampl ; bspeech sampl , restor g.721-compress audio 4 bit per sampl ; cdiffer signal ( ) n ( b ) time0 2000 4000 6000 8000 0 2000 4000 6000 8000 0 2000 4000 6000 8000 ( ) time ( b ) time−1.0−0.50.00.51.0−1.0−0.50.00.51.0−1.0−0.50.00.51.0 ( c ) fig . 13.2 g.726 quantiz inputoutput −10 −51 0−10−510 0 5 05482 13 basic audio compress techniqu fact , algorithm due jayant [ 1 ] allow us adapt backward quantiz step size receiv one output ! jayant quantiz simpli expand step size quantiz input outer level quantiz reduc thestep size input near zero . suppos uniform quantiz , everi rang compar input valu size /delta1 . exampl , 3-bit quantiz , k=0 .. 7 level . 3-bit g.726 , 7 level use , group around zero . jayant quantiz assign multipli valu kto level , valu smaller 1 level near zero valu larger 1 outer level . themultipli multipli step size next signal valu . way , outer valu enlarg step size like bring next quantiz valu back middl avail level . quantiz valu near middl reduc step size like bring next quantiz valu closer outer level . , signal f n , quantiz step size /delta1i chang accord quantiz valu k , previou signal valu fn−1 , simpl formula /delta1←mk/delta1 . ( 13.2 ) sinc quantiz version signal drive chang , inde backward-adapt quantiz . g.726 , αi allow chang depend whether audio signal actual speech like data simpli use voic band . former case , sample-to-sampl differ ﬂuctuat great deal , wherea , latter caseof data transmiss , less true . adjust either situat , factor αi adjust use formula two piec . g.726 work backward-adapt jayant quantiz use ﬁxed quantiz step base logarithm input differ signal , e ndivid α . divisor αi written term logarithm : β=log2α . ( 13.3 ) sinc wish distinguish situat differ valu usual small , larg , αi divid so-cal lock part , αl , unlock part , αu . idea lock part scale factor small differ valu chang slowli , wherea unlock part adapt quickli larger differ . correspond log quantiti βlandβu . logarithm valu written sum two piec , β=aβu+ ( 1−a ) βl ( 13.4 ) achang 1 speech , 0 voice-band data . calcul base varianc signal , keep track sever past signal values.13.1 adpcm speech code 483 “ unlock ” part adapt via equat αu←mkαu βu←log2mk+βu ( 13.5 ) mki jayant multipli kth level . lock part slightli modiﬁ unlock part , via βl← ( 1−b ) βl+bβu ( 13.6 ) bi small number , say 2−6 . g.726 predictor complic : use linear combin six quantiz differ two reconstruct signal valu previou six signal valu fn . itu standard g.728 g.729 use code excit linear predict ( celp ) , discuss sect . 13.2.5 . 13.2 vocod coder ( encoding/decod algorithm ) studi far could appli signal , speech . vocod speciﬁc voic coder . v ocod concern model speech salient featur captur bit possibl . use either model speech waveform time ( linear predict code ( lpc ) vocod ) , els break signal frequenc compon model ( channel vocod formant vocod ) . incident , know vocod simul voic wonder yet—when librari call overdu notiﬁc , autom voicei strang lack zest . 13.2.1 phase insensit recal sect . 8.5that break signal constitu frequenc analyz use variant fourier analysi . principl , also reconstitut signal frequenc coefﬁcient develop way . turn complet reconstitut speech waveform unnecessari , perceptu : need amount energi time right , signal sound right . “ phase ” shift time argument , insid function time . suppos strike piano key gener roughli sinusoid sound co ( ωt ) , ω=2πf fi frequenc . wait sufﬁcient time gener phase shift π/2 strike anoth key , sound co ( 2ωt+π/2 ) , gener waveform like solid line fig . 13.3 . waveform sum co ( ωt ) +co ( 2ωt+π/2 ) .484 13 basic audio compress techniqu fig . 13.3 solid line show superposit two cosin , phase shift . dash line show h es ew hn op h es h f . h ew v ei sv e r yd f f e r e n , yet sound , perceptu time ( msec ) 0.0 0.5 1.0 1.5 2.0 2.5 3.0−2−12 01 wait strike second note ( 1 /4 ms , fig . 13.3 ) , wave- form would co ( ωt ) +co ( 2ωt ) . perceptu , two note would sound , even though actual would shift phase . henc , get energi spectrum right—wher hear loud quiet—then ’ realli worri exact waveform . 13.2.2 channel vocod subband ﬁltere process appli bank band-pass ﬁlter analog signal , thu actual carri frequenc decomposit indic fourier analysi . subband code process make use inform deriv ﬁltere achiev better compress . exampl , older itu recommend , g.722 , use subband ﬁltere analog signal two band : voic frequenc 50 hz 3.5 khz 3.5 7 khz . set two signal transmit 48 kbp low frequenc , hear discrep well , 16 kbp high frequenc . v ocod oper low bitrat , 1–2 kbp . , channel vocod ﬁrst appli ﬁlter bank separ differ frequenc compon , fig . 13.4 . howev , saw , energi import , ﬁrst , waveform “ rectiﬁ ” absolut valu . ﬁlter bank deriv rel power level frequenc rang . subband coder would rectifi signal would use wider frequenc band . channel vocod also analyz signal determin gener pitch speech—low ( bass ) , high ( tenor ) —and also excit speech . speech excit mainli concern whether sound voic orunvo . sound unvoic signal simpli look like nois : sound sandfar unvoic . sound vowel , e , oar voic , waveform look period . end word “ audio ” fig . 13.1 fairli period . vowel sound , air forc vocal cord stream regular , short puff , occur rate 75–150 puls per second men 150–250 per second women . conson voic unvoic . nasal sound letter mand n , vocal cord vibrat , air exhal nose rather mouth.13.2 vocod 485 low-frequ filter mid-frequ filter high-frequ filter nois generatorpuls generatorlow-frequ filter mid-frequ filter high-frequ filter multiplex , transmit , demultiplexfrom 2nd analysi filter 3rd analysi filterfrom 1st analysi filter pitch periodvoiced/unvo decisionanalysi filter synthesi filter . . . . . . . . . pitch fig . 13.4 channel vocod conson , therefor , voic . sound b , , g , mouth start close open follow vowel transit last millisecond , also voic . energi voic conson greater unvoic conson less vowel . exampl unvoic conson includ sound sh , th , hwhen use front word . channel vocod appli vocal-tract transfer model gener vector excit paramet describ model sound . vocod also guess whether sound voic unvoic , voic sound , estim period ( i.e. , sound ’ pitch ) . figur 13.4 show decod also appli vocal-tract model . voic sound approxim sinusoid , period puls gen- erat recreat voic sound . sinc unvoic sound noise-lik , pseudo-nois gener appli , valu scale energi estim given band-pass ﬁlter set . channel vocod achiev intellig synthet voic use 2,400 bp . 13.2.3 formant vocod turn frequenc present speech equal repres . instead , certain frequenc show strongli , other weak . direct consequ speech sound form , reson chamber mouth , throat , nose . import frequenc peak call formant [ 2 ] . figur 13.5 show appear : , usual four , peak energi certain frequenc present . peak locat , howev , change486 13 basic audio compress techniqu frequenc ( 8,000/32 hz ) ab ( coeffici ) 10 13 16 19 22 25 28 31 02468 fig . 13.5 formant salient frequenc compon present sampl speech . , solid line show frequenc present ﬁrst 40 ms speech sampl fig . 6.16 . dash line show similar frequenc still present , one second later , shift time , speech continu . exampl , two differ vowel sound would acti- vate differ set formants—thi reﬂect differ vocal-tract conﬁgur necessari form vowel . usual , small segment speech analyz , say 10–40 ms , formant found . formant vocod work encod import frequenc . formant vocod produc reason intellig speech 1,000 bp . 13.2.4 linear predict code lpc vocod extract salient featur speech directli waveform rather transform signal frequenc domain . lpc code use time- vari model vocal-tract sound gener given excit . trans- mit set paramet model shape excit vocal tract , actual signal differ . sinc sent analysi sound rather sound , bitrat use lpc small . like use simpl descriptor midi gener music : send descript paramet let sound gener best creat appropri music . differ well pitch , durat , loud variabl , also send vocal-tract excit paramet . block digit sampl , call segment orfram , analyz , speech signal gener output vocal-tract model calcul function current speech output plu second term linear previou model coefﬁcient . “ linear ” coder ’ name aris . model adaptive—th encod side send new set coefﬁcient new segment . typic number set previou coefﬁcient use n=10 ( “ model order ” 10 ) , lpc-10 [ 3 ] system typic use rate 2.4 kbp . model coefﬁcient aiact predictor coefﬁcient , multipli previou speech output sampl valu . lpc start decid whether current segment voic unvoic . unvoic speech , wide-band nois gener use creat sampl valu f ( n ) 13.2 vocod 487 act input vocal-tract simul . voic speech , pulse-train gener creat valu f ( n ) . model paramet aiar calcul use least-squar set equat minim differ actual speech speechgener vocal-tract model , excit nois pulse-train gener captur speech paramet . output valu gener denot ( n ) , input valu f ( n ) , output depend ppreviou output sampl valu , via ( n ) =p/summationdisplay i=1ai ( n−i ) +gf ( n ) . ( 13.7 ) , gi known gain factor . note coefﬁcient aiact valu linear predictor model . pseudo-nois gener puls gener discuss depict fig . 13.4 regard channel vocod . speech encod work blockwis fashion . input digit speech signal analyz small , ﬁxed-length segment , call speech frame . lpc speech coder , frame length usual select 22.5 ms , correspond 180 sampl 8 khz sampl digit speech . speech encod analyz thespeech frame obtain paramet lp coefﬁcient , i=1 , ... , p , gain g , pitch p , voiced/unvo decis u/v . calcul lp coefﬁcient , solv follow minim problem foraj : min e { [ ( n ) −p/summationdisplay j=1aj ( n−j ) ] 2 } . ( 13.8 ) take deriv aiand set zero , get set pequat : e { [ ( n ) −p/summationdisplay j=1aj ( n−j ) ] ( n−i ) } =0 , i=1 , ... , p ( 13.9 ) let φ ( , j ) =e { ( n−i ) ( n−j ) } , w eh v e ⎡ ⎢⎢⎢⎣φ ( 1,1 ) φ ( 1,2 ) ···φ ( 1 , p ) φ ( 2,1 ) φ ( 2,2 ) ···φ ( 2 , p ) ............ φ ( p , 1 ) φ ( p,2 ) ···φ ( p , p ) ⎤ ⎥⎥⎥⎦⎡ ⎢⎢⎢⎣a 1 a2 ... ap⎤ ⎥⎥⎥⎦=⎡ ⎢⎢⎢⎣φ ( 0,1 ) φ ( 0,2 ) ... φ ( 0 , p ) ⎤ ⎥⎥⎥⎦ ( 13.10 ) autocorrel method often use calcul lp coefﬁcient , φ ( , j ) = n−1/summationdisplay n=psw ( n−i ) sw ( n−j ) /n−1/summationdisplay n=ps2 w ( n ) i=1 , ... , p , j=1 , ... , p ( 13.11 ) 488 13 basic audio compress techniqu sw ( n ) =s ( n+m ) w ( n ) window speech frame start time m. sinc φ ( , j ) determin |i−j| , deﬁn φ ( , j ) =r ( |i−j| ) . sinc also r ( 0 ) ≥0 , matrix { φ ( , j ) } posit symmetr , thu fast scheme calcul lp coefﬁcient follow : procedur 13.1 ( lpc coefﬁcient ) . e ( 0 ) =r ( 0 ) , i=1 i≤p ki= [ r ( ) −/summationtexti−1 j=1ai−1 jr ( i−j ) ] /e ( i−1 ) ai i=ki forj=1t i−1 ai j=ai−1 j−kiai−1 i−j e ( ) = ( 1−k2 ) e ( i−1 ) i←i+1 forj=1t p aj=ap j get lp coefﬁcient , gain gca n calcul g=e { [ ( n ) −p/summationdisplay j=1aj ( n−j ) ] 2 } =e { [ ( n ) −p/summationdisplay j=1aj ( n−j ) ] ( n ) } ( 13.12 ) =φ ( 0,0 ) −p/summationdisplay j=1ajφ ( 0 , j ) autocorrel scheme , g=r ( 0 ) −/summationtextp j=1ajr ( j ) . order-10 lp analy- si found enough speech code applic . pitch pof current speech frame extract correl method ﬁnding index peak v ( ) =n−1+m/summationdisplay n=m ( n ) ( n−i ) /slashbigg/bracketleftbiggn−1+m/summationdisplay n=ms2 ( n ) ·n−1+m/summationdisplay n=ms2 ( n−i ) /bracketrightbigg1/2 , i∈ [ pmin , pmax ] . ( 13.13 ) search rang [ pmin , pmax ] often select [ 12,140 ] 8 khz sampl speech . denot pa peak lag . v ( p ) less given threshold , current frame classiﬁ unvoic frame reconstruct receivingend stimul white-nois sequenc . otherwis , frame determin voic stimul period waveform reconstruct stage . practic lpc speech coder , pitch estim u/v decis procedur are13.2 vocod 489 usual base dynam program scheme , correct often occur error pitch doubl halv singl frame scheme . lpc-10 , segment 180 sampl , length 22.5 ms 8 khz . speech paramet transmit coefﬁcient ak ; g , gain factor ; voiced/unvo ﬂag ( 1 bit ) ; pitch period speech voic . 13.2.5 celp celp , code excit linear predict ( sometim codebook excit ) , complex famili coder attempt mitig lack qualiti simpl lpc model use complex descript excit . entir set ( codebook ) excit vector match actual speech index best match sent receiv . complex increas bitrat to4,800–9,600 bp , typic . celp , sinc speech segment make use set templat templat codebook , result speech perceiv much natur thetwo-mod excit scheme lpc-10 coder . qualiti achiev consid sufﬁcient audio conferenc . celp coder , two kind predict , long time predict ( ltp ) short time predict ( stp ) use elimin redund speech signal . stp analysi sampl —it attempt predict next sampl sever previou one . , redund due fact usual one sampl changedrast next . ltp base idea segment speech , perhap segment segment , especi voic sound , basic period pitch caus waveform less repeat . reduc redundancybi ﬁnding pitch . concret , suppos sampl 8,000 samples/ use 10 ms frame , contain 80 sampl . roughli expect pitch correspond approxim repeat pattern everi 12–140 sampl . ( notic pitch may actual longer chosen frame size . ) stp base short-tim lpc analysi , discuss last section . “ short-tim ” predict involv sampl , whole frame sever frame . stp also base minim residu error wholespeech frame , captur correl short rang sampl ( 10 order-10 lpc ) . stp , subtract signal minu predict arriv differenti code situat . howev , even set error e ( n ) , basic pitch sequenc may still remain . estim mean ltp . , ltp use elimin period redund inher voic speech signal . essenti , stp captur formant structur short-term speech spectrum , ltp recov long-term correl speech signal repres period speech . thu , alway two stages—and order fact usual stp follow ltp , sinc alway start assum zero error remov pitch490 13 basic audio compress techniqu w ( z ) /a ( z ) adapt codebook −stp weight speech sw ( n ) origin speech ( n ) ga gsw ( z ) ltp stochast codebook+weight synthes speech sˆw ( n ) weight error ew ( n ) . . . . . . fig . 13.6 celp analysi model adapt stochast codebook compon . ( use closed-loop scheme , stp usual done ﬁrst ) . ltp proce use whole frames—or , often , subfram equal one quarter frame . figur 13.6 show two stage . ltp often implement adapt codebook search . “ codeword ” adapt codebook shift speech residu segment index lag τ correspond current speech frame subfram . idea look codebook waveform ﬁnd one match current subfram . gener look codebook use normal subfram speech , well speech segment match , also obtain scale valu ( gain ) . gain correspond codeword denot g0 . two type codeword search : open-loop closed-loop . open- loop adapt codebook search tri minim long-term predict error perceptu weight reconstruct speech error e ( τ ) =l−1/summationdisplay n=0 [ ( n ) −g0 ( n−τ ) ] 2 ( 13.14 ) set partial deriv g0to zero , ∂e ( τ ) /∂g0=0 , get g0=/summationtextl−1 n=0 ( n ) ( n−τ ) /summationtextl−1 n=0s2 ( n−τ ) ( 13.15 ) 13.2 vocod 491 henc minimum summed-error valu emin ( τ ) =l−1/summationdisplay n=0s2 ( n ) − [ /summationtextl−1 n=0 ( n ) ( n−τ ) ] 2 /summationtextl−1 n=0s2 ( n−τ ) . ( 13.16 ) notic sampl ( n−τ ) could previou frame . , obtain optimum adapt codebook index τ , carri search exclus small rang determin pitch period . often , celp coder use closed-loop search . rather simpli consid sum-of-squar , speech isreconstruct , perceptu error minim via adapt codebook search . closed-loop , adapt codebook search , best candid adapt codebook select minim distort local reconstruct speech.paramet found minim measur ( usual mean squar ) differ origin reconstruct speech . sinc mean simultan incorpor synthesi , well analysi speech segment , method also call analysis-by-synthesi , ra-b- . residu signal stp base lpc analysi ltp base adapt codeword search like white nois encod codeword match stochast ( random probabilist ) codebook . kind sequenti optim adapt codeword stochast codeword method use jointlyoptim adapt stochast codeword often complex meet real- time demand . decod direct revers process work combin contribut two type excit . dod 4.8 kbp celp ( fs1016 ) * dod 4.8 kbp celp [ 4 ] earli celp coder adopt u.s. feder standard updat 2.4 kbp lpc-10e ( fs1015 ) vocod . vocod basic benchmark test low-bitr vocod . fs1016 use 8 khz sampl rate 30 ms frame size . frame split four 7.5 ms subfram . fs1016 , stp base open-loop order-10 lpc analysi . improv code efﬁcienc , fairli sophist type transform code carri . , quantiz compress done term transform coefﬁcient . first , ﬁeld common use z-transform . , zi complex number repres kind complex “ frequency. ” z=e−2πi/n , discret z- transform reduc discret fourier transform . z-transform make fourier transform look like polynomi . write error predict equat e ( n ) =s ( n ) −p/summationdisplay i=1ai ( n−i ) ( 13.17 ) 492 13 basic audio compress techniqu zdomain e ( z ) =a ( z ) ( z ) ( 13.18 ) e ( z ) z-transform error ( z ) transform signal . term ( z ) transfer function zdomain , equal ( z ) =1−p/summationdisplay i=1aiz−i ( 13.19 ) coefﬁcient aia appear eq . ( 13.7 ) . speech reconstruct , , via ( z ) =e ( z ) /a ( z ) ( 13.20 ) estim error . reason , ( z ) usual state term 1 /a ( z ) . idea go z-transform domain convert lp coefﬁcient line spectrum pair ( lsp ) coefﬁcient , given domain . reason lsp space sever good properti respect quantiz . lsp represent becom standard appli nearli recent lpc-base speech coder , g.723.1 , g.729 , melp . get lsp coefﬁcient , construct two polynomi p ( z ) =a ( z ) +z − ( p+1 ) ( z−1 ) q ( z ) =a ( z ) −z− ( p+1 ) ( z−1 ) ( 13.21 ) pi order lpc analysi ( z ) transform function lp ﬁlter , zthe transform domain variabl . z-transform like fourier transform complex “ frequency. ” root two polynomi space around unit circl zplane mirror symmetri respect x-axi . assum pi even denot phase angl root p ( z ) andq ( z ) xaxi θ1 < θ2 < ... < θp/2 andϕ1 < ϕ2 < ... < ϕp/2 , respect . vector { co ( θ1 ) , co ( ϕ1 ) , co ( θ2 ) , co ( ϕ1 ) ... co ( θp/2 ) , co ( ϕp/2 ) } lsp coefﬁcient vector , vector { θ1 , ϕ1 , θ2 , ϕ1… , θp/2 , ϕp/2 } usual call line spectrum frequenc , rlsf . base relationship ( z ) = [ p ( z ) +q ( z ) ] /2 , reconstruct lp coefﬁcient decod end lsp lsf coefﬁcient . adapt codebook search fs1016 via closed-loop search base perceptu weight error . oppos consid mean squar error , error weight take human percept account . term z-transform , found follow multipli good job : w ( z ) =a ( z ) ( z/γ ) =1−/summationtextp i=1aiz−i 1−/summationtextp i=1aiγiz−i0 < γ < 1 ( 13.22 ) constant paramet γ.13.2 vocod 493 adapt codebook 256 codeword 128 integ delay 128 non- integ delay ( half-sampl interv , better resolut ) , former rang 20 147 . reduc search complex , even subfram search aninterv rel previou odd subfram , differ code 6 bit . gain nonuniformli scalar code −1 2 5 bit . stochast codebook search appli four subfram . stochas- tic codebook fs1016 gener clip unit varianc gaussian distribut random sequenc within threshold absolut valu 1.2 quantiz three valu −1 , 0 , 1 . stochast codebook 512 codeword . codeword overlap , shift 2 respect previou codeword . kind stochast design call algebra codebook . mani variat wide appli recent celp coder . denot excit vector v ( ) , period compon obtain ﬁrst stage v ( 0 ) .v ( 1 ) stochast compon search result second stage . closed-loop search , reconstruct speech repres /hatwides=/hatwides0+ ( u+v ( ) ) h ( 13.23 ) ui equal zero ﬁrst stage v ( 0 ) second stage , /hatwides0i zero respons lpc reconstruct ﬁlter . matrix truncat lpc reconstruct ﬁlter unit impuls respons matrix h=⎡ ⎢⎢⎢⎢⎢⎣h 0h1h2···hl−1 0h0h1···hl−2 00 h0···hl−3 ............... 0000 h0⎤ ⎥⎥⎥⎥⎥⎦ ( 13.24 ) li length subfram ( simpli repres convolut ) . simi- larli , deﬁn unit respons matrix perceptu weight ﬁlter , perceptu weight error reconstruct speech e= ( s−/hatwid ) w=e 0−v ( ) hw ( 13.25 ) e0= ( s−/hatwides0 ) w−uhw . codebook search process ﬁnd code- word ( ) codebook correspond ( ) v ( ) =a ( ) ( ) andeet minim . make problem tractabl , adapt stochast codebook search sequenti . denot quantiz version ˜a ( ) =q [ ˆa ( ) ] , criterion codeword search adapt codebook stochast codebook minim eetov ( ) term express ˜a ( ) , e0 , ( ) . decod celp codec revers process encod . unsymmetr complex properti vector quantiz , complex decod side usual much lower.494 13 basic audio compress techniqu g.723.1 * g723.1 [ 5 ] itu standard aim multimedia commun . incorpor h.324 audio encod videoconfer applic . g.723.1 dual rate celp-typ speech coder work bitrat 5.3 6.3 kbp . g.723.1 use mani techniqu similar fs1016 , discuss last section . input speech 8 khz , sampl 16-bit linear pcm format . speech frame size also 30 ms divid four equal-s subfram . order- 10 lpc coefﬁcient estim subfram . lp coefﬁcient furtherconvert lsp vector quantiz predict split vq . lp coefﬁcient also use form perceptu weight ﬁlter . g.723.1 ﬁrst use open-loop pitch estim get coars pitch estim time interv everi two subfram . closed-loop pitch search done everi speech subfram search data rang open-loop pitch.aft lp ﬁltere remov harmon compon ltp , stochast residu quantiz multi-puls maximum likelihood quantiz ( mp-mlq ) 5.3 kbp coder algebraic-code-excit linear predict ( acelp ) 6.3 kbp coder , slightli higher speech qualiti . two mode switch boundari 30 ms speech frame . mp-mlq , contribut stochast compon repres sequenc puls v ( n ) = m/summationdisplay i=1giδ ( n−mi ) ( 13.26 ) mi number puls gii gain puls posit mi . closed-loop search done minim e ( n ) =r ( n ) −m/summationdisplay i=1gih ( n−mi ) ( 13.27 ) r ( n ) speech compon perceptu weight elimin zero respons compon period compon contribut . base methodssimilar present last section , sequenti optim gain posit puls . say , ﬁrst assum one puls ﬁnd best gain posit . remov contribut puls , get next optim puls base method . process done recurs get mpuls . stochast codebook structur acelp model differ fs1016 . follow tabl show acelp excit codebook : sign posit ±10,8,16,24,32,40,48,56 ±12,10,18,26,34,42,50,58 ±14,12,20,28,36,44,52 , ( 60 ) ±16,14,22,30,38,46,54 , ( 62 ) ( 13.28 ) 13.2 vocod 495 four puls . eight posit , code three bit . also , sign puls take one bit , anoth bit shift possibl posit odd . thu , index codeword 17 bit . specialstructur algebra codebook , fast algorithm exist efﬁcient codeword search . besid celp coder discuss , mani celp-typ codec , develop mainli wireless commun system . basic concept coder similar , except differ implement detail paramet analysi codebook structur . exampl includ 12.2 kbp gsm enhanc full rate ( efr ) algebra celp codec [ 6 ] is-641efr [ 7 ] , design north american digit cellular is-136 tdma system . g.728 [ 8 ] low-delay celp speech coder . g.729 [ 9 ] anoth celp base itu standard aim toll-qual speech commun . g.729 conjugate-structur algebraic-code-excited-linear-predict ( cs- acelp ) codec . g.729 use 10 ms speech analysi frame , thu lower delay g.723.1 , use 30 ms speech frame . g.729 also inher protect scheme deal packet loss applic v oip . 13.2.6 hybrid excit vocod * hybrid excit v ocod anoth larg class speech coder . dif-fer celp , excit repres contribut ofth adapt stochast codeword . instead , hybrid excit coder use model- base method introduc multi-model excit . mbe multi-band excit ( mbe ) [ 10 ] vocod develop mit ’ lincoln laboratori . 4.15 kbp imb codec [ 11 ] becom standard immsat . mbe also blockwis codec , speech analysi done speech frame unit 20–30 ms . analysi part mbe coder , spectrum analysi fft ﬁrst appli window speech current frame.th short-tim speech spectrum divid differ spectrum band . bandwidth usual integ , time basic frequenc equal invers pitch . band describ “ voic ” “ unvoic ” . paramet mbe coder thu includ spectrum envelop , pitch , unvoiced/vo ( u/v ) decis differ band . base differ bitrat demand , phase spectrum parameter discard . speechdecod process , voic band unvoic band synthes differ scheme combin gener ﬁnal output . mbe util analysis-by-synthesi scheme paramet estim . param- eter basic frequenc , spectrum envelop , subband u/v decis done via closed-loop search . criteria closed-loop optim are496 13 basic audio compress techniqu base minim perceptu weight reconstruct speech error , repres frequenc domain ε=1 2π+π/integraldisplay −πg ( ω ) |sw ( ω ) −swr ( ω ) |dω ( 13.29 ) sw ( ω ) swr ( ω ) origin speech short-tim spectrum recon- struct speech short-tim spectrum , g ( ω ) spectrum perceptu weight ﬁlter . similar closed-loop search scheme celp , sequenti optim method use make problem tractabl . ﬁrst step , band assum voic band , spectrum envelop basic frequenc estim . rewrit- ing spectrum error all-voic assumpt , ˇε=m/summationdisplay m=−m [ 1 2πβm/integraldisplay αmg ( ω ) |sw ( ω ) −amewr ( ω ) |2dω ] ( 13.30 ) mi band number [ 0 , π ] , ami spectrum envelop band , ewr ( ω ) short-tim window spectrum , αm= ( m−1 2 ) ω0 , βm= ( m+1 2 ) ω0 . set ∂ˇε/∂am=0 , get am=/integraltextβm αmg ( ω ) sw ( ω ) e∗ wr ( ω ) dω /integraltextβm αmg ( ω ) |ewr ( ω ) |2dω ( 13.31 ) basic frequenc obtain time search frequenc interv minim ˇε . base estim spectrum envelop , adapt thresh- old scheme test match degre band . label band voic good match ; otherwis , declar band unvoic re-estimateth envelop unvoic band m=/integraltextβm αmg ( ω ) |sw ( ω ) |dω /integraltextβm αmg ( ω ) dω . ( 13.32 ) decod use separ method synthes unvoic voic speech , base unvoic voic band . two type reconstruct componentsar combin gener synthes speech . ﬁnal step overlap sum synthes speech frame get ﬁnal output.13.2 vocod 497 multiband excit linear predict ( melp ) melp speech codec new u.s. feder standard replac old lpc-10 ( fs1015 ) standard , applic focu low-bitr safeti commun . 2.4 kbp , melp [ 12 ] compar speech qualiti 4.8 kbp dod-celp ( fs1016 ) good robust noisi environ . melp also base lpc analysi . differ hard-decis voiced/ unvoic model adopt lpc-10 , melp use multiband soft-decis model excit signal . lp residu band-pass , voic strengthparamet estim band . decod reconstruct excit signal combin period puls white nois , base voic strength band . speech reconstruct pass excit lpc synthesi ﬁlter . differ mbe , melp divid excit ﬁve ﬁxed band 0–500 , 500–1000 , 1000–2000 , 2000–3000 , 3000–4000 hz . estim voic degre paramet band base normal correl function speech signal smooth , rectiﬁ signal non-dc band . let k ( n ) denot speech signal band k , uk ( n ) denot dc-remov smooth rectiﬁ signal ofsk ( n ) . correl function deﬁn rx ( p ) =/summationtextn−1 n=0x ( n ) ·x ( n+p ) /bracketleftbig/summationtextn−1 n=0x2 ( n ) ·/summationtextn−1 n=0x2 ( n+p ) /bracketrightbig1/2 ( 13.33 ) pi pitch current frame , ni frame length . voic strength band ki deﬁn max ( rsk ( p ) , ruk ( p ) ) . remov buzzi tradit lpc-10 speech coder voic speech segment , melp adopt jitteri voic state simul margin voic speech segment . jitteri state indic aperiod ﬂag . aperiodicﬂag set analysi end , receiv add random shift compon period puls excit . shift big p/4 . jitteri state determin peaki full-wav rectiﬁ lp residu e ( n ) , peaki =/bracketleftbig 1 n/summationtextn−1 n=0e ( n ) 2/bracketrightbig1/2 1 n/summationtextn−1 n=0|e ( n ) | . ( 13.34 ) peaki greater threshold , speech frame determin jitter . better reconstruct short-tim spectrum speech signal , spectrum residu signal assum ﬂat , lpc-10 speech coder . normal lp residu signal , melp preserv magnitud correspondingto ﬁrst min ( 10 , p/4 ) basic frequenc harmon . basic frequenc invers pitch period . higher harmon discard assum uniti spectrum . 10-d magnitud vector quantiz 8-bit vector quantiz , use perceptu weight distanc measur . similar modern lpc quantization498 13 basic audio compress techniqu scheme , melp also convert lpc paramet lsf use four-stag vector quantiz . bit alloc four stage 7 , 6 , 6 , 6 , respect . apart integr pitch estim similar lpc-10 , melp appli fractionalpitch reﬁnement procedur improv accuraci pitch estim . speech reconstruct process , melp use period puls repres period excit signal use dispers waveform . disperseth puls , ﬁnite impuls respons ( fir ) ﬁlter appli puls . melp also appli perceptu weight ﬁlter reconstruct speech suppress quantiz nois improv subject ’ speech qualiti . tabl 13.1 list speech codec cover section . tabl 13.1 , gsm full rate 13 kbp use celp-typ speech codec rte-lpc . mo score differ codec tabl indic qualiti encod speech . score 4.2 deem toll qualiti . bit rate drop 8kbp , mo score often drop rapidli encod artifact becom audibl . verylow bit rate speech codec 1.2 2.4 kbp , encod artifact becom easili notic . low bit rate , intellig decod speech becom import . discuss previou section , differ speech code scheme share mani similar overal structur . speech code standard form year ago . howev , research engin speech code stopped.a internet becom almost everywher , speech code adapt network commun becom import . follow , discuss recent open sourc speech codec target voic internet applic . 13.3 open sourc speech codec * speech code evolv year . widespread internet , voic network becom import . differ tradit tabl 13.1 comparison differ speech code standard year bit rate ( kbp ) codec mo 1972 64 pcm 4.4 1976 2.4 lpc-10 ( fs-1015 ) 2.7 1984 16 g726 adpcm 3.9 1990 4.15 mbe ( inmarsat ) 3.2 1991 13 gsm ( rte-lpc ) 3.6 1991 4.8 celp ( fs-1016 ) 3.2 1992 16 g.728 ( ld-celp ) 4.0 1995 8 g.729 4.2 1995 6.3 g.723.1 ( h.323 h.324 ) 3.4 1995 2.4 melp 3.213.3 open sourc speech codec * 499 commun channel , internet provid dramat differ bandwidth thu speech audio codec abl support differ bit rate . variabl bit rate encod ﬂy also often prefer due constant bandwidthvari network . mani applic also interact , requir codec short delay . differ speech audio codec develop meet need . high bandwidth speech encod also desir becausesometim audio includ speech , also gener audio signal music . modern speech codec thu often use hybrid structur handl low bandwidth speech high bandwidth audio simultan . mani ofsuch codec open sourc use freeli restrict commerci applic . 13.3.1 speex speex [ 13 ] open sourc patent-fre speech codec provid free alterna- tive expens proprietari speech codec . speex design v oic overinternet . revis bsd licens use free commerci . speex celp type speech codec . support differ input bandwidth : nar- rowband ( 8 khz ) , wideband ( 16 khz ) ultrawideband ( 32 khz ) . target bitratei 2 44 kbp support variabl bit rate encod . similar standard celp speech codec , speex also use sourc ﬁlter model . ﬁlter model characterist human vocal tract sourc stimul vocal trackﬁlter gener output speech . tradit linear predict ﬁlter use model vocal tract use ﬂatten spectrum residu signal . excit speex gener two type sourc : period one adaptivecodebook noise-lik one ﬁxed codebook . adapt codebook construct sampl previous decod speech sampl model period compon sourc . voic speech segment , pitch estim use correl method long-term predict approxim speech excit use previou reconstruct one shift pitch weightedbi pitch gain . innov signal taken ﬁxed codebook plu long- term predict form excit . speex use analysis-by-synthesi method gener excit signal optim match origin excit termsof perceptu weight spectrum . narrowband mode ( 8 khz ) , speex quit similar regular celp . speex use frame 20 ms 4 subfram , length 5 ms . use lspsto repres lpc quantiz encod . analysis-by-synthesi encod loop similar standard celp encod . long-term predict use three-tap predictor three gain one singl pitch predict . speexencod gain subfram use share gain subfram gain cor- rection . differ standard celp implement increas robust packet loss happen . innov signal gener differentfrom standard celp . speex use algebra codebook technol- ogi patent . instead , speex , subfram divid sub-groups500 13 basic audio compress techniqu length rang 5 20 sampl sub-group vector quantiz use bitrat depend ﬁxed codebook . wideband mode ( 16 khz ) , speex use ﬁlter split input two band , lower band 0 8 khz upper band 8 16 khz . lower band process previous mention narrowband mode encod . upper band oper similarli except estim pitch . sinc speex design v oic internet , also includ function packag encod frame rtp packet stream network . rtp packet may contain one encod frame multipl frame . inth internet channel , error mostli packet loss instead bit corrupt . design speex take factor consider . 13.3.2 opu opu [ 14 ] anoth open , royalty-fre high qualiti audio codec . standard internet engin task forc ( ietf ) known rfc 6716 . differ fromspeex , codec design mainli speech ( v oic internet ) , opu use encod speech gener audio . speech codec adapt skype ’ silk codec audio codec celt [ 15 ] codec . opu better speech compress qualiti speex . due good qualiti open , wide adopt applic v oic internet , wideband video confer , music stream , low-delay broadcast . opu support bitrat from6 510 kbp deal input bandwidth 8 48 khz . support mono stereo mode . opu audio codec ’ diagram illustr fig . 13.7 . opu oper three differ mode : silk-onli mode narrow , median , wideband speech ; hybrid silk celt mode superband fullband speech ; celt-onli mode narrow fullband music . silk lp type speech codec . use order-16 linear predict coefﬁcient ( lpc ) . long-term predict ( ltp ) use 5-tap ﬁlter . silk encod jointlyoptim lpc ltp . silk encod base nois feedback code [ 16 ] rather common analysis-by-synthesi scheme celp codec . nois feedback code also use broadv oic speech codec ( bv16 andbv32 ) . nois feedback code lower comput cost shorter delay analysis-by-synthesi method use tradit celp base speech codec . silk ’ residu encod sequenc puls puls dependentdith . silk use entropi code encod lpc residu signal . silk ’ decod standard lpc type speech decod . celt target wideband audio . howev , design borrow idea celp speech codec . celt short form constrain energi lap trans- form . goal celt provid audio codec short delay use interact applic . similar wideband gener audiocodec , celt use mdct transform input spectrum domain encod- ing . tradit mdct base audio codec use larger window obtain enough13.3 open sourc speech codec * 501 fig . 13.7 opu audio codec diagram fig . 13.8 celt audio codec diagram frequenc resolut . howev , larger window caus long delay . celt use much shorter window reduc delay . celt borrow idea celp : ﬂatten “ excit ” summa- tion adapt ( pitch ) codebook ﬁxed ( innov ) codebook . diagram celt illustr fig . 13.8 . differ celp , celt mainli oper spectrum domain . ﬂatten mdct spectrum normal energyin differ frequenc band . similar celp , celt ’ adapt codebook base pitch estim time shift past associ gain , innov part predict use adapt codebook . long-term predictioni estim use decod audio signal way similar celp ’ long-term predict . innov estim use algebra codebook scheme similar algebra celp , recurs construct optim excit . opu design audio internet . use forward error correct , let packag includ coars encod previou one speech activ . increas robust packet loss . opu also tri encodepackag independ . opu use so-cal discon-502 13 basic audio compress techniqu tinuou transmiss techniqu , reduc packet rate silenc . opu ’ decod also handl packet loss improv robust . 13.4 exercis 1 . sect . 13.2.1 , discuss phase insensit . explain mean term “ phase ” regard individu frequenc compon composit signal . 2 . input speech segment , use c matlab , verifi formant inde exist—that speech segment import frequenc . also , ver- ifi formant chang interv speech examin chang . simpl approach code frequenc analyz reus dct code idea previous consid sect . 8.5 . one dimens , dct transform read f ( u ) =/radicalbigg 2 nc ( u ) n−1/summationdisplay i=0co ( 2i+1 ) uπ 2nf ( ) ( 13.35 ) , u=0,1 , ... , n−1 , constant c ( u ) given c ( u ) =/braceleftbigg√ 2 2ifu=0 1 otherwis ( 13.36 ) use speech sampl fig . 6.16 , take one-dimension dct ﬁrst , last , 40 ms ( i.e. , 32 sampl ) , arriv absolut frequenc compon fig . 13.5 . 3 . write code read w v ﬁle . need follow set deﬁnit : w v ﬁle begin 44-byte header , unsign byte format . import paramet inform code follow : byte [ 22 .. 23 ] number channel byte [ 24 .. 27 ] sampl rate byte [ 34 .. 35 ] sampl bitsbyt [ 40 .. 43 ] data length 4 . write program add fade-in fade-out effect sound clip ( w v format ) . speciﬁc fade follow : algorithm assum linear envelop ; fade-in durat 0 20 % data sampl ; thefade-out durat 80 100 % data sampl . like , make code abl handl mono stereo w v ﬁle . necessari , impos limit size input ﬁle , say 16 mb.13.4 exercis 503 5 . text , studi adapt quantiz scheme adpcm . also use adapt predict scheme . consid case one tap predict , ˆs ( n ) =a· ( n−1 ) . show estim paramet open-loop method . estim snr gain get , compar direct pcm method base uniform quantiz scheme . 6 . linear predict analysi use estim shape envelop short-tim spectrum . given ten lp coefﬁcient a1 , ... , a10 , get formant posit bandwidth ? 7 . download implement celp coder ( see textbook web site ) . tri speech coder record sound . 8 . quantiz lsp vector g.723.1 , split vector quantiz use : dimension lsp 10 , split vector three subvector length 3 , 3 , 4 use vector quantiz subvector separ . compar codebook space complex without split vector quan-tiz . give codebook search time complex improv use split vector quantiz . 9 . discuss advantag use algebra codebook celp code . 10 . lpc-10 speech coder ’ qualiti deterior rapidli strong background nois . discuss melp work better noisi condit . 11 . give simpl time-domain method pitch estim base autocorre- lation function . problem simpl scheme base one speech frame ? three speech frame , includ previou frame futur frame , improv estim result ? 12 . receiv side , speech usual gener base two frame ’ paramet instead one , avoid abrupt transit . give two possibl method obtain smooth transit . use lpc codec illustr idea . 13 . real applic , speech signal usual multipl channel . instanc , stereophon sound use two channel . discuss speech code take advantag similar speech signal among differ channel . 14 . implement basic lpc speech codec matlab , python c++ . speech encod includ function detect whether speech segment voicedor unvoic , detect pitch voic segment , extract linear predict coefﬁcient , energi . encod quantiz key paramet use scalar vector quantiz encod paramet bitstream . thedecod decod paramet reconstruct speech . experi differ way quantiz linear predict coefﬁcient paramet compar speech qualiti differ bit rates.encod speech bitstream may corrupt transmit chan- nel . experi bit error would affect reconstruct speech propos method improv bit error resist speechcodec.504 13 basic audio compress techniqu refer 1 . n. . jayant , p. noll , digit code waveform . ( prentice-hal , 1984 ) 2 . j.c. bellami , digit telephoni . ( wiley , 2000 ) 3 . t.e . tremain , govern standard linear predict code algorithm : lpc-10 , speech technolog ( 1982 ) 4 . j.p. campbel , jr. , t.e . tremain , v .c . welch , dod 4.8 kbp standard ( propos feder standard 1016 ) , advanc speech code . ( kluwer academ publish , 1991 ) 5 . dual rate speech coder multimedia commun transmit 5.3 6.3 kbit/ . itu-t recommend g.723.1 ( 1996 ) 6 . gsm enhanc full rate speech transcod ( gsm 06.60 ) . etsi standard document , en 301 245 ( 1998 ) 7 . tdma cellular / pc radio interface-enhanc full rate speech codec , tia/eia/is-641 stan- dard ( 1996 ) 8 . code speech 16 kbit/ use low-delay code excit linear program . itu-t rec- ommend g.728 ( 1992 ) 9 . code speech 8 kbit/ use conjugate-structur algebraic-code-excit linear-predict ( cs-acelp ) . itu-t recommend g.729 ( 1996 ) 10 . d.w. grifﬁn , j. . lim , multi-band excit vocod . ieee tran . assp 36 ( 8 ) , 1223–1235 ( 1988 ) 11 . inmarsat-m voic codec , v2 . inmarsat-m speciﬁc , inmarsat stand int . mobil satellit ( 1991 ) 12 . t.p . iii mccree , a.v . barnwel , mix excit lpc vocod model low bit rate speech code . ieee tran . speech audio process . 3 ( 4 ) , 242–250 ( 1995 ) 13 . speex . http : //github.com/xiph/speex 14 . opu . http : //github.com/xiph/opu 15 . j.-m. valin , t.b . terriberri , c. montgomeri , g. maxwel , high-qual speech audio codec less 10 ms delay . ieee tran . audio speech languag process . 18 ( 1 ) ( 2010 ) 16 . j.-h. chen , novel codec structur nois feedback code speech , proceed ieee intern confer acoust , speech signal process ( 2006 ) 14mpeg audio compress ever attend danc found quit time afterward ’ hear much ? deal type tempor mask ! ever notic person soundboard danc basic hear high frequenc anymor ? sinc mani technician hear damag , compens increas volum level high frequenc , hear . hear damag , experi music mix pierc . moreov , loud tone produc , also notic imposs hear sound nearbi frequenc spectrum—th band ’ sing may drown lead guitar . ’ notic , experienc frequenc mask ! mpeg audio use kind percept phenomenon simpli give tone ’ heard anyway . use curv human hear perceptu sensit , mpeg audio codec make decis degre frequenc mask tempor mask make compon music inaud . control quantiz process compon inﬂuenc output . far , previou chapter , concentr telephoni applications— usual , lpc celp tune speech paramet . contrast , chapter , consid compress method applic gener audio , music orperhap broadcast digit tv @ . instead model speech , method use waveform code approach—on attempt make decompress amplitude- versus-tim waveform much possibl like input signal . main techniqu use evalu audio content possibl compress make use psychoacoust model hear . kind code carri , , gener refer perceptu code . chapter , look consider impact mpeg audio com- pression standard examin detail follow topic : © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_14505506 14 mpeg audio compress •psychoacoust •mpeg-1 audio compress •later mpeg audio develop : mpeg-2 , 4 , 7 , beyond . 14.1 psychoacoust recal rang human hear 20 hz 20 khz ( peopl gone mani danc ) . sound higher frequenc ultrason . howev , frequenc rang voic typic 500 hz to4 khz . dynam rang , ratio maximum sound amplitud quietest sound human hear , order 120 db . recal decibel unit repres ratio intens logarithm scale . refer point 0 db threshold human hearing—th quietest sound hear , measur 1 khz . technic , sound creat bare audibl sound intens 10 −12watt/m2 . rang magnitud percept thu incred wide : level sensat sound begin give way sensat pain 1 watt/m2 , perceiv ratio 1012 ! rang hear actual depend frequenc . frequenc 2 khz , ear readili respond sound 96 db power smallest perceiv sound frequenc , word power ratio 232 . tabl 6.1 list common sound level decibel . 14.1.1 equal-loud relat suppos play two pure tone , sinusoid sound wave , amplitudebut differ frequenc . typic , one may sound louder . reason ear hear low high frequenc , well hear frequenc middl rang . particular , normal sound volum level , ear mostsensit frequenc 1 5 khz . fletcher-munson curv fletcher-munson equal-loud curv display relationship per-ceiv loud ( phon ) given stimulu sound volum ( sound pressur level , db ) , function frequenc . figur 14.1 show ear ’ percept equal loud . abscissa—th xaxis— ( shown semi-log plot ) frequenc , khz . ordin axi sound pressur level—th actual intens ( i.e. , loud ) tone gener experi . curv show loud suchton perceiv human . bottom curv show level pure tone stimulu requir produc percept 10 db sound.14.1 psychoacoust 507 102030405060708090loud ( phon ) robinson−dadson equal loud respons curv human ear fig . 14.1 fletcher-munson equal-loud respons curv human ear ( remeasur robinson dadson ) curv arrang perceiv loud level give loud loud level pure tone 1 khz . thu , loud level 1 khz point alway equal db level ordin axi . bottom curv , exampl , 10 phon . tone curv perceiv loud 10 db , 1000 hz tone . ﬁgure show equal-loud curv remeasur robinson dadson 1956 [ 1 ] , accur lower frequenc ( < 500 hz ) fletcher munson origin [ 2 ] . iso standard ( iso 226:2003 ) revis curv 2003 , recommend term equal- loud contour curv . iso 226:2003 contour actual show agreement fletcher munson curv higher frequenc ( > 1000 hz ) . idea tone produc certain frequenc measur loud level , human rate loud perceiv . lowest curv shown , pure tone 20 hz 15 khz would produc volum level given ordin perceiv 10 db loud level [ 1 ] . next curv show magnitud would pure tone perceiv 20 db , . top curv percept 90 db.508 14 mpeg audio compress exampl , 5000 hz , perceiv tone loud level 10 phon sourc actual 5 db . notic dip 4 khz , perceiv sound 10 db , fact stimul 2 db . toperc effect 10 db 10 khz , would produc absolut magnitud 20 db . ear clearli sensit rang 2–5 khz nearli sensit rang 6 khz . lower frequenc , sourc level 10 db , 1 khz tone would also sound 10 db ; howev , lower , 100 hz tone must level 30 db , 20 db higher 1 khz tone ! sensit lower frequencies.th explan phenomenon ear canal ampliﬁ frequenc 2.5 4 khz . note overal loud increas , curv ﬂatten somewhat . approxim equal sensit low frequenc hundr hz sound level loud enough . perceiv low frequenc better high onesat high volum level . henc , danc , loud music sound better quiet music , actual hear low frequenc high one . ( “ loud ” switch sound system simpli boost low frequenc wella high one . ) howev , 90 db , peopl begin becom uncomfort . typic citi subway oper 100 db . 14.1.2 frequenc mask one tone interfer anoth ? level one frequenc drownout anoth ? question answer mask curv . also , mask answer question much nois toler hear actualmus . lossi audio data compress method , mpeg audio dolbi digit ( ac-3 ) encod , popular movi , remov sound mask anyway , thu reduc total amount inform . gener situat regard mask follow : •a lower tone effect mask ( make us unabl hear ) higher tone . •the revers true . higher tone mask lower tone well . tone fact mask lower-frequ sound , effect maskhigher-frequ one . •the greater power mask tone , wider inﬂuence—th broader rang frequenc mask . •a consequ , two tone wide separ frequenc , littl mask occur . threshold hear figur 14.2 show plot threshold human hear , pure tone . determin plot , particular frequenc tone gener , say 1 khz . volume14.1 psychoacoust 509 102103104−100102030405060 hzdb fig . 14.2 threshold human hear , pure tone reduc zero quiet room use headphon , turn sound bare audibl . data point gener audibl frequenc way . point threshold hear curv sound db level shown—say 2 db 6 khz tone—then sound audibl . otherwis , hear . turn 6 khz tone equal surpass curv mean distinguish sound . approxim formula exist curv , follow [ 3 ] : th sho ld ( f ) =3.64 ( f/1000 ) −0.8−6.5e−0.6 ( f/1000−3.3 ) 2+10−3 ( f/1000 ) 4 ( 14.1 ) threshold unit db . sinc db unit ratio , choos frequenc pin origin , ( 0,0 ) . eq . ( 14.1 ) , frequenc 2,000 hz : threshold ( f ) =0a f=2 khz . frequenc mask curv frequenc mask studi play particular pure tone , say 1 khz , loud volum determin tone affect abil hear tone nearbi frequenc . , would gener 1 khz mask tone ﬁxed sound level 60 db , rais level nearbi tone , say 1.1 khz , audibl . threshold fig . 14.3 plot audibl level . import realiz mask diagram hold singl mask tone : plot chang mask tone use . figur 14.4 show look : higher frequenc mask tone , broader rang inﬂuenc . , exampl , play 6 khz tone presenc 4 khz mask tone , mask tone rais threshold curv much higher . therefor , neighbor frequenc 6 khz , must surpass 30 db distinguish 6 khz tone.510 14 mpeg audio compress 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15−10010203040506070 frequenc ( khz ) dbaudibl tone inaud tone fig . 14.3 effect threshold human hear 1 khz mask tone 0 1 2 3 4 5 6 7 8 910 11 12 13 14 15−10010203040506070 frequenc ( khz ) db1 4 8 fig . 14.4 effect mask tone three differ frequenc practic point signal decompos frequenc , frequenc partial mask , audibl part use set quantiz nois threshold . critic band human hear rang natur divid critic band , properti human auditori system resolv sound better within one critic band sound present . hear limit , frequency-depend resolut . accord [ 4 ] , “ complex tone , critic bandwidth correspond smallest frequenc differ two partial still heard separ . …the critic bandwidth repres ear ’ resolv power simultan tone partials. ” 14.1 psychoacoust 511 tabl 14.1 critic band bandwidth band # lower bound ( hz ) center ( hz ) upper bound ( hz ) bandwidth ( hz ) 1 20 50 100 80 2 100 150 200 100 3 200 250 300 100 4 300 350 400 100 5 400 450 510 110 6 510 570 630 120 7 630 700 770 140 8 770 840 920 150 9 920 1000 1080 160 10 1080 1170 1270 190 11 1270 1370 1480 210 12 1480 1600 1720 240 13 1720 1850 2000 280 14 2000 2150 2320 320 15 2320 2500 2700 380 16 2700 2900 3150 450 17 3150 3400 3700 550 18 3700 4000 4400 700 19 4400 4800 5300 900 20 5300 5800 6400 1100 21 6400 7000 7700 1300 22 7700 8500 9500 1800 23 9500 10500 12000 2500 24 12000 13500 15500 3500 25 15500 18775 22050 6550 low-frequ end , critic band less 100 hz wide , high frequenc , width greater 4 khz . inde yet anoth kind perceptu nonuniform . experi indic critic bandwidth remain approxim constant width mask frequenc 500 hz—thi width 100 hz . howev , frequenc 500 hz , critic bandwidth increas approxi-m linearli frequenc . gener , audio frequenc rang hear partit 24 critic band ( 25 typic use code applic ) , tabl 14.1 show . notwithstand gener deﬁnit critic band , turn hear apparatu actual somewhat tune certain critic band . sinc hear depend physic structur inner ear , frequenc struc-512 14 mpeg audio compress 250 hz 0204060500 hz 1 khz 8 khz 4 khz 2 khz critic band number ( bark ) db 02 5 20 15 10 580 fig . 14.5 effect mask tone , express bark unit ture best reson import . frequenc mask result ear structur becom “ satur ” mask frequenc nearbi frequenc . henc , ear oper someth like set band-pass ﬁlter , allow limit rang frequenc block other . experi illustr properti base observ constant-volum sound seem louder span boundari two critic band would contain entir within one critic band [ 5 ] . effect , ear discrimin within critic band , mask . bark unit sinc rang frequenc affect mask broader higher frequenc , use deﬁn new frequenc unit , term new unit , mask curv ( part fig . 14.4 threshold quiet ) width . new unit deﬁn call bark , name heinrich barkhausen ( 1881– 1956 ) , earli sound scientist . one bark unit correspond width one critic band , mask frequenc [ 6,7 ] . figur 14.5 display critic band , frequenc ( abscissa x-axi ) given bark unit . convers frequenc fand correspond critical-band number b , express bark unit , follow : critic band number ( bark ) =/braceleftbigg f/100 , forf < 500 9+4 log2 ( f/1000 ) , forf≥500 ( 14.2 ) term new frequenc measur , critical-band number bequal 5 f=500 hz . doubl frequenc , mask frequenc 1 khz , bark valu goe 9 . anoth formula use bark scale follow : b=13.0 arctan ( 0.76f ) +3.5 arctan ( f2/56.25 ) ( 14.3 ) 14.1 psychoacoust 513 fi khz bi bark . invers equat give frequenc ( khz ) correspond particular bark valu b f= [ ( exp ( 0.219×b ) /352 ) +0.1 ] ×b−0.032×exp [ −0.15× ( b−5 ) 2 ] ( 14.4 ) frequenc form boundari two critic band given integerbark valu . critic bandwidth ( df ) given center frequenc fcan also approxim follow [ 8 ] : df=25+75× [ 1+1.4×f 2 ] 0.69 ( 14.5 ) fi khz dfi hz . idea bark unit deﬁn perceptu uniform unit frequenc , everi critic band ’ width roughli equal term bark . 14.1.3 empor mask recal danc take quit hear return normal.gener , loud tone caus hear receptor inner ear ( littl hairlikestructur call cilia ) becom satur , requir time recov . ( mani perceptu system behav tempor slow fashion—for exampl , receptor eye kind “ capacit ” effect . ) quantifi type behavior , measur time sensit hear anoth mask experi . suppos play mask tone 1 khz volum level 60 db , nearbi tone , say , 1.1 khz volum levelof 40 db . sinc nearbi test tone mask , heard . howev , mask tone turn , hear 1.1 khz tone , small amount time . experi proce stop test tone slightli mask tone turn , say 10 ms later . delay time adjust minimum amount time test tone distinguish . gener , louder test tone , less time take hear get hear mask tone . figur 14.6 show effect : may take much 500 ms us discern quiet test tone a60 db mask tone play . cours , plot would chang differ mask tone frequenc . test tone frequenc near mask tone , cours , mask . therefor , given mask tone , two-dimension tempor mask situat , fig . 14.7 . closer frequenc mask tone closer time mask tone stop , greater likelihood testton heard . ﬁgure show combin effect frequenc tempor mask . phenomenon satur also depend long mask tone appli . figur 14.8 show mask tone play longer ( 200 ms ) anoth ( 100 ms ) , take longer test tone heard.514 14 mpeg audio compress 100 delay time ( ms ) dbtest tone mask tone60 40 20 1000 10 0 −5 fig . 14.6 louder test tone , shorter amount time requir test tone audibl mask tone remov 0 0.01 0.02 0.03 0468 −200204060 frequenc ( khz ) loud level ( db ) tone surfac inaud time ( sec ) fig . 14.7 effect tempor mask depend time close frequenc 10db60 40 20 delay time ( ms ) 100 0 55 0 fig . 14.8 effect tempor mask also depend length time mask tone appli . solid curv : mask tone play 200 ms ; dash curv : mask tone play 100 ms14.1 psychoacoust 515 well abl mask signal occur sound ( post- mask ) , particular signal even mask sound play stronger signal ( pre-mask ) . pre-mask much shorter effect interv ( 2–5 ms ) oper post-mask ( usual 50–200 ms ) . mpeg audio compress take advantag consider basic construct larg , multi-dimension lookup tabl . use transmit fre-quenc compon mask frequenc mask tempor mask , use fewer bit . 14.2 mpeg audio mpeg audio [ 9,10 ] proce ﬁrst appli ﬁlter bank input , break input frequenc compon . parallel , appli psychoacoust modelto data , model use bit alloc block . number bit alloc use quantiz inform ﬁlter bank . overal result quantiz provid compress , bit alloc aremost need lower quantiz nois audibl level . 14.2.1 mpeg layer mp3 popular audio compress standard . “ 3 ” stand layer 3 , “ mp ” stand mpeg-1 standard . recal look mpeg video compress chap . 11 . howev , mpeg standard actual delin three differ aspect multimedia : audio , video , system . mp3 form part audio componentof ﬁrst phase mpeg . releas 1992 , result intern standard iso/iec 11172-3 , publish 1993 . mpeg audio set three downward-compat layer audio compress , abl understand lower layer . offer complex psy- choacoust model appli correspondingli better compress given levelof audio qualiti . howev , increas complex , concomitantli compres- sion effect , accompani extra delay . layer 1–3 mpeg audio compat , layer includ ﬁle header inform . layer 1 qualiti quit good , provid compar high bitrat avail- abl . outdat layer 2 3 , layer 1 form basi mpeg audio.it still larg support , e.g. , audio packag ubuntu linux . layer 2 complex propos use digit audio broadcast . layer 3 ( mp3 ) complex origin aim audio transmiss isdn lines.each layer also use differ frequenc transform . complex increas encod rather decod side , account popular mp3 player . layer 1 incorpor simplestpsychoacoust model , layer 3 use complex . object good516 14 mpeg audio compress trade-off qualiti bitrat . “ qualiti ” deﬁn term listen test score ( psychologist hold sway ) , qualiti measur deﬁn •5.0= “ transpar ” —undetect differ origin signal ; equival cd-qualiti audio 14–16-bit pcm •4.0=percept differ , annoy •3.0=slightli annoy •2.0=annoy •1.0=veri annoy . ( ’ scientiﬁc ! ) 64 kbp per channel , layer 2 score 2.1 2.6 , layer 3 score 3.6 3.8 . layer 3 provid substanti improv still perfect mean . 14.2.2 mpeg audio strategi compress certainli call , sinc even audio take fairli substantialbandwidth : cd audio sampl 44.1 khz 16 bits/channel , two channel need bitrat 1.4 mbp . mpeg-1 aim 1.5 mbp overal , with1.2 mbp video 256 kbp audio . audio part , amount target reduct size 5.5 1 ( 6.0 1 sampl 48 khz ) . mpeg approach compress reli quantiz , cours , also recogn human auditori system accur within width critic band , term perceiv loud audibl test frequenc . encod employ bank ﬁlter act ﬁrst analyz frequenc ( spectral ) compon audio signal calcul frequenc transform window signal valu . bank ﬁlter decompos signal subband . layer 1 layer 2 codec use quadrature-mirror ﬁlter bank , layer 3 codec add dct . psychoacoust model , fourier transform use . frequenc mask brought bear use psychoacoust model estim notic nois level . quantiz code stage , encod balanc mask behavior avail number bit discard inaud frequenc scale quantiz accord sound level left , mask level . sophist model would take account actual width critic band center differ frequenc . within critic band , auditori systemcannot ﬁneli resolv neighbor frequenc instead tend blur . mention earlier , audibl frequenc usual divid 25 main critic band , inspir auditori critic band . howev , keep design simplic , model adopt uniform width frequenc analysi ﬁlter , use 32 overlap subband [ 9,11 ] . mean lower frequenc , frequenc analysi “ subband ” cover widthof sever critic band auditori system , wherea higher frequenc , sinc critic band ’ width less 100 hz low end more14.2 mpeg audio 517 4 khz high end . frequenc band , sound level mask level dictat mani bit must assign code signal valu quantiz nois kept mask level , henc heard . layer 1 , psychoacoust model use frequenc mask . bitrat rang 32 kbp ( mono ) 448 kbp ( stereo ) . near-cd stereo qualiti possibl bitrat 256–384 kbp . layer 2 use tempor mask accumul sampl examin tempor mask current block sampl one . bitrat 32–192 kbp ( mono ) 64– 384 kbp ( stereo ) . stereo cd-audio qualiti requir bitrat 192–256 kbp . howev , tempor mask less import compress frequenc mask , sometim disregard entir lower-complex coder . layer 3 direct toward lower bitrat applic use sophis- ticat subband analysi , nonuniform subband width . also add nonuniform quantiz entropi code . bitrat standard 32–320 kbp . 14.2.3 mpeg audio compress algorithm basic algorithm figur 14.9 show basic mpeg audio compress algorithm . proce divid input 32 frequenc subband , via ﬁlter bank . linear oper- ation take input set 32 pcm sampl , sampl time , produc output 32 frequenc coefﬁcient . sampl rate fs , say fs=48 ksp ( kilo sampl per second ; i.e. , 48 khz ) , nyquist theorem , maximum drop audio ( pcm ) input psychoacoust modelingbit alloc , quantiz codingbitstream formattingtim frequenc transformationencod bitstream ( ) frequenc time transformationbitstream unpackingfrequ sampl reconstructiondecod pcm audioencod bitstream ( b ) fig . 14.9 abas mpeg audio encod ; bdecoder518 14 mpeg audio compress header ancillari data sb format sb fig . 14.10 exampl mpeg audio frame frequenc map fs/2 . thu , map bandwidth divid 32 equal width segment , width fs/64 ( segment overlap somewhat ) . layer 1 encod , set 32 pcm valu ﬁrst assembl set 12 group 32 . henc , coder inher time lag , equal time accumul 384 ( i.e. , 12 ×32 ) sampl . exampl , sampl proce 32 kbp , time durat 12 ms requir sinc set 32 sampl transmit millisecond . set 12 sampl , size 32 , call segment . point assembl examin 12 set valu 32 subband frequenc analysi carri , base quantiz summari ﬁgure 12 valu . delay actual somewhat longer requir accumul 384 sam- ple , sinc header inform also requir . well , ancillari data , mul- tilingu data surround sound data , allow . higher layer also allow 384 sampl analyz , format subband sampl ( sb ) also ad , result frame data , fig . 14.10 . header contain syn- chroniz code ( twelv 1s—111111111111 ) , sampl rate use , bitrat , stereo inform . mention frame format also contain room so-cal “ ancillari ” ( extra ) inform . ( fact , mpeg-1 audio decod least partial decod mpeg-2 audio bitstream , sinc ﬁle header begin mpeg-1 header place mpeg-2 datastream mpeg-1 ancillari data locat . ) mpeg audio set abl handl stereo mono channel , cours . special joint-stereo mode produc singl stream take account redun- danci two channel stereo . audio version composit video signal . also deal dual-monophon —two channel code indepen- dentli . use parallel treatment audio—for exampl , two speech stream , one english one spanish . consid 32 ×12 segment 32 ×12 matrix . next stage algorithm concern scale , proper quantiz level set . 32 subband , maximum amplitud 12 sampl row array found , scale factor subband . maximum pass bit alloc block algorithm , along sb ( subband sampl ) . key point bit alloc block determin apport total number code bit avail quantiz subband signal minim audibl quantiz nois . know , psychoacoust model fairli complex—mor set simpl lookup tabl ( fact model standard speciﬁcation— form part “ art ” content audio encod one major reason encod ) . layer 1 , decis step includ decid whether frequenc band basic like tone like nois . decis the14.2 mpeg audio 519 scale factor , mask threshold calcul band compar threshold hear . model ’ output consist set known signal-to-mask ratio ( smr ) ﬂag frequenc compon amplitud mask level . smr ratio short-term signal power within frequenc band minimum mask threshold subband . smr give amplitud resolut need , therefor , also control bit alloc given subband . determin smr , scale factor discuss use set quantiz level quantiz error fall mask level . ensur bit use region hear sensit . sum , coder use fewer bit critic band fewer use without make quantiz nois audibl . scale factor ﬁrst quantiz , use 6 bit . 12 valu subband quantiz . use 4 bit , bit alloc subband transmit- ted , iter bit alloc scheme use . final , data transmit , appropri bit depth subband . altogeth , data consist quantiz scale factor 12 codeword group collect known subband-sampl format . decod side , valu de-quant , magnitud 32 sampl reestablish . pass bank synthesi ﬁlter , reconstitut set 32 pcm sampl . note psychoacoust model need decod . figur 14.11 show sampl organ . layer 2 layer 3 frame actual accumul 12 sampl subband : instead 384 sampl , frame includ 1,152 sampl . 12 sampl subband filter produc 1 sampl everi 32 sampl inaudio ( pcm ) sampl insubband filter 0 subband filter 1 subband filter 2 subband filter 31 layer 1 frame layer 2 layer 3 frame12 samples12 samples12 sampl 12 samples12 samples12 sampl 12 sampl 12 samples12 samples12 samples12 sampl . . . . . . . . . . . . fig . 14.11 mpeg audio frame sizes520 14 mpeg audio compress bit alloc bit alloc algorithm ( layer 1 layer 2 ) work follow way . reiter , aim ensur quantiz nois valu mask threshold . psychoacoust model brought play case , alloc bit , number avail , subband increasedresolut beneﬁci . algorithm 14.1 ( bit alloc mpeg audio compress ( layer 1 2 ) ) 1 . psychoacoust model , calcul signal-to-mask ratio ( smr ) decibel ( db ) subband : smr =20 log 10signal minimum _mask _threshold ( 14.6 ) •thi determin quantiz , i.e. , minimum number bit need , avail . amount signal threshold , i.e. , smr , amount need code . signal threshold . 2 . calcul signal-to- ( quantiz ) -nois ratio ( snr ) signal . •a lookup tabl provid estim snr assum given number quantiz level . 3.mask-to- ( quantiz ) -nois ratio ( mnr ) deﬁn differ , db ( see fig . 14.12 ) . mnr =snr−smr ( 14.7 ) 4 . iter bit left alloc •alloc bit subband lowest mnr •look new estim snr subband alloc bit , re- calcul mnr . note : •the mask effect mean rais quantiz nois ﬂoor around strong sound nois mask anyway . indic fig . 14.12 , adjust number bit malloc subband move ﬂoor . •to ensur quantiz nois valu inaud , i.e. , mask threshold , mnr ≥0 , minimum number bit need . otherwis , snr could small , caus mnr < 0 , qualiti compress audio could signiﬁcantli affected.14.2 mpeg audio 521 sound pressur level ( db ) masker minimum mask threshold neighbor bandcrit band neighbor bandbit alloc critic band frequencym−1 m+1msnr smr mnr fig . 14.12 mask-to-nois ratio signal-to-mask ratio . qualit view snr , smr , mnr , one domin masker mbit alloc particular critic band pcm audio signal linear quantizerbitstream formattingfilt bank : 32 subband 1,024-point fftpsychoacoust modelcod audio signal side-inform code fig . 14.13 mpeg-1 audio layer 1 2 •if bit minimum allow budget , alloc anyway increas snr . addit bit , get 6 db better snr . mask calcul perform parallel subband ﬁltere , fig . 14.13 . mask curv calcul requir accur frequenc decomposit input signal , use discret fourier transform ( dft ) . frequenc spectrum usual calcul 1,024-point fast fourier transform ( fft ) . layer 1 , 16 uniform quantiz pre-calcul , subband , quantiz give lowest distort chosen . index quantiz sent 4 bit side inform subband . maximum resolut quantiz 15 bits.522 14 mpeg audio compress layer 2 layer 2 mpeg-1 audio codec includ small chang effect bitrat reduc- tion qualiti improv , price increas complex . main differ layer 2 three group 12 sampl encod frame , tempor mask brought play , well frequenc mask . one advan-tag scale factor similar three group , singl scale factor use three . use three frame ﬁlter ( , current , next ) , total 1,152 sampl per channel , approxim take temporalmask account . well , psychoacoust model better model slowly-chang sound time window use longer . bit alloc appli window length 36 sampl instead 12 , resolut quantiz increas 15 bit 16 . ensur greater accuraci mean poorer compress , thenumb quantiz choos decreas higher subband . layer 3 layer 3 , mp3 , use bitrat similar layer 1 2 produc substantiallybett audio qualiti , price increas complex . ﬁlter bank similar use layer 2 employ , except per- ceptual critic band close adher use set ﬁlter withnonequ frequenc . layer also take account stereo redund . also use reﬁnement fourier transform : modiﬁ discret cosin trans- form ( mdct ) address problem dct boundari window use . discret fourier transform produc block edg effect . data quantiz transform back time domain , begin end sampl block may coordin preced subsequ block , caus audibl period nois . mdct shown eq . ( 14.8 ) , remov effect overlap frame 50 % . f ( u ) = n−1/summationdisplay i=0f ( ) cos/bracketleftbigg2π n/parenleftbigg i+n/2+1 2/parenrightbigg ( u+1/2 ) /bracketrightbigg , u=0 , ... , n 2−1 ( 14.8 ) window length m=n/2 mi number transform coefﬁcient . mdct also give better frequenc resolut mask bit allo- cation oper . option , window size reduc back 12 sampl 36 . even , sinc window 50 % overlap , 12-sampl window stillinclud extra 6 sampl . size-36 window includ extra 18 point . sinc lower frequenc often tonelik rather noiselik , need analyz care , mix mode also avail , 36-point windowsus lowest two frequenc subband 12-point window use rest.14.2 mpeg audio 523 pcm audio signal filter bank : 32 subband 1,024-point fftpsychoacoust modelm-dctnonuniform quantiz bitstream formattinghuffman codingside-inform code code audio signal fig . 14.14 mpeg-1 audio layer 3 well , instead assign scale factor uniform-width subband , mdct coefﬁcient group term auditori system ’ actual critic band , scale factor , call scale factor band , calcul . bit save carri entropi ( huffman ) code make use nonuniform quantiz . , ﬁnalli , differ bit alloc scheme use , two part . firstli , nest loop use , inner loop adjust shape quantiz , outer loop evalu distort bit conﬁgur . error ( “ distort ” ) high , scale factor band ampliﬁ . second , bit reservoir bank bit frame ’ need alloc frame . figur 14.14 show summari mpeg audio layer 3 code . tabl 14.2 show variou achiev mp3 compress ratio . particular , cd- qualiti audio achiev compress ratio rang 12:1 ( i.e. , bitrat 112 kbp ) , assum 16-bit sampl 44.1 khz , time 2 stereo . tabl 14.2 show typic perform data use mp3 compress . 14.2.4 mpeg-2 aac ( advanc audio code ) mpeg-2 standard video compress standard dvd , , , audio compon . mpeg-2 advanc audio code ( aac ) standard [ 12 ] w origin aim transpar sound reproduct theater . deliv high- qualiti sound 320 kbp ﬁve channel , sound play ﬁve direct : left , right , center , left surround , right surround . so-cal 5.1 channel system also includ low-frequ enhanc ( lfe ) channel ( “ woofer ” ) . hand , mpeg-2 aac also capabl deliv high-qual stereo524 14 mpeg audio compress tabl 14.2 mp3 compress perform sound qualiti bitrat ( kbp ) mode compress ratio telephoni 8 mono 96:1 better 16 mono 48:1 shortwav better 32 mono 24:1 radio similar 56–64 stereo 26:1 24:1 fm radio near-cd 96 stereo 16:1 cd 112–128 stereo 14:1 12:1 sound bitrat 128 kbp . audio code technolog dvd- audio record ( dvd-ar ) format also adopt xm radio , one two main satellit radio servic north america . aac develop compress encod scheme digit audio succeed mp3 , deliversbett sound qualiti mp3 bitrat [ 13 ] . aac current default audio format youtub , iphon appl product plu itun , nintendo , playstat . also support android mobil phone . mpeg-2 audio support 48 channel , sampl rate 8 96 khz , bitrat 576 kbp per channel . like mpeg-1 , mpeg-2 support three differ “ proﬁl ” , differ purpos . main , low complex ( lc ) , scalabl sampl rate ( ssr ) . lc proﬁl requir less comput main proﬁl , ssr proﬁl break signal differ bitrat sampl rate use differ decod . three proﬁl follow mostli scheme , modiﬁc . first , mdct transform carri , either “ long ” window 2,048 sampl “ short ” window 256 sampl . mdct coefﬁcient ﬁltere atempor nois shape ( tn ) tool , object reduc pre-mask effect better encod signal stabl pitch . mdct coefﬁcient thengroup 49 scale factor band , approxim equival good-resolut version human acoust system ’ critic band . parallel frequenc transform , psychoacoust model similar one mpeg-1 carri , toﬁnd mask threshold . low complex proﬁl wide use aac proﬁl efﬁcient mp3 30 % increas efﬁcienc term qualiti versusbitr . offer near-cd qualiti low bitrat 80 kbp mono 128 kbp stereo audio input ( 44.1 khz sampl frequenc ) . mostli use music develop , vocal record like . main proﬁl use predictor . base previou two frame , frequenc coefﬁcient 16 khz , mpeg-2 subtract predict frequenc coefﬁcient , provid step inde reduc distort . quantizationfor main proﬁl govern two rule : keep distort masking14.2 mpeg audio 525 threshold , keep averag number bit use per frame control , use bit reservoir . quantiz also use scale factor , use amplifi scale factor band nonuniform quantiz . mpeg-2 aac also use entropi codingfor scale factor frequenc coefﬁcient . implement , nest loop use bit alloc . inner loop adapt nonlinear quantiz , appli entropi code quantiz data . bitlimit reach current frame , quantiz step size increas use fewer bit . outer loop decid whether scale factor band distort mask threshold . band distort , ampliﬁ increas snrof band , price use bit . ssr proﬁl , polyphas quadratur filter ( pqf ) bank use . mean- ing phrase signal ﬁrst split four frequenc band equal width , mdct appli . point ﬁrst step decod decid ignor one four frequenc part bitrat must reduc . 14.2.5 mpeg-4 audio mpeg-4 aac anoth audio compress standard iso/iec 14496 . mpeg-4 audio integr sever differ audio compon one standard : speechcompress , perceptu base coder , text-to-speech , 3d local sound , midi . mpeg-4 classiﬁ mpeg-4 scalabl lossless code ( hd aac ) [ 14 ] mpeg-4 ( aac ) [ 14 ] . mpeg-4 hd ( high deﬁnit ) aac use lossless high qualiti audio compress high deﬁnit video , etc. , mpeg-4 ( high efﬁcienc ) aac extens low complex mpeg-2 aac proﬁl use low bitrat applic stream audio.mpeg-4 aac two version : aac v1 , use spectral band replic ( sbr , enhanc audio low bit rate ) aac v2 , use sbr parametr stereo ( ps , enhanc efﬁcienc low bandwidth input ) . mpeg- 4 aac also use digit radio standard dab+ , develop standard group worlddmb ( digit multimedia broadcast ) 2006 , indigit radio mondial , consortium nation radio station aim make better use band current use broadcast , includ shortwav . perceptu coder one chang aac mpeg-4 incorpor perceptu nois substitut modul , look scale factor band 4 khz includ decis whether noiselik tonelik . noiselik scale factor band nottransmit ; instead , energi transmit , frequenc coefﬁcient set zero . decod insert nois energi . anoth modiﬁc includ bit-slic arithmet code ( bsac ) modul . algorithm increas bitrat scalabl , allow decod side abl decod 64 kbp stream use 16 kbp baselin output ( step of526 14 mpeg audio compress 1 kbp minimum ) . mpeg-4 audio also includ second perceptu audio coder , vector quantiz method entitl transform-domain weight interleav vector quantiz ( twinvq ) . aim low bitrat allow decod discard portion bitstream implement adjust bitrat sampl rate . basic strategi mpeg-4 audio allow decod appli mani audio tool bandwidth allow . structur coder low bitrat deliveri option , mpeg-4 take term syn- thetic/natur hybrid code ( snhc ) approach . object integr “ natur ” multimedia sequenc , video audio , aris syntheti- calli . audio , latter term structur audio . idea low bitrat oper , simpli send pointer audio model work send audio model paramet . video , model-bas approach might involv send face anim data rather natur video frame face . audio , could send inform english model , send code base sound ( phonem ) english , along assembler-lik code specifi durat pitch . mpeg-4 take toolbox approach allow speciﬁc mani model . exampl , text-to-speech ( tt ) ultra-low bitrat method actual work , provid need care speaker actual sound like . assum wenton deriv face anim paramet low bitrat inform , arriv directli low bitrat videoconferenc system . anoth “ tool ” structur audio call structur audio orchestra languag ( saol , pronounc “ sail ” ) , allow simpl speciﬁc sound synthesi , includ special effect reverber . overal , structur audio take advantag redund music greatli compress sound descript . 14.3 audio codec 14.3.1 ogg vorbi ogg v orbi [ 15 ] open-sourc audio compress format , part v orbi project head chri montgomeri xiph.org foundat , start 1993 . design replac exist patent audio compress format incorpor variabl bit rate ( vbr ) codec similar mp3 ﬁle size smallercompar mp3 bitrat qualiti . target primarili mp3 standard , efﬁcient even low bit rate better qualiti audio higher bitrat . ogg v orbi also use form mdct , speciﬁc forwardadapt codec . one major advantag ogg v orbi standard abil wrap media contain , popular matroska and14.3 audio codec 527 tabl 14.3 comparison mp3 , mpeg-4 aac , ogg vorbi mp3 mpeg-4 aac ogg vorbi file extens .mp3 .aac , .mp4 , .3gp .ogg origin name mpeg-1 audio layer 3advanc audiocod ogg develop ccett , irt , fraunhof ii , & tbell lab , xiph.org foundat fraunhof societi dolbi , soni corp. , nokia releas 1994 1997 v1.0 frozen may 2000 algorithm lossi compress lossi compress lossi compress qualiti lower qualiti better qualiti better qualiti smaller ﬁle aac ogg bit rate mp3 size mp3 samebit rate use default standard foraudio ﬁle itun rais itspopular open-sourc platform webm . ogg v orbi support mani media player vlc , mplayer , audac audio edit softwar , linux distribut well . limit nativ support window mac os v orbi team decod avail variou applic . ogg v orbi gain popular game industri : ubisoft use ogg v orbi format recent game releas . mani popular browser firefox , chrome , opera nativ support ogg v orbi . tabl 14.3 compar mp3 , aac , ogg vorbi standard . tabl 14.4 summar target bitrat rang main featur modern gener audio codec . includ mani similar mpeg-2 audio codec . dolbi digit ( ac-3 ) date 1992 ; devis code multi-channel digit audio 35mm movi ﬁlm , place alongsid optic analog audio channel . also use hdtv audio dvd-video . ac-3 perceptu coder 256sampl block length . maximum bitrat compress 5.1 channel surround sound audio 35mm ﬁlm 320 kbp ( 5.1 one front left channel , one right front , one center channel , two surround channel , subwoof ) . ac-3 ’ predecessor , dolbi ac-2 , transform-bas codec . dolbi digit plu ( e-ac-3 , “ enhanc ” ac-3 ) support 13.1 channel . base ac-3 , low-loss low-complex convers e-ac-3 ac-3 . dt ( coher acoust ) digit surround system aim theater ; form part blue ray audio standard . wma proprietari audio coder develop microsoft . mpeg saoc [ 16 ] , publish 2010 , stand “ spatial audio object coding. ” extend “ mpeg surround ” , allow addit addit multi-channel side-inform core stereo data . mpeg saoc process “ object signal ” instead channel signal , great deal extra bandwidth the528 14 mpeg audio compress tabl 14.4 comparison audio code system codec bitrat kbps/channel complex main applic dolbi ac-2 128–192 low ( encoder/decod ) point-to-point , cabl dolbi ac-3 32–640 low ( decod ) hdtv , cabl , dvd dolbi digit plu ( enhanc ac-3 ) 32–6,144 low ( decod ) hdtv , cabl , dvd dt : digit surround 8–512 low ( losslessaudio extens ) dvd , entertain , profession wma : windowsmedia audio 128–768 low ( low-bit-ratestream ) mani applic mpeg saoc low 48 low ( decoder/rend ) mani applic side-inform . saoc aim innov usag interact remix , karaok , game , mobil conferenc headphon , 14.4 mpeg-7 audio beyond recal mpeg-4 aim compress use object . mpeg-4 audio hassever interest featur , 3d local sound , integr midi , text-to-speech , differ codec differ bitrat , use sophist mpeg-4 aac codec . howev , newer mpeg standard also aim “ search ” : ﬁnd object , assum multimedia inde code term object ? mpeg-7 aim describ structur model audio [ 17 ] , promot eas search audio object . ofﬁcial call method multimedia content descript interfac , mpeg-7 provid mean standard metadata audiovisu multimedia sequenc . mpeg-7 meant repres inform aboutmultimedia inform . object , term audio , facilit represent search sound content , perhap tune descriptor . therefor , researchersar labor develop descriptor efﬁcient describ , help ﬁnd , speciﬁc audio ﬁle . might requir human automat content analysi might aim low-level structur , melodi , actual graspinginform regard structur semant content [ 18 ] . exampl applic support mpeg-7 automat speech recognit ( asr ) . languag understand also object mpeg-7 “ content ” . theori , mpeg-7 would allow search spoken visual event : “ find part hamlet say , ‘ be. ’ ” howev , object delin complet , structur audio model mpeg-7 mean complet . nevertheless , low-level featur import . use summari work [ 19,20 ] describ set descriptors.14.4 mpeg-7 audio beyond 529 , standard mpeg sequenc mostli aim audio compress standard . exampl , mpeg-dash ( dynam adapt stream http ) aim stream multimedia use exist httpresourc server content distribut network , meant inde- pendent speciﬁc video audio codec . examin detail chap . 16 . 14.5 explor good review mpeg audio contain articl [ 9,10 ] . comprehens explic natur audio code mpeg-4 appear [ 21 ] . structur audio introduc [ 22 ] , exhaust articl natur , synthet , snhc audio mpeg-4 appear [ 23,24 ] . 14.6 exercis 1 . ( ) threshold quiet , accord eq . ( 14.1 ) , 1000 hz ? ( recal equat use 2 khz refer 0 db level . ) ( b ) take deriv eq . ( 14.1 ) set equal zero , determin fre- quenci curv minimum . frequenc sensit ? hint : one solv numer . 2 . loud versu amplitud . louder : 1000 hz sound 60 db 100 hz sound 60 db ? 3 . ( newer version ) fletcher-munson curv , fig . 14.1 , way data actual observ set y-axi valu , sound pressur level , measur human ’ estim effect perceiv loud . given set observ , must turn set perceivedloud curv shown ﬁgure ? 4 . two tone play togeth . suppos tone 1 ﬁxed , tone 2 frequenc vari . critic bandwidth tone 1 frequenc rang tone 2 hear beat , rough sound . beat overton lower frequenc two close tone ; aris differ frequenc two tone . critic bandwidth bound frequenciesbeyond two tone sound two distinct pitch . ( ) would rough estim critic bandwidth 220 hz ? ( b ) explain word would set experi measur critic bandwidth . 5 . search web discov meant follow psychoacoust phe- nomena : ( ) virtual pitch ( b ) auditori scene analysis530 14 mpeg audio compress ( c ) octave-rel complex tone ( ) tri-ton paradox ( e ) inharmon complex tone 6 . compress ratio mpeg audio stereo audio sampl 16 bit per sampl 48 khz reduc bitstream 256 kbp ? 7 . mpeg ’ polyphas ﬁlter bank , 24 khz divid 32 equal width fre- quenci subband ( ) size subband ? ( b ) mani critic band , worst , subband overlap ? 8 . sampl rate fsi 32 ksp , mpeg audio layer 1 , width term frequenc 32 subband ? 9 . given level mask tone 8th band 60 db , 10 ms stop , mask effect 9th band 25 db . ( ) would mp3 origin signal 9th band 40 db ? ( b ) origin signal 20 db ? ( c ) mani bit alloc 9th band ( ) ( b ) ? 10 . mpeg layer 3 ( mp3 ) audio differ layer 1 incorpor tempor mask ? 11 . explain mp3 paragraph , audienc consumer-audio-equip salespeopl . 12 . implement mdct , singl 36-sampl signal , compar frequenc result dct . low-frequ sound , better con- centrat energi ﬁrst coefﬁcient ? 13 . convert cd-audio cut mp3 . compar audio qualiti origin compress version—can hear differ ? ( mani peopl . ) 14 . two stereo channel , would like abl use fact second channel behav , usual , parallel fashion ﬁrst , appli inform glean ﬁrst channel compress second . discuss think might proceed . refer 1 . d.w. robinson , r. . dadson , re-determin equal-loud relat pure tone . b. j. appl . phi . 7 , 166–181 ( 1956 ) 2 . h. fletcher , w.a . munson , loud , deﬁnit , measur calcul . j. acoust . soc . . 5 , 82–107 ( 1933 ) 3 . t. painter , a. spania , perceptu code digit audio . proc . ieee 88 ( 4 ) , 451–513 ( 2000 ) 4 . b. truax , handbook acoust ecolog , 2nd edn . ( cambridg street publish , 1999 ) 5 . d. ’ shaughnessi , speech commun : human machin . ( ieee press , 1999 ) refer 531 6 . a.j.m . houtsma , psychophys modern digit audio technolog . philip j. re . 47 , 3–14 ( 1992 ) 7 . e. zwicker , u. tilmann , psychoacoust : match signal ﬁnal receiv . j . audio eng . soc . 39 , 115–126 ( 1991 ) 8 . d. lubman , object metric character automot interior sound qualiti , inter- nois ’ 92 , pp . 1067–1072 ( 1992 ) 9 . d. pan , tutori mpeg/audio compress . ieee multim . 2 ( 2 ) , 60–74 ( 1995 ) 10 . s. shlien , guid mpeg-1 audio standard . ieee tran . broadcast . 40 , 206–218 ( 1994 ) 11 . p. noll , mpeg digit audio code . ieee signal process . mag . 14 ( 5 ) , 59–81 ( 1997 ) 12.inform technology—gener code move pictur associt audio inform , part 7 : advanc audio code ( aac ) . int . standard : iso/iec 13818-7 ( 1997 ) 13 . k. brandenburg , mp3 aac explain , 17th intern confer high qualiti audio code , pp . 1–12 ( 1999 ) 14.inform technology—cod audio-visu object , part 3 : audio . int . standard : iso/iec 14496-3 ( 1998 ) 15 . v orbi audio compress ( 2013 ) . http : //xiph.org/vorbis/ 16 . j. engdegård , b. resch , c. falch , o. hellmuth , j. hilpert , a. hoelzer , l. terentiev , j. breebaart , j. koppen , e. schuijer , w. oomen , spatial audio object code ( saoc ) —the upcomingmpeg standard parametr object base audio code , audio engin societi 124th convent ( 2008 ) 17.inform technology—multimedia content descript interfac , part 4 : audio . int . standard : iso/iec 15938-4 ( 2001 ) 18 . a.t. lindsay , s. srinivasan , j.p.a . charlesworth , p.n . garner , w. kriechbaum , represent link mechan audio mpeg-7 . signal process . : imag commun . 16 , 193–209 ( 2000 ) 19 . p. philipp , low-level music descriptor mpeg-7 . signal process . : imag commun . 16 , 181–191 ( 2000 ) 20 . m.i . mandel , d.p.w . elli , song-level featur support vector machin music classiﬁ- cation . 6th intern confer music inform retriev ( 2005 ) 21 . k. brandenburg , o. kunz , a. sugiyama , mpeg-4 natur audio code . signal process . : imag commun . 15 , 423–444 ( 2000 ) 22 . e.d . scheirer , structur audio effect process mpeg-4 multimedia standard . multim . syst . 7 , 11–22 ( 1999 ) 23 . j.d . johnston , s.r . quackenbush , j. herr , b . grill , review mpeg-4 gener audio code , inmultimedia system , standard , network , ed . a. puri , t. chen , pp . 131–155 . ( marcel dekker , inc. , 2000 ) 24 . e.d . scheirer , . lee , j.-w. yang , synthet audio snhc audio mpeg-4 , multimedia system , standard , network , ed . a. puri , t. chen , pp . 157–177 . ( marcel dekker , inc. , 2000 ) part iii multimedia commun network multimedia place great demand network system . driven insati appetit bandwidth internet , advanc digit media compress tech- nolog , new user demand , multimedia commun content share internet quickli risen becom mainstream “ killer ” applic past three decad . well , wit converg convent telephon network televis network global internet , numer new-gener multimedia-bas applic develop inter- net , e.g. , skype , outub , netﬂix , twitch , tiktok , etc . internet , howev , initi design multimedia content distri- bution signiﬁc challeng address . multimedia applic gener start playback download complet , i.e. , stream mode . earli time , research attent mostli focus dedic stream pro- tocol , real-tim transport protocol ( rtp ) control protocol ( rtcp ) . also great effort toward multicast network layer well resourc reserv protocol large-scal multimedia content distribut . past two decad , content distribut network ( cdn ) peer-to- peer ( p2p ) media stream receiv substanti attent wide appli live on-demand media stream . recent , web-bas video stream allow user play video directli web browser rich interact , rather download instal dedic softwar . advanc wireless mobil network emerg sleek smart portabl devic drive revolut . dream “ anywher anytim ” multimedia commun content share becom realiti . meanwhil , advanc data center machin virtual catapult popular cloud comput . attract abund resourc cloud on-demand “ pay-as-you-go ” price model , increas number multime- dia servic host cloud comput platform , e.g. , netﬂix , one lead video stream servic provid , reportedli make use amazon ’ cloud servic . well , soni microsoft ’ game consol power cloud comput , ofﬂoad mani computation-intens multimedia process task , e.g. , 3d render , remot server , lift hardwar softwar constraint inher local consoles.534 part iii : multimedia commun network delay-sensit multimedia applic , aggreg resourc central data center ideal solut . recent effort toward ﬁne-grain resourc partit distribut includ edg comput ( geo-distribut ) serverless comput ( servic abstract ) . part examin challeng solut efﬁcient multimedia commu- nicat content share comput network , particularli wire internet wireless mobil network . chap . 15 , look basic internet servic model protocol multimedia commun , chap . 16we go consid multimedia content distribut mechan . chapter 17further provid quick introduct basic wireless mobil network issu relat multimedia commun network . chap . 18 , w eg oo nt examin cloud-assist multimedia comput content share , includ recent advanc cloud game , edg comput , serverless computing.15network servic protocol multimedia commun comput commun network essenti modern comput environ- ment know come reli upon . multimedia commun andnetwork share major issu technolog comput commun net- work . inde , evolut internet , particularli past three decad , larg driven ever-grow demand numer convent andnew gener multimedia applic . , multimedia commun network becom activ area research industri develop . chapter start review common terminolog techniqu modern comput commun network , speciﬁc , internet , follow introduct variou network servic protocol multimedia com- munic content share , sinc becom central part mostcontemporari multimedia system . also use internet telephoni exampl illustr design implement typic interact multimedia commu- nicat applic . 15.1 protocol layer comput commun network long recogn network commun complex task thatinvolv multipl level protocol [ 1–3 ] . protocol deﬁn syntax , seman- tic , oper speciﬁc commun task . wide use refer model multilay protocol architectur propos internationalorgan standard ( iso ) 1984 , call open system interconnec- tion ( osi ) , document iso standard 7498 . osi refer model follow network layer [ 4 ] : © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_15535536 15 network servic protocol multimedia commun 1.physic layer . deﬁn electr mechan properti physic interfac ( e.g. , signal level , speciﬁc connector , etc . ) ; also speciﬁ function procedur sequenc perform circuit physicalinterfac . 2.data link layer . speciﬁ way establish , maintain , termin link , transmiss synchron data frame , error detect andcorrect , access protocol physic layer . 3.network layer . deﬁn rout data one end across network , use circuit switch packet switch . provid servic asaddress , internetwork , error handl , congest control , sequenc packet . 4.transport layer . provid end-to-end commun end system support end-us applic servic . support either connection-ori connectionless protocol . provid error recoveri ﬂow control . 5.session layer . coordin interact user applic differ host , manag session ( connect ) , complet long ﬁle transfer . 6.present layer . deal syntax transmit data , convers differ data format code due differ convent , compress , encrypt . 7.applic layer . support variou applic program protocol , file share ( ftp ) , remot login ( telnet ) , e-mail ( smtp/mime ) , web ( http ) , network manag ( snmp ) , . osi refer model instrument develop modern com- puter network . multimedia system gener implement top threelay , reli servic underli layer . model , howev , never fulli implement ; instead , compet practic tcp/ip protocol suit becom domin . also core protocol trans- port network layer today ’ internet . data link layer , numer local area network ( lan ) technolog develop ieee 802 familyof standard , particularli ethernet wi-fi , domin . figur 15.1 compar layer osi model internet ( tcp/ip core protocol suit ) . figur 15.2 show typic home/ofﬁc network setup nowaday , , access network ( adsl cabl modem ) , connect internet servic provid ( isp ) . user insid network abl access divers multimedia servic public internet , ﬁrewallcan protect malici attack . follow section , present detail differ layer involv network system multimedia commun . 15.2 local area network ( lan ) access network home ofﬁc user , network direct use gener local area network ( lan ) , restrict small geograph area , usual rel small number station . physic link connect end system insid lan15.2 local area network ( lan ) access network 537 physicaltransportappl internet network access ( llc mac ) tcp ( connection-ori ) udp ( connectionless ) ipv4 , ipv6 , rsvp x.25 , ethernet , token ring , fddi , ppp/slip , etc.ftp , telnet , smtp/mime http , snmp , etc . 10/100base-t , 1000base-t , fibr channel , etc.tcp / ip applic present session network data link physicaltransportosi fig . 15.1 comparison osi tcp/ip protocol architectur sampl protocol fig . 15.2 typic home/ofﬁc network setup toward extern internet refer access network . also known “ last mile ” deliv network servic . section , describ lan servic repres wire lan technolog , particular , ethernet . describ typic network access technolog , includ dialup , digit subscrib line ( dsl ) , cabl network , fiber-to-the-hom ( ftth ) , support multimedia services.538 15 network servic protocol multimedia commun 15.2.1 lan standard ieee 802 committe develop ieee 802 refer model lan , focu lower layer , name , physic data link layer [ 5 ] . particular , data link layer ’ function enhanc , layer divid two sublay : •medium access control ( mac ) layer . sublay assembl disassembl frame upon transmiss recept , perform address error correct , regul access control share physic medium . •logic link control ( llc ) layer . sublay perform ﬂow error control mac-lay address . also act interfac higher layer . llc isabov mac hierarchi . follow import ieee 802 subcommitte area deﬁn : •802.1 ( higher layer lan protocol ) . concern overal 802 lan archi- tectur , relationship 802.x standard wide area network , aswel interconnect , secur , manag lan . •802.2 ( llc ) . gener standard logic link control ( llc ) , provid uniform interfac upper layer protocol , mask differ various802.x mac layer implement . •802.3 ( ethernet ) . deﬁn physic layer data link layer ’ mac wire ethernet , particular csma/cd method . •802.11 ( wireless lan ) . deﬁn medium access method physic layer speciﬁc wireless lan ( wlan , also known wi-fi ) . •802.16 ( broadband wireless ) . deﬁn access method physic layer speciﬁc broadband wireless network . one product wimax ( world- wide interoper microwav access ) , target deliveri last mile wireless broadband access altern cabl dsl . wimax wasalso candid 4g cellular network , competit lte advanc standard . , howev , success either market . next detail ethernet technolog , becom de facto standard wire lan . describ wireless lan technolog chap . 17 . 15.2.2 ethernet echnolog ethernet lan technolog initi develop xerox parc 1970 [ 6 ] . inspir alohanet , earlier random access network , idea ﬁrst document memo robert metcalf . ethernet commerci introducedin 1980 standard 1985 , ieee 802.3 . soon defeat mani compet wire lan technolog sinc becom domin market.15.2 local area network ( lan ) access network 539 fig . 15.3 ethernet frame structur basic ethernet use share bu . ethernet station given 48-bit mac address . mac address use specifi destin sourc data packet , refer frame . figur 15.3 show typic ethernet frame structur , begin preambl start frame delimit , follow ethernet header featur sourc destin mac address . middl section frame consist payload data includ header protocol ( e.g. , ip ) carri frame . frame end 32-bit cyclic redund check ( crc , see sect . 17.3.1 ) , use detect data corrupt transit . send frame , recipi ’ ethernet address attach frame , broadcast everyon bu . recept transmiss , receiv use destin address determin whether transmiss relev station ignor . design station accept frame , other ignor . note , two station send frame simultan , collis happen . problem solv carrier sens multipl access collis detect ( csma/cd ) medium access control . csma/cd , station wish send frame must ﬁrst listen network ( i.e. , carrier sens ) , wait trafﬁc , send frame . obvious , multipl station could wait send messag time , caus collis . frame transmiss , station compar signal receiv one sent . differ , detect collis . collis detect , station stop send frame , frame retransmit random delay . lan multipl station , often star topolog use , station connect directli hub ( recent switch ) . hub activ devic act repeat . everi time receiv signal one station , repeat , station hear . logic , still bu , although physic star network . maximum data rate earli ethernet 10 mbp , use unshield twist pair . long life span , ethernet ’ physic layer encompass coaxial , twist pair , ﬁber optic physic media interfac speed 10 mbp 100 gbp beyond . link layer also evolv meet new bandwidth market requir . 1989 , ethernet switch introduc , work differ ethernet hub—in switch , header incom packet examin either drop forward anoth segment . greatli reduc forward latenc process load . switch ethernet sinc replac non-switch ethernet given bandwidth advantag , improv isol devic , abil easili mix devic differ speed . latest switch reach 400 gbp . differ gener ethernet technolog larg retain net- work protocol stack interfac , therefor , abl inter-connect inter- oper . also key reason ethernet ’ success , oppos ad hoc inﬂex lan technologies.540 15 network servic protocol multimedia commun 15.2.3 access network echnolog access network bridg lan home ofﬁc extern internet . save cost lay new network line , exist network alreadi home often use , particular , telephon cabl tv network . direct ﬁber optic connect popular nowaday new build . dial-up integr servic digit network ( isdn ) sinc public switch telephon network ( pstn ) wide avail res-identi home ofﬁc , earlier internet access often use telephon line establish dial connect internet servic provid ( isp ) . note tradit telephon line carri analog voic signal . transmitdigit data , modem ( modulator-demodul ) need comput telephon jack modul analog carrier signal encod digit inform , also demodul carrier signal decod transmit inform . modern dial-up modem typic maximum theoret transfer speed 56 kbp ( use v .90 v .92 protocol ) , although case 40–50 kbp isth norm . connect usual latenc high 300 ms even . factor phone line nois , well qualiti modem , play larg part determin connect speed delay . low speed andrel high delay make dial-up gener unsuit multimedia applic . overcom limit , 1980 , intern telecommun union ( itu ) start develop integr servic digit network ( isdn ) meet need variou digit servic digit data , voic , sometim video ( e.g. , videoconferenc ) transmit [ 7 ] . digit subscrib line ( dsl ) dsl telephon industri ’ answer last mile challeng nowaday , make use exist telephon ’ twisted-pair wire transmit modulateddigit data signal [ 8 ] . unlik tradit dial-up modem , modul bit signal 300–3,400 hz baseband ( voic servic ) , dsl modem modul fre- quenci 4,000 hz 1 mhz ( high 4 mhz ) , use quadratur ampli- tude modul ( qam ) . use fdm ( frequenc divis multiplex ) multiplex three channel : •the high-spe ( 1.5–9 mbp ) downstream channel high end spectrum . •a medium speed ( 16–640 kbp ) duplex channel . •a voic channel telephon call low end ( 0–4 khz ) spectrum . dsl employ highli complex digit signal process algorithm overcom inher limit exist twisted-pair wire . notabl technologyisdiscret multi-ton ( dmt ) , , better transmiss potenti noisy15.2 local area network ( lan ) access network 541 tabl 15.1 differ type digit subscrib line name mean data rate mode hdsl high data rate 1.544 mbp duplex digit subscrib line 2.048 mbp sdsl singl line 1.544 mbp duplex digit subscrib line 2.048 mbp adsl asymmetr 1.5–9 mbp digit subscrib line 16–640 kbp vdsl v eri high data rate 13–55 mbp digit subscrib line 1.5–3 mbp vdsl2 vdsl version 2 200–300 mbp 100 mbp channel ( either downstream upstream ) , send test signal subchannel ﬁrst . calcul signal-to-nois ratio ( snr ) , dynam determin amount data sent subchannel . higher snr , data sent . theoret , 256 downstream subchannel , capabl carri 60 kbp , gener data rate 15 mbp . tabl 15.1 show evolut variou digit subscrib line ( xdsl ) . hdsl effort deliv t1 ( e1 ) data rate within low bandwidth ( 196 khz ) .it requir two twist pair 1.544 mbp three twist pair 2.048 mbp . sdsl instead provid servic hdsl singl twisted-pair line . adsl ( asymmetr dsl ) adopt higher data rate downstream ( network sub- scriber ) lower data rate upstream ( subscrib network ) . asymmetr downstream upstream bandwidth share well match trafﬁc pattern tra-dit client/server-bas applic , e.g. , web , problem modern applic peer-to-p ﬁle share two-way interact voic video convers . recent , very-high-bit-r dsl ( vdsl ) beendeploy still activ evolv ; vdsl2-vplu achiev upload speed 100 mbp , therebi allevi problem asymmetri . hybrid fiber-coaxi ( hfc ) cabl network besid telephon line , anoth network access readili avail manyhom cabl tv network . network , optic ﬁber connect core network optic network unit ( onu ) neighborhood , typic serv hundr home share coaxial cabl . acabl modem use provid bi-direct data commun via radio frequenc channel hybrid fiber-coaxi ( hfc ) network . conform- ing ethernet standard ( modiﬁc ) , bridg ethernet frame home lan cabl network . technic , modul data transmit cabl network demodul data cabl network receiv it.542 15 network servic protocol multimedia commun tradit , analog cabl tv alloc frequenc rang 50–500 mhz , divid 6 mhz channel ntsc tv north america 8 mhz channel europ . hfc cabl network , downstream alloc frequenc rangeof 450–750 mhz , upstream alloc rang 5–42 mhz . downstream , cabl modem act tuner captur qam modul digit stream . upstream use quadratur phase-shift key ( qpsk ) [ 2 ] modul , robust noisi congest frequenc spectrum . today ’ cabl modem download speed 10–500 mbp ( typic 50 mbp ) . latest docsi 4.0 ( data cabl servic interfac speciﬁc ) support data rate even 10 gbp . , howev , worth note cabl internet access share among mani neighbor home , dsl base telephon line dedic . cabl servic slow signiﬁcantli mani peopl neighborhood access internet simultan . , practic , cabl ’ speed advantag dsl much less theoret number suggest.in addit , cabl modem dsl perform vari one minut next depend pattern use trafﬁc internet , dsl cabl servic provid often implement so-cal “ speed cap ” limit bandwidthor total monthli data servic . area , dsl cabl access avail , although area may one choic . two technolog domin home internetaccess around world , similar market share . competit tough , tri provid better richer servic , particularli multimedia applic . exampl , advent voic internet protocol ( v oip ) telephoni , cabl modem extend provid telephon servic skype even landlin servic , allow custom purchas cabl tv servic elimin plain old telephon servic . hand , manytelephon compani offer digit tv servic network , . converg made tripl play busi model possibl , , singl broadband connect , provis two bandwidth-intens servic , high-spe internet access televis , latency-sensit telephon . fiber-t o-the-hom ( ftth ) neighborhood ( fttn ) optic ﬁber laid connect home network core network directli . itreplac part convent metal local loop use last mile access , provid highest bandwidth . exampl , 155 mbp downstream reacheach four home multiplex 622 mbp downstream easili attain singl ﬁber . sinc exist home gener twist pair and/or coaxial cabl , implement cost pure fiber-to-the-hom ( ftth ) high , mani new high-ris build alreadi built-in ﬁber access . altern , ﬁber reach node ﬁrst ( fiber-to-the-nod neighborhood , fttn ) thenearbi home user connect cabinet use tradit coaxial cabl twisted- pair wire . , combin internet , tv , telephon signal travel ﬁrst15.2 local area network ( lan ) access network 543 ﬁber , exist telephon cabl wire reach end-us ’ live space , vdsl docsi cabl modem separ signal convert data signal ethernet format . area serv cabineti usual less one mile radiu contain sever hundr custom . ﬁber-bas access consid “ future-proof ” data rate connect limit termin equip rather theﬁber , permit long-term speed improv equip upgrad ﬁber must upgrad . also offer good support high-qual multimedia servic . unit state , & fiber ’ ftth expect reach 7 million home 2022 . internet 1000 plan offer connect speed around 1 gbp download upload . sufﬁcient high type home-bas applica- tion nowaday forese futur , therebi larg remov last mile bottleneck multimedia distribut home user . matter fact , itsservic , user download 25 song 1 , download tv show 4 , download 90 min hd movi 34 s. googl fiber offer similar servic end user . high-spe connect also make rich multimedia servic beyond basic data plan possibl ; includ 1 tb ( terabyt , 10 12byte ) googl drive servic televis servic 2 tb dvr record record eight live televis show simultan . 15.3 internet echnolog protocol access network , home ofﬁc user connect exter-n wide area internet . tcp/ip protocol suit play key role internet , interconnect divers underli network serv divers upper layer appli- cation ( see fig . 15.1 ) . reason , also known “ narrow waist ” internet . tcp/ip inde develop osi , becom de facto standard internetwork adopt internet . internet engin task forc ( ietf ) internet societi princip technic develop standard-set bodi internet . publish request comment ( rfc ) author network engin scientist form memorandum describ method , behavior , research , orinnov applic work internet network system . 15.3.1 network layer : ip network layer provid two basic servic : packet address packet for- ward . point-to-point data transmiss readili support within lan , fact , lan usual support broadcast . network-lay packet trans- mit across differ lan wide area network ( w ) , router employ , network-lay devic receiv forward packet accord their544 15 network servic protocol multimedia commun destin address . forward guid rout tabl collect built updat router use rout protocol . two common way move data network link router , name circuit switch andpacket switch . •circuit switch . public switch telephon network ( pstn ) good exampl circuit switch , end-to-end circuit must establish , dedic durat connect guarante bandwidth . although initi design voic commun , also use data transmiss earlier isdn networks.circuit switch prefer user demand connect and/or less constant data rate , tradit voic commun certain constant- bit-rat video commun . establish mainten circuit , howev , costli , gener data transfer variabl ( sometim bursti ) rate , inefﬁci given circuit resourc exclus reserv . •packet switch . packet switch use mani modern data network , particularli today ’ internet , data rate tend variabl sometim bursti . transmiss , data broken small packet , usual 1,000 byte less . header packet carri necessari control inform , destin address , router examin header individu packet make individu forward decisions.compar circuit switch , implement packet switch simpler , resourc ( e.g. , bandwidth ) exclus reserv share among packet , network util much higher . doescom cost . without dedic circuit , store-and-forward transmiss commonli use packet-switch network , mean packet must receiv entir inspect forward next hop . addit store-and-forward delay , packet suffer queu delay mani packet arriv , need queu buffer router beforethey forward . buffer overﬂow link sever congest , packet loss happen . packet switch , two approach avail switch rout packet : datagram andvirtu circuit . former , packet treat independ , speciﬁc rout predetermin prior transmiss ; henc , packet may unknowingli lost arriv order . receiv station detect recov error re-arrang packet , say use tcp transportlay see next section . virtual circuit , rout predetermin request andaccept node along rout . “ circuit ” rout ﬁxed ( negoti ) use durat connect ; nonetheless , “ virtual ” “ circuit ” logic dedic true circuit switch . sequenc ( orderingth packet ) much easier virtual circuit , resourc could reserv along virtual circuit , provid guarante services.15.3 internet technolog protocol 545 virtual circuit solut seemingli sophist consid technolog ensur qualiti multimedia commun . repres virtual-circuit network tm ( asynchron transfer mode ) [ 9 ] , believ promis solut replac datagram-bas internet , move toward better network trafﬁc control deliveri , especi multimedia content . , howev , complic implement , particularli wide area network , internet protocol ( ip ) ( rfc 791 , 2460 ) remain base datagram , mean provid best effort servic bandwidth , reliabl , delay guarante . datagram servic , ip connectionless provid end-to-end control . everi packet treat separ relat past futur packet . henc , packet receiv order also drop duplic . packet fragment also happen packet travel network accept packet smaller size . case , ip packet split intoth requir smaller size , sent network next hop , reassembl resequenc afterward . router maintain rout tabl , identiﬁ packet next hop travel toward destin . rout tabl period updat rout protocol network topolog inform exchang among router . internet loos hierarch network divid numberofautonom system ( ase ) , one gateway node within commun outsid . typic rout protocol within includ open shortest path first ( ospf ) rout inform protocol ( rip ) , among gateway , border gateway protocol ( bgp ) wide use . ip protocol also provid global address comput across inter- connect network , everi network devic assign global uniqu ip address . applic layer identiﬁc , e.g. , url ( uniform resourc locat ) server client , map ip address server client domain name system ( dn ) . current ipv4 ( ip version 4 ) ( see fig . 15.4 ) , ip address 32-bit number , usual speciﬁ use dot decim notat . exampl , web server author ’ institut url www.sfu.ca ip address 142.58.102.68 ( =10001110 00111010 01100110 01000100 binari format ) . internet address undergo migrat toward 128-bit ipv6 ( ip version 6 ) , offer space 2 128or approxim 3 .4×1038 address . much multimedia trafﬁc , e.g. , outub , carri v e rb yi p v 6 [ 10 ] . 15.3.2 transport layer : tcp udp tcp ( transmiss control protocol ) udp ( user datagram protocol ) two transport layer protocol use internet facilit host-to-host ( end-to-end ) communications.546 15 network servic protocol multimedia commun version total length identification0 4 8 12 16 20 24 28 31 flag version flow label payload length0 4 8 12 16 20 24 28 31 next headerihl dscp ecn fragment offset time live protocol header checksum sourc ip address destin ip address option ( ihl > 5 ) bit 0 32 64 96 128 160 traffic class hop limitbit 0 32 64 96 128 160 192 224 256 288sourc address destin address ( ) p v 4p c k e f r ( b ) ipv 6 packet format fig . 15.4 packet format ipv4 ipv6 transmiss control protocol ( tcp ) tcp ( rfc 675 , 793 , 1122 , 2581 , 5681 ) offer reliabl byte pipe send receiv applic messag two comput , regardless speciﬁc type applic . reli ip layer deliv data destin comput speciﬁ ip address . tcp connection-ori : connect must establish 3-way handshak two end start commun . everi tcp connec- tion , commun end alloc buffer call window receiv send data . flow control establish send data window desti- nation without overﬂow window . sinc multipl applic process may use tcp/ip within one comput process may also establish multipl net- work connect , multiplexing/demultiplex need identifi connect use port number .15.3 internet technolog protocol 547 ensur reliabl transfer , tcp offer servic messag packet , error detect , retransmiss , packet resequenc . tcp datagram header contain sourc destin port , sequenc number , checksum , window ﬁeld , acknowledg number , ﬁeld , illustr fig . 15.5 . •the sourc destin port , togeth sourc destin ip address network layer , use sourc process know deliv messag destin process know repli messag . 4-tupl ensur packet deliv uniqu applic process run particular comput . port number rang 0 65535 , typic well-known port number includ 80 web ( http ) , 25 e-mail ( smtp ) , 20/21 ftp , name . •a packet travel across ip network , arriv order ( follow differ path ) , lost , duplic . sequenc number reorder arriv packet detect whether miss . sequenc number actual byte count ﬁrst data byte packet rather serial number packet . •the checksum veriﬁ high degre certainti packet arriv undamag , presenc channel error . calcul checksum receiv packet match transmit one , packet discard retransmiss later invok . detail internet checksum cal- culat found sect . 17.3.1 . •the window ﬁeld speciﬁ mani byte destin ’ buffer current accommod . typic sent acknowledg packet . •acknowledg ( ack ) packet ack number speciﬁed—th number byte correctli receiv far sequenc ( correspond sequenc number ﬁrst miss packet ) . sourc process send packet destin process window number wait ack send data . ack packet arriv new window number inform indic much data destin buffer receiv . ack packet receiv small time sourc port destin port sequenc number acknowledg number ( ack set ) checksum urgent pointer ( urg set ) window sizedata offsetreserv flag option ( ) 0 4 8 12 16 20 24 28 31 fig . 15.5 header format tcp packet548 15 network servic protocol multimedia commun 0 10 20 30 40 50 60 70 800102030405060708090100110 time ( sec ) window size ( byte ) bulk data transfer fig . 15.6 sawtooth behavior tcp data transfer interv , speciﬁ retransmiss timeout ( rto ) , packet resent local window buffer . tcp also implement congest control mechan respons network congest , observ packet loss . tcp evolv time chang differ part , particularli congest control algorithm . reno , new reno , sack commonli use version , mainli base anaddit increas multipl decreas ( aimd ) mechan ; , send rate , control slide window , increas linearli congest , exponenti decreas packet loss , indic potenti congest network . window-bas aimd proven fair , robust , efﬁcient multipl tcp ﬂow compet network resourc ; yet variat transmiss rate high , lead well-known sawtooth behavior . illustr fig . 15.6 , tcp congest window grow linearli congest , e.g. , 20 100 byte time , packet loss , instantli reduc 50 byte ( half window size congest ) , transmiss rate proport reduc . ﬁne gener ﬁle transmiss , undesir mani multimedia stream applic demand rel smooth transmiss rate minimum threshold . user datagram protocol ( udp ) udp ( rfc 768 ) connectionless guarante deliveri : messag reliabl deliv , handl applic applic layer . essenti , thing udp provid multiplex use port numbers15.3 internet technolog protocol 549 sourc port destin port length0 4 8 12 16 20 24 28 31 checksum fig . 15.7 header format udp datagram error detect checksum . even multiplex demultiplex , destin port number use , less strict tcp ’ 4-tupl , hand , ﬂexibl certain applic , e.g. , multiparti audio/video confer particip expect hear/se other . scenario , use tcp ’ multiplexing/demultiplex requir connect establish everi sender receiv , simpli high cost mani par- ticip . udp ’ packet format illustr fig . 15.7 , whose header 8 byte , consider shorter tcp ( 20 byte without option ) . differ signiﬁc mani multimedia applic . exampl , consid send 64 kbp pcm-encod voic , data chunk collect everi 20 ms , chunk 160 byte . header overhead tcp thu 12 .5 % udp 5 % , mention header overhead layer . given low header overhead remov connect setup , udp data transmiss faster tcp . , howev , unreli , especi con- gest network . higher-level protocol use retransmiss , ﬂow control , congest avoid , realist error conceal must explor accept qualiti servic ( qo ) . tcp-friendli rate control ( tfrc ) note sawtooth behavior window-bas tcp congest control well suit media stream , uncontrol udp ﬂow aggress , interfer ﬂow , easili starv adapt tcp ﬂow compet bandwidth . avoid , tcp-friendli rate control ( tfrc ) ( rfc 5348 ) introduc , ensur udp ﬂow reason fair compet bandwidth tcp ﬂow , “ reason ” mean send rate within factor two send rate tcp ﬂow condit , i.e. , tcp ﬂow run end-to-end path . tfrc gener implement estim equival tcp throughput path use paramet observ sender receiv . rfc 5348 suggest follow equat xbp , tcp ’ averag send rate byte per second : xbps= r×√2×b×p/3+ ( trt o× ( 3×√3×b×p/8×p× ( 1+32×p2 ) ) ) 550 15 network servic protocol multimedia commun si segment size byte ( exclud ip transport protocol header ) , r round-trip time ( rtt ) second , pi loss event rate ( 0 1.0 ) number loss event fraction number packet transmit , trt tcp retransmiss timeout valu second , bi maximum number packet acknowledg singl tcp acknowledg . typic , trt set 4 rand b=1 . tcp throughput equat simpliﬁ xbps= r× ( √2×p/3+12×√3×p/8×p× ( 1+32×p2 ) ) paramet equat known sender estim receiv feedback sender . sender calcul equival tcp throughput accordingli control send rate udp ﬂow . tfrc co-exist well tcp tfrc ﬂow , muchlow variat throughput time compar tcp , make suitabl media data constant encod rate , e.g. , voic constant-bit-r ( cbr ) video , rel smooth send rate best match . 15.3.3 network address translat ( na ) firewal 32-bit ipv4 address principl allow 232≈4 billion address , seem adequ . realiti , howev , alreadi larg exhausted.in januari 1995 , ipv6 ( ip version 6 ) recommend next gener ip ( ipng ) ietf . figur 15.4 compar packet format ipv4 ipv6 . among mani improv ipv4 , ipv6 adopt 128-bit address , allow 2 128≈ 3.4×1038address . expect settl problem ip address shortag long time . today still transit phase ipv4 ipv6 . solv ipv4 address shortag , practic solut network address translat ( na ) ( rfc 4787 ) . na devic , sit behind local privat network extern network , separ local host extern network . host lan assign intern ip address access outsid network . instead , share singl public ip address kept na devic , typicallymaintain dynam nat tabl translat address . identifi multipl host behind na , port number transport layer use . local host send ip packet intern address sourc port number , goe na devic , chang sourc ip address na devic ’ public ip address sourc port number new port number associ public ip address . record kept thena tabl , extern destin host see public ip address new port number . repli ip packet come back extern host , destin address chang back intern ip address originalsourc port number accord na tabl , packet forward appropri host.15.3 internet technolog protocol 551 fig . 15.8 illustr network address translat ( na ) . singl ip address na t- enabl router ( 16.1.1.9 ) effect use four intern comput ( left side ) commun outsid internet overwrit port number exampl na shown fig . 15.8 , pc local area network behind na devic intern ip address 192.168.1.xxx , wherea na devic singl public ip address 16.1.1.9 . commun extern host , pair ( intern ip address : sourc port number ) replac pair ( public address : new port number ) . exampl , ( 192.168.1.3:1001 ) replac ( 16.1.1.9:65001 ) , ( 192.168.1.15:2005 ) ( 16.1.1.9:65130 ) , . new port number 65001 , 65130 , ... chosen unus port number space ( associ address 16.1.1.9 ) , gener quit larg , therefor , mani intern ip address support . na allevi ip address shortag problem , impos fundament restrict pair-wis connect node , may prohibit direct communica- tion one anoth . retain host ’ origin port number . exampl , default port number web servic 80 , , howev , arbitrarili chang na devic , make web server behind na hardli access extern host . whether commun possibl two host depend factor transport protocol ( udp tcp ) whether host locat behind privat network [ 11 ] . similar penetr problem happen ﬁrewal [ 12 ] , softwar hardware-bas network secur system control incom outgo network trafﬁc base rule set . becom indispens part safe oper today ’ pc lan given vast threat insecur untrust public internet . yet block legitim trafﬁc . exampl , mani ﬁrewal blindli block udp-bas trafﬁc , make multimedia udp simpli fail . today ’ internet environ , 50 % node locat behind na ts ﬁrewal . connect constraint signiﬁc challeng viabil multimedia content distribut mechan internet , particularli peer-to-p share . also one key motiv http-base stream , , use standard hyper text transfer protocol ( http ) transactions,552 15 network servic protocol multimedia commun capabl travers ﬁrewal let standard web trafﬁc , see next chapter . 15.4 multicast extens network terminolog , broadcast messag sent node domain , unicast messag sent one node , multicast messag sent set speciﬁ nodes.1a larg number emerg applic , includ internet tv , onlin game , distanc educ , requir support broadcast multicast , i.e. , simultan content deliveri larg number receiv [ 13 ] . initi design tcp/ip support one-to-on unicast commun . broadcast servic readili avail mani lan also satellite-bas net- work ; , howev , simpli doabl global internet causea storm data forward . instead , multicast use . internet environ- ment , primari issu multicast determin layer implement . accord end-to-end argument , 2a function ( 1 ) push higher layer possibl , unless ( 2 ) implement lower layer achiev signiﬁc perform beneﬁt outweigh cost addit com- plexiti . two consider conﬂict multicast , pastthre decad , signiﬁc effort put reconcil , lead multicast implement differ layer . 15.4.1 router-bas architectur : ip multicast semin work 1989 [ 15 ] , deer argu second consider prevail multicast implement network layer . view wide accept , much 1990 , research industri commun mainli focus router-bas ip multicast architectur , deﬁn rfc 1112 augment rfc 4604 5771 . ip multicast open anonym group membership . ip multicast group address use sourc ( sourc many-to-mani commun ) receiv send receiv multicast messag . sourc toexplicitli know receiv , receiv join leav multicast group . recal ipv4 , ip address 32 bit . ﬁrst 4 bit 1110 , 1ipv6 also allow anycast , wherebi messag sent one speciﬁ node . use servic select cluster server replica . 2the end-to-end argument classic design principl comput network , ﬁrst explicitli articul saltzer et al . [ 14 ] , sinc becom core principl internet develop . state application-speciﬁc function resid end host network rather intermediari network node provid implement “ complet correctli ” end host . ensur network core simpl , fast , highli scalable.15.4 multicast extens 553 messag ip multicast messag . cover ip address rang 224.0.0.0 239.255.255.255 , known class address . exampl , content associ group 230.0.0.1 , sourc send data packet destin to230.0.0.1 . receiv content inform network interest receiv data packet sent group 230.0.0.1 . theinternet group manag protocol ( igmp ) design help main- tenanc multicast group . two special type igmp messag use : queri andreport . queri messag multicast router local host , inquir group membership . report use respond queri join group . router period queri group membership declar them- selv group member get respons least one queri . respons occur , declar nonmemb . igmp version 2 also enforc lower latenc , membership prune promptli mem- ber group leav . igmp version 3 support source-speciﬁc multicastand introduc membership report aggreg . multicast rout gener base share tree : receiv join particular ip multicast group , multicast distribut tree construct thatgroup . exampl , data packet sent group 230.0.0.1 distribut router least one receiv join 230.0.0.1 ( i.e. , least one local group member ) , router forward packetsto local receiv . one ﬁrst trial ip multicast march 1992 , internet engin task forc ( ietf ) meet san diego stream ( audio ) onth internet . start earli 1990 , multicast backbon ( mbone ) built [ 16 ] use multicast servic internet [ 17,18 ] . earlier applic , mostli multimedia-bas , includ vat audio conferenc , vic andnv video conferenc . applic tool includ wbfor whiteboard share workspac sdr maintain session directori mbone . sinc mani router support multicast , mbone use subnetwork router ( mrouter ) support multicast forward multicast packet . fig . 15.9 show , mrouter , respons local region ( so-cal island ) , connect tunnel . multicast packet encapsul insid regular ip packet “ tunnel ” , sent destin island . ip multicast loos coupl model reﬂect basic design princi- ple internet . retain ip interfac introduc concept open dynam group , greatli inspir later propos . given network topolog best-known network layer , multicast rout layer alsoth efﬁcient . remain best-effort servic , attempt conform tradit separ rout transport work well unicast context . howev , provid higher level featur error , ﬂow , congestioncontrol shown difﬁcult unicast case . gener , udp ( tcp ) use conjunct ip multicast , avoid mani ack tcp receiv . reliabl ﬁle share replic , reliabl multicasttransport protocol [ 19,20 ] need implement top udp . continuous554 15 network servic protocol multimedia commun tunneltunnel tunnelmrouterrout mrouter routermrout user user use ruser userus router router router fig . 15.9 tunnel ip multicast mbone stream media , network user heterogen accommod , video-on-demand ( v od ) , asynchron request subscrib user accommod . readili solv ip multicast/udp , either , introduc solut transport applic layer follow section also next chapter . 15.4.2 non router-bas multicast architectur today ’ ip multicast deploy remain limit reach scope . ip multicast call chang infrastructur level , i.e. , network router . introduc high complex seriou scale constraint . ﬂat topolog mbone , approxim 10,000 rout , gener non-scal [ 21 ] . tunnel man- agement also ineffect , , tunnel connect island hardli optim alloc . sometim multipl tunnel creat singl physic link , caus congest . besid technic obstacl , also econom and15.4 multicast extens 555 polit concern ; particular , lack incent network oper instal multicast-cap router carri multicast trafﬁc . placement multicast function revisit late 1990 ; research start advoc move multicast function away router toward end system [ 22 ] . approach , multicast relat featur , group membership , multicast rout packet duplic , implementedat end system , assum unicast ip servic . end system particip multicast commun via overlay network , sens edg correspond unicast path two node underli internet . move multicast function end system potenti address mani problem associ ip multicast . sinc packet transmit unicast packet , deploy easier henc acceler . solut support higher layer featur signiﬁcantli simpliﬁ leverag well understood unicast solut , exploit application-speciﬁc intellig . given non-rout base architectur push function network edg , sever choic instanti architectur . one end spectrum infrastructure-centr architectur , organ pro- vide value-ad servic deploy proxi strateg locat internet . end system attach nearbi proxi , receiv data use plain unicast . approach also commonli refer content distribut network ( cdn ) , employ compani akamai . end spectrum pure applic end-point architectur , function push user ( know peer ) actual particip multicast session . administr , mainten , respons oper peer-to-p system distribut among user , instead handl singl entiti . application-lay solut promis enabl ubiquit deploy , often involv wide rang autonom user may provid good perform easili fail leav . imposs com- plete prevent multipl overlay edg travers physic link , thu redund trafﬁc physic link unavoid . thu , key challeng applic end-point architectur function , scale self-organ witha highli transient popul user , without need central server associ manag overhead . next chapter , detail large-scal multimedia content distribu- tion mechan cdn , application-lay multicast , gener peer-to-p network . 15.5 qualiti servic ( qo ) qualiti experi ( qoe ) fundament , multimedia network commun tradit comput net-work commun similar , sinc deal data commun . howev , challeng multimedia network commun aris due seri ofdistinct characterist audio/video data556 15 network servic protocol multimedia commun 0 20 40 60 80 100 12005001000150020002500 time ( ) bitrat ( kbp ) fig . 15.10 bitrat time mpeg-4 video ( star trek , 688 ×512 frame size ) •volumin continu . demand high data rate often lower bound ensur continu playback . gener , user expect start play back audio/video object fulli download . rea- son , commonli refer continu media orstream media . •real-tim interact . demand low startup delay synchron audio video “ lip sync ” . interact applic video conferenc multiparti onlin game requir two-way trafﬁc , high demand . •rate ﬂuctuat . multimedia data rate ﬂuctuat drastic some- time bursti . video-on-demand v oice-over-ip ( v oip ) , trafﬁc time burst high volum . variable-bit-r ( vbr ) video , averag rate peak rate differ signiﬁcantli , depend scene complex . exampl , fig . 15.10 show bitrat evolut mpeg-4 video stream , averag rate 1 mbp , minimum rate maximum rate 300 kbp 2,600 kbp , respect . 15.5.1 qo qoe multimedia commun qualiti servic ( qo ) multimedia data transmiss depend mani param- eter . list import one below:15.5 qualiti servic ( qo ) qualiti experi ( qoe ) 557 •bandwidth . measur transmiss speed digit link network , often kilobit per second ( kbp ) megabit per second ( mbp ) .3a shown , data rate multimedia stream vari dramat , averageand peak rate consid plan bandwidth transmiss . •latenc ( maximum frame/packet delay ) . maximum time need transmiss recept , often measur millisecond ( msec , ms ) . voic commun , exampl , round-trip delay exce 50 ms , echo becom notic problem ; one-way delay longer 250 ms , talker overlap would occur , sinc caller talk without know also talk . •packet loss error . measur ( percentag ) loss error rate packet data transmiss . packet get lost due network congest garbl transmiss physic link . may also deliveredl wrong order . real-tim multimedia , retransmiss often unde- sirabl , therefor , altern solut like forward error correct ( fec ) , interleav , error-resili code used.in gener , uncompress audio/video , desir packet loss < 10 −2 ( lose everi hundredth packet , averag ) . approach 10 % , qualiti degrad becom intoler . compress multimedia data , desirablepacket loss less 10 −7to 10−8 . error rate modern wire communica- tion link , particular , ﬁber optic , quit low . exampl , bit error rate ( ber ) object ﬁber channel 1 1012 ( 1 bit 1,000,000,000,000bit ) . 2 gbp , equat seven error per hour . ber , howev , much wors wireless link key challeng multimedia wireless network . •jitter ( ordelay jitter ) . measur smooth ( along time axi ) audio/video playback . technic , jitter relat varianc frame/packet delay . figur 15.11 illustr exampl high low jitter frame play- back . larg buffer ( jitter buffer ) use hold enough frame allow frame longest delay arriv , reduc playback jitter . howev , increas latenc may desir real-tim interact applic . •sync skew . measur multimedia data synchron , often measur millisecond ( msec ) . good lip synchron , limit sync skew ±80 ms audio video . gener , ±200 ms still accept . video voic , limit sync skew 120 ms video preced voic and20 ms voic preced video . discrep use sound lag imag distanc . 3for analog signal , bandwidth gener measur hertz , ﬁeld communi- cation signal process . network bandwidth frequenc bandwidth link byhartley ’ law [ 23 ] , state “ total amount inform transmit proport frequenc rang transmit time transmission. ” 558 15 network servic protocol multimedia commun frame playedtim ( ) ( b ) fig . 15.11 jitter frame playback : ahigh jitter ; blow jitter multimedia servic class unlik tradit ﬁle share download applic larg uniform demand , broad spectrum multimedia data ( audio imag video , low qualiti audio/video medium qualiti high qualiti ) applic ( one-way two-way , interact non-interact , realtim non-realtim , etc. ) . list set typic multimedia applic differ qo demand : •two-way trafﬁc , low latenc , jitter , possibl priorit deliveri , voic telephoni video telephoni . •two-way trafﬁc , low loss low latenc , priorit deliveri , e- commerc applic . •moder latenc jitter , strict order sync . one-way trafﬁc , stream video ; two-way interact trafﬁc , web surﬁng onlin game . •no real-tim requir , download transfer larg ﬁle ( movi ) . guarante transmiss . tabl 15.2 list gener bandwidth/bitr requir typic multimedia applic . tabl 15.3 list speciﬁc toler delay jitter digit audio video differ qualiti . seen , qo demand multimedia applic vari signiﬁcantli , therefor , speciﬁc applic demand must taken account protocol system design deployment.15.5 qualiti servic ( qo ) qualiti experi ( qoe ) 559 tabl 15.2 typic requir network bandwidth/bitr applic speed requir telephon 16 kbp audio conferenc 32 kbp cd-qualiti audio 128–192 kbp digit music 64–640 kbp h. 261 64 kbps–2 mbp h. 263 < 64 kbp h. 264 1–12 mbp mpeg-1 video 1.2–1.5 mbp mpeg-2 video 4–60 mbp mpeg-4 video 1–20 mbp hdtv ( compress ) > 20 mbp hdtv ( uncompress ) > 1 gbp 4k ( compress ) > 50 mbp 4k ( uncompress ) > 4 gbp 8k ( compress ) > 200 mbp 8k ( uncompress ) > 16 gbp mpeg-4 video-on-demand 250–750 kbp videoconferenc 384 kbps–2 mbp tabl 15.3 toler latenc jitter digit audio video applic averag latenc toler averag jitter toler ( ms ) ( ms ) low-end videoconfer ( 64 kbp ) 300 130 compress voic ( 16 kbp ) 30 130 mpeg-2 video ( 1.5 mbp ) 5 7 mpeg-2 audio ( 256 kbp ) 7 9 hd/uhd video ( > 20 mbp ) 0.8 1 qualiti experi ( qoe ) : user perceiv qo although qo commonli measur object paramet , “ collect effect servic perform determin degre satisfact user servic ” , deﬁn intern telecommun union ( itu ) . word , everyth user perceiv , particularli true servic involv multipl media interact . qualiti experi ( qoe ) measur delight annoy user ’ experi servic , e.g. , video stream . formal , itu adopt thefollow deﬁnit recommend itu-t p .10 ( 2016 ) :560 15 network servic protocol multimedia commun degre delight annoy user applic servic . result fulﬁllment expect respect util / enjoy theapplic servic light user ’ person current state . togeth perceptu nonuniform studi previou chap- ter , mani issu percept exploit achiev best qoe user perceiv qo network multimedia . exampl , real-tim multimedia , reg-ular import latenc ( i.e. , jitter qualiti ﬂuctuat annoy slightli longer wait ) , tempor correct import sound pictur qualiti ( i.e. , order synchron audio andvideo primari import ) . human also tend focu one subject time ; user ’ focu usual center screen , take time refocu , especi scene chang . 15.5.2 internet qo architectur : intserv diffserv qo polici technolog enabl key metric discuss previoussect latenc , packet loss , jitter control offer differ level servic differ packet stream applic . convent ip provid “ best-effort ” servic , differenti among differ appli-c . therefor , hard ensur qo basic ip beyond expand bandwidth . unfortun , complex large-scal network , abund band- width unlik avail everywher ( practic , mani ip network routinelyus oversubscript ) . even avail everywher , bandwidth alon resolv problem due sudden peak trafﬁc , alway new network applic demand higher higher bandwidth , e.g. , high-deﬁnit video and3d/multiview video . signiﬁc effort toward data network better even guarante qo . pioneer work internet qo classiﬁ twocategori . intserv orintegr servic architectur speciﬁ element guarante qo ﬁne-grain individu ﬂow . idea everi router network implement intserv , everi applic requir kind guarante make individu reserv advanc . contrast intserv , diffserv ordifferenti servic speciﬁ simpl , scalabl , coarse-grain class-bas mechan classifi manag aggreg network trafﬁc provid speciﬁc qo differ class trafﬁc . integr servic ( intserv ) resourc reserv protocol ( rsvp ) intserv , flow spec describ resourc reserv ﬂow , resourc reserv protocol ( rsvp ) [ 24 ] use underli mechan signal across network.15.5 qualiti servic ( qo ) qualiti experi ( qoe ) 561 flow spec includ two compon : first , trafﬁc look like ? deﬁn trafﬁc speciﬁc , also known tspec ; second , guarante need ? deﬁn servic request speciﬁc , also known rspec . rsvp setup protocol internet resourc reserv , target multi- cast setup ( typic built top ip multicast ) gener multimedia applic ( unicast view special case multicast ) . gener commun model support rsvp consist msender nreceiv , possibl vari- ou multicast group ( e.g. , fig . 15.12 , m=2 , n=3 , tree two multicast group depict arrows—solid dash line , respect ) . special case single-sourc broadcast , m=1 ; wherea audio video conferenc , host act sender receiv session , , m=n . main challeng rsvp mani sender receiv may compet limit network bandwidth , receiv heterogen demandingdiffer content differ qo , dynam join quit multicast group time . address challeng , rsvp introduc path andresv messag . path messag initi sender travel toward multicast ( unicast ) destin address . contain inform sender path ( e.g. , previou rsvp hop ) , receiv ﬁnd revers path sender resourc reserv . resv messag sent receiv wish make reserv . •rsvp receiver-initi . receiv ( leaf multicast tree ) initi reserv request resv , request travel back toward sender necessarili way . reserv merg exist reservationmad receiv ( ) session soon meet router . merg reserv accommod highest bandwidth requir among merg request . user-initi scheme highli scalabl , meet heterogen demand user . •rsvp creat soft state . receiv host must maintain soft state period send resv messag ; otherwis , state time . distinct initi messag subsequ refresh messag . chang reserv , state automat beupdat accord new reserv paramet refresh messag . henc , rsvp scheme highli dynam . figur 15.12 depict simpl network two sender ( s1 , s2 ) , three receiv ( r1 , r2 , r3 ) , four router ( , b , c , ) . figur 15.12 show s1 s2 sendpath messag along path r1 , r2 , r3 . ( b ) ( c ) , r1 r2 send resv messag s1 s2 , respect , make reserv s1 s2 resourc . c , two separ channel must reserv sinc r1 r2 request differ data stream . ( ) , r2 r3 send resv messag s1 , make addit request . r3 ’ request merg r1 ’ previou requestat , r2 ’ merg r1 ’ c.562 15 network servic protocol multimedia commun ( ) s1 s2 r1 r2 r3cdb ( b ) ( ) ( c ) s1 s2 r1 r2 r3cdb s1 s2 r1 r2 r3cdb as1 s2 r1 r2 r3cdb fig . 15.12 scenario network resourc reserv rsvp : asend s1 s2 send theirpath messag receiv r1 , r2 , r3 ; breceiv r1 send resv messag s1 ; creceiv r2 send resv messag s2 ; dreceiv r2 r3 send resv messag s1 possibl variat qo demand higher bandwidth dealt modifi reserv state parameters.15.5 qualiti servic ( qo ) qualiti experi ( qoe ) 563 differenti servic ( diffserv ) oppos intserv , diffserv oper principl trafﬁc aggreg classiﬁc , data packet place limit number trafﬁc class , rather differenti network trafﬁc base requir individu ﬂow . trafﬁc class manag differ , ensur preferenti treatmentfor higher-prior trafﬁc network . diffserv , network router implement per-hop behavior ( phb ) , deﬁn packet-forward properti associ class trafﬁc . practic , thetyp servic octet ipv4 packet trafﬁc class octet ipv6 packet use diffserv code ( ds ) classifi packet enabl differenti treatment ( see fig . 15.4 ) . ds ﬁeld contain 6-bit differenti servic code point ( dscp ) valu . theori , network could 64 ( i.e. , 2 6 ) differ trafﬁc class use differ dscp . give network oper great ﬂexibl deﬁn trafﬁc class . differ phb may deﬁn offer , exampl , lower loss lower latenc multimedia data ﬁle transfer , better servic audio video , evendiffer servic within multimedia applic data •uncompress audio . pcm audio bitstream broken group everi nth sample—priorit send kof total ngroup ( k≤n ) ask receiv interpol lost group desir . exampl , two offour group lost , effect sampl rate 22.05 khz instead 44.1 khz . loss perceiv chang sampl rate , dropout . •jpeg imag . differ scan progress jpeg differ resolut imag hierarch jpeg given differ servic . exampl , best servic scan dc ﬁrst ac coefﬁcient , better servic lower-resolut compon hierarch jpeg imag . •compress video . minim playback delay jitter , best servic given recept i-fram lowest prioriti b-frame . scalablevideo use layer code , base layer given better servic enhanc layer . practic , network use follow commonly-deﬁn per-hop behav- ior : •default phb , typic best-effort servic . •expedit forward ( ef ) , dedic low-loss low-lat trafﬁc . suitabl premium voic , video , real-tim servic , often given strict prioriti trafﬁc class . •assur forward ( af ) , achiev assur deliveri pre- scribe condit . trafﬁc exce subscript rate face higher probabl drop congest occur . •class selector phb , maintain backward compat non-diffserv trafﬁc.564 15 network servic protocol multimedia commun worth note detail individu diffserv router deal ds ﬁeld , i.e. , phb , conﬁgur speciﬁc . exampl , one implement may divid network trafﬁc assur forward follow categori andalloc bandwidth accordingli : •gold : trafﬁc categori alloc 50 % avail bandwidth . •silver : trafﬁc categori alloc 30 % avail bandwidth . •bronz : trafﬁc categori alloc 20 % avail bandwidth . anoth implement may differ conﬁgur even complet ignor differ . compar intsev , diffserv coarser control granular ( aggreg class , rather individu ﬂow ) , , therefor , simpler scale well . , howev , necessarili exclus . real-world deploy , intserv diffserv may work togeth accomplish qo target reason- abl cost . particular , rsvp appli individu local ﬂow within network edg , ﬂow aggreg diffserv code ( ds ) beingad qos-awar edg devic . core network , ﬂow separ , packet speciﬁc class treat equal phb . word , rsvp tunnel core visibl accommod onceth aggreg trafﬁc arriv edg devic destin . sinc intserv conﬁn within network edg , cost maintain per ﬂow state larg reduc , impos minimum overhead high-spe core network . 15.5.3 network softwar virtual : sdn nvf intserv diffserv repres initi effort toward improv internet qosand implement mani today ’ internet router ; howev , use wide area network limit . first , complex maintain servic large-scal dynam network quit high , particularli ﬂow-bas resourc reserv protocol ; second , scale heterogen internet termin router make complet end-to-end qo guarante gener difﬁcult , servic differenti . , difﬁcult predict end-to-end behaviorfor packet cross multipl domain reach destin , servic provid router path ensur polici appropri take care packet . importantli , tradit internet design , control plane data plane , well softwar hardwar , tightli coupl , make chang network core difﬁcult deploy . recent , software-deﬁn network ( sdn ) seek decoupl network control for- ward function , enabl network control becom directli programm underli infrastructur abstract applic network ser-vic . efﬁcient dynam network conﬁgur realiz improv network perform monitor [ 25 ] .15.5 qualiti servic ( qo ) qualiti experi ( qoe ) 565 success global deploy sdn greatli depend creation agreement standard applic program interfac ( api ) control data plane . open sourc ethan project stanford univers isa pioneer toward direct [ 26 ] , lead develop openflow [ 27 ] nox oper system network . openflow sinc wide support , follow distinct featur : •highli programm . sinc network control decoupl forward , function becom highli programm . speciﬁc , sdn enabl network administr easili quickli conﬁgur , manag , secur , optim net-work resourc via standard autom sdn program , instead proprietari softwar differ vendor . •central manag . software-centr design , network intellig logic central software-bas sdn control . work togeth maintain global view network , collect act singl , logic switch network trafﬁc administr . abstract allow administratorsto dynam adjust network-wid trafﬁc ﬂow , meet rapidli chang need . •openli avail . snd , openflow particular , advoc open design . given instruct provid standard software-empow sdn control , instead vendor-speciﬁc hardwar protocol , greatli simpliﬁ network design , oper , manag , well servic migrat formodern cloud internet thing ( iot ) applic . anoth recent effort toward make ﬂexibl manag internet network function virtual ( nfv ) [ 28 ] . extend convent machin virtual concept network architectur , nvf seek virtual entir class network node function build block may connect , chain togeth , creat commun servic . greatli reduc capit oper- expenditur , acceler servic product deploy . particular , nfv adopt central orchestr manag modul take oper request associ virtual network function , translat thecorrespond process , storag , network conﬁgur , execut function . execut , resourc capac util function monitor dynam adjust realtim [ 29 ] . nfv close relat sdn , necessarili depend sdn . implement use exist network orchestr platform , though unifi sdn nfv ecosystem clearli beneﬁci [ 30 ] . 15.5.4 rate control buffer manag sdn nfv still activ develop adopt , worth note solut improv internet , replac internet . even advanc network control plane , time , networked566 15 network servic protocol multimedia commun multimedia applic still assum underli network best- effort servic ( least , without guarante qo ) , adapt transmiss control use [ 31 ] . key concern rate ﬂuctuat multimedia data . seen earlier , audio encod gener constant bit rate ( cbr ) talk , e.g. , 64 kbp bitrat ( 8 khz sampl frequenc , 8 bit per sampl ) . video , cbrcode need maintain constant bitrat sourc ; yet variabl distort introduc given scene differ across frame . cbr code also less efﬁcient variabl bit rate ( vbr ) code : obtain compar qualiti code media , cbr bitrat typic 15–30 % higher mean vbr video bitrat . end , vbr code often use . usual , activ ( motion video ) , higher requir bitrat . case , typic bitrat mpeg- 1 ( 1.5 mbp ) mpeg-2/4 ( 4 mbp ) averag , real stream low bitrat one point much higher bitrat anoth point ( seefig . 15.10 ) . video deliv network without work-ahead smooth , requir network throughput must higher video ’ peak bitrat uninterrupt playback . cope variabl bitrat network load ﬂuctuat , buffer usual employ sender receiv end [ 32 ] . prefetch buffer introduc client side smooth transmiss rate ( reduc peak rate ) . sizeof frame tisd ( ) , buffer size b , number data byte receiv far ( play time frame ) sa ( ) , t∈1,2 , ... , n , requir t/summationdisplay i=1d ( ) ≤a ( ) ≤t−1/summationdisplay i=1d ( ) +b ( 15.1 ) ifa ( ) < /summationtextt i=1d ( ) , inadequ network throughput , henc buffer underﬂow ( orstarv ) , wherea ( ) > /summationtextt−1 i=1d ( ) +b , excess network throughput buffer overﬂow . harm smooth , continu playback . buffer underﬂow , data avail play , buffer overﬂow , media packet must drop . figur 15.13 illustr limit impos media playback ( consumpt ) data rate buffer data rate . transmiss rate slope curv . time , data must buffer smooth playback , datatransmit must data consum . avail bandwidth line ii ﬁgure , point playback , data consum greater sent . buffer underﬂow , playback interrupted.also , point , total amount data transmit must exceed total consum plu size buffer . network avail bandwidth line media sent fast possibl without buffer consider ( normal ﬁle download ) , toward end video , data receiv greater buffer store time . buffer overﬂow drop extra packet . server haveto retransmit packet drop , packet miss . increases15.5 qualiti servic ( qo ) qualiti experi ( qoe ) 567 data ( byte ) avail network bandwidth ( frame # ) media dataavail network bandwidth iiunderflowoverflowmaximum buffer data bbuffer ( i=1d ( ) ) ( t−1 i=1d ( ) +b ) fig . 15.13 data client store buffer assist smooth playback media media rate exce avail network bandwidth bandwidth requir ( henc may caus underﬂow futur ) . mani case , multicast , back channel avail . address , need prefetch video data ﬁll buffer tri transmit mean video bitrat , keep buffer full without exceed avail bandwidth , estim tcp-friendli bandwidth mention earlier . either case , video section requir higher bandwidth avail , data alreadi buffer avail network bandwidth enabl smooth playback without buffer underﬂow . data rate characterist known advanc , say media store server , possibl use prefetch buffer efﬁcient network . media server plan ahead transmiss rate media view without interrupt minim bandwidth [ 33 ] . 15.6 protocol multimedia transmiss interact review protocol multimedia commun . protocol build top udp tcp work best-effort internet intserv/diffserv/sdn/nvf provid qualiti multimedia data transmiss , partic- ularli stream mode , also enabl variou interact media server client . 15.6.1 hypert ext transfer protocol ( http ) http protocol origin design transmit web content , also support transmiss ﬁle type . standard develop http monitor ietf world wide web consortium ( w3c ) , culminating568 15 network servic protocol multimedia commun public seri rfc , notabl rfc 2616 ( june 1999 ) , deﬁn http/1.1 , version http common use . 2015 , internet engineer- ing task forc ( ietf ) releas http/2 , second major version http . itachiev improv efﬁcienc optim page load compress request header . anoth key advanc featur send multipl request data parallel singl tcp connect , allow client download web ﬁlesasynchron one server . http “ stateless ” request/respons protocol , sens client typic open connect http server , request inform , server respond , connect terminated—no inform carri next request . basic request format method uri version additional-head message-bodi uniform resourc identiﬁ ( uri ) identiﬁ resourc access , host name , alway preced token “ http : // ” r “ http : // ” . uri could url , exampl . also includ queri string ( interactionsrequir submit data ) . method way exchang inform perform task uri . two popular method get andpost .get speciﬁ inform request request string , post method speciﬁ resourc point uri consid messag bodi . post gener use submit html form . additional-head speciﬁ addit paramet client . exampl , request access tothi textbook ’ web site , follow http messag might gener : get http : //www.cs.sfu.ca/mmbook/ http/1.1 basic respons format version status-cod status-phras additional-head message-bodi status-cod number identiﬁ respons type ( error occur ) , andstatus-phras textual descript . two commonli seen statu code phrase 200 ok request process success 404 found uri exist . exampl , respons exampl request textbook ’ url , web server may return someth like15.6 protocol multimedia transmiss interact 569 http/1.1 200 ok server : [ no-plugs-here-pleas ] date : wed , 24 juli 2019 20:04:30 gmtcontent-length : 1045 content-typ : text/html < html > ... < /html > note http/2 high-level compat http/1.1 term meth- od , statu code , uri , header ﬁeld . http build top tcp ensur reliabl data transfer . origin design multimedia content distribut , mention stream media . yet http-base stream recent becom popular , thank smart stream seg-ment strategi abund web server resourc avail http data transfer , examin next chapter . 15.6.2 real-tim transport protocol ( rtp ) rtp , deﬁn rfc 3550 , design transport real-tim data , sucha audio video stream . seen , network multimedia applic divers characterist demand ; also tight interact betweenth network media . henc , rtp ’ design follow two key principl , name application-lay frame , i.e. , frame media data perform properli applic layer , integr layer process , i.e. , integr multipl layer one allow efﬁcient cooper [ 34 ] . distinguish rtp tradit application-lay protocol , http web transact ftp ﬁle transfer , target singl well-deﬁn applic . instead , rtp resid transport layer applic layer , bridg real-tim multimedia transmiss . rtp usual run top udp , provid efﬁcient ( albeit less reliabl ) connectionless transport servic . three main reason use udp instead tcp . first , tcp connection-ori transport protocol ; henc , difﬁ-cult scale multicast environ . begin , rtp alreadi target multicast stream , unicast special case . second , tcp achiev reliabl retransmit miss packet . mention earlier , mul-timedia data transmiss loss-toler perfect reliabl necessari ; late arriv retransmit data may usabl real-tim applic , either , persist retransmiss would even block data ﬂow , undesirablefor continu stream . last , dramat rate ﬂuctuat ( sawtooth behavior ) tcp often desir continu media . tcp provid time inform , critic continu media . sinc udp time inform either , guarante data pack- et arriv origin order ( mention synchron multipl sourc ) ,570 15 network servic protocol multimedia commun rtp must creat timestamp sequenc mechan ensur order . rtp introduc follow addit paramet header packet : •payload type indic media data type well encod scheme ( e.g. , pcm audio , mpeg 1/2/4 , h.263/264/265 audio/video , etc ) , receiv know decod . •timestamp import mechan rtp . timestamp record instant ﬁrst octet packet sampl , set sender . timestamp , receiv play audio/video proper time order synchron multipl stream ( e.g. , audio video ) necessari . •sequenc number complement function timestamp . incre- ment one rtp data packet sent , ensur packet reconstruct order receiv . becom necessari , exampl , packet one video frame set timestamp , timestamp alon becom insufﬁci . •synchron sourc ( ssrc ) id identiﬁ sourc multimedia data ( e.g. , audio , video ) . data come sourc ( e.g. , translat mixer ) , given ssrc id , synchron . •contribut sourc ( csrc ) id identiﬁ sourc contributor , speaker audio confer . figur 15.14 show rtp header format . ﬁrst 12 octet ﬁxed format , follow option ( 0 ) 32-bit contribut sourc ( csrc ) id . bit 0 1 version rtp , bit 2 ( p ) signal pad payload , bit 3 ( x ) signal extens header , bit 4 7 4-bit csrc count indic number csrc id follow ﬁxed part header . bit 8 ( ) signal ﬁrst packet audio frame last packet video frame , sinc audio frame play soon ﬁrst packet receiv , wherea video frame render last packet receiv . bit 9 15 describ payload type , bit 16 31 sequenc number , follow 32-bit timestamp 32-bit synchron sourc ( ssrc ) id . sequenc number timestamp synchron sourc ( ssrc ) id0 31 15 payload type9 . . .8 contribut sourc ( csrc ) id ( option ) # csrc pv4 xm16 fig . 15.14 rtp packet header15.6 protocol multimedia transmiss interact 571 15.6.3 rtp control protocol ( rtcp ) rtcp , also deﬁn rfc 3550 , companion protocol rtp . monitor qo provid feedback sourc qualiti data transmiss convey inform particip multicast session . rtcp also provid necessari inform audio video synchron , even sentthrough differ packet stream . rtcp provid seri typic report extens , allow application-speciﬁc rtcp report : 1.receiv report ( rr ) provid qualiti feedback ( number last packet receiv , number lost packet , jitter , timestamp calcul round-trip delay ) . 2.sender report ( sr ) provid inform recept rr , number packets/byt sent , . 3.sourc descript ( sde ) provid inform sourc ( e-mail address , phone number , full name particip ) . 4.bye indic end particip . 5.applic speciﬁc function ( app ) provid futur extens new fea- ture . rtp rtcp packet sent ip address ( multicast unicast ) differ port . rtcp report expect sent particip , even multicast session may involv thousand sender receiv . trafﬁc increas proport number particip . thu , avoid network congest , protocol must includ session bandwidth manag , achiev dynam control frequenc report transmiss . rtcp bandwidthusag gener exceed 5 % total session bandwidth . furthermor , 25 % rtcp bandwidth reserv media sourc time , larg session new particip identifi sender without excess delay . note , rtcp offer qo feedback , specifi feed- back use , leav oper applic layer . rational , seen , multimedia applic highli divers requir ( bandwidth , delay , packet loss , etc . ) , therefor , singl set oper satisfi . instead , applic custom opera- tion feedback improv qo . quit differ tcp , whichoff uniform interfac rang data applic homogen qo requir , name , delay bandwidth insensit , perfect reliabl . follow section next chapter , see exampl use ofrtcp ’ qo feedback . 15.6.4 real-tim stream protocol ( rtsp ) real-tim stream protocol ( rtsp ) , deﬁn rfc 2326 , signal protocol control stream media server . protocol use establishing572 15 network servic protocol multimedia commun get request rtcprtp audio rtp videosetup respons teardown responseget respons option respons play respons paus respons teardown requestpaus requestplay requestsetup requestopt request c l e n tm e e r v e r fig . 15.15 scenario rtsp oper control media session end point . client media server issu vcr-like command , play , random-seek , paus , facilit real-tim control playback media ﬁle server . transmiss stream data task rtsp protocol . rtsp server use rtp conjunct rtcp media stream deliveri , although proprietari transport protocol also possibl . figur 15.15 illustr possibl scenario four typic rtsp oper 1.request present descript . client issu describ request media server obtain present descript , media types15.6 protocol multimedia transmiss interact 573 ( audio , video , graphic , etc . ) , frame rate , resolut , codec , , server . 2.session setup . client issu setup inform server destin ip address , port number , protocol , ttl ( multicast ) . session set server return session id . 3.request receiv media . receiv play , server start transmit stream audio/video data , use rtp . follow record paus . vcr command , fast-forward andrewind also support . session , client period send rtcp packet toth server , provid feedback inform qo receiv ( describ sect . 15.6.3 ) . 4.session closur .teardown close session . 15.7 case studi : internet elephoni use case internet telephoni see use protocol introduc , well introduc import signal protocol multimedia commun . desktop/laptop comput internet becam readili avail voic data commun becam digit , “ voic data network , ” especi voic ip ( v oip ) , start attract great deal interest research user commun . ever-increas network bandwidth ever-improvingqu multimedia data compress , internet telephoni [ 35 ] becom realiti . main advantag internet telephoni plain old telephon servic ( pot ) follow : •it provid great ﬂexibl extens accommod integr servic voicemail , video convers , live text messag , . •it use packet switch , circuit switch ; henc , network usag much efﬁcient ( voic commun bursti vbr-encod ) . •with technolog multicast multipoint commun , multiparti call much difﬁcult two-parti call . •with advanc multimedia data-compress techniqu , variou degre qo support dynam adjust accord network trafﬁc , improv “ none ” servic pot . •richer graphic user interfac develop show avail featur servic , monitor call statu progress , . fig . 15.16 show , transport real-tim audio ( video ) internet telephoni support rtp ( control protocol , rtcp ) , describ insect . 15.6.2 . stream media handl rtsp internet resourc reserv , avail , taken care rsvp . recent , new gener internet telephony,574 15 network servic protocol multimedia commun fig . 15.16 network protocol structur internet telephoni rtp , rtcp , rsvp , rtsp network layer ( ip , ip multicast ) data link layer physic layertransport layer ( udp , tcp ) h.323 sip notabl skype , also use peer-to-p cloud comput technolog achiev better scalabl . 15.7.1 signal protocol : h.323 session initi protocol ( sip ) stream media server readili identiﬁ url , , wherea accept call via internet telephoni depend calle ’ current locat , capabl , avail , desir commun , requir advanc signal protocol . follow brief descript h.323 standard itu , one commonli use ietf standard , session initi protocol ( sip ) . h.323 standard h.323 [ 36,37 ] itu standard packet-bas multimedia commun servic . speciﬁ signal protocol describ termin , multipoint con- trol unit ( conferenc ) , gateway integr internet telephoni gener switch telephon network ( gstn ) 4data termin . h.323 signal process consist two phase : 1.call setup . caller send gatekeep ( gk ) aregistr , admiss statu ( ra ) admiss request ( arq ) messag , contain name phone number calle . gk may either grant permiss reject request , reason “ secur violat ” “ insufﬁci bandwidth ” . 4gstn synonym pstn ( public switch telephon network ) .15.7 case studi : internet telephoni 575 2.capabl exchang . h.245 control channel establish , ﬁrst step exchang capabl caller calle , whether audio , video , data ; compress encrypt , . h.323 provid mandatori support audio option support data video . associ famili relat softwar standard deal call control data compress internet telephoni . signal control •h.225 . call control protocol , includ signal , registr , admiss , pack- etiz synchron media stream •h.245 . control protocol multimedia communications—for exampl , open close channel media stream , obtain gateway gstn internet telephoni •h.235 . secur encrypt h.323 h.245-base multimedia termin audio codec •g.711 . codec 3.1 khz audio 48 , 56 , 64 kbp channel . g.711 describ pcm normal telephoni •g.722 . codec 7 khz audio 48 , 56 , 64 kbp channel session initi protocol ( sip ) sip ietf ’ recommend ( rfc 3261 ) establish termin session internet telephoni . differ h.323 , sip text-bas protocol , limit v oip communications—it support session multimedia confer gener multimedia content distribut . client-serv protocol , sip allow acal ( client ) initi request , server process respond . three type server . proxi server redirect server forward call request . differ two proxi server forward request toth next-hop server , wherea redirect server return address next-hop server client , redirect call toward destin . third type locat server , ﬁnd current locat user . locat server usual commun redirect proxi server . may use ﬁnger , rwhoi , lightweight directori access protocol ( ldap ) , protocol determin user ’ address . sip advertis session use e-mail , news group , web page directori , session announc protocol ( sap ) . method ( command ) client invok are576 15 network servic protocol multimedia commun redirect serverloc serv r locat serv r sip client ( calle ) sip client ( caller ) 4 5 6 21913143 21 1011proxi server ( p3 ) proxi server ( p2 ) proxi server ( p1 ) 87 fig . 15.17 possibl scenario sip session initi •invit —invit calle ( ) particip call . •ack —acknowledg invit . •option —inquir media capabl without set call . •cancel —termin invit . •bye —termin call . •regist —send user ’ locat inform registrar ( sip server ) . figur 15.17 illustr possibl scenario caller initi sip session : step 1 . caller send invit john @ home.ca local proxi server p1 . step 2 . proxi use domain name servic ( dn ) locat server john @ home.ca send request . e p s3 ,4 . john @ home.ca log server . request sent nearbi locat server . john ’ current address , john @ work.ca , locat . step 5 . sinc server redirect server , return address john @ work.ca proxi server p1 . step 6 . tri next proxi server p2 john @ work.ca . e p s7 ,8 . p2 consult locat server obtain john ’ local address , john_do @ my.work.ca .15.7 case studi : internet telephoni 577 e p s9 ,1 0 . next-hop proxi server p3 contact , turn forward invit client ( calle ) . step 11–14 . john accept call current locat ( work ) acknowledg return caller . sip also use session descript protocol ( sdp ) ( rfc 4566 ) gather infor- mation user ’ media capabl . name suggest , sdp describ multimedia session . sdp descript plain text format . includ number type media stream ( audio , video , whiteboard session , etc . ) , destin address ( unicast multicast ) stream , send receiv port number , media format ( payload type ) . initi call , caller includ sdp inform invit messag . call parti respond sometim revis sdp inform , accord capabl . show exampl session descript , adapt rfc 4566. v=0 o=jdo 2890844526 2890842807 ip4 10.47.16.5 s=sdp seminari=a seminar session descript protocol u=http : //www.example.com/seminars/sdp.pdf e=j.do @ example.com ( jane doe ) c=in ip4 224.2.17.12/127 t=2873397496 2873404696 a=recvonli m=audio 49170 rtp/avp 0 m=video 51372 rtp/avp 99a=rtpmap:99 h264/90000 session descript propos receiv client ( user- name “ jdoe ” ) request session host locat ipv4 address10.47.16.5 . session name “ sdp seminar ” , complet titl “ seminar session descript protocol ” . also contain web-host pdf ﬁle descript one audio one video part proposedsess . media content avail media server host , whose contact name “ jane doe ” , reachabl indic e-mail address . twomedia stream transport basic rtp audio video proﬁl ( rtp/a vp ) ipv4 multicast address 224.2.17.12 ( time live 127 hop ) udp port 49170 51372 audio video , respect . audio anrtp/a vp format 0 video format 99 , sdp server also deﬁn map “ video/h264 ” media codec.578 15 network servic protocol multimedia commun 15.8 explor gener discuss comput network data commun given book kuros ross [ 3 ] . stall introductori book [ 38 ] ns eo f recent advanc network ﬁeld , includ softwar deﬁn network ( sdn ) , network function virtual ( nfv ) , internet thing ( iot ) , etc . therequest comment ( rfc ) mani network protocol found websit ietf ( internet engin task forc ) . 15.9 exercis 1 . main differ osi tcp/ip refer model ? describ function layer osi model relationsto multimedia commun . 2 . true fals . ( ) adsl use cabl modem data transmiss . ( b ) avoid overwhelm network , tcp adopt ﬂow control mechan . ( c ) tcp ﬂow control congest control window-bas . ( ) order deliveri ’ happen virtual circuit . ( e ) udp lower header overhead tcp . ( f ) datagram network need call setup transmiss . ( g ) current internet provid guarante servic . ( h ) cbr video easier network trafﬁc engin vbr video . 3 . consid multiplexing/demultiplex , one basic function transport layer . ( ) list 4-tupl use tcp demultiplex . paramet 4-tupl , show scenario paramet necessari . ( b ) note udp use destin port number demultiplex . describ scenario udp ’ scheme ﬁt better . hint : scenario common multimedia applic . 4 . find ip address comput smartphone/tablet . real physic ip address intern address behind na ? 5 . consid na t-enabl home network . ( ) two differ local client access extern web server simultan ? ( b ) establish two web server ( port 80 ) network , access extern comput basic na set ? ( c ) want establish one web server ( port 80 ) network , propos solut discuss potenti problem . 6 . key differ ipv6 ipv4 , chang ipv6 necessari ? note deploy ipv6 remain limit now.15.9 exercis 579 explain challeng deploy list two interim solut extend lifetim ipv4 ipv6 fulli deploy . 7 . discuss pro con implement multicast network layer applic layer . implement multicast layer , ? 8 . relat delay jitter ? describ mechan mitig impact jitter . 9 . discuss least two altern method enabl qo rout packet- switch network base qo class speciﬁ multimedia packet . 10 . consid convent telephon network today ’ internet . ( ) key differ two type network ? internet becom domin network ? ( b ) key challeng multimedia internet ? 11 . consid addit increas multipl decreas ( aimd ) congest control mechan tcp . ( ) justifi aimd ensur fair efﬁcient share tcp ﬂow compet bottleneck bandwidth.to facilit discuss , may consid simplest case two tcp user compet singl bottleneck . fig . 15.18 , throughput two user repres x-axi -axi , respect . whenth aggreg throughput exce bottleneck bandwidth r , congest happen ( upper right side ﬁgure ) , though detect short delay given tcp use packet loss congest indicator.for initi throughput two user , say , x 0and y0 , x0 < y0 , trace throughput chang aimd , show eventu converg fair efﬁcient share bottleneck bandwidth . hint : one point . ( b ) explain whether aimd suitabl multimedia stream applic . ( c ) explain relat aimd tcp-friendli rate control ( tfrc ) . 12 . tcp achiev reliabl data transfer retransmiss . ( ) discuss possibl overhead retransmiss . ( b ) list two applic retransmiss necessari . ( c ) list two applic retransmiss necessari possibl . explain answer . 13 . explain rtp built-in congest control mechan , tcp . also , note rtsp independ rtp stream control , i.e. , use separ channel . known out-of-band , data channel control channel separ . advantag disadvantag combin singl channel ? 580 15 network servic protocol multimedia commun fig . 15.18 throughput two tcp user share abottleneck 14 . consid fig . 15.12 illustr rsvp . ( ) , receiv r3 decid send rsvp resv messag s1 . assum ﬁgure speciﬁ complet state network , path reserv optim maxim futur network throughput ? , optim path ? without modifi rsvpprotocol , suggest scheme path discov chosen network node . 15 . consid typic internet telephoni system 64 kbp data rate sampl frequenc 8 khz . ( ) data chunk gener everi 20 ms , mani data sampl data chunk , size chunk ? ( b ) header overhead data chunk encapsul rtp/udp/ip protocol stack ? ( c ) assum one caller one calle , bandwidth allo- cate rtcp ? 16 . specifi fig . 15.13 characterist feasibl video transmiss sched- ule . optim transmiss schedul ? refer 1 . andrew s. tanenbaum , david j. wetheral , comput network , 5th edn . ( prentic hall ptr , upper saddl river , new jersey , 2012 ) 2 . w. stall , data & comput commun , 10th edn . ( prentic hall , upper saddl river , new jersey , 2013 ) 3 . jame f. kuros , keith w. ross , comput network : top-down approach , 7th edn . ( pearson , new ork , 2016 ) refer 581 4 . h. zimmermann , osi refer model—th iso model architectur open system inter- connect . commun . ieee tran . 28 ( 4 ) , 425–432 ( 1980 ) 5 . ieee standard local metropolitan area network : overview architectur . ieee std 802-1990 ( 1990 ) 6 . j.f . shoch , .k . dalal , d.d . redel , r.c . crane , evolut ethernet local comput network . comput 15 ( 8 ) , 10–27 ( 1982 ) 7 . m. decina , e. scace , ccitt recommend isdn : review . sel . area commun . ieee j . 4 ( 3 ) , 320–325 ( 1986 ) 8 . jenni bourn , dave burstein , dsl : wiley tech brief ( technolog brief seri ) ( wiley , hoboken , 2002 ) 9 . u.d . black , atm , volum iii : internetwork atm . ( prentic hall ptr , toronto , 1998 ) 10 . v aibhav bajpai , saba ahsan , jürgen schönwälder , jörg ott , measur outub content deliv- eri ipv6 . sigcomm comput . commun . rev . 47 ( 5 ) , 2–11 ( 2017 ) . octob 11 . j. rosenberg , j. weinberg , c. huitema , r. mahi , stun—simpl travers user datagram protocol ( udp ) network address translat ( na ts ) ( 2003 ) 12 . rolf opplig , internet secur : ﬁrewal beyond . commun . acm 40 ( 5 ) , 92–102 ( 1997 ) . may 13 . j. liu , s.g. rao , b. li , h. zhang , opportun challeng peer-to-p internet video broadcast . proc . ieee 96 ( 1 ) , 11–24 ( 2008 ) 14 . j.h . saltzer , d.p . reed , d.d . clark , end-to-end argument system design . acm tran . comput . syst . 2 ( 4 ) , 277–288 ( 1984 ) . novemb 15 . s. deer , d. cheriton , multicast rout datagram internetwork extend lan . acm tran . comput . syst . 8 ( 2 ) , 85–110 ( 1990 ) 16 . h. eriksson , mbone : multicast backbon . commun . acm 37 ( 8 ) , 54–60 ( 1994 ) 17 . m.r . macedonia , d.p . brutzman , mbone provid audio video across internet . ieee comput . 27 ( 4 ) , 30–36 ( 1994 ) 18 . v . kumar , mbone : interact multimedia internet ( new rider , indianapoli , 1995 ) 19 . s. paul et al. , reliabl multicast transport protocol ( rmtp ) . ieee j. sel . area commun . 15 ( 3 ) , 407–421 ( 1997 ) 20 . b. whetten , g. taskal , overview reliabl multicast transport protocol ii . ieee netw . 14 , 37–47 ( 2000 ) 21 . k.c . almeroth , evolut multicast : mbone interdomain multicast inter- net2 deploy . ieee netw . 14 , 10–20 ( 2000 ) 22 . .-h. chu , s.g. rao , h. zhang , case end system multicast . ieee j. sel . area commun . 20 ( 8 ) , 1456–1471 ( 2006 ) . septemb 23 . r.v .l . hartley , transmiss inform . bell syst . tech . j . ( 1928 ) 24 . l. zhang et al. , rsvp : new resourc reserv ation protocol . ieee netw . mag . 7 ( 5 ) , 8–19 ( 1993 ) 25 . p .e . v eríssimo , c.e . rothenberg , s. azodolmolki , d. kreutz , f.m.v . ramo , s. uhlig , software-deﬁn network : comprehens survey . proc . ieee 103 ( 1 ) , 14–76 ( 2015 ) 26 . m. casado , m.j. freedman , j. pettit , j. luo , n. mckeown , s. shenker , ethan : take control enterpris , proceed acm sigcomm , p. 12 ( 2007 ) 27 . n. mckeown , t. anderson , h. balakrishnan , g. parulkar , l. peterson , j. rexford , s. shenker , j. turner , openﬂow : enabl innov campu network . sigcomm comput . commun.rev . 38 ( 2 ) , 69–74 ( 2008 ) . march 28 . r. mijumbi , j. serrat , j. gorricho , n. bouten , f. de turck , r. boutaba , network function virtual : state-of-the-art research challeng . ieee commun . surv . tutor . 18 ( 1 ) , 236– 262 ( 2016 ) 29 . b. chatra , standard nfv manag orchestr api . ieee commun . stand . mag . 2 ( 4 ) , 66–71 ( 2018 ) 30 . m. . bonﬁm , k.l . dia , s.f.l . fernand , integr nfv/sdn architectur : systemat literatur review . acm comput . surv . 51 ( 6 ) ( 2019 ) 582 15 network servic protocol multimedia commun 31 . c. liu , multimedia ip : rsvp , rtp , rtcp , rtsp , handbook emerg communi- cation technolog : next decad , ed . r. osso ( crc press , boca raton , 2000 ) , pp . 29–46 32 . m. krunz , bandwidth alloc strategi transport variable-bit-r video trafﬁc . ieee commun . mag . 35 ( 1 ) , 40–46 ( 1999 ) 33 . j.d . salehi , z.l . zhang , j.f . kuros , d. towsley , support store video : reduc rate vari- abil end-to-end resourc requir optim smooth . acm sigmetrics24 ( 1 ) , 222–231 ( 1996 ) . may 34 . d.d . clark , d.l . tennenhous , architectur consider new gener protocol . sigcomm comput . commun . rev . 20 ( 4 ) , 200–208 ( 1990 ) . august 35 . h. schulzrinn , j. rosenberg , ietf internet telephoni architectur protocol . ieee netw . 13 , 18–23 ( 1999 ) 36.packet-bas multimedia commun system . itu-t recommend h.323 , novem- ber 2000 ( earlier version septemb 1999 ) 37 . j . toga , j. ott , itu-t standard activ interact multimedia commun packet-bas network : h.323 relat recommun . comput . netw . 31 ( 3 ) , 205–223 ( 1999 ) 38 . w. stall , foundat modern network : sdn , nfv ( iot , cloud . pearson , qoe , 2016 ) 16internet multimedia content distribut previou chapter , introduc basic internet infrastructur protocol real-tim multimedia servic . protocol suit incor-por client-sid media player receiv stream media server internet . key function multimedia data transfer provid real- time transport protocol ( rtp ) , includ payload identiﬁc , sequenc num-ber loss detect , timestamp playback control . run top udp , rtp guarante qualiti servic ( qo ) , reli companion , rtp control protocol ( rtcp ) , monitor network statu andprovid feedback application-lay adapt . real-tim stream pro- tocol ( rtsp ) coordin deliveri media object enabl rich set control interact playback . figur 16.1 show basic client/server-bas multimedia media stream sys- tem use real-tim protocol suit . work ﬁne small-scal media content distribut internet , media object video serv singl server user . architectur quickli becom infeas media content made avail onlin user network-and multimedia-readi . signiﬁc studi efﬁcient content distribut inter- net , target larg number user . optim deliveringconvent web object ( e.g. , html page small imag ) ﬁle download . stream media , howev , pose new set challeng [ 1–3 ] : huge size : convent static web object typic order 1–100k byte . contrast , media object high data rate long playback durat , combin yield huge data volum . exampl , one-hour standard mpeg- 1 video total volum 675 mb . later standard successfullyimprov compress efﬁcienc , video object size , even latest © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_16583584 16 internet multimedia content distribut fig . 16.1 basic client/server-bas media stream system h.266 compress , still larg , mention new ultra high deﬁnit ( uhd ) 3d video . intens bandwidth use : stream natur deliveri requir signiﬁc amount disk i/o network bandwidth , sustain long period . rich interact : long playback durat stream object also enabl variou client-serv interact . exampl , exist studi found nearli 90 % media playback termin prematur client [ 4 ] . addit , playback , client often expect vcr-like oper , fast-forward rewind . impli access rate might differ differ portion stream . mani emerg applic , internet tv live event broadcast , demand real-tim multimedia stream servic massiv audienc , easili overwhelm server . scale challeng multimedia content distribut enorm . reach 100 million viewer , deliveri tv qualiti video encod mpeg-4 ( 1.5 mbp ) may requir aggreg capac 150 tbp . put thing perspect , consid two large-scal internet video broadcast : nbc ’ live telecast super bowl xlix 2015 , record-high viewership within unit state 114.4 million viewer , 2018 fifa world cup final ( franc vs. croatia ) , around 1 billion viewer worldwid . even low bandwidth internet video 500 kbp , nbc broadcast need 57 tbp server network bandwidth , fifa broadcast worldwid would order magnitud higher . hardli handl singl server . chapter , discuss content distribut mechan enabl highli scalabl multimedia content stream , includ proxi cach , multicast , content distribut network , peer-to-p , web-bas stream . 16.1 proxi cach reduc client-perceiv access latenc , well server/network load , effec- tive mean cach frequent use data proxi close client . also enhanc avail object mitig packet loss , local transmiss gen- eral reliabl remot transmiss . proxi cach thu becom one vital compon virtual web system [ 5 ] . stream media , par-16.1 proxi cach 585 control channel ( rtsp , rtcp ) schedul media repositoryserv media proxi proxi manag enterpris network cacheplay buffercli backbon network data channel ( rtp ) assembler/switch data channel ( rtp ) control channel ( rtsp , rtcp ) fig . 16.2 gener system diagram proxy-cache-assist media stream use rtp/rtcp/rtsp ticularli pre-stor , could also beneﬁt signiﬁc perform improv proxi cach , given static natur content highli local access interest . media cach , howev , mani distinct focus convent web cach [ 6 ] . one hand , tradit web cach spend consider effort ensur copi origin server proxi consist . sinc content audio/video object rare updat , manag issu less critic media cach . hand , given high resourc requir , cach media object entir proxi hardli practic . necessari decid portion object cach cach space , disk i/o , network i/o constraint , beneﬁt cach outweigh overhead synchron differ portion video stream proxi server . gener system diagram proxy-cache-assist media stream depict fig . 16.2 . proxi must repli client ’ play request initi transmiss rtp rtcp messag client cach portion , request uncach portion ( ) server . fetch achiev rtsp rang request specifi playback point , illustr fig . 16.3 . rang request also enabl client retriev differ segment media object multipl server proxi , need . accord select portion cach , classifi exist algorithm four categori : sliding-interv cach , preﬁx cach , segment cach , rate-split cach . 16.1.1 sliding-interv cach algorithm cach slide interv media object facilit consecut access [ 7,8 ] . illustr , given two consecut request object , ﬁrst request may access object server increment store proxi cach ; second request access cach portion releas access . two request arriv close time , small portion of586 16 internet multimedia content distribut rtsp rtp rtsp option describ setup play teardown okokokok setup ok play rang ok teardown ok client proxi serv e rportion 1 ( cach ) portion 2 ( uncach ) portion 2 fig . 16.3 oper stream partial cach fig . 16.4 illustr sliding-interv cach . object consist 9 frame , requir one unit time deliv proxi client . request 1 2 arriv time 0 2 , respect . serv request 2 , two frame need cach time instanc . atim 0 : request 1 arriv ; btime 1–2 : frame 1 2 access request 1 cach ; request 2 arriv ; ctime 2–3 : frame 3 access request 1 cach ; frame 1 read request 2 releas media object need cach time instanc , yet second request complet satisﬁ proxi , illustr fig . 16.4 . gener , multipl request object arriv short period , set adjac interv group form run , cach portion releas last request satisﬁed.16.1 proxi cach 587 sliding-interv cach signiﬁcantli reduc network bandwidth con- sumption start-up delay subsequ access . howev , cach portion dynam updat playback , sliding-interv cach involv high disk bandwidth demand ; worst case , would doubl disk i/o due con- current read/writ oper . effect util avail cach resourc , cach polici model two-constraint knapsack problem given space bandwidth requir object [ 7 ] , heurist develop dynam select cach granular , i.e. , run length , balanc bandwidth space usag . given memori space larg nowaday , also possibl alloc memori buffer accommod media data thu avoid intens disk read/writ [ 8 ] . effect sliding-interv cach diminish increas access interv . access interv object longer durat playback , algorithm degener unafford full-object cach . address issu , prefer retain cach content rel long time period , cach algorithm discuss rest section fall categori . 16.1.2 preﬁx cach segment cach algorithm cach initi portion media object , call preﬁx , proxi [ 9 ] . upon receiv client request , proxi immedi deliv preﬁx client , meanwhil , fetch remain portion , sufﬁx , origin server relay client ( see fig . 16.5 ) . proxi gener closer client origin server , start-up delay playback remark reduc . segment cach gener preﬁx cach paradigm partit media object seri segment , differenti respect util , mak- ing cach decis accordingli ( see fig . 16.6 ) . salient featur segment- base cach support preview vcr-like oper random access , fast-forward , rewind . exampl , key segment media object ( hotspot ) , identiﬁ content provid , cach [ 10 ] . client request object , proxi ﬁrst deliv hotspot provid overview stream ; client decid whether play entir stream quickli jump cach prefix current playback prefetch fig . 16.5 snapshot preﬁx caching588 16 internet multimedia content distribut fig . 16.6 illustr segment cachingcach segment speciﬁc portion introduc hotspot . furthermor , fast-forward rewind oper , correspond hotspot deliv display , portion skip . , load server backbon net- work greatli reduc , client miss import segment media object . segment necessarili length , predeﬁn . one solut group frame media object variable-s segment , length increas exponenti distanc start media stream , i.e. , size segment ii 2i−1 , consist frame 2i−1,2i−1+1 , ... , 2i−1 [ 11 ] . util segment calcul ratio segment refer frequenc distanc begin segment , favor cach initi seg- ment well higher access frequenc . proxi also quickli adapt chang access pattern cach object discard big chunk need . access frequenc known advanc , segment postpon late possibl ( call lazi segment ) , thu allow proxi collect sufﬁcient amount access statist improv cach effect [ 4 ] . 16.1.3 rate-split cach work-ahead smooth aforement cach algorithm partit media object along time axi , rate-split cach ( also known video stage ) [ 12 ] partit media along rate axi : upper part cach proxi , wherea lower part remain store origin server ( see fig . 16.7 ) . type partit particularli attract vbr stream , lower part nearli constant rate deliv backbon network . qo network resourc reserv , bandwidth reserv base peak rate stream , cach upper part proxi signiﬁcantli reduc rate variabl , turn improv backbon bandwidth util . client buffer capabl ( refer sect . 15.5.4 previou chapter ) , work-ahead smooth [ 13 ] incorpor video stage reduc backbon bandwidth requir . deﬁn ( ) size frame , t∈1,2 , ... , n , ni total number frame video . similarli , deﬁn ( ) amount data transmit video server playback time frame ( short , call time ) . let ( ) total data consum ( ) total data sent at16.1 proxi cach 589 cut-off rate cach proxi fig . 16.7 illustr rate-split cach time t. formal , ( ) =t/summationdisplay i=1d ( ) ( 16.1 ) ( ) =t/summationdisplay i=1a ( ) ( 16.2 ) let buffer size b . time , maximum total amount data receiv without overﬂow buffer time 1 .. tisw ( ) =d ( t−1 ) + b . easi state condit server transmiss rate avoid buffer overﬂow underﬂow ( ) ≤a ( ) ≤w ( ) ( 16.3 ) avoid buffer overﬂow underﬂow throughout video ’ durat , eq . ( 16.3 ) hold t∈1,2 , ... , n. deﬁn sto server transmiss schedul ( plan ) , i.e. , s=a ( 1 ) , ( 2 ) , ... , ( n ) .si call feasibl transmiss schedul , sobey eq . ( 16.3 ) . figur 16.8 illustr bound curv ( ) w ( ) show constant ( averag ) -bitrat transmiss plan feasibl video , simpli adopt averag bitrat would caus underﬂow . frame size ( ) tare known ahead transmiss time , server plan ahead gener optim transmiss schedul feasibl minim peak transmiss rate [ 13 ] . addit , plan minim schedul varianc , optim tri smooth transmiss much possibl . think techniqu stretch rubber band ( 1 ) tod ( n ) bound curv deﬁn ( ) w ( ) . slope total-data- transmit curv transmiss data rate . intuit , minim slope ( peak rate ) , whenev transmiss data rate chang , earli possibl transmiss plan . illustr , consid fig . 16.8 server start transmit data prefetch buffer state ( ) . determin avoid buffer underﬂow at590 16 internet multimedia content distribut data ( byte ) constant ( averag ) rate schedulemaximum buffer data w ( ) optim schedul ( ) ( ) ( b ) ( ) ( c ) ( e ) δ ( frame # ) media data ( ) bbuffer fig . 16.8 optim smooth plan speciﬁc video buffer size . case , feasibl transmit constant ( averag ) data rate point ( c ) , transmiss rate high enough enough data point ( c ) . howev , rate , buffer overﬂow point ( b ) . henc , necessari reduc transmiss rate somewher point ( c ) ( b ) . earliest point ( minim transmiss rate variabl ) point ( c ) . rate reduc lower constant bitrat point ( ) , buffer empti . , rate must reduc ( lower averag bitrat ! ) avoid overﬂow point ( e ) , rate must ﬁnalli increas . consid interv [ p , q ] let b ( ) repres amount data buffer time t. maximum constant data rate use without overﬂow buffer given rmax rmax=min p+1≤t≤qw ( ) − ( ( p ) +b ( p ) ) t−p ( 16.4 ) minimum data rate must use interv avoid underﬂow given rmin rmin= max p+1≤t≤qd ( ) − ( ( p ) +b ( p ) ) t−p ( 16.5 ) natur requir rmax≥rmin , otherwis constant bitrat transmis- sion feasibl interv [ p , q ] . algorithm construct optim transmis- sion plan start interv [ p , q=p+1 ] keep increment q , time recalcul rmax rmin.i frmax increas , rate segment creat rate rmax interv [ p , qmax ] , qmax latest point buffer full ( latest point interv [ p , q ] rmaxi achiev ) . equival , rmini decreas , rate segment creat rate rmin interv [ p , qmin ] , qmini latest point buffer empti . plan transmiss rate readili consid maximum allow network jitter . suppos delay receiv rate . time , ( ) byte data16.1 proxi cach 591 tabl 16.1 comparison proxi cach algorithm sliding- intervalcachingpreﬁx cach segmentcach rate-splitcach cach portion slidinginterv preﬁx segment portion ofhigh rate vcr-like support ye resourcedemand disk i/o high moder moder moder disk space low moder high high sync overhead low moder high high performanceimprov bandwidthreduct high∗moder moder moder start-uplatencyreduct high∗high high∗∗moder ∗there reduct ﬁrst request run ∗∗assum initi segment cach receiv , must exceed w ( ) . suppos network delay worst— δsecmaximum delay . video decod delay δsecond , prefetch buffer freed . henc , ( ) curv need modiﬁ ad ( t−δ ) curv , depict fig . 16.8 . provid protect overﬂow underﬂow plan given maximum delay jitter . either perform smooth ﬁrst select cut-off rate video stage , select cut-off rate perform smooth . empir evalu shown signiﬁc bandwidth reduct achiev reason small cach space [ 12 ] . tabl 16.1 summar cach algorithm introduc . fea- ture metric provid gener guidelin algorithm select , choic speciﬁc stream system also larg depend number practic issu , par-ticular , complex implement . algorithm necessarili exclus , combin may yield better perform . exampl , segment cach combin preﬁx cach segment canreduc start-up latenc vcr-like random playback key-seg . cach space abund , proxi also devot certain space assist workahead smooth variable-bit-r ( vbr ) media [ 9 ] .592 16 internet multimedia content distribut ( ) tradit client/serv solut ( b ) content distribut network ( cdn ) solut fig . 16.9 comparison tradit singl server cdn 16.2 content distribut network ( cdn ) cach gener passiv , sens user fetch object would object cach proxi . word , proxi need time ﬁll cach space immedi beneﬁt ﬁrst user access object . proactiv solut content deliveri network orcont distribut network ( cdn ) [ 14 ] , larg geo-distribut system server deploy data center across internet ; server replic content origin server , push network edg close end user , avoid middle- mile bottleneck much possibl ( see fig . 16.9 ) . origin acceler web access , technolog rapidli evolv beyond facilit static web content deliveri . today , cdn serv larg fraction internet data distribut , includ convent web access ﬁle download , new gener applic like live stream media , on-demand stream media , onlin social network . 16.2.1 request rout redirect cdn provid host content content provid ( i.e. , cdn custom ) deliv content user interest . done mirror content replic server build map system accordingli . user type url his/her browser , domain name url translat map system ip address cdn server store replica content . user redirect cdn server fetch content . process gener transpar user . figur 16.10 provid high-level view request-rout cdn environ- ment . interact ﬂow follows:16.2 content distribut network ( cdn ) 593 fig . 16.10 high-level view request-rout cdn step 1 . user request content content provid specifi url web browser , request direct origin server . step 2 . origin server receiv request , make decis provid basic content ( e.g. , index page websit ) , leav other cdn . step 3 . serv high bandwidth demand frequent ask content ( e.g. , embed object fresh content , navig bar , banner ad , etc . ) , origin server redirect user ’ request cdn provid . step 4 . use map algorithm , cdn provid select replica server . step 5 . select server serv user provid replic copi request object . assign user best possibl cdn server , map system base answer larg amount histor real-tim data collect process regard global network server condit . perform optim , locat fewest hop highest server avail chosen . cost-optim , least-expens locat chosen instead . real world , two goal tend align , replic server close user may advantag perform cost . exampl , use tracerout tool ( tracert ms window ) track path institut hulu , major video stream servic provid . path track result shown below.594 16 internet multimedia content distribut tracert www.hulu.com trace rout a1700.g.akamai.net [ 142.231.1.173 ] maximum 30 hop : 1 1 ms 2 ms 1 ms 199.60.1.254 2 3 ms 2 ms 1 ms 142.58.45.70 3 1 ms < 1 ms < 1 ms 142.58.45.464 1 ms < 1 ms < 1 ms van-hcc1360-x-1-bby-sh1125-x-1.net.sfu.ca [ 142.58.29.10 ] 5 1 ms 1 ms 1 ms oran-sfu-cr1.vantx1.bc.net [ 142.231.1.45 ] 6 2 ms 1 ms 1 ms 207.23.240.707 1 ms 1 ms 1 ms a142-231-1-173.deploy.akamaitechnologies.com [ 142.231.1.173 ] trace complet . seen hulu ’ web server intend reach inde akamai server ( a1700.g.akamai.net ) , locat bcnet—a network close campu , network near hulu ’ headquart california . suggest hulu use cdn servic provid akamai , one world ’ slargest cdn provid , speciﬁc server offer us nearest us , also low cost campu network close associ bcnet . cdn provid get paid content provid , i.e. , custom . turn , pay isp , carrier , network oper host server data center use network resourc . amount server manag cdn provid larg . exampl , akamai maintain network of253,000 server 137 countri worldwid . larg overlay network server effect reduc bandwidth cost content access delay , increas global avail content . creat sizeabl save capit oper expens , cdn custom longer build large-s infras- tructur expens also underutil time exceptdur popular event . massiv amount monitor data also enabl cdn provid effect optim qualiti experi end user advanc data-driven learn tool [ 15–17 ] . addit , cdn offer con- tent provid better protect malici attack , larg distribut server infrastructur effect absorb attack trafﬁc . 16.2.2 repres : akamai stream cdn bandwidth-intens stream media , cdn provid better scalabl deliv- content last-mil server close end user . virtual unlimit resourc larg cdn also reduc pressur content providersto accur predict capac need enabl grace absorb burst user demand . also one key reason recent success cloud edg comput discuss chap . 18.16.2 content distribut network ( cdn ) 595 fig . 16.11 conceptu relat among entri point , reﬂector , edg serversin akamai ’ stream cdn larg comprehens cdn oper , like akamai , servic platform compris multipl deliveri network , tailor speciﬁc type content , e.g. , static web content , dynam news updat , stream media , tonam . high level , deliveri network share similar architectur , underli technolog implement system compon may differ best suit speciﬁc type content . closer look akamai ’ media stream cdn , wide use compani appl , microsoft , bbc video servic [ 18 ] . far akamai deploy approxim 253,000 server 137 countri around world , deliv averag 50 tbp video data daili , record 80 tbp . stream cdn , live stream captur encod , stream sent akamai server , call entri point . avoid singl entri point becom singl point failur , multipl copi stream sentto addit entri point . entri point goe , copi use recoveri . stream ’ packet transport entri point subset ofedg server close end user . note transport system must simultan distribut thousand live stream respect entri point subset edg server interest stream . perform task scalabl fashion , intermediatelay server call reﬂector use . sit entri point edg server , reﬂector receiv one stream entri point send stream one cluster edg server . enabl rapidrepl stream larg number edg cluster stream event becom extrem popular . conceptu relat among entri point ( sourc ) , reﬂector , edg server shown fig . 16.11 . use reﬂector also make content distribut robust , multipl altern path entri point edg server . singl high-qual path avail entri point edg server , system use multipl link-disjoint path util differ reﬂector intermediari ( see fig . 16.11 ) . use data forward along multipl path , edg server recov packet loss individu path , forward end user best combin results.596 16 internet multimedia content distribut akamai ’ server resid 1,600 world ’ network also monitor internet real time , gather inform trafﬁc , congest , troubl spot distribut network . set user agent also continuouslysimul user repeatedli play stream test qualiti . number stream qualiti metric deriv reﬂect end-us ’ percept . includ start-up time , effect bandwidth end user , stream availabil- iti , measur often user play stream without failur , well frequenc durat interrupt playback . akamai use infor- mation optim rout replic data dynam deliv stream , offeringend user high-qual experi . 16.3 broadcast/multicast video distribut proxi cach cdn explor tempor geograph local user ’ interest media object . local also explor broad- cast multicast servic deliv content simultan massiveamount concurr user . work well live media stream . media-on- demand servic , user ’ request asynchron , therefor , one singl broadcast/multicast channel serv request arriv differ time , even audio/video . section , introduc scalabl broadcast/multicast solut media-on-demand asynchron request heterogen user . note subtl differ broadcast multicast describ previou chapter : former destin latter group destin . broadcast possibl air , cabl network , local areanetwork , simpli carri global internet . nevertheless , distinguish context clear . 16.3.1 smart tv set-top box ( stb ) among possibl media-on-demand servic , popular like subscript video : high-spe network , custom specifi themovi tv program want time want view . realiz interact tv ( itv ) smart tv support grow number activ , •tv ( basic , subscript , pay-per-view ) •video-on-demand ( v od ) •inform servic ( news , weather , magazin , sport event , etc . ) •interact entertain ( onlin game , etc . ) •e-commerc ( onlin shop , stock trade , etc . ) •digit librari distanc educ ( e-learn , etc . ) 16.3 broadcast/multicast video distribut 597 process unitaudio/video unitgraph unitperipher control unit tv monitormultimedia network network interfac commun unitstb ( set-top box ) disk i/o devic fig . 16.12 gener architectur set-top box key differ smart tv convent cabl tv ( 1 ) smart tv invit user interact ; henc , need two-way trafﬁc — downstream ( content provid user ) upstream ( user content provid ) , ( 2 ) smart tv rich inform multimedia servic . penetr digit video broadcast ( dvb ) , activ mention emerg today ’ multimedia home platform ( dvb-mhp ) . perform function , network-readi comput set-top box ( stb ) convent tv set requir , gener follow compon , fig . 16.12 show : •network interfac commun unit , includ digit tuner , secur devic , commun channel basic navig web digit librari well servic mainten . •process unit , includ cpu , memori , special-purpos oper system stb . •audio/video unit , includ audio video decod , digit signal processor ( dsp ) , buffer , d/a convert . •graphic unit , support real-tim graphic anim game . •peripher control unit , includ control disk , audio video i/o devic ( e.g. , digit video camera ) , extern memori card reader writer , on.598 16 internet multimedia content distribut δδchannel 1 channel 2 channel 3 channel 61234567812345678 123456781234567 12345678 112345678123456. . . . . . fig . 16.13 stagger broadcast m=8v e sa n k=6 channel 16.3.2 scalabl broadcast/multicast vod consid video-on-demand servic smart tv user . exist statist sug- gest demand usual concentr ( 10–20 ) popular movi tv show ( e.g. , new releas top-ten movies/show season ) . one singl multicast broadcast channel satisfi user request arriv differ time , possibl smartli multicast broadcast video , number client put differ group follow request [ 19 ] . one earlier solut batch , , like sliding-interv cach , serv client arriv close togeth time use singl broadcast . import qualiti measur broadcast v od servic latenc . deﬁn access time upper bound time request video time actual consum . appar , access time batch increas increas amount client request aggreg . given potenti high bandwidth today ’ broadband network low cost local storag , conceiv video fed client rel shorter time playback durat . lead develop seri period broadcast v od solut . stagger broadcast simplic , assum video encod use constant-bit-r ( cbr ) , length l ( measur time unit ) , play sequenti begin end without interrupt . avail high bandwidth wi divid playback rate bto yield bandwidth ratio b . bandwidth server usual divid klogic channel ( k≥1 ) . assum server broadcast mvideo ( m≥1 ) , period broadcast channel start-tim video stagger . refer stagger broadcast . figur 16.13 show exampl stagger broadcast m=8 k=6.16.3 broadcast/multicast video distribut 599 stagger broadcast , divis bandwidth equal among k logic channel , access time video δ=m·l b . note access time actual independ valu k. word , access time reduc linearli increas network bandwidth . pyramid broadcast improv stagger broadcast , pyramid broadcast [ 20 ] divid video segment increas size . , li+1=α·li , lii size ( length ) segment siandα > 1 . segment siwil period broadcast channel . word , instead stagger video kchannel , segment stagger . channel given bandwidth , larger segment broadcast less frequent . sinc avail bandwidth assum signiﬁcantli larger video playback rate b ( i.e. , b > > 1 ) , argu client play smaller segment siand simultan receiv larger segment si+1 . guarante continu ( noninterrupt ) playback , necessari condit playback _time ( si ) ≥access _time ( si+1 ) ( 16.6 ) playback _time ( si ) =li . given bandwidth alloc channel isb/k·b , w eh v e access _time ( si+1 ) =li+1·m b/k=α·li·m b/k , yield li≥α·li·m b/k ( 16.7 ) consequ , α≤b m·k ( 16.8 ) size s1determin access time pyramid broadcast . default , set α=b m·kto yield shortest access time . time drop exponenti increas total bandwidth b , αcan increas linearli . main drawback scheme need larg storag space client side , last two segment typic 75–80 % video size . instead use geometr seri , skyscrap broadcast [ 21 ] use { 1 , 2 , 2 , 5 , 5 , 12 , 12 , 25 , 25 , 52 , 52 , … } seri segment size , allevi demand ona larg buffer . figur 16.14 show exampl skyscrap broadcast seven segment . shown , two client made request time interv ( 1 , 2 ) ( 16 , 17 ) , respect , respect transmiss schedul . given moment , two segment need received.600 16 internet multimedia content distribut channel 1 channel 2 channel 3 channel 4 channel 5 channel 6 channel 712 16 24 28 32 36 40 44 48 20 t048 fig . 16.14 skyscrap broadcast seven segment harmon broadcast harmon broadcast [ 22 ] adopt differ strategi . size segment remain constant , wherea bandwidth channel iisbi=b/i , bi video ’ playback rate . word , channel bandwidth follow decreas pattern b , b/2 , b/3 , ... b/k . total bandwidth alloc deliv video thu b=k/summationdisplay i=1b i=hk·b ( 16.9 ) ki total number segment , hk=/summationtextk i=11 ii harmon number ofk . figur 16.15 show exampl harmon broadcast . request video , client allow download play ﬁrst occurr segment s1 channel 1 . meanwhil , client download segment respect channel . take s2a exampl : consist two halv , s21and s22 . sinc bandwidth b2i b/2 , playback time s1 , one-half s2 ( say s21 ) download ( prefetch ) . take entir playback time s2to download half ( say s22 ) , s2i ﬁnish playback . similarli , time , two- third s3ha alreadi prefetch , remain third s3can download time playback channel 3 , bandwidth b/3 , . advantag harmon broadcast harmon number grow slowli k. exampl , k=30 , hk≈4 . video 120 min long , yield small segments—onli 4 min ( 120 /30 ) . henc , access time harmon broadcast gener shorter pyramid broadcast , the16.3 broadcast/multicast video distribut 601 channel 1 channel 2 channel 3 channel 4s1 s1 s1 s1 s1 s1 s2,1 s2,2 s2,1 s2,2 s2,1 s2,2 s3,1 s3,2 s3,3 s3,1 s3,2 s3,3 s4,1 s4,2 s4,3 s4,4 s4,1 s4,2b b/2 b/3 b/4 . . . . . . . . . . . . fig . 16.15 harmon broadcast demand total bandwidth ( case 4 b ) modest . requir buffer size client side 37 % entir video [ 22 ] , also compar favor origin pyramid broadcast scheme . howev , harmon broadcast scheme alway work . exampl , client start download second instanc s1in fig . 16.15 , time ﬁnish s1 , second half s2—that , s22—i prefetch . client abl simultan download play s21from channel 2 , sinc avail bandwidth half playback rate . obviou ﬁx problem ask client delay playback s1bi one slot , although doubl access time . stream merg broadcast scheme effect limit user interact expected—that , request , client stay sequenti access sched- ule watch video entireti . stream merg adapt dynam user interact , achiev dynam combin multicast session [ 23 ] . still make assumpt client ’ receiv bandwidth higher video playback rate . fact , common assum receiv bandwidth least twice playback rate , client receiv two stream time.602 16 internet multimedia content distribut fig . 16.16 stream merg 0tb join ac join c join b ca bbyte deliv 12345678 server deliv video stream soon receiv request client . meanwhil , client also given access second stream video , initi earlier anoth client . certain point , ﬁrst stream becom unnecessari , content prefetch second stream . time , ﬁrst stream merg ( “ join ” ) second . fig . 16.16 show , “ ﬁrst stream ” b start time t=2 . solid line indic playback rate , dash line indic receiv bandwidth , twice playback rate . client allow prefetch earlier ( “ second ” ) stream , launch t=0 . t=4 , stream b join . techniqu stream merg appli hierarch [ 23 ] . fig . 16.16 show , stream c , start t=4 , would join b t=6 , turn join . origin stream b would obsolet t=4 , sinc join . case , retain t=6 , c join . variat stream merg piggyback , playback rate stream slightli dynam adjust , enabl merg ( piggyback ) stream . 16.3.3 multi-r broadcast/multicast heterogen user internet ’ intrins heterogen pose anoth challeng multimedia broad- cast/multicast . tradit end-to-end adapt scheme , sender adjust transmiss rate accord feedback receiv . broad- cast/multicast environ , solut tend sub-optim singl target rate group heterogen user . thu necessari use multi-r multicast , user multicast ses- sion receiv media data differ rate accord respect bandwidths16.3 broadcast/multicast video distribut 603 process capabl [ 24 ] . viewpoint media sourc , multi-r stream produc via two method . ﬁrst inform replic ; , sender gener replic stream media content differentr . second inform decomposit . commonli use decomposit scheme cumul layer , raw media sequenc compress non-overlap stream , layer . reconstruct qualiti low onelay decod , reﬁn decod layer . media com- pression ’ perspect , replic decomposit implement transcod scalabl audio/video code ( see sect . 10.5.3 ) , respect . remain question efﬁcient transmiss multi-r video stream larg group heterogen user use internet multicast infrastructur . stream replic stream replic view trade-off single-r multicast multipl point-to-point connect . feasibl well justiﬁ typic multi-cast environ bandwidth receiv usual follow cluster distribut . use standard access interfac , exampl , 1.5 mbp adsl , 15 mbp vdsl , 100 mbp ﬁber access , might sharesom bottleneck link henc experi bottleneck bandwidth . result , limit number stream use match cluster achiev reason good fair . due simplic , stream replic advoc mani commerci video stream product . exampl , netﬂix offer four data usag set user : low—0.3 gb/h ; medium—0.7 gb/h ; high—up 3 gb/h hd , and7 gb/h ultra hd . outub , origin offer video one qualiti level , display resolut 320 ×240 pixel use sorenson spark codec ( variant h.263 ) , mono mp3 audio . later , 3gp format mobil phone high-qual mode 480 ×360 pixel ad . time , larg set option avail outub , shown tabl 16.2 , match demand highli heterogen internet mobil user . default video stream encod h.264/mpeg-4 vc format , stereo aac audio , googl vp9 format also support . today , video typic avail multipleresolut 144p 1080p hd viewer ; 1140p hd 4k uhd also avail certain video . layer multicast cumul layer video ( scalabl video ) , receiver-driven layer multicast ( rlm ) [ 25 ] suggest , take advantag dynam group concept ip multicast model . rlm sender transmit video layer separatemulticast group . number layer , well rate , predetermin . adapt perform user ’ end probing-bas scheme . basically,604 16 internet multimedia content distribut tabl 16.2 subset outub media encod option . note 2 ,560×1,440 ( 1440p ) 3,840×2,160 ( 2160p , 4k uhd ) , well 360◦video also recent ad itag valu default containervideoencod videoproﬁl videobitr ( mbit/ ) videoresolut audioencod audiobitr ( kbit/ ) 13 3gp n/a mpeg-4visu n/a 0.5 aac n/a 17 3gp 144p mpeg-4visu simpl 0.05 aac 24 18 mp4 270p/360p h.264 baselin 0.5 aac 96 22 mp4 720p h.264 high 2-2.9 aac 192 36 3gp 240p mpeg-4visu simpl 0.17 aac 38 37 mp4 1080p h.264 high 3-5.9 aac 192 38 mp4 3072p h.264 high 3.5-5 aac 192 43 webm 360p vp9 n/a 0.5 opu 128 44 webm 480p vp9 n/a 1 opu 128 45 webm 720p vp9 n/a 2 opu 192 46 webm 1080p vp9 n/a n/a opu 192 82 mp4 360p h.264 3d 0.5 aac 96 83 mp4 240p h.264 3d 0.5 aac 96 84 mp4 720p h.264 3d 2-2.9 aac 152 fig . 16.17 illustr receiver-driven layer multicast [ 25 ] user period join higher layer ’ group explor avail bandwidth . packet loss exce toler threshold join-experi , i.e. , congest occur , user leav group ; otherwis stay new subscriptionlevel . figur 16.17 show exampl layer joining/leav behavior receiv . start layer 1 ( base layer ) , gradual join enhanc layer 2 , 3 , 4 congest . join layer 4 , howev , congest occur leav highest layer . wait , see nocongest , re-join layer 4 . trigger congest , receiv leav , observ network condit plan next join- experi . note wait time next join-experi longer thanthat previou one ; exponenti backoff ensur receiv aggress join new layer caus frequent congestion.16.4 application-lay multicast peer-to-p stream 605 16.4 application-lay multicast peer-to-p stream today scope reach ip multicast remain limit , mani isp simpli block disabl ip multicast due variou secur econom concern [ 26 ] . idea use applic layer multicast data forward came long time ago [ 27 ] . though application-lay multicast ip multicast requir intermedi node network topolog support replic data packet , implement applic layer much less demand end host , compar switch router internet core [ 28 ] . also motiv design gener peer-to-p overlay network ( i.e. , internet ) content share , includ video stream . 16.4.1 application-lay multicast tree figur 16.18 depict exampl application-lay multicast network over- lay underli internet router . organ end host overlay dissemin video stream , seri import criteria must consid overlay construct mainten [ 29 ] . •overlay efﬁcienc . overlay construct must efﬁcient net- work applic perspect . multicast video , high bandwidth low latenc simultan requir . howev , applic real- time interact , start-up delay second toler . •scalabl load balanc . sinc multicast session scale ten thousand receiv , overlay must scale support larg size , overhead associ must reason even larg scale . •self-organ . overlay construct take place distribut fash- ion must robust dynam chang group membership . , overlay must adapt long-term variat internet path characterist ( bandwidth latenc ) , resili inaccuraci . system must self-improv overlay increment evolv better structur inform becom avail . fig . 16.18 illustr application-level overlay network 606 16 internet multimedia content distribut •node constraint . sinc system reli user contribut bandwidth , import ensur total bandwidth user requir contribut exceed inher access bandwidth capac . also , larg fraction usersmay stay behind na ts ﬁrewalls—th connect restrict pose user may sever limit overlay capac . number propos emerg application-lay multicast ( also known asoverlay multicast , end-system multicast , etc . ) [ 29 ] . differ wide rang dimens , earlier propos larg push-bas , end-nod organ structur ( typic tree ) deliv data , datapacket dissemin use structur . node structur well-deﬁn relationship , exampl , “ parent-child ” relationship tree . sinc data packet follow structur , becom critic ensur structur isoptim offer good perform receiv . furthermor , structur must maintain , node join leav group will—in particular , node crash otherwis stop perform adequ , offspr treewil stop receiv packet , tree must repair . final , construct tree-bas structur , loop avoid import issu must address . 16.4.2 repres : end-system multicast ( esm ) esm system [ 30 ] employ tree-bas overlay protocol distribut , self-organ , performance-awar . tree , root sourc , optim primarili bandwidth , secondarili delay . group manag esm node maintain inform small random subset member , aswel inform path sourc . new node join multicast session contact sourc retriev random list member current group . select one member parent.each node aalso period pick one member ( say b ) random , send ba subset group member aknow , along last timestamp heard member . breceiv membership messag , updat list known member . final , member delet state refresh period . membership dynam deal grace member leav fairli straight-forward : member continuesforward data short period , children look new parent use the16.4 application-lay multicast peer-to-p stream 607 parent select method describ . serv minim disrupt overlay . member also send period control packet children indic exist . performance-awar adapt node maintain application-level throughput receiv recent timewindow . throughput signiﬁcantli sourc rate , select newpar . one key paramet detect time , indic long node must stay poor perform parent switch anoth parent . esm system employ default detect time 5 s. choic valu inﬂuenc fact congest control protocol run data path ( tcp tfrc ) , switch new parent thu requir goingthrough slow-start phase , may take 1–2 get full sourc rate . protocol adapt tune detect time node may capabl receiv full sourc rate , may good avail parent choicesin system , node may experi intermitt network congest link close . parent select node ( say ) join multicast overlay , need make parent chang , probe random subset node know . probe bias toward member probe low delay . node bthat respond provid inform : ( 1 ) throughput current receiv , delay sourc ; ( 2 ) whether degree-satur ; ( 3 ) whether descend . probe also enabl ato determin round-trip time ( rtt ) b.await respons timeout period 1 , larg enough valu rtt , maxim number respons receiv member . respons arec , elimin descend member satur . node bthat elimin , aevalu perform ( throughput delay ) expect receiv bwere chosen parent . exampl , expect applic throughput minimum throughput bi current see avail bandwidth path band aif estim avail . histori past perform maintained—if aha previous chosen ba parent , estim bandwidth path band . bandwidth node known , apick parent base delay . identiﬁ node bthat could best improv perform , switch parent beither estim applic throughput high enough ato receiv higher qualiti stream , bmaintain bandwidth level ’ current parent , improv delay . latter heurist help increas tree efﬁcienc byclust nearbi nodes.608 16 internet multimedia content distribut fig . 16.19 multi-tre application-lay multicast two tree . note node tree 1 tree 2 physic node , node bo rc multi-tre structur tree-bas design perhap natur approach . one concern failur node , particularli close root may disrupt data deliveri larg number user , potenti result poor transient perform . furthermor , major node leav structur , out-go bandwidth util . resili structur , particular , multi-tre [ 31,32 ] , thu introduc . multi-tre , sourc encod stream sub-stream distribut sub-stream along particular overlay tree . qualiti experienc receiv depend number sub-stream receiv . two key advantag multi-tre solut . first , overal resili system improv , node complet disrupt failur ancestor singl tree . second , potenti bandwidth node util , long node leaf least one tree . figur 16.19 illustr multicast content deliv multi-tre approach use two tree . sourc distribut stream rate s/2 tree , si sourc rate . c receiv s/2 tree , potenti differ parent reconstruct origin content . node b contribut bandwidth s/2 , alloc bandwidth tree2 tree1 , respect . singl tree approach , hard util contribut node . seen akamai ’ stream cdn examin earlier also use multi-tre solut ( reﬂector ) , despit node dedic replic server . 16.4.3 peer-to-p mesh overlay peer-to-p ( p2p ) extend application-lay multicast paradigm take advantag abil particip end host , peer , multicast group to16.4 application-lay multicast peer-to-p stream 609 contribut uplink bandwidth . ﬁrst brought spotlight advent napster ( 1998 ) gnutella ( 2001 ) . later , design philosophi highli popular bittorr softwar converg academ solut application-lay multicast , new gener data-driven peer-to-p stream protocol random mesh topolog emerg [ 29 ] . data-driven mesh overlay design sharpli contrast tree-bas application- layer multicast construct maintain explicit structur deliv data . underli argument , rather constantli repair structur highli dynam peer-to-p environ , use avail ofdata guid data ﬂow . comparison , tree-bas application-lay multicast adopt rigid design [ 33,34 ] , structur tree need activ manag peer join leav session . naiv approach distribut data without explicitli maintain structur use gossip algorithm [ 35 ] . typic gossip algorithm , node send newli gener messag set randomli select node ; node similarli next round , node messag spread . random choic gossip target achiev resili random failur enablesdecentr oper . howev , gossip use directli video content distribut random push may caus signiﬁc redund high- bandwidth video . without explicit structur support , start-up , transmissiondelay signiﬁc , . handl , mesh overlay adopt pull-bas techniqu data dissemin . explicitli , node maintain set partner , period exchang dataavail inform partner . node may retriev unavail data one partner , suppli avail data partner . redund avoid , node pull data alreadi possess . sinc anydata segment may avail multipl partner , overlay robust failures— departur node simpli mean partner use partner receiv data segment . final , random partnership impli potenti bandwidth avail peer fulli util . result , pull-bas protocol much simpler design amen real-world implement . itha potenti scale group size , greater demand also gener resourc . worth note cdn peer-to-p work togeth well . exampl , addit use akamai ’ server , akamai deliv content end-us ’ cach akamai netsess interfac , download manag use reduc download time increas qualiti . common issu exist peer-to-p ﬁle share video stream ; exampl , price uploading/download copyright protec- tion . key differ time constraint stream protocol mustaccommod : video segment arriv time , use come time play back . thu , import compon data- driven overlay schedul algorithm , strive schedul segment thatmust download variou partner meet playback deadlines.610 16 internet multimedia content distribut fig . 16.20 gener system diagram coolstream node network interfac partner partner partnerbufferplay schedulerpartnership managerbuff map ( bm ) membership manag 16.4.4 repres : coolstream coolstream [ 36 ] ﬁrst large-scal data-driven peer-to-p system deploy real world video stream . success compani pplive , ppstream , uuse also adopt mesh-bas pull techniqu deliv live on-demand media content million user . figur 16.20 depict system diagram coolstream node , consist three key modul : ( 1 ) membership manag , help node maintain partial view overlay node ; ( 2 ) partnership manag , establish maintain partnership known node ; ( 3 ) schedul , schedul transmiss video data . segment video stream , coolstream node either receiv supplier , , depend dynam segment ’ avail inform , period exchang node partner . except video sourc , , origin node , alway supplier . could dedic video server , simpli overlay node live video program distribut . membership partner manag coolstream node uniqu identiﬁ , ip address , maintain membership cach ( mcach ) contain partial list identiﬁ activ node overlay . basic node join algorithm , newli join node ﬁrst contact origin node , randomli select deputi node mcach redirect new node deputi . new node obtain list partner candid deputi , contact candid establish partner overlay . process gener viabl origin node persist lifetim stream identiﬁer/address univers known . redirect enables16.4 application-lay multicast peer-to-p stream 611 fig . 16.21 illustr partnership coolstream origin node . partnership bidirect , except node , serv supplier . exampl , node f partner node b , c , e , node e partner node b , f , h uniform partner select newli join node , greatli minim origin node ’ load . key practic issu creat updat mcach . accommo- date overlay dynam , node period gener membership messag announc exist ; messag 4-tupl < seq_num , id , num _partner , time _to_liv > , seq_num sequenc number messag , idi node ’ identiﬁ , num_partn current total number partner , time_to_l record remain valid time messag . upon receiv messag new seq_num , node updat mcach entri node id , creat entri exist . entri 5-tupl < seq_num , id , num _partner , time _to_liv , last _updat _time > , ﬁrst four compon copi receiv membership messag , ﬁfth local time last updat entri . follow two event also trigger updat mcach entri : ( 1 ) mem- bership messag forward node gossip ; ( 2 ) node serv deputi entri includ partner candid list . either case , time_to_l decreas current _local _time−last _updat _time .i f new valu less equal zero , entri remov ; otherwis , num_partn increas one deputi case . buffer map represent exchang exampl partnership overlay shown fig . 16.21 . said , neither partnership data transmiss direct ﬁxed . explicitli , video stream divid segment uniform length , avail segment buffer node repres buffer map ( bm ) . node continu exchang bm partner , schedul segment fetch partner accordingli . time continu segment deliveri crucial media stream , ﬁle download . bittorr , download phase peer synchron , new segment anywher ﬁle accept . coolstream , playback progress peer roughli synchron , segment downloaded612 16 internet multimedia content distribut fig . 16.22 buffer snapshot bittorr aand coolstream b , shade segment avail buffer playback time useless . slide window thu repres activ buffer portion , shown fig . 16.22 . suggest experiment result , coolstream adopt slide window 120 segment , 1 video . bm thu consist bitstr 120 bit , indic avail correspond segment . sequenc number theﬁrst segment slide window record anoth two byte , roll back extra long video program ( > 24 h ) . schedul algorithm given bm node partner , schedul gener fetch expect segment partner . homogen static network , simpl round-robin schedul may work well , dynam heterogen network , intellig schedul necessari . speciﬁc , schedul algo- rithm strike meet two constraint : playback deadlin segment , theheterogen stream bandwidth partner . ﬁrst constraint satisﬁ , number segment miss deadlin kept mini- mum , maintain continu playback . problem variat theparallel machin schedul , known np-hard . thu easi ﬁnd optim solut , particularli consid algorithm must quickli adapt highli dynam network condit . coolstream resort simpl heuristicof fast respons time . heurist ﬁrst calcul number potenti supplier segment ( i.e. , partner contain contain segment buffer ) . sinc aseg less potenti supplier difﬁcult meet deadlin constraint , algorithm determin supplier segment start only16.5 web-bas media stream 613 one potenti supplier , two , forth . among multipl potenti supplier , one highest bandwidth enough avail time select . exampl , consid node f fig . 16.21 , partner b , c , e. assum buffer map contain four segment 1000 , 0010 , 0011 , 0101 node f , b , c , e , respect . , node f segment 1 avail local buffer , 2 , 3 , 4 miss . among three missingseg , segment 2 one supplier ( node e ) segment 3 4 two supplier ( b , c 3 , c , e 4 ) . , node f schedul fetch segment 2 ﬁrst , node e. fetch segment 3 4 . segment 3 , two potenti supplier b c , one higher bandwidth schedul . strategi appli segment 4 . given schedul , segment fetch supplier mark bm-like bit sequenc , sent supplier , segment deliv order tcp-friendli rate control ( tfrc ) protocol . therehav mani enhanc basic schedul algorithm coolstream , exist studi also suggest use advanc network code possibl enabl optim schedul [ 37,38 ] . failur recoveri partnership reﬁnement coolstream node depart grace accident due unexpect failur . either case , departur easili detect idl time tfrcor bm exchang , affect node quickli react re-schedul use bm inform remain partner . besid built-in recoveri mech- anism , coolstream also let node period establish new partnershipswith node randomli select local membership list . oper serv two purpos : first , help node maintain stabl number partner presenc node departur ; second , help node explor partner better qualiti , e.g. , constantli higher upload bandwidth avail segment . 16.5 web-bas media stream although peer-to-p proven highli scalabl video deliveri , arecrit issu peer-to-p system deploy content provid : ( 1 ) ease-of- use . peer-to-p stream , user usual requir instal custom client softwar plugin abl cach video content watch exchang content others—thi user-friendli given today ’ user sofamiliar use web browser consum internet content directli . ( 2 ) copy- right . peer-to-p stream system , user exchang content autonomously—it difﬁcult content provid control copyrightin video streaming.614 16 internet multimedia content distribut peer-to-p also reli peer ’ contribut system . real world , mani free rider want contribut resourc . even peer will contribut , upload bandwidth mani peer often constrain given asymmetr access network adsl . moreov , data exchang peer need travers na direct open port , known difﬁcult discuss previou chapter . expos secur threat , often block ﬁrewal . underli protocol web transact , hyper text transfer protocol ( http ) gener ﬁrewall-friendli almost ﬁrewal conﬁgur support connect web transact . http server resourc also wide avail commod , therefor , support http-base stream mas- sive audienc cost-effect use exist web infrastructur . http initi design stream applic . provid signal mechan interact stream control , underli transport protocol , tcp , design continu media , either . key support stream http break overal media stream sequenc small http-base ﬁle download ; download includ one short chunk overal potenti unbound stream . use seri http ’ get command , user progress download small ﬁle play alreadi download . damag delay block limit impact , thu ensur continu playback . process illustr fig . 16.23 . http maintain session state server , either . therefor , provision- ing larg number client impos signiﬁc cost server resourc . quit differ rtp/rtcp/rtsp-base stream maintain per-sess state . yet client keep record playback progress , progress download also allow client seek speciﬁc posit media stream download correspond ﬁle , precis , perform- ing http ’ byte rang request ﬁle , realiz similar function offer rtsp . http-base stream implement commerci product . today , repres onlin video provid , e.g. , netﬂix outub use http stream video user . besid superior mention earlier , current play video sent server video buffer fig . 16.23 illustr http streaming16.5 web-bas media stream 615 http stream beneﬁt rapidli expand capac drop price today ’ cdn . speciﬁc , emerg ad-bas busi model boost import user ’ qualiti experi ( qoe ) , asther crucial interplay qoe user engag . consequ , content provid , object gener revenu , care visual qualiti stabil stream servic maxim userengag . sinc today ’ cdn mainli design optim serv web content [ 39 ] , http stream capabl use exist infrastructur deliv high-qual media low cost , better stabil secur , simplerinterfac [ 40 ] . recent , support real-tim interact multimedia applica- tion , webrtc , built within web system reli http , develop well . meantim , hypertext markup languag ( html ) also evolv better support multimedia content distribut . new version , html5 , ad thenew < video > , < audio > < canva > element , well support scalabl vector graphic ( svg ) content , nativ includ handl multimedia graphic content . 16.5.1 dynam adapt stream http ( dash ) http-base stream , also name http adapt stream ( ) http live stream ( hl ) , use differ manifest segment format dif- ferent implement ; henc , receiv content server , devic must support correspond proprietari client protocol . demand standard- izat differ devic inter-oper . heterogen network anddevic also requir media stream dynam adapt . end , dynam adapt stream http ( dash ) standard develop mpeg group . work dash start 2010 ; becam intern stan- dard novemb 2011 , ofﬁcial publish iso/iec 23009-1:2012 april 2012 revis 2019 iso/iec 23009-1:2019 [ 41 ] . dash deﬁn set implement protocol across server , client , descript ﬁle . dash , video stream encod divid multipl segment , includ initi segment contain requir informationfor initi media decod , media segment contain follow data : ( 1 ) media data , ( 2 ) stream access point , indic client decod play . subseg also use user download themus http ’ partial get command , includ rang header ﬁeld , request part entiti transfer . amedia present descript ( mpd ) describ relat segment form video present , facilit segment fetch con- tinuou playback . sampl mpd ﬁle shown below.616 16 internet multimedia content distribut < mpd > < baseurl > http : //www.baseurl_1.com < /baseurl > //destin url ( ) < period > < adaptationset > //video set < represent bandwidth= “ 4190760 '' height= “ 1080 '' width= “ 1920 '' > < segmentinfo > ... < /segmentinfo > //quality_1 < /represent > < represent bandwidth= “ 2073921 '' height= “ 720 '' width= “ 1280 '' > < segmentinfo > ... < /segmentinfo > //quality_2 < /represent > < /adaptationset > < adaptationset > //audio set < represent bandwidth= “ 127234 '' samplerate= “ 44100 '' > < segmentinfo > ... < /segmentinfo > //quality_1 < /represent > < /adaptationset > < /period > < /mpd > baseurl shown begin mpd ﬁle . client analyz part acquir destin url pull stream data theserv . simpl mpd ﬁle , one period , consist video audio adapt set . two video sequenc differ resolut bitrat , allow client choos base local network conditions.ther one soundtrack ( 44.1 khz sampl rate ) video stream . complex scenario , audio set may sever soundtrack differ languag bitrat , . figur 16.24 illustr dash-bas stream two video level one audio level . client use adapt algorithm choos appropri audio video level . playback , adapt algorithm monitor local network statu , achiev best possibl qo , e.g. , request lower qualiti segment network bandwidth low , higher qualiti enoughbandwidth avail . fig . 16.24 scenario dash-bas streaming16.5 web-bas media stream 617 dash avail appl ’ safari , googl ’ chrome , microsoft ’ edg , use major stream servic outub netﬂix . compat client becom avail , promis wide adopt widerang devic platform . dash also codec agnost . allow seamless container mpeg-4 well improv hevc video codec ( i.e. , h.265 ) googl vp9 . open standard , exact adapt algorithm dash left speciﬁc implement , two key issu address [ 42 ] : •rate adapt compon . dash deﬁn segment ﬁle descript , leav rate adapt either client server imple- ment . client may util multi-path multi-serv approach receiv video segment [ 43 ] . receiver-driven approach , custom appli- cation layer , highli ﬂexibl scalabl . hand , server could also abl adapt chang bitrat client , base percept client download speed server load . •rate adapt strategi . rate adapt strategi determin differ ver- sion segment receiv client , achiev object stream stabil , fair , high qualiti [ 44 ] . rate adapt strategi con- vention base predeﬁn rule paramet observ server client side . rule determinist tailor speciﬁc network conﬁgur . recent , data-driven solut leverag advanc pre-dict learn algorithm , togeth big data server , client , network , develop [ 45–48 ] . without use predeﬁn rule , self-learn client dynam adapt behavior interact theenviron , optim qoe vast rang highli dynam network set . 16.5.2 common media applic format ( cmaf ) underli transport layer protocol http stream tcp . request requir open separ connect use tcp transfer request thenclos complet request . , default http stream setup incur latenc 5 , challeng mani live broadcast interact applic . reduc latenc , cmaf ( common media applic format ) [ 49 ] opti- mize media data packag deliv process http stream protocol , achiev lower latenc , theoret low 1 , though practicallyaround 2–3 s. cmaf protocol , standard contain deﬁn segment format , well codec media proﬁl , use deliv thestream . deliveri present abstract refer applic model accommod broad spectrum practic implement , includ http live stream ( hl ) mpeg dash ( dynam adapt stream http ) .618 16 internet multimedia content distribut fig . 16.25 sampl cmaf header cmaf , track contain encod media sampl , includ audio , video , subtitl , store contain deriv iso base media file format ( iso_bmff ) . sequenc one consecut fragment track form segment , divid chunk . transmit cmaf segment , post request contain cmaf header ﬁrst sent media server . header includ inform initi track , shown fig . 16.25 . chunk sent http 1.1 chunk transfer encod , soon encod packag done . , segment progress delivered16.5 web-bas media stream 619 fig . 16.26 cmaf-bas stream exampl chunk readi , much faster load process entir segment . retriev segment , player use manifest playlist associ stream establish connect media make get request . figur 16.26 show concret exampl cmaf-bas stream . encod wrap singl .mp4 ﬁle .mpd & .m3u8 ﬁle insid one cmaf contain . , data push via http 1.1 chunk transfer encod via cdn end user ’ video player . system longer wait request , progress deliveri , chunk push player soon avail . besid compat http stream , contain design also elimin need redund storag video ﬁle use one ﬁle format could use differ devic . exampl , differ manifest ( .mpd & .m3u8 ) use .mp4 ﬁle , make platform independ . synchron video stream differ platform , server timestamp incorpor , , togeth data buffer , enabl video player play frame exact time . 16.5.3 web real-tim commun ( webrtc ) recent highli interact applic , person livechat/l cast ar/vr stream , even tighter demand latenc , prefer sub-second rang . need new stream media protocol design speciﬁc meet real-tim demand yet still compat web . webrtc [ 50 ] open sourc project speciﬁc initi googl 2011 , target high-qual real-tim commun applic within browser desktop mobil platform , well lightweight internet-of-th devic limit capabl . sinc support mani compani , includ microsoft , mozilla , opera , appl , etc. , offer user abil commun within web mobil com- pute platform without need complic plugin addit hardwar . today , webrtc also standard world wide web consortium ( w3c ) internet engin task forc ( ietf ) .620 16 internet multimedia content distribut anoth relat wide use protocol purpos real-tim messag protocol ( rtmp ) . , howev , proprietari , reli adob ’ flash media server support , less popular modern browser . webrtc work directli web browser without requir addit plugin download nativ app . yet unlik cmaf , use http send media data . instead , establish connect use udp deliv encrypt media data rtp . , webrtc incur latenc 500 millisecond less . also , sinc process creat direct connect two web browser , follow peer-to- peer commun structur . multipl browser use webrtc commun one anoth , allow video conferenc individu small group . sinc udp pack lossi out-of-ord , webrtc use nack retrans- mit critic packet mitig impact loss conceal . reader refer chap . 17for wide rang conceal techniqu . webrtc expos javascript api develop write real-tim multimedia applic divers interact . key compon includ •getusermedia : access audio video media data storag devic ; •rtcpeerconnect : perform signal process , codec handl , peer-to- peer commun , secur , bandwidth manag ; •rtcdatachannel : enabl bidirect commun data peer low latenc . figur 16.27 show exampl simpl livechat applic build webrtc . speciﬁc , start creat connect rtcpeerconnect , exchang necessari inform use session descript protocol ( sdp ) dtl ( datagram transport layer secur ) . fig . 16.27 sampl livechat applic use webrtc16.6 exercis 621 signal discov two user connect . rtcdatachannel use data commun rtp . set connect , sender use getusermedia ( ) gener video stream cam- era , send stream via datachannel.send ( ) . receiv use datachannel.onmessag handler render incom messag . v oic video sent separ channel bitrat adapt dependingon channel statist . also function , getstat , gather statist webrtc session media adapt . summari , latenc critic , e.g. , 5 even 10 accept , dash prefer term scalabl , qualiti , compat . also work well exist cach infrastructur larg focus web data . latenc reduc use cmaf , around 2–3 s. latenc critic applic involv mani real-tim peer-to-p inter- action , webrtc good choic , latenc around 0.5–1.0 [ 51 ] . instanc , one popular video conferenc tool , zoom , start usingwe- brtc ’ datachannel recent . 16.6 exercis 1 . consid preﬁx cach total proxi cach size sand nvideo user access probabl r1 , r2 , ... , rn , respect . assum util cach video given function u ( li ) lii length cach preﬁx video . develop algorithm optim total util proxi . ou may start simpl case u ( li ) =li·ri . 2 . optim work-ahead smooth techniqu , would algorithmi- calli determin point chang plan transmiss rate ? transmiss rate ? 3 . consid optim work-ahead smooth techniqu . suggest instead use everi video frame , frame begin statisti- calli differ compress video segment consid . would youmodifi algorithm ( video inform ) support ? 4 . discuss similar differ proxi cach cdn . beneﬁci util system ? 5 . discuss similar differ cdn web content distribu- tion multimedia stream . role reﬂector akamai ’ stream cdn ? 6 . stagger broadcast , divis bandwidth equal among klogic channel ( k≥1 ) , show access time independ valu k. 7 . given avail bandwidth user , b 1 , b2 , … , bn , multicast session ofnus , number replic video stream , , develop solut alloc bitrat stream , bi , i=1,2 , ... , , averag inter-receiv fair maxim . , inter-receiv fair user j622 16 internet multimedia content distribut deﬁn maxbk bjwhere bk≤bj , k=1,2 , ... , , i.e. , video stream highest rate user jcan receiv . 8 . multicast scenario , mani receiv send feedback sender caus feedback implos would block sender . suggest two method avoid implos yet provid reason use feedback inform sender . 9 . achiev tcp-friend rate control ( tfrc ) , round-trip time ( rtt ) sender receiv must estim ( see sect . 15.3.2 ) . unicast tfrc , sender gener estim rtt henc tcp-friendli throughput , accordingli control send rate . multicast scenario , take care ? explain answer . 10 . question , explor scalabl peer-to-p , compar client/serv . assum one server nuser . upload band- width server sbp , download bandwidth user iisd ibp , i=1,2 , ... , n. ﬁle size mbit distribut server user . ( ) consid client/serv architectur . user client directli serv server . calcul time distribut ﬁle allth user . ( b ) consid peer-to-p architectur . user peer , either download directli server peer . assum theupload bandwidth user ifor serv peer u ibp , i=1,2 , ... , n. calcul time distribut ﬁle user . ( c ) use result , explain condit peer-to-p scale better ( user ) client/serv . condit natur satisﬁ internet ? 11 . discuss similar differ peer-to-p ﬁle share peer-to-p live stream . differ affect implement peer-to-p live stream ? affect calcul previou question . 12 . consid tree-bas mesh-bas overlay peer-to-p stream . ( ) discuss pro con . ( b ) pull oper use mesh-bas overlay ? ( c ) propos solut ( introduc book ) combin toward hybrid overlay . ou may target differ applic scenario , e.g. , minim delay multi-channel tv broadcast user may frequent chang channel . 13 . consid skype , popular v oice-over-ip ( v oip ) applic use use peer-to-p commun . peer skype organ hierarch overlay network , peer classiﬁ super peer orordinari peer ,16.6 exercis 623 fig . 16.28 illustr skype peer-to-p network illustr fig . 16.28 . two skype user ( caller calle ) need set call , ordinari peer super peer serv relay . ( ) skype gener use udp audio stream tcp control messag . kind control messag necessari skype peer , tcp use ? ( b ) explain beneﬁt distinguish super peer ordinari peer . ( c ) besid one-to-on call , skype also support multi-parti confer . mani copi audio stream would deliv nuser confer , user need send copi stream other ? ( ) note number high . skype reduc ask user send stream confer initi , combin stream intoon stream forward user . mani stream forward whole confer ? discuss pro con solut , suggest improv . ( e ) recent , skype migrat servic microsoft azur cloud plat- form ( see chap . 18 ) . discuss pro con migrat . 14 . one import reason http tradit use media stream underli tcp highli ﬂuctuat transmiss rate ( saw-tooth behavior ) , sever congest channel error , may persist block data pipe . explain dash address problem . also , discussoth support stream miss basic http address dash.624 16 internet multimedia content distribut 15 . identifi two popular internet multimedia applic use dash webrtc , respect . discuss ﬁnd chosen particular applic . refer 1 . b. li , z. wang , j. liu , w. zhu , two decad internet video stream : retrospect view . acm tran . multim . comput . commun . appl . 9 ( 1s ) , 33 , 1–33 , 20 ( 2013 ) 2 . d. wu , .t . hou , w. zhu , .-q . zhang , j.m . peha , stream video internet : approach direct . ieee tran . circuit syst . video technol . 11 ( 3 ) , 282–300 ( 2001 ) 3 . d. wu , . thoma hou , .-q . zhang , transport real-tim video internet : challeng approach . proc . ieee 88 ( 12 ) , 1855–1877 ( 2000 ) 4 . s. chen , b. shen , s. wee , x. zhang , design high qualiti stream proxi system , info- com 2004 . twenty-third annual joint confer ieee comput commun societi , vol . 3 , pp . 1512–1521 ( 2004 ) 5 . x. jianliang , j. liu , b. li , xiaohua jia , cach prefetch web content distribut . comput . sci . eng . 6 ( 4 ) , 54–59 ( 2004 ) . juli 6 . j. liu , x. jianliang , proxi cach media stream internet . ieee commun . mag . 42 ( 8 ) , 88–94 ( 2004 ) 7 . r. tewari , h.m. vin , a. dani , d. sitarami , resource-bas cach web server . proceed- ing spie/acm confer multimedia comput network , pp . 191–204 ( 1998 ) 8 . s. chen , b. shen , . yan , s. basu , x. zhang , srb : share run buffer proxi exploit memori local multipl stream media session . proceed 24th intern con- ferenc distribut comput system , 2004 , pp . 787–794 ( 2004 ) 9 . s. sen , j. rexford , d. towsley , proxi preﬁx cach multimedia stream . infocom ’ 99 . eighteenth annual joint confer ieee comput commun societi , vol . 3 , pp . 1310–1319 ( 1999 ) 10 . h. fabmi , m. latif , s. sedigh-ali , a. ghafoor , p . liu , l.h . hsu , proxi server scalabl interact video support . comput 34 ( 9 ) , 54–60 ( 2001 ) 11 . k.-l. wu , p .s u , j.l wolf , segment-bas proxi cach multimedia stream , proceed- ing 10th intern confer world wide web , pp . 36–44 . ( acm , 2001 ) 12 . z.-l. zhang , . wang , d.h.c . du , d. shu , video stage : proxy-server-bas approach end-to-end video deliveri wide-area network . ieee/acm tran . netw . 8 ( 4 ) , 429–442 ( 2000 ) 13 . j.d . salehi , z.l . zhang , j.f . kuros , d. towsley , support store video : reduc rate vari- abil end-to-end resourc requir optim smooth . acm sigmetrics24 ( 1 ) , 222–231 ( 1996 ) . may 14 . v .k . adhikari , . guo , f. hao , v . hilt , z.-l. zhang , m. v arvello , m. steiner , measur studi netﬂix , hulu , tale three cdn . ieee/acm tran . netw . 23 ( 6 ) , 1984–1997 ( 2015 ) . decemb 15 . a. ganjam , j. jiang , x. liu , v . sekar , f. siddiqi , i. stoica , j. zhan , h. zhang , c3 : internet-scal control plane video qualiti optim , proceed 12th usenix confer network system design implement , nsdi ’ 15 , pp . 131—144 , ( usa , usenix associ , 2015 ) 16 . m.k . mukerje , d. naylor , j. jiang , d. han , s. seshan , h. zhang , practic , real-tim central control cdn-base live video deliveri , proceed 2015 acm confer special interest group data commun , sigcomm ’ 15 , pp . 311—324 . ( new ork , ny , usa , 2015 ) 17 . j. jiang , s. sun , v . sekar , h. zhang , pythea : enabl data-driven qualiti experi opti- mizat use group-bas exploration-exploit . proceed 14th usenix con-refer 625 ferenc network system design implement , nsdi ’ 17 , pp . 393—406 . ( usa , usenix association,2017 ) 18 . e. nygren , r.k. sitaraman , j . sun , akamai network : platform high-perform internet applic . sigop oper . syst . rev . 44 , 2–19 ( 2010 ) . aug 19 . a. hu , video-on-demand broadcast protocol : compreshens studi , proceed ieee infocom ( 2001 ) 20 . s. viswanathan , t. imielinski , pyramid broadcast video demand servic , ieee confer multimedia comput network , pp . 66–77 ( 1995 ) 21 . k.a . hua , s. sheu , skyscrap broadcast : new broadcast scheme metropolitan video-on-demand system , proceed acm sigcomm , pp . 89–100 ( 1997 ) 22 . l. juhn , l. tseng , harmon broadcast video-on-demand servic . ieee tran . broadcast . 43 ( 3 ) , 268–271 ( 1997 ) 23 . d. eager , m. v ernon , j. zahorjan , minim bandwidth requir on-demand data deliveri . ieee tran . knowl . data eng . 13 ( 5 ) , 742–757 ( 2001 ) 24 . b. li , j. liu , multir video multicast internet : overview . netw . ieee 17 ( 1 ) , 24–29 ( 2003 ) 25 . s. mccann , v . jacobson , m. v etterli , receiver-driven layer multicast , confer pro- ceed applic , technolog , architectur , protocol comput com-mun , sigcomm ’ 96 , pp . 117–130 ( 1996 ) 26 . c. diot , b.n . levin , b. lyle , h. kassem , d. balensiefen , deploy issu ip multicast servic architectur . ieee netw . 14 ( 1 ) , 78–88 ( 2000 ) 27 . s. sheu , k.a hua , w. tavanapong , chain : gener batch techniqu video- on-demand system . proceed ieee intern confer multimedia comput system ( 1997 ) 28 . m. hosseini , d.t . ahm , s. shirmohammadi , n.d. georgana , survey application-lay multicast protocol . ieee commun . surv . tutor . 9 ( 3 ) , 58–74 ( 2007 ) 29 . j. liu , s.g. rao , b. li , h. zhang , opportun challeng peer-to-p internet video broadcast . proc . ieee 96 ( 1 ) , 11–24 ( 2008 ) 30 . .-h. chu , s.g. rao , h. zhang , case end system multicast . ieee j. sel . a. commun . 20 ( 8 ) , 1456–1471 ( 2006 ) 31 . v .n . padmanabhan , h.j . wang , p .a . chou , k. sripanidkulchai , distribut stream media content use cooper network , proceed 12th intern workshop network oper system support digit audio video , nossdav ’ 02 , pp . 177– 186 ( acm , new ork , ny , usa , 2002 ) 32 . m. castro , p . druschel , a.-m. kermarrec , a. nandi , a. rowstron , a. singh , splitstream : high-bandwidth multicast cooper environ , proceed nineteenth acm symposium oper system principl , sosp ’ 03 , pp . 298–313 . ( acm , new ork , ny , usa , 2003 ) 33 . v . v enkataraman , k. oshida , p . franci , chunkyspread : heterogen unstructur tree-bas peer-to-p multicast , proceed 5th intern workshop peer-to-p sys- tem ( iptp ) , pp . 2–11 ( 2006 ) 34 . n. magharei , r. rejai , . guo , mesh multiple-tre : compar studi live p2p stream- ing approach , proceed ieee infocom ( 2007 ) 35 . p .t . eugster , r. guerraoui , a.m. kermarrec , l. massoulié , epidem distribut comput . ieee comput . 37 , 60–67 ( 2004 ) 36 . x. zhang , j. liu , b. li , t.p . um , coolstreaming/donet : data-driven overlay network peer-to-p live media stream , infocom 2005 . 24th annual joint conf . ieee comput commun societi proceed ieee , vol . 3 , pp . 2102–2111 ( 2005 ) 37 . z. liu , c. wu , b. li , s. zhao , uuse : large-scal oper on-demand stream random network code , proceed ieee infocom ( 2010 ) 38 . m. wang , b. li , r 2 : random push random network code live peer-to-p stream . ieee j. sel . area commun . ( 2007 ) 626 16 internet multimedia content distribut 39 . g. palli , a. v akali , insight perspect content deliveri network . commun . acm 49 ( 1 ) , 101–106 ( 2006 ) 40 . c. ge , n. wang , w.k . chai , h. hellwagn , qoe-assur 4k http live stream via transient segment hold mobil edg , ieee j. sel . area commun . ( jsac ) ( 018 ) 41 . iso/iec jtc 1/sc 29/wg 11 ( mpeg ) . 23009-1 : dynam adapt stream http ( 2019 ) 42 . . sani , a. mauth , c. edward , adapt bitrat select : survey . ieee commun . surv . tutor . 19 ( 4 ) , 2985–3014 ( 2017 ) 43 . s. gouach , g. bichot , a. bsila , c. howson , distribut & adapt http stream , proceed icm ( 2011 ) 44 . s. akhshabi , a.c begen , constantin dovroli . experiment evalu rate-adapt algorithm adapt stream http , proceed acm mmsi ( 2011 ) 45 . m. claey , s. latré , j. famaey , f. de turck , design evalu self-learn http adapt video stream client . ieee commun . lett . 18 ( 4 ) , 716–719 ( 2014 ) 46 . . sun , x. yin , j. jiang , v . sekar , f. lin , n. wang , t. liu , b. sinopoli , cs2p : improv video bitrat select adapt data-driven throughput predict , proceed 2016 acm sigcomm confer , sigcomm ’ 16 , pp . 72–285 . ( acm , 2016 ) 47 . h. mao , r. netravali , m. alizadeh , neural adapt video stream pensiv , proceed- ing confer acm special interest group data commun , sigcomm ’ 17 , pp . 197–210 . ( associ comput machineri , new ork , ny , usa , 2017 ) 48 . z. akhtar , .s . nam , r. govindan , s. rao , j. chen , e. katz-bassett , b. ribeiro , j. zhan , h. zhang , obo : auto-tun video abr algorithm network condit , proceed 2018 confer acm special interest group data commun , sigcomm ’ 18 , pp . 44–58 . ( acm , new ork , ny , usa , 2018 ) 49 . iso/iec . 23000-19 : multimedia applic format ( mpeg-a ) —part 19 : common media appli- cation format ( cmaf ) segment media ( 2018 ) 50 . c. jen , et al. , webrtc 1.0 : real-tim commun browser , w3c candid recommend ( 2019 ) 51 . b. jansen , t. goodwin , v . gupta , f. kuiper , g. zussman , perform evalu webrtc- base video conferenc . sigmetr perform . eval . rev . 45 ( 3 ) , 56–68 ( 2018 ) 17multimedia wireless mobil network rapid develop comput commun technolog made ubiquit comput realiti . cordless phone earli day later cellular phone , wireless mobil commun core technolog enabl anywher anytim inform access share . new gener smart mobil devic emerg recent year drive revolut further.multimedia wireless mobil network share mani similar wire internet ; yet uniqu characterist wireless channel frequent movement user also pose new challeng must address . 17.1 characterist wireless channel wireless radio transmiss channel far error-pron wire-lin com-mun . section , brieﬂi present common radio channel model gain insight caus error classifi type bit error , amount , pattern . detail found [ 1–3 ] . v ariou effect caus radio signal degrad receiv side . classiﬁ short-rang long-rang effect . accordingli , path loss model avail long-rang atmospher attenu channel , fade model areavail short-rang degrad . 17.1.1 path loss long-rang commun , signal loss domin atmospher atten-u . depend frequenc , radio wave penetr ionospher ( > 3 ghz ) establish line-of-sight ( lo ) commun , lower frequenc © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_17627628 17 multimedia wireless mobil network reﬂect ionospher ground , travel along ionospher receiv . frequenc 3 ghz ( necessari satellit transmiss penetr ionospher , also explor 5g cellular standard ) experi gaseou attenu , inﬂuenc primarili oxygen water ( vapor rain ) . free-spac attenu model lo transmiss invers proport squar distanc ( 2 ) given frii radiat equat sr=stgtgrλ2 ( 4π2 ) d2l ( 17.1 ) srandstar receiv transmit signal power , grandgtar antenna gain factor , λi signal wavelength , li receiv loss . shown assum ground reﬂect , attenu increas proport d4 . anoth popular medium-scal ( urban citi size ) model hata model , empir deriv base okumura path loss data tokyo . basic form path loss equat db given l=a+b·log10 ( ) +c . ( 17.2 ) , ai function frequenc antenna height , bi environ function , ci function depend carrier frequenc . , di distanc transmitt receiv . satellit commun mainli affect rain , meteorolog rainfal densiti map use commun region . attenu iscomput accord amount rainfal area given date . 17.1.2 multipath fade fade common phenomenon wireless ( especi mobil ) communica- tion , receiv signal power ( suddenli ) drop [ 1 ] . signal fade occur due reﬂect , refract , scatter , diffract ( mainli move object ) , illustr fig . 17.1 .multipath fade occur signal reach receiv via multipl path ( bounc build , hill , object ) . arriv differ time phase , multipl instanc signal cancel , caus loss signal connect . problem becom sever higher data rate explor . indoor channel , radio signal power gener lower , object small place ; move . henc , multipath fade main factor signal degrad . outdoor environ , refract , diffract , scatter effect also import caus signal degrad , mostli theground build . multipath model probabilist state receiv signal amplitud , vari accord whether signal superimpos receiv added17.1 characterist wireless channel 629 fig . 17.1 exampl multipath fig . 17.2 gilbert-elliot two-stat markov chain model . state 0 : good ; state 1 : bad destruct construct . doppler spread signal deﬁn distribut signal power frequenc spectrum ( signal modu- late speciﬁc frequenc bandwidth ) . doppler spread signal small enough , signal coherent—that , one distinguish signal receiv . typic case narrowband signal . signal wideband , differ frequenc signal differ fade path , distinguish signal path observ receiv , separ time . narrowband signal , popular model rayleigh fade andrician fade . rayleigh fade model assum inﬁnit number signal path non line-of-sight ( nlo ) receiv model probabl densiti function prof receiv signal amplitud r : pr ( r ) =r σ2·e−r2 2σ2 ( 17.3 ) σi standard deviat probabl densiti function . although number signal path typic larg , rayleigh model provid good approxim number path 5 . rayleigh fade channel approxim use markov process ﬁnite number state , refer finit state markov channel [ 4 ] . simplest form , known gilbert-elliot model [ 5 ] , two state , repres good bad channel condit . illustr fig . 17.2 , state 0 error state 1 erron , wireless channel condit switch transit probabl p00top11 . captur short-term bursti natur wireless error , wide use simul . gener model assum lo rician model . deﬁn k-factor ratio signal power scatter power—that , ki factor lo signal greater path . rician probabl densiti function pcis630 17 multimedia wireless mobil network fig . 17.3 rician pdf plot k-factor = 0 , 1 , 3 , 5 , 10 , 20 k= 1 k= 3k= 5k= 10 k= 20 rp ( r ) k= 0 0.6 0.5 0.4 0.3 0.2 0.1 02468 1 0 pc ( r ) =r σ2·e−r2 2σ2−k·io ( r σ√ 2k ) , k=s2 2σ2 ( 17.4 ) , randσar signal amplitud standard deviat , respect , andsi lo signal power . ioi modiﬁ bessel function ﬁrst kind 0 order . note s=0 ( k=0 ) , lo , model thu reduc rayleigh distribut . k=∞ , model reﬂect popular addit white gaussian nois ( awgn ) condit . figur 17.3 show rician probabl densiti function k-factor 0 , 1 , 3 , 5 , 10 , 20 , respect , standard deviat σ=1.0 . wideband signal , fade path empir driven . one way model amplitud summat path , random fade . number path 7 closed-room environ ( six wall lo ) larger number environ . altern techniqu model channel fade measur channel impuls respons . similar techniqu use rake receiv , multipl radio receiv tune signal differ phase amplitud , recompos transmis- sion split differ distinguish path . signal rake receiv ad achiev better snr . tune rake receiv proper fade path , special pilot channel send well-known pilot signal , rake receiv adjust recogn symbol fade path . 17.2 wireless network technolog like wire network , larg famili wireless network , use differ technolog combat fade pass loss cover geograph area differ size . wide-area cellular network , ﬁeld cover number cell . mobil termin cell contact access point ( ap ) orbas station17.2 wireless network technolog 631 ( bs ) , serv gateway network . access point connect high-spe wire line , wireless network satellit form backbon core network . mobil user move rang current access point , handoff ( orhandov ) requir maintain commun . size cell typic 1,000 citi , larger ( macrocel ) smaller ( microcel ) depend locat densiti user . whole network ofcel collect cover city- nation-wid area even beyond , ensur anywher connect . awireless local area network ( wlan ) , hand , cover much shorter rang , gener within 100 m. given short distanc , bandwidth high access cost power consumpt low , make ideal use within hous ofﬁc build . mani modern home entertain system built around wireless local area network . public wlan access also offer mani airport , shop , restaur , even city-wid . section , provid overview differ gener wireless cellular network wireless local area network . 17.2.1 cellular wireless mobil network : 1g–5g ﬁrst commerci cellular network launch japan nippon telegraphand telephon ( ntt ) 1979 , initi metropolitan area tokyo . past 40 year , cellular wireless mobil network encompass rapid evolutionfrom ﬁrst gener ( 1g ) today ’ advanc 5th gener ( 5g ) support ultra-high bandwidth ultra-low latenc commun . becom foundat today ’ mobil internet , offer anytim anywher data accessand share , particularli multimedia content . 1g cellular analog wireless network earli wireless commun network use mostli voic com- munic , telephon voic mail . ﬁrst-gener ( 1g ) cellular phone use analog technolog frequency-divis multipl access ( fdma ) , user assign separ frequenc channel communica- tion . standard advanc mobil phone system ( amp ) north america , total access commun system ( tac ) , nordic mobil telephoni ( nmt ) europ asia , respect . figur 17.4 illustr sampl geometr layout fdma cellular system . cluster seven hexagon cell deﬁn cover cellular area . longa cell cluster assign uniqu set frequenc channel , interfer neighbor cell neglig . clariti , cell ﬁrst cluster mark thicker borders.632 17 multimedia wireless mobil network fig . 17.4 exampl geometr layout fdma cellular system cluster size seven hexagon cellsf1f3 f4 f2 f7 f5 f6 f1f3 f4 f2 f7 f5 f6f1f3 f4 f2 f7 f5 f6 2g cellular network : gsm narrowband cdma start second-gener ( 2g ) wireless network , digit technolog replac analog technolog . digit cellular network adopt two compet technolog sinc 1993 : time divis multipl access ( tdma ) code divis multipl access ( cdma ) . global system mobil commun ( gsm ) [ 6 ] , base tdma , wide use worldwid . tdma gsm ( global system mobil commun ) name suggest , tdma creat multipl channel multipl time slot allow share carrier frequenc . practic , tdma gener combin fdma —that , entir alloc spectrum ﬁrst divid multipl carrier frequenc channel , divid time dimens tdma . gsm establish european confer postal telecommunica- tion administr ( cept ) 1982 , object creat tdma-bas standard mobil commun network capabl handl million sub- scriber provid roam servic throughout europ . default , gsm network circuit switch , data rate limit 9.6 kbp , hardli use gener data servic ( certainli multimedia data ) . gener packet radio servic ( gpr ) , develop 1999 , support packet- switch data gsm wireless connect , user “ alway connected. ” code divis multipl access ( cdma ) code divis multipl access ( cdma ) [ 7 ] major breakthrough wireless com- munic . spread spectrum technolog , bandwidth signal spread transmiss . appear , spread signal might indistin- guishabl background nois , distinct advantag secure17.2 wireless network technolog 633 −11 −11 −11d code tr pseudo-noisedata fig . 17.5 spread direct sequenc ( ds ) spread spectrum robust intent interfer ( known jam ) . spread spectrum applic digit well analog signal , modul “ spread. ” earlier gener cordless phone cellular phone , exampl , use analog signal . howev , digit applic , particular cdma , made technolog popular modern wireless data network . foundat cdma direct sequenc ( ds ) spread spectrum . unlik fdma , user suppos occupi uniqu frequenc band moment , multipl cdma user make use ( full ) bandwidth share wideband channel entir period transmiss ! common frequenc band also alloc multipl user cells—in word , provid reus factor k=1 . potenti greatli increas maximum number user , long interfer manag . fig . 17.5 show , cdma transmitt uniqu spread code assign direct sequenc ( ds ) spreader . spread code ( also call chip code ) consist stream narrow puls call chip , bit width tr . bandwidth bri order 1 /tr . spread code multipli input data ds spreader , fig . 17.6 . data bit 1 , output ds code ident spread code , data bit 0 ( repres −1 ) , output ds code invert spread code . result , spectrum origin narrowband data spread , bandwidth ds signal : bds=br ( 17.5 ) despread process involv take product ds code spread sequenc . long sequenc use spreader , result signal origin data . separ receiv multipl access , i.e. , cdma , orthogon code use . exampl , consid spread code two receiv : ( 1 , −1 , −1 , 1 ) ( −1 , 1 , 1 , −1 ) , orthogon ( practic , code length much longer ) ; , inner product zero . assum data bit receiv 1 xand receiv 2 . output ds code receiv 1 is634 17 multimedia wireless mobil network wideband pseudo-nois carrierd spreader modul demodulatordata data transmitt receiverd despreaderd spread spectrum signal wideband pseudo-nois carrier fig . 17.6 transmitt receiv direct sequenc ( ds ) spread spectrum x· ( 1 , −1 , −1,1 ) receiv 2 y· ( −1,1,1 , −1 ) . sender combin togeth , send x· ( 1 , −1 , −1,1 ) +y· ( −1,1,1 , −1 ) . decod result receiv 1 2 use respect code ( x· ( 1 , −1 , −1,1 ) +y· ( −1,1,1 , −1 ) ) · ( 1 , −1 , −1,1 ) =4x ( receiv 1 ) ( x· ( 1 , −1 , −1,1 ) +y· ( −1,1,1 , −1 ) ) · ( −1,1,1 , −1 ) =4i ( receiv 2 ) , normal 4 ( spread code length ) , becom xand yfor receiv 1 2 , respect . word , interfer . tri small , bri much wider bandwidth bbof narrowband signal . practic , support user achiev better spectrum util , nonorthogon pseudo-random nois ( pn ) sequenc use code . base observ gener user activ cell . sinc effect nois sum user ’ signal , long adequ level “ averag case ” interfer maintain , qualiti cdma recept guarante . soft capac make cdma much ﬂexibl tdma fdma hard capac , accommod user necessari allevi undesir drop ongo call reach capac limit . 3g cellular network : wideband cdma 2g cellular network mainli design voic commun circuit switch limit support internet data access , mention multimedia servic . start third gener ( 3g ) , multimedia servic becom core issu cellular network development.17.2 wireless network technolog 635 3g standard process start 1998 , predominantli use wideband cdma ( wcdma ) . key differ wcdma air interfac narrowband cdma air interfac •to support bitrat 2 mbp , wider channel bandwidth alloc . wcdma channel bandwidth 5 mhz , oppos 1.25 mhz is-95 earlier standard . •to effect use 5 mhz bandwidth , longer spread code higher chip rate use . chip rate speciﬁ 3.84 mcp , oppos 1.2288 mcp . •wcdma support variabl bitrat , 8 kbp 2 mbp . achiev use variable-length spread code time frame 10 ms , userdata rate remain constant chang one frame other—h bandwidth demand . bandwidth made avail 3g network give rise applic previous avail mobil phone user . exampl includ onlin map , onlinegam , mobil tv , instant picture/video content share . multimedia natur 3g wireless servic also call rapid develop new gener handset , support high-qual video , better softwar user interfac , longer batteri life key factor . 3g era , smartphon tablet greatli chang way peopl interact mobil devic even social behavior . 4g cellular network : lte imt-advanc , deﬁn itu , commonli view guidelin for4g standard [ 8 ] . imt-advanc cellular system fulﬁll follow require- ment : •base all-ip packet-switch network . •peak data rate 100 mbp high mobil 1 gbp nomadic/loc wireless access . •dynam share use network resourc support simultan user per cell . •smooth handov across heterogen network . •high qualiti servic next gener multimedia support . pre-4g 3gpp long-term evolut ( lte ) technolog often brand 4g-lte . initi lte releas theoret capac 100 mbp inth downlink 50 mbp uplink . septemb 2009 , number propos submit itu 4g candi- date , mostli base two technolog : •lte advanc standard 3gpp . •802.16 standard ieee ( i.e. , wimax ) .636 17 multimedia wireless mobil network fig . 17.7 a2×2m antenna system two candid system commerci deploy : ﬁrst mobil wimax network south korea 2006 , ﬁrst lte network oslo , nor- way stockholm , sweden 2009 . today lte advanc taken place wimax , consid standard 4g [ 9 ] . 4g incorpor sever new radio techniqu achiev higher rate lower latenc 3g [ 10 ] . includ space divis multiplex viamultipl input/multipl output ( mimo ) , space time code ( stc ) use higher order mod- ulat encod scheme , sophist beam form beam direction control , intercel interfer mitig . use multipl send receiv antenna , mimo creat multipl channel carri user inform , lead higher capac less impact interfer . figur 17.7 show typic 2 ×2 mimo system . beam-form techniqu temporarili improv gain offer higher capac . properti beam tune custom subscrib achiev capabl limit durat . space time code improv number bit transmit per hz avail bandwidth . techniqu collect lead higher capac requir advanc network [ 11 ] . addit , techniqu reduc interfer also use boost capac , notabl orthogon frequenc divis multiplex ( ofdm ) . cdma well-suit voic , ofdm better transport mechan multimedia data . mix technolog , backward compat possibl . lte advanc also make use addit spectrum multiplex achiev higher data speed . achiev peak download rate 299.6 mbp upload rate 75.4 mbp depend user equip categori ( e.g. , 4 ×4 mimo antenna use 20 mhz spectrum ) . five differ termin class deﬁn voic centric class high-end termin support peak data rate . also enabl lower data transfer latenc ( theoret < −5 ms latenc small packet , though practic much higher ) , lower latenc handov connect setup time previou radio access technolog . support mobil improv , . depend frequenc band , allow termin move speed 350 km/h ( 220 mph ) 500 km/h ( 310 mph ) . importantli , macro-divers , also known group cooper relay , high bit rate avail larger portion cell , especi user expos posit sever base station . enabl high-qual multimedia servic seamless mobil , even extrem scenario today ’ high speed trains.17.2 wireless network technolog 637 5g cellular network beyond 4g 20 time faster 3g , empow today ’ high qualiti real-tim multimedia servic . despit achiev , past gener cellular net- work technolog , 4g , basic design meet demand voic later video well internet access . current 4g network largelystrain absolut bandwidth limit littl space improv . beyond bandwidth , new era innov tool technolog accel- erat develop wide rang new applic recent year . theseappl , come domain ultra-high deﬁnit video , virtual augment realiti , autonom vehicl , remot health surgeri , gener multi-dimens qualiti servic ( qo ) requir , term bandwidth , delay , reliabl . also given number connect devic expect reach ten even hundr billion come year , low-cost solut formass concurr connect expect . meet demand , newest gener cellular network , 5g nr ( new radio ) [ 12–14 ] , begun deploy 2019 . accord itu-r , 5g wireless system support three type gener servic : •enhanc mobil broadband ( embb ) . object servic max- imiz data rate , guarante moder reliabl , packet error rate ( per ) order 10 −3 . embb consid direct extens 4g ’ broadband servic . character larg payload stabl connect high peak data rate , well moder rate user near edg cell . typic applic includ high deﬁnit ( hd ) video , virtual realiti ( vr ) , augment realiti ( ar ) , high data volum henc bandwidth demand transmiss . •ultra-reli low-lat commun ( urllc ) . object servic accommod mission-crit low-lat transmiss small payload . rate urllc transmiss rel low blocklengthi short ; reliabl requir , howev , high , per typ- ical lower 10 −5 . target mainli latency-sensit applic scenario , assist autom drive , remot surgeri . •massiv machine-typ commun ( mmtc ) . servic accommod massiv amount internet thing ( iot ) devic , gener inact mostli time , sporad activ time , send small datapayload . target applic scenario high connect densiti , smart citi smart agricultur . tabl 17.1 show evolut 3g 5g term bandwidth latenc . achiev goal , 5g use much wider complex wireless spec- trum , includ previou cellular spectrum larg amount spectrum sub-6 ghz rang beyond . sub-6 ghz 5g span 450 mhz 6 ghz , andth millimeter-wav 5g frequenc span 24.250–52.600 ghz . also includ unli- cens spectrum . addit , may 5g spectrum 5,925–7,150 mhz638 17 multimedia wireless mobil network tabl 17.1 evolut 3g 5g 3g 4g 5g deploy 2004 2006 2019 theoret bandwidth 2 mbp 200 mbp 1 gbp practic bandwidth 144 kbp 25 mbp 200–400 mbp latenc 100–500 ms 20–30 ms ≤10 ms rang 64–86 ghz rang . broad spectrum util advanc chan- nel code multipl access technolog , e.g. , nonorthogon multipl access ( noma ) . two import techniqu 5g massiv mimo downsiz cell . •massiv mimo . 4g , mimo typic singl user mode ( su-mimo ) , base station user equip multipl antenna port antenna , multipl data stream transmit simultan user equip use time/frequ resourc , doubl ( 2 ×2 mimo ) , quadrupl ( 4 ×4 mimo ) peak throughput user . multius mode ( mu-mimo ) , base station send multipl data stream , one per user equip , use time-frequ resourc . thereforeincreas total cell throughput , i.e. , cell capac . base station maintain multipl antenna port , need user equip . massiv mimo antenna expand design larg number individually-control antenna , embed radio transceiv compon . num- ber antenna even exce number user . practic , 32 even 64+ logic antenna port 5g base station.beamform use mobil devic network ’ base station focu wireless signal speciﬁc direct , rather broadcast wide area . particular , 5g use 3d beamform creat horizont vertic beam toward user , increas data rate user . , throughput capac densiti sector greatli improv , coverageand user experi . •small cell . convent base station past gener cellular network cover user 3–5 km away even beyond 35 km extend mode . suchcoverag remain valid 5g ident frequenc use ; howev , higher frequenc , e.g. , millimet wave ( mmwave ) , signal hardli penetr wall build therefor quickli decay beyond 500 m.small cell use low power , short-rang wireless transmiss base station cover limit geograph area indoor outdoor applic . concept , encompass femtocel ( 10–50 ) , pico cell ( 100–250 ) , micro cell ( 500m–2.5 km ) , develop 4g becom necess 5g . work togeth regular base station , provid increas data capac , help servic provid elimin expens rooftop system associ instal orrent cost , acceler deploy 5g.17.2 wireless network technolog 639 5g begin promot digit person entertain- ment industri interconnect , 6g , activ develop , continu journey . expans servic scope mobil network enrichesth telecom network ecosystem . “ one-size-ﬁts-al ” network paradigm employ past mobil network ( 2g , 3g 4g ) , howev , becom inﬂex sup- port diversiﬁ multimedia servic complic often contradictingdemand . even advanc technolog , perform metric , e.g. , band- width , latenc , number connect , hardli optim toward ideal servic ﬁt . challeng address network slice andmobil edg comput ( mec ) 5g , gener , integr mod- ern commun , storag , comput technolog , norm futur gener wireless system ( 6g beyond ) [ 15 ] . next introduc network slice ; mec discuss chap . 18under context cloud/edg comput multimedia servic . network slice 5g , heterogen servic expect coexist within singl physic net-work infrastructur . differ qo demand accommod net- work slice [ 16,17 ] . basic idea partit origin network architectur multipl logic independ network conﬁgur effect meet variou servic requir . exampl , low-lat slice , maxi-mum throughput/high bandwidth slice , slice enabl massiv iot deploy deploy cell simultan . oper provid separ resourc ﬁne-grain qo monitor . network slice ﬁrst introduc 4g never fulli realiz emer- genc 5g . essenc , network slice allow creation multipl virtual network share physic infrastructur , follow two process ( see fig . 17.8 ) : •virtual , provid abstract represent physic resourc uniﬁ homogen framework . framework , elementarynetwork function use build block creat network slice . •orchestr , coordin differ network function involv life-cycl network slice . virtual network scenario , physic compon secondari logic self-contain partit , i.e. , slice , alloc resourc dynam need basi . could achiev softwar deﬁn network ( sdn ) net- work function virtual ( nfv ) [ 18 ] . slice use network ’ share resourc , deliv speciﬁc servic speciﬁc service-level agreement end user . need chang , alloc resources.640 17 multimedia wireless mobil network fig . 17.8 gener 5g network slice framework 5g network slice enabl commun servic provid balanc dis- parat requir embb , urllc , mmtc applic . deriv beneﬁt abil deploy system quickli , function need avail whole begin . 17.2.2 wireless local area network ( wlan ) increas avail mobil comput devic laptop tablet brought keen interest wireless local area network ( wlan ) , poten- tialli provid much higher throughput much lower cost wide-area cellular wireless network . emerg late ubiquit pervas com- pute [ 19 ] creat new surg interest wlan short- rang commun techniqu . today ’ wlan base 802.11 famili standard ( also known wi-fi ) , develop ieee 802.11 work group . specifi medium access control ( mac ) physic ( phi ) layer wireless connect local area within radiu less 100 , address follow import issu : •secur . enhanc authent encrypt , sinc broadcast air air suscept break-in . •power manag . save power transmiss handl doze awak . •roam . permit accept basic messag format differ access points.17.2 wireless network technolog 641 fig . 17.9 illustr hidden termin problem . s2 access point ; s1 s3 “ hidden ” due long distanc , caus interfer s2 initi 802.11 standard use 2.4 ghz radio band , global unli- cens industri , scientiﬁc medic ( ism ) short-rang radio frequenc band . , face interfer user mani wireless system , e.g. , cordless phone . similar ethernet , basic channel access method 802.11 carrier sens multipl access ( csma ) . howev , collis detect ( cd ) ethernet employ . uniqu hidden termin problem wireless com- munic . shown fig . 17.9 , wireless termin s1 s3 far edg access point ( s2 ) ’ rang . recal , unlik wire signal , strength wireless signal decay quickli distanc receiv hear signal strength certain threshold . , even s1 s3 “ expos ” access point s2 , i.e. , hear s2 ( vice versa ) , necessarili hear given long distanc . two termin therefor “ hidden ” other—if send packet simultan , two packet collid s2 , neither s1 s3 detect collis . address hidden termin problem , 802.11 use collis avoid ( ca ) ; , carrier sens , anoth node ’ transmiss heard , current node wait period time transmiss ﬁnish listen free commun channel . csma/ca option supplement exchang request send rt packet sent sender , clear send ct packet sent intend receiv . alter node within rang sender , receiv , transmit durat intend transmiss . exampl , send messag s2 , s1 ﬁrst send rt request , and642 17 multimedia wireless mobil network s2 broadcast ct s1 , heard s1 s3 . s1 send messag s3 temporarili refrain send , thu avoid potenti collis . ieee 802.11b/g ieee 802.11b enhanc basic 802.11 . use ds spread spectrumand oper 2.4 ghz band . aid new modul technolog , itsupport 5.5 11 mbp addit origin 1 2 mbp , function compar ethernet . north america , exampl , alloc spectrum 802.11b 2.400– 2.4835 ghz . regardless data rate ( 1 , 2 , 5.5 , 11 mbp ) , bandwidth ds spread spectrum channel 20 mhz . three nonoverlap ds channel beaccommod simultan , allow maximum 3 access point local area . ieee 802.11g , extens 802.11b , attempt achiev data rate 54 mbp . design downward compat 802.11b henc still use 2.4 ghz band , ofdm use instead ds spread spectrum . ieee 802.11a ieee 802.11a oper 5 ghz band support data rate rangeof 6–54 mbp . use ofdminstead ds spread spectrum , , allow 12 nonoverlap channel , henc maximum 12 access point local area . 802.11a oper higher frequenc ( 5 ghz ) band , face much less radio interfer , cordless phone , 802.11 802.11b . coupl higher data rate , great potenti support variou multimedia applic lan environ . 802.11a product start ship late , lag 802.11b product due 5 ghz compon difﬁcult manufactur . wide adopt consum space given less-expens 802.11b alreadi domin market . arriv less expens earli 802.11g product market , backwards-compat 802.11b , bandwidth advantag 5 ghz 802.11a consum market reduc . , howev , see penetr enterpris network environ , requir increas capacityand reliabl 802.11b/g-onli network . ieee 802.11n , 802.11ac , 802.11ax ( wi-fi 6 ) 802.11n improv network perform past 802.11 standard , achievinga signiﬁc increas maximum net data rate 600 mbp use four spatial stream channel width 40 mhz [ 20 ] . build previou 802.1117.2 wireless network technolog 643 standard ad multiple-input multiple-output ( mimo ) , frame aggreg mac layer . channel oper width 40 mhz anoth featur incorpor 802.11n ; doubl channel width 20 mhz previou 802.11 phi transmit data , provid twice phi data rate avail singl 20 mhz channel . enabl 5 ghz mode , within 2.4 ghz modeif knowledg interfer 802.11 non-802.11 system ( cordless phone ) use frequenc . 802.11g releas share band exist 802.11b devic , provid way ensur coexist legaci successor devic . 802.11n extend coexist manag protect transmiss legaci devic , includ 802.11g/b/a , make deploy much easier smooth . quickli replac exist 802.11a/b/g devic , offer much better support multimedia wireless . 802.11ac increas multi-st wlan throughput least 1 gbp singl link throughput least 500 mbp . accomplish enhanc air interfac 802.11n : wider radio bandwidth ( 160 mhz ) 5 ghzband , mimo stream ( 8 ) , mu-mimo , high-dens modul . latest standard , 802.11ax ( also known wi-fi 6 ) , succe 802.11ac introduc better power-control method avoid interfer neighbor net-work . also incorpor orthogon frequency-divis multipl access ( ofdma ) downlink mimo mu-mimo , increas throughput . offer real-world speed roughli 30 % faster 802.11ac , theoret maxi-mum transfer speed around 10 gbp . 17.2.3 bluetooth short-rang technolog known proximity-bas servic constitut consider portion mobil data trafﬁc . servic enabl geograph close user directli exchang data . bluetooth ( name tenth-centuri king denmark , harold bluetooth ) protocol intend short-rang ( call piconet ) wireless com- munic [ 21 ] . bluetooth use frequenc hop ( fh ) , spread spectrum technolog data transmiss , 2.4 ghz ism short-rang radio frequenc band . similar tech- niqu use 802.11 wlan . bluetooth also employ master-slav structur . one master may commun 7 slave piconet ; devicesshar master ’ clock . packet exchang base basic clock , deﬁn master . bluetooth provid secur low-cost way connect exchang informa- tion devic fax , mobil phone , laptop , printer , global posi- tion system ( gp ) receiv , digit camera , video game consol . princip design low-bandwidth technolog . howev , permit move orstil pictur sent digit camera mobil phone , speed 700 kbp , within distanc 10 m.644 17 multimedia wireless mobil network mani short ultra short-rang wireless commun protocol develop recent year , includ near ﬁeld commun ( nfc ) , wi-fi direct , etc . advanc technolog ultra-wideband ( uwb ) cognitiveradio activ develop well . batteryless backscatt commun also use convey multimedia data , prototyp demonstr 720p hd video 10 fp 16 feet [ 22 ] . technolog facilit direct data exchang mobil wearabl devic internet thing ( iot ) consist tini devic sensor . 17.3 multimedia wireless channel studi evolut 2g network high-capac 3g/4g/5g network well wireless local area network . main driving-forc toward thenew gener higher speed wireless network multimedia communica- tion wireless . suggest multimedia applic rang stream video , videoconferenc , onlin game , collabor work , ar/vr enhanc roadsideassist onlin map guidanc driver , name . characterist wireless handheld devic worth keep mind design multimedia transmiss wireless , particular video transmis-s [ 23 ] . first , handheld size batteri life limit process power memori devic . thu , encod decod must rel low complex . hand , smaller screen size well accept rel lowerresolut video , help reduc process time . , howev , chang given rapid adopt high-resolut screen mobil devic . second , due memori constraint reason use wireless devic , well bill procedur , real-tim commun like requir . long delay start see video either possibl accept . final , wireless channel much interfer wire channel , speciﬁc loss pattern depend environ condit . bitrat wireless channel also rel lower , particularli movement . impliesthat even though lot bit protect must appli , code efﬁcienc maintain well . error-resili code import . wireless commun standard gener expect audio/video data standard compliant , compani concentr develop product use standard , interest interoper mobil network . 3gpp/3gpp2 group deﬁn follow qo paramet wireless video-conferenc servic [ 24,25 ] . •synchron . video audio synchron within 20 ms. •throughput . minimum video bitrat support 32 kbp . video rate 128 , 384 kbp , support well . •delay . maximum end-to-end transmiss delay deﬁn 400 ms.17.3 multimedia wireless channel 645 •jitter . maximum delay jitter ( maximum differ averag delay 95th percentil delay distribut ) 200 ms. •error rate . frame error rate 10−2or bit error rate 10−3should toler . section , concern mainli send multimedia data robustli wireless channel , particularli video commun , natur extens voic commun . introduc solut error detect , error cor- rection , error-resili entropi code , error conceal wireless network context , although techniqu also applic network . 17.3.1 error detect error detect identifi error . caus nois impair duringtransmiss sender receiv . commonli use error detect toolsinclud pariti check , checksum , cyclic redund check ( crc ) [ 26,27 ] . pariti check binari data , error appear bit ﬂip . pariti check add pariti bit sourc bitstr ensur number set bit ( i.e. , bit valu 1 ) outcom even ( call even pariti ) odd ( call odd pariti ) . exampl , even pariti check , bit 1 append bitstr 10101000 , bit 0should append 10101100 . simpl scheme use detect singl odd number error receiv ’ side . even number ﬂip bit , howev , make pariti bit appear correct even though data erron . checksum checksum input messag modular arithmet sum codeword inth messag . sender append checksum messag , receiv perform sum oper check whether error . hasbeen implement mani network protocol , data link layer , network layer transport applic layer . internet checksum algorithm protocol work follow ( see detail rfc 1071 ) : 1 . first pair byte input data form 16-bit integ . odd number byte , append byte zero end . 2 . calcul 1 ’ complement sum 16-bit integ . overﬂow encoun- tere sum wrap around lowest bit.646 17 multimedia wireless mobil network 3 . result serv checksum ﬁeld , append 16-bit integ . 4 . receiv ’ end , 1 ’ complement sum comput receiv 16-bit integ , includ checksum ﬁeld . bit 1 receiv data correct . illustr , let input data byte sequenc d1 , d2 , d3 , d4 , ... , dn . use notat [ , b ] 16-bit integ a·256+b , aandbar byte , 16-bit 1 ’ complement sum byte given one follow : [ d1 , d2 ] +/prime [ d3 , d4 ] +/prime···+/prim [ dn−1 , dn ] ( ni even ; pad ) [ d1 , d2 ] +/prime [ d3 , d4 ] +/prime···+/prim [ dn,0 ] ( ni odd ; append zero ) exampl , suppos follow input data four byte : 10111011 , 10110101 , 10001111 , 00001100 . group 1011101110110101 and1000111100001100 . sum two 16 bit integ 1011101110110101 +1000111100001100 0100101011000010 addit overﬂow , wrap around lowest bit . 1 ’ complement obtain convert 0s 1s 1s 0s . thu , 1s complement sum becom 1011010100111101 , becom checksum . receiv perform group summat receiv byte , add receiv checksum . easi see error , outcom 1111111111111111 . otherwis , bit becomes0 , error happen transmiss . cyclic redund check ( crc ) basic idea behind cyclic redund check ( crc ) divid binari input keyword kthat known sender receiv . remaind r divis constitut check word input . sender send input data check word , receiv check data repeat calcul verifi whether remaind still r. obvious , ensur check word ri ﬁxed rbit ( zero pad highest bit need ) , keyword kshould r+1 bit . crc implement use simpliﬁ form arithmet divis , name , comput remaind divid modulo-2 gf ( 2 ) ( galoi ﬁeld twoelement ) , have17.3 multimedia wireless channel 647 0−0=0+0=0 1−0=1+0=1 0−1=0+1=1 1−1=1+1=0 word , addit substract ident equival exclus ( xor , ⊕ ) . multipl divis convent base-2 arithmet , , except , xor oper , requir additionor substract without carri borrow . make hardwar implement much simpler faster . given messag word , keyword k , manual calcul remaind ruse convent long divis , modulo-2 arithmet . also append rzero mbefor divis , make later veriﬁc easier , see soon . exampl , m=10111 , k=101 , 10110011 /parenrightbig 1011100 101 110101 110101 11 henc , r=11 , append check word messag . difﬁcult show , case , m·2r⊕ri perfectli divis k ( leav exercis ) . henc , instead calcul remaind receiv ’ side compar rfrom sender , receiv simpli divid m·2r⊕rbykand check whether remaind zero . zero , error ; otherwis , error detect . keyword kinde come gener polynomi whose coefﬁcient binari bit keyword k. exampl , k=100101 binari format , polynomi express x5+x2+1 . keyword therefor also call gener . choos good gener non-trivi job extens studi [ 27 ] . well-chosen gener , two simpl fact known ( found [ 27 ] ) : 1 . gener polynomi contain two term , single-bit error detect . 2 . r-bit crc detect burst error length r. , burst mean ﬁrst last bit error , bit may may error . standard gener 8- , 12-,16- , 32-bit deﬁn intern standard . exampl , follow 32-bit gener use number of648 17 multimedia wireless mobil network fig.17.10 exampl two-dimension even pariti check . left : error ; right : single-bit error detect correct link-lay ieee protocol , particular , internet sinc 1975 : gcr c−32=100000100110000010001110110110111 note 33 bit ( remaind 32 bit ) . also crc gener use mpeg-2 , error messag “ crc fail ! ” often appear scratch dvd hard read disc player . 17.3.2 error correct error detect , retransmiss could use recov error , reliabl transport protocol tcp . back channel , howev , alway avail , e.g. , satellit transmiss , quit expens creat , e.g. , broadcast multicast scenario . real-tim multimedia stream , delay retransmiss long , make retransmit packet useless . instead , real-tim multimedia , forward error correct ( fec ) often use , add redund data bitstream recov random bit error [ 27 ] . consid simpl extens pariti check , one dimens two dimens [ 28 ] . calcul pariti bit bitstr bit , also group everi mbitstr form matrix calcul pariti bit column matrix . two-dimension pariti check , detect error correct error ! bit error caus failur row pariti check failur column pariti check , cross uniqu location—th ﬂip bit erron bitstr , illustr exampl fig . 17.10 . simpl fec scheme . doubl amount pariti bit , error correct capabl limit ; e.g. , two error occur row , abl detect , mention correct . two categori practic error correct code : block code convolut code [ 26,27 ] . block code appli group bit , i.e. , block , gener redund . convolut code appli string bit one time memori store previou bit well.17.3 multimedia wireless channel 649 block code block code take input kbit append r=n−kbit fec data , result n-bit-long string [ 29 ] . code refer ( n , k ) code . instanc , basic ascii word 7-bit ; pariti check add singl bit ( r=1 ) ascii word , ( 8,7 ) code , eight bit total ( n=8 ) , 7 data ( k=7 ) . code rate isk/n , 7/8 pariti check case . ham code richard ham observ error correct code oper ad space valid sourc string . space measur use ham distanc , deﬁn minimum number bit code string need chang ident anoth valid string . detect rerror , ham distanc least equal r+1 ; otherwis , corrupt string might seem valid . sufﬁcient correct r error howev , sinc enough distanc among valid code choos prefer correct . correct rerror , ham distanc must least 2r+1 . lead invent ﬁrst block code , ham ( 7 , 4 ) -code , 1950 . encod 4 data bit 7 bit ad three pariti bit base gener matrix g , say g=⎛ ⎜⎜⎜⎜⎜⎜⎜⎜⎝1101 1011 1000 0111 0100 00100001⎞ ⎟⎟⎟⎟⎟⎟⎟⎟⎠ given input data p ( 4 bit vector ) , output code xi obtain take product g·pand perform modulo 2 . exampl , bit 1001 , input vector pi ( 1,0,0,1 ) ; product vector ( 2,2,1,1,0,0,1 ) , encod output xwill ( 0,0,1,1,0,0,1 ) tafter modulo 2 , 7-bit data block 0011001 . ham ( 7 , 4 ) -code detect correct single-bit error . , parity-check matrix use h=⎛ ⎝1010101 0110011 0001111⎞ ⎠ similar encod , take product h·xwith modulo 2 , yield vector zof length 3 . treat za 3-bit binari number . zero , then650 17 multimedia wireless mobil network error ; otherwis , indic locat error ( check correspond column h ) . exampl , x=0011001 , z=0 , i.e. , error ; hand , x/prime=0111001 , z=010 , correspond second column h , indic bit 2 erron . extend ham code detect two-bit error correct one-bit error without detect uncorrect error . contrast , simpl one-dimensionalpar code detect odd number bit error correct error . bch rs code power cyclic code state term gener polynomi maxi- mum degre equal number sourc bit . sourc bit coefﬁcient polynomi , redund gener multipli anoth polyno-mi . code cyclic , sinc modulo oper effect shift polynomi coefﬁcient . cyclic redund check ( crc ) seen belong categori , though mainli use error detect . wide use class ofcycl error correct code bose-chaudhuri-hocquenghem ( bch ) code . gener polynomi bch also given galoi ﬁeld ( gf ) lowest-degre polynomi root α , αi primit element ﬁeld igo rang 1 twice number bit wish correct . bch code encod decod quickli use integ arithmet . h.261 h.263 use bch allow 18 redund bit everi 493 sourc bit . unfortu-n , 18 redund bit correct two error sourc . thu , packet still vulner burst bit error single-packet error . import subclass bch code appli multipl packet reed- solomon ( rs ) code . rs code gener polynomi gf ( 2 ) , mbe packet size bit . rs code take group ksourc packet output npacket r=n−kredund packet . rlost packet recov ncode packet know erasur points.1otherwis , fec code , recoveri appli half number packet , sinc error-pointdetect necessari well . rs code , ⌈ r 2⌉packet recov . fortun , packet fec scenario , packet often contain sequenc number checksum orcrc header . case , packet error drop , tell locat miss packet miss sequenc number . rs code use storag transmiss network . burst packet loss , possibl detect packet receiv incorrectli recov use avail redund . video scala- biliti , better use alloc bandwidth appli adequ fec protect thebas layer , contain motion vector header inform requir decod video minimum qo . enhanc layer receiv either less protec- tion none , reli resili code error conceal . either way , minimum qo alreadi achiev . 1error also call erasur , sinc erron packet useless , “ erased. ” 17.3 multimedia wireless channel 651 disadvantag block code select appli certain bit . difﬁcult protect higher protocol-lay header redun- danci bit , say , dct coefﬁcient , unless sent explicitli throughdiffer packet . hand , convolut code , make efﬁcient data unequ protect advantag , video . convolut code convolut fec code deﬁn gener polynomi well [ 26 ] . comput shift kmessag bit coder convolv gener polynomi gener nbit . rate code deﬁn bek n. shift necessari , sinc code achiev use memori ( shift ) registers.ther kregist , case past bit also affect redund code gener . produc nbit , redund bit delet ( “ punctur ” ) decreas size n , increas rate code . fec scheme known rate compat punctur convolut ( rcpc ) code . higher rate , lower bit protect , also less overhead bitrat . aviterbi algorithm soft decis decod encod bit stream , although turbo code gain popular . given limit network bandwidth , import minim redund , come expens bitrat avail sourc code . time , enough redund need video maintain requir qo current channel error condit . moreov , data compressedmedia stream differ import . data vital import correct decod . exampl , lost improperli estim data , pictur code mode , quantiz level , data higher layer video standard protocol stack , caus catastroph video decod failur . other , miss dct coefﬁcient may estim effect visual conceal degree.a , given certain channel condit , differ amount fec appli data provid differ level protect , known unequ error protect ( uep ) . rcpc punctur done gener pariti inform . know signiﬁc sourc bit video qualiti , appli differ amount punctur henc achiev uep . studi simul wireless radiomodel shown appli unequ protect use rcpc accord bit signiﬁc inform result better video qualiti ( 2 db better ) alloc bitrat video protect use rs code . simplist , pictur layer video protocol get highest pro- tection , macroblock layer local get lower protect , dct coefﬁcient block layer get littl protect , none . thiscould extend scalabl video similar ways.652 17 multimedia wireless mobil network fig . 17.11 interleav scheme redund code . packet bit store row , redund gener last rcolumn . send order column , top bottom , left righthtransmiss orderpack order nk r 3g network also incorpor data-type-speciﬁc provis recog- nize video standard chosen transmiss ; adapt appli transport code video stream enough unequ redund suitabl channel condit time qo request . packet interleav also possibl use packet interleav increas resili burst packet loss . fig . 17.11 show , rs code gener hrow ksourc video packet . instead transmit origin order , use column-major order , ﬁrst packet hrow transmit ﬁrst , second , . interleav effect convert burst loss seri smaller uniform loss across origin row , much easer handl given enough redund row . word , could toler rerasur error correct conceal . worth note interleav increas bandwidth overhead introduc addit delay . 17.3.3 error-resili code video stream either packet transmit packet-switch channel transmit continu bitstream circuit-switch channel , former popular nowaday . either case , obviou packet loss bit error reduc video qualiti . bit loss packet loss local video space time , loss still accept , sinc frame display short period , small error might go unnot . howev , digit video code techniqu involv variable-length code , frame code differ predict quantiz level . unfortun , packet contain variabl bit-length data ( dct coefﬁcient ) dam- age , error , unconstrain , propag way throughout stream.17.3 multimedia wireless channel 653 call loss decod synchron . even decod detect error due invalid code symbol coefﬁcient rang , still establish next point start decod [ 30 ] . learn chap . 10 , complet bitstream loss happen video code standard protocol layer . pictur layer group block ( gob ) layer slice header synchron marker enabl decod resynchron . exampl , h.263 bitstream four layers—th pictur layer , gob layer , macroblock layer , block layer . pictur layer start uniqu 22-bit pictur start code ( psc ) . longest entropy-cod symbolposs 13 bit , psc serv synchron marker well . gob layer provid synchron block rather entir frame . group block start code ( gbsc ) 17 bit long also serv synchron marker . 2the macroblock block layer contain uniqu start code , deem high overhead . slice mode itu standard h.261 ( i.e. , h.263 266 ) support slice-structur mode insteadof gob ( see , exampl , h.263 annex k ) , slice group block togetheraccord block ’ code bit length rather number block . object space slice header within known distanc . way , bitstream error look like synchron marker , marker whereth slice header discard , fals resynchron occur . sinc slice need group integr number macroblock togeth , mac- roblock code use vlc , possibl slice size.howev , minimum distanc next scan macroblock ad new slice . know dc coefﬁcient macroblock motion vector macroblock differenti code . therefor , macroblock dam- age decod locat next synchron marker , might still abl decod stream . allevi problem , slice also reset spatial predict paramet ; differen- tial code across slice boundari permit . iso mpeg standard ( h.264 well ) specifi slice requir similar bit length sodo protect fals marker well . synchron loss , note error predict refer frame caus much damag signal qualiti error frame use forpredict . , frame error i-fram deterior qualiti video stream frame error p- b-frame . similarli , video scalabl , error base layer deterior qualiti video stream inenhanc layer . 2synchron marker alway larger minimum requir , case bit error chang bit look like synchron markers.654 17 multimedia wireless mobil network revers variabl length code ( rvlc ) anoth use tool address loss decod synchron revers vari- abl length code ( rvlc ) [ 31,32 ] . rvlc make instantan decod possibl forward backward direct . conventioanl vlc , single- bit error caus continu error reconstruct data even biterror happen . word , inform carri remain correct bit becom useless . decod revers direct , inform could recov . anoth potenti use rvlc random access acod stream . abil decod search two direct halv amount index overhead averag search time compar standard one-direct vlc . rvlc , howev , must satisfi preﬁx condit instantan forward decod ( seen chap . 7 ) also sufﬁx condit instantan backward decod . , code word must coincid sufﬁx longer code word . convent vlc , say , huffman code , satisﬁ preﬁx condit decod left right . exampl , consid symbol distribut tabl 17.2 . input acdbc , huffman code bit stream ( c 1in tabl 17.2 ) 10010011101 , decod instantan backward direct ( right left ) last twobit 10 might either symbol “ c ” sufﬁx “ d. ” ensur preﬁx sufﬁx condit , use vlc compos entir symmetr code word , e.g. , second column ( c 2 ) tabl 17.2 . symmetr code clearli revers , bit stream form revers . exampl , acdbc code 0010101011101 , uniqu decod direct . compar huffman code ( averag code lengthof 2 .21 ) , symmetr rvlc slightli longer averag code length ( 2 .44 ) . efﬁcient asymmetr rvlc also systemat construct ( c 3in tabl ) , averag code length 2 .37 . though still higher huffman code , overhead accept given potenti beneﬁt bi-direct decod . rvlc use mpeg-4 part 3 . help synchron , data partit scheme mpeg-4 group separ header inform , motion vector , dct coefﬁcient differ packet put synchron markersbetween . scheme also beneﬁci unequ protect . tabl 17.2 huffman code ( c1 ) , symmetr rvlc ( c2 ) , asymmetr rvlc ( c3 ) symbol probabl c1 c2 c3 0.32 10 00 11 b 0.32 11 11 10 c 0.15 01 101 01 0.13 001 010 000 e 0.08 000 0110 0010017.3 multimedia wireless channel 655 addit , adapt intra-fram refresh mode allow , mac- roblock code independ frame inter-or intra-block accord motion , assist error conceal . faster-mov block requiremor frequent refreshing—that , code intra-mod often . synchroniza- tion marker easi recogn particularli well suit devic limit process power , cell phone mobil devic . interact applic , back channel avail encod , addit error control techniqu avail feedback inform . exampl , accord bandwidth avail moment , receiv canask sender lower increas video bitrat ( transmiss rate control ) , combat packet loss due congest . stream scalabl , ask enhanc layer well . annex n h.263+ also speciﬁ receiv notic damag refer frame request encod use differ refer frame prediction—a refer frame decod reconstructedcorrectli . unfortun , mani real-tim stream applic tight delay constraint multicast/broadcast scenario , backchannel receiv may avail . error-resili entropi code ( erec ) main purpos gob , slice , synchron marker re-establishsynchron decod soon possibl error . annex k ofh.263+ , use slice achiev better resili , sinc impos con- straint stream synchron . error-resili entropi code ( erec ) , achiev synchron everi singl macroblock , without overhead slice header gob header . take entropy-cod variable-length macroblock rearrang error-resili fashion . addit , provid grace degrad . erec take code bitstream block rearrang begin block ﬁxed distanc apart . although block ofani size media wish synchron , follow descript refer macroblock video . algorithm proce fig . 17.12 . initi , erec slot ( row ) ﬁxed bit-length alloc total bit-length equal ( exceed ) total bit-length macroblock . number slot equal number macroblock , except macroblock vari bit-length slot ﬁxed bit-length ( approxim equal averagebit-length macroblock ) . shown , last erec slot ( row ) shorter total number bit divid evenli number slot . letkb number macroblock , equal number slot , lbe total bit-length macroblock , mb [ ] macroblock , slot [ ] erec slot , procedur encod macroblock shown below.656 17 multimedia wireless mobil network macroblock erec slot fig . 17.12 exampl macroblock encod use erec procedur 17.1 ( macroblock encod use erec ) begin j=0 ; repeat l=0 { fori=0t k−1 { m= ( i+j ) mod k ; //mi macroblock number correspond slot ; shift mani bit possibl ( without overﬂow ) mb [ ] slot [ ] ; sb=number bit success shift slot [ ] ( without overﬂow ) ; l=l−sb ; } j=j+1 ; // shift macroblock downward } end macroblock shift correspond slot bit macroblock assign remain bit macroblock ’ ﬁt slot . , macroblock shift , procedur repeat . decod side work revers , addit requir detect macroblock read full . accomplish detect end macroblock dct coefﬁcient decod ( block end17.3 multimedia wireless channel 657 erec slot macroblock fig . 17.13 exampl macroblock decod use erec code ) . figur 17.13 show exampl decod process macroblock code use erec fig . 17.12 . transmiss order data slot row-major—that , ﬁrst data slot 0 sent , slot 1 , , left right . easi see techniqu resili error . matter damag , even begin macroblock , still know next macroblock starts—it ﬁxed distanc previou one . case , synchron marker use , gob layer slice necessari either ( although still might want restrict spatial propag error ) . macroblock code use data partit techniqu ( one mpeg-4 describ previou section ) also bitplan partit , error bitstream destroy less signiﬁc data receiv signiﬁc data . obviou chanc error propag greater bit end slot begin . averag , also reduc visual deterior nonpartit encod . achiev grace degrad worsen error condit . 17.3.4 error conceal despit effort minim occurr error signiﬁc , error still happen unless persist retransmiss , , howev , practic continu media delay constraint . residu error acoust visual annoy . error conceal techniqu introduc approxim lost data decod side , mitig neg audio visual impact.658 17 multimedia wireless mobil network error conceal techniqu appli spatial , tempor , frequenc domain , combin [ 33,34 ] . case video , techniqu use neigh- bore frame tempor neighbor macroblock spatial . transport streamcod interleav video packet , case burst packet loss , error one place , miss data estim neighbor- hood . error conceal necessari wireless audio/video commun , sinc error rate higher wire channel might even higher transmit appropri bit protect . moreov , error rate ﬂuctuat moreoften , depend variou mobil weather condit . decod error due miss wrong data receiv also notic devic limit resolut small screen size . especi true macroblock size remain larg , achiev encod efﬁcienc lower wireless bitrat . , summar common techniqu error conceal , particularli video [ 35 ] . deal lost macroblock simpl popular techniqu conceal use dct block damag motion vector receiv correctli . miss block coefﬁcient estim refer frame , assum predict error . sinc goal motion-compens video minim predict error , appropriateassumpt . miss block henc tempor mask use block refer frame . achiev even better result video scalabl . case , assum base layer receiv correctli contain motion vector base layer coefﬁcient import . , lost macroblock enhanc layer , use motion vector base layer , replac dctcoefﬁcient enhanc layer , decod usual . sinc coefﬁ- cient less import estim ( higher frequenc coefﬁcient ) , even estim accur due predict error , conceal moreeffect nonscal case . motion vector inform damag well , techniqu use motion vector estim use anoth conceal techniqu ( bediscuss next ) . estim motion vector good , visual qualiti video could inauspici . appli techniqu intra-fram , standard , mpeg-2 , also allow acquisit motion vector intra-cod frame ( i.e. , treat intra- well inter-fram ) . motion vector discard block error . combin tempor , spatial frequenc coher instead reli tempor coher motion vector , combineit spatial frequenc coher . rule estim missingblock coefﬁcient use receiv coefﬁcient neighbor block same17.3 multimedia wireless channel 659 frame , conceal error intra-fram frame damag motion vector inform . addit , combin predict use motion vector give us better approxim predict error block . miss block coefﬁcient estim spatial minim error smooth function deﬁn block neighbor block . simplic , smooth function chosen sum squar differ pairwiseneighbor pixel block . function unknown miss coefﬁcient . case motion inform avail , predict smooth ad object function minim , weight desir . simpl smooth measur deﬁn problem smooth edg well . attempt better increas order smooth criterion linear quadrat cubic . increas chanc hav- ing edg reconstruct smooth along edg direct . larger comput cost , use edge-adapt smooth method , wherebi theedg direct insid block ﬁrst determin , smooth permit across edg . smooth high-frequ coefﬁcient although human visual system sensit low frequenc , would bedisturb see checkerboard pattern belong . happen high-frequ coefﬁcient erron assign high valu . simplestremedi set high-frequ coefﬁcient 0 damag . frequenc neighbor block correl , possibl estim lost coefﬁcient frequenc domain directli . miss frequenc coef-ﬁcient block , estim valu use interpol frequenc coefﬁcient valu four neighbor block . applic higher fre- quenci imag regular pattern . unfortun usual case natur imag , time high coefﬁcient set 0 . tempor predict error block even less correl frequenc , thismethod appli intra-fram . estim lost motion vector loss motion vector prevent decod entir predict block , isimport estim motion vector well . easiest way estim lost motion vector set 0 . work well presenc littl motion . better estim obtain examin motion vector refer mac-roblock neighbor macroblock . assum motion also coher , reason take motion vector correspond macroblock refer- enc frame motion vector damag target block . similarli , assum object consist motion ﬁeld occupi one macroblock , motion vector damag block approxim an660 17 multimedia wireless mobil network interpol motion vector surround block receiv correctli . typic simpl interpol scheme weighted-averag median . also , spatial estim motion vector combin estimationfrom refer frame use weight sum . 17.4 mobil manag mobil anoth distinct featur wireless portabl devic . traditionaltcp/udp/ip network origin design commun ﬁxed end . mani issu need resolv support mobil , long research topic internet commun , particularli recent year number mobil termin dramat increas [ 36,37 ] . broad spectrum devic user mobil , term rang speed , asillustr fig . 17.14 . deep penetr modern wireless access made network connect anywher anytim realiti , urg network operators/administr todeploy mobil manag protocol ubiquit access . network operator/administr ’ view , network usual cover larg geograph area ( administr domain ) consist sever subnetwork . mobil user ina network broadli classiﬁ three categori : •micro-mobl ( intra-subnet mobil ) , movement within subnet . •macro-mobl ( intra-domain mobil ) , movement across differ sub- net within singl domain . •global mobil ( inter-domain mobil ) , movement across differ domain variou geograph region . fig . 17.14 real-world mobil rang mobil speed17.4 mobil manag 661 global mobil involv longer timescal , goal ensur mobil devic re-establish commun move rather provid continu- ou connect . earli studi mobil ip address simpl scenario ofglob mobil comput unplug network , transport anoth network , replug . support modern wireless mobil network , 4g/5g wi-fi , mobil much frequent complexpattern . therefor import ensur continu seamless connect micro- macro-mobl , togeth secur authent , authoriza- tion , account . short timescal call joint effort across multiplelay . complic stream media applic expect un-interrupt data transfer movement . avoid interrupt commun , handoff ( also known handov ) manag requir , mobil termin keep connect activ move one network access point anoth . anoth import functionneed support mobil locat manag , track locat mobil termin , provid popular location-bas servic search nearbi user media content relat locat interest . 17.4.1 network layer mobil ip start discuss mobil manag network layer supportfor global mobil . wide use protocol purpos mobil ip , whose initi version develop ietf 1996 . ietf releas mobil ipv4 ( rfc3220 ) mobil ipv6 ( rfc6275 ) standard 2002 2011 , respect . certain differ detail , overal architectur thehigh-level design similar version . key support offer mobil ip assign mobil host two ip address : ahom address ( hoa ) repres ﬁxed address mobil node ( mn ) acare-of-address ( coa ) chang ip subnet mn current attach . mobil node home agent ( ha ) home network , acquir hoa . mobil ipv4 , foreign network mn current attach foreign agent ( fa ) , replac access router ( ar ) mobil ipv6 . mobil node obtain coa current fa ar . mobil node mn home network , act like ﬁxed node network special mobil ip featur . move home network foreign network , follow step follow ( see fig.17.15 ) : 1 . mn obtain coa inform ha new address send registr request messag ha . 2 . ha , upon receiv messag , shall repli mn registr repli messag . ha keep bind record mn , transpar- ent correspond node ( cn ) intend commun mn.662 17 multimedia wireless mobil network fig . 17.15 oper mobil ip fig . 17.16 h ed ap hi n mobil ip 3 . packet cn mn arriv home network , ha intercept packet . 4 . ha forward fa tunnel encapsul origin packet ( hoa header ) packet coa header . fa receiv tunnel packet , remov extra header deliv mn . 5 . mn wish send data back cn , packet sent directli mn destin sinc cn ’ ip address known mn . data path mobil ip illustr fig . 17.16 . simpl implement involv mn , ha , cn caus triangular rout , , commun mn cn go ha use tunnel . quit efﬁcient mn cn close ; extrem case , mn cn network ha far away . allevi triangular rout , cn also keep map mobil ’ hoa coa , accordingli send packet mobil directli , without go ha . case , mobil node must updat coa cn well.17.4 mobil manag 663 even rout optim , mobil ip still introduc signiﬁc network overhead term increas delay , packet loss , signal mn chang point attach network frequent number mn growsdramat . hierarch mobil ip ( hmip ) ( rfc 4140 ) simpl extens improv perform use mobil anchor point ( map ) handl movement mn local region . mn , support hmip , obtain region coa ( rcoa ) regist ha current coa ; rcoa locat mobil mobil ip , also region identiﬁ use hmip . time , mn obtain local coa ( lcoa ) subnet attach . move within region , mn updat map map rcoa lcoa . reduc burden ha reduc frequenc updat . shorter delay mn map also improv respons time . 17.4.2 link-lay handoff manag link layer handoff handov occur mobil devic chang radiochannel minim interfer access point base station ( call intra-cel handoff ) move adjac cell ( call intercel handoff ) . exampl , gsm , strong interfer , frequenc time slot chang mobil devic , remain attach base station transceiv . intercel handoff , two type implement , name , hard handoff andsoft handoff . hard handoff illustr fig . 17.17 , hard handoff trigger signal strength exist bs perceiv mn move cell threshold connect new bs . mn occupi one channel time : thechannel sourc cell releas channel target cell engag . henc , connect sourc broken connect target made . reason , hard handoff also refer break make . minim impact event , oper short caus almost user-percept disrupt session . earli analog system , could heard click short beep ; modern digit system , generallyunnotic . implement hard handoff rel simpl hardwar need capabl receiv two channel parallel . gsm , decisioni done bs mobil ’ assist , report signal strength back bs . bs also know avail channel nearbi cell inform exchang . network decid necessari mobil tohand , assign new channel time slot mobil , inform bs mobil change.664 17 multimedia wireless mobil network fig . 17.17 illustr hard handoff . handoff , mobil node connect bs-a , signal strength becom weaker move toward bs-b . certain time signal strength bs-b threshold ( bs-a becom weak ) , hard handoff decis made , connect bs-a ﬁrst broken connect bs-b establish ongo session howev temporarili disrupt hard handoff fail . reestablish need , may notic user sometim could fail , caus session termin abnorm . also mobil stay base station , bounc back forth , caus undesir ping-pong phenomenon . soft handoff soft handoff , channel sourc cell retain use parallel channel target cell . case , connect target establish connect sourc broken . interv , two connect use parallel , may brief substanti . reason soft handoff also refer make break , perceiv network engin state call , rather instant event hard handoff . one advantag soft handoff connect sourc cell broken reliabl connect target cell establish , therefor chanc call termin abnorm due fail handoff lower . soft handoff may involv use connect two cells— connect three , four cell maintain time ; best channel use call given moment signal combin produc clearer copi signal . sinc fade interfer differ channel necessarili correl , probabl take place moment channel low . thu , reliabl connect becom higher . soft handoff permit smooth handoff critic continu media data ﬂow . advantag come cost complex hardwar softwar devic , must capabl receiv process sever channel parallel . realiz cdma wcdma differ transmission17.4 mobil manag 665 code differ physic channel , 4g 5g . 5g , 0m interrupt time achiev use intra-cel beam mobil addition/releas small cell dual connect oper , wherebi simultan connect sourcecel target cell maintain [ 38 ] . vertic handoff interest complex handoff differ type network , known vertic handoff [ 39 ] . typic exampl wi-fi cellular network , former cheaper fast latter broader ubiquit coverag . switch therefor combin advantag [ 40 ] . typic vertic handoff consist three step , name , system discoveri , hand- decis , handoff execut . discoveri phase , mobil termin determin network use . network may also advertis sup-port data rate qo paramet . decis phase , mobil termin determin whether connect continu use current network switch target network . decis may depend variou parame- ter metric includ type applic ( e.g. , convers one-way stream ) , minimum bandwidth delay requir applic , trans-mit power , user ’ prefer . execut phase , connect mobil termin rerout exist network target network seamless manner . 3g network support multimedia transmiss bitrat 384 kbp fast mobil 2 mbp slow mobil ; 4g 5g achiev even higher rate 100 mbp 1 gbp , respect . 5g also massiv amount antennasand limit network coverag due higher radio channel attenu . enabl smooth vertic handoff , besid mobil solut data link network layer , addit support transport applic layer cross-layeroptim also need . exampl , transport layer applic layer awar potenti handoff , prefetch could execut bs target cell , avoid potenti servic interrupt , thu enablingcontinu stream . addit , softwar deﬁn network ( sdn ) network function virtual ( nfv ) adopt 5g , potenti also investig . 17.5 explor rappaport [ 1 ] , goldsmith [ 2 ] , tse viswanath [ 3 ] offer comprehens in-depth tutori foundat wireless commun . wang et al . [ 33 ] g v e in-depth discuss error control video commun . recent advanc wi-fi standard found wi-fi allianc ’ websit www.wi-ﬁ.org , cellular network standard found 3gpp ’ websit www.3gpp.org .666 17 multimedia wireless mobil network 17.6 exercis 1 . implement tdma system gsm , fdma technolog still use divid alloc carrier spectrum smaller channel . necessari ? 2 . consid hard handoff soft handoff mobil termin move across cell . ( ) soft handoff possibl cdma ? possibl tdma fdma ? ( b ) type handoff work better multimedia stream ? 3 . identifi key technolog drive bandwidth expans 2g 5g . besid bandwidth expans , advantag brought 5g beneﬁt multimedia applic . 4 . scheme channel alloc discuss chapter ﬁxed ( uniform ) channel assign scheme . possibl design dynam channel alloc scheme improv perform cellular network . suggest sucha dynam channel alloc scheme . 5 . gilbert-elliot two-stat markov model wide use simul character wireless error , illustr fig . 17.2 . ( ) given state transit probabl p 00 , p11 , p10 , p01 , calcul steady- state probabl p0and p1that wireless channel state 0 state 1 , respect . ( b ) write simpl program simul process . run long enough time calcul averag length error burst . discuss would affect multimedia data transmiss . 6 . consid wireless network whose signal decay dramat , i.e. , within network rang , signal strength alway high enough . howev , signal block physic barrier . network hidden terminalproblem ? brieﬂi explain answer . 7 . discuss relationship 5g wi-fi 6 respect use case multimedia applic . 8 . today ’ network , transport layer link layer implement error detec- tion mechan . still need error detect link layer given transport layer protocol , say tcp , assum lower layer networki unreli seek guarante reliabl data transfer use error detect retransmiss ? hint : consid perform gain . 9 . discuss error detect correct capabl two-dimension pariti check . 10 . calcul internet checksum follow messag : 10101101 01100001 10001000 11000001 . 11 . consid cyclic redund check ( crc ) .17.6 exercis 667 ( ) assum keyword , k , 1001 , messag mi 10101110 . width ( bit ) crc bit , r ? valu r ? pleas give detail calcul . ( b ) prove m·2r⊕ri perfectli divis k , verifi use , k , rvalu . 12 . discuss interleav increas delay decod ? interleav effect loss uniformli distribut ? 13 . rvlc use h.263+/mpeg-4 beyond , allow decod stream forward backward direct synchron marker . ( ) decod direct prefer ? ( b ) beneﬁci transmiss wireless channel ? ( c ) condit necessari code revers decod ? two set code revers : ( 00 , 01 , 11 , 1010 , 10010 ) ( 00 , 01 , 10 , 111 , 110 ) ? ( ) rvlc usual appli motion vector ? 14 . suggest two error conceal method audio stream wireless chan- nel . 15 . broad spectrum devic user mobil , term rang speed , illustr fig . 17.14 . discuss challeng differ mobil scenario , potenti solut . 16 . allevi triangular rout , cn also keep map mobil ’ hoa coa , accordingli encapsul packet mobil directli , without go ha . ( ) scenario direct rout solut work best ? ( b ) discuss potenti problem direct rout solut . ( c ) propos anoth solut address triangular rout problem . dis- cuss pro con . refer 1 . t. . rappaport , wireless commun : principl practic , 2nd edn . ( pearson educa- tion , 2010 ) 2 . a. goldsmith , wireless commun . ( cambridg univers press , 2005 ) 3 . d. tse , p . viswanath , fundament wireless commun . ( cambridg univers press , 2005 ) 4 . h.-s. wang , n. moayeri , finite-st markov channel—a use model radio communica- tion channel . v eh . technol . ieee tran . 44 ( 1 ) , 163–171 ( 1995 ) 5 . e.n . gilbert , capac burst-nois channel . bell syst . tech . j . ( 1960 ) 6 . m. rahnema , overview gsm system protocol architectur . ieee commun . mag . 92– 100 ( 1993 ) 668 17 multimedia wireless mobil network 7 . a.j . viterbi , cdma : principl spread spectrum commun . ( addison wesley long- man , 1995 ) 8 . m.2134–requir relat technic perform imt-advanc radio inter- face ( ) . technic report , itu-r ( 2008 ) 9 . . technolog , m. rumney , lte evolut 4g wireless : design measur challeng . ( wiley , 2013 ) 10 . m. baker , lte-advanc futur . commun . mag . ieee 50 ( 2 ) , 116–120 ( 2012 ) 11 . c. zhang , s.l . ariyavisitakul , m. tao , lte-advanc 4g wireless commun [ guest editori ] . commun . mag . ieee 50 , 102–103 ( 2012 ) 12 . c. wang , f. haider , x. gao , x. ou , . yang , d. uan , h.m. aggoun , h. haa , s. fletcher , e. hepsaydir , cellular architectur key technolog 5g wireless commun networks.iee commun . mag . 52 ( 2 ) , 122–130 ( 2014 ) . februari 13 . 5g-ppp . 5g vision : next gener commun network servic . european commiss white paper ( 2015 ) 14 . m. agiw , a. roy , n. saxena , next gener 5g wireless network : comprehens survey . ieee commun . surv . tutor . 18 ( 3 ) , 1617–1655 ( 2016 ) 15 . q. bi , ten trend cellular industri outlook 6g . ieee commun . mag . 57 ( 12 ) , 31–36 ( 2019 ) . decemb 16 . p . rost , c. mannweil , d. . michalopoulo , c. sartori , v . sciancalepor , n. sastri , o. holland , s. tayad , b. han , d. bega , d. aziz , h. bakker , network slice enabl scalabl andﬂex 5g mobil network . ieee commun . mag . 55 ( 5 ) , 72–79 ( 2017 ) . may 17 . h. zhang , n. liu , x. chu , k. long , a. aghvami , v .c.m . leung , network slice base 5g futur mobil network : mobil , resourc manag , challeng . ieee commun.mag . 55 ( 8 ) , 138–145 ( 2017 ) . aug 18 . j. ordonez-lucena , p . ameigeira , d. lopez , j.j. ramos-munoz , j. lorca , j. folgueira , network slice 5g sdn/nfv : concept , architectur , challeng . ieee commun . mag.55 ( 5 ) , 80–87 ( 2017 ) . may 19 . j. burkhardt , et al. , pervas comput : technolog architectur mobil internet applic . ( addison wesley profession , 2002 ) 20 . e. perahia , r. stacey , next gener wireless lan : 802.11n 802.11ac . ( cambridg univers press , 2013 ) 21 . l. hart . introduct bluetooth , 2nd edn . ( altho , 2009 ) 22 . s. naderiparizi , m. hessar , v . talla , s. gollakota , j.r. smith , toward battery-fre hd video stream , proceed 15th usenix confer network system design implement , nsdi ’ 18 , pp . 233–247 . ( usa , usenix associ , 2018 ) 23 . g. dimopoulo , i. leontiadi , p . barlet-ro , k. papagiannaki , p . steenkist , identifi root caus video stream issu mobil devic , proceed 11th acm confer emerg network experi technolog , conext ’ 15 . ( acm , new ork , ny , usa , 2015 ) 24 . third gener partnership project 2 ( 3gpp2 ) . video conferenc services—stag 1 . 3ggp2 speciﬁc , s.r0022 ( 2000 ) 25 . third gener partnership project ( 3gpp ) . qo speech multimedia codec . 3gpp speciﬁc , tr-26.912 ( 2000 ) 26 . a. houghton , error code engin . ( kluwer academ publish , 2001 ) 27 . t.k . moon , error correct code : mathemat method algorithm . ( wiley- intersci , 2005 ) 28 . j.f . kuros , k.w . ross , comput network : top-down approach , 7th edn . ( pearson , new ork , 2016 ) 29 . e.k . wesel , wireless multimedia commun : network video , voic , data . ( addison-wesley , 1998 ) 30 . k.n . ngan , c.w . yap , k.t . tan , video code wireless commun system ( marcel dekker inc , new ork , 2001 ) 31 . . takishima , m. wada , h. murakami , revers variabl length code . ieee tran . commun . 43 ( 2–4 ) , 158–162 ( 1995 ) refer 669 32 . c.w . tsai , j.l . wu , construct huffman-code-bas revers variable-length code . ieee tran . commun . 49 ( 9 ) , 1506–1509 ( 2001 ) 33 . . wang , j. ostermann , .q . zhang , video process commun . ( prentic hall , 2002 ) 34 . m. usman , x . , m. xu , k.m . lam , survey error conceal techniqu : research direc- tion open issu , 2015 pictur code symposium ( pc ) , pp . 233–238 ( 2015 ) 35 . . wang , q.f . zhu , error control conceal video commun : review . proc . ieee 86 ( 5 ) , 974–997 ( 1998 ) 36 . d. le , f. xiaom , d. hogref , review mobil support paradigm internet . commun . surv . tutor . ieee 8 ( 1 ) , 38–51 ( 2006 ) 37 . d. saha , a. mukherje , i. . misra , m. chakraborti , mobil support ip : survey relat protocol . netw . ieee 18 ( 6 ) , 34–40 ( 2004 ) 38 . m. tayyab , x. gelabert , r. jäntti , survey handov manag : lte nr . ieee access 7 , 118907–118930 ( 2019 ) 39 . j. mcnair , f. zhu , v ertic handoff fourth-gener multinetwork environ . wirel . commun . ieee 11 ( 3 ) , 8–15 ( 2004 ) 40 . j. sommer , p . barford , cell versu wifi : perform metro area mobil connect , inproceed 2012 acm confer internet measur confer , imc ’ 12 , pp . 301–314 . ( acm , new ork , ny , usa , 2012 ) 18cloud comput multimedia servic emerg cloud comput [ 1 ] dramat chang servic mod- el modern comput applic . util elast resourc power datacent , enabl end user conveni access comput infrastructur , plat- form , softwar provid remot cloud provid ( e.g. , amazon , googl , microsoft ) pay-as-you-go manner long-term leas contract . thisnew gener comput paradigm , offer reliabl , elast cost-effect resourc provis , signiﬁcantli mitig overhead enterpris con- struct maintain comput , storag , network infrastructur . hasprovid countless new opportun new exist applic . exist applic , content share ﬁle synchron media stream , experienc leap forward term system efﬁcienc usabilitythrough leverag cloud comput platform . advanc mainli come exploit cloud ’ massiv resourc elast provis price smart comput ofﬂoad . hand , start-up compani easili implement novel idea real product minimum invest initi stage expand systemscal without much effort later . repres dropbox , typic cloud storag ﬁle synchron servic provid , , begin , reli amazon ’ s3 cloud server ﬁle storag use amazon ’ ec2 cloudinst provid key function synchron collabor among differ user . exampl includ crowdsourc livecast servic , twitch.tv ( later integr amazon ’ platform ) , ultra short video share servic , tik tok ( use byted ’ cloud platform ) . also seen new gener multimedia servic cloud-bas v od game emerg market activ chang whole busi model years.a promin exampl netﬂix , major internet stream video provid , start migrat infrastructur amazon ’ cloud platform 2008 , take around © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_18671672 18 cloud comput multimedia servic 10 year till 2018 complet elimin infrastructur . sinc becom one import cloud user . total , netﬂix 1 petabyt media data store amazon ’ cloud . pay byte bandwidth storag resourc , long-term cost becom much lower over-provis self-own server . also embrac googl cloud certain workload , mostli focus around intellig user behavior analysi . convent cloud comput paradigm , end user remot cloud data center connect internet , typic incur delay hundred-millisecond level . accept mani time-crit applications.ther also bandwidth cost data privaci concern long haul internet transmiss . , edg comput , push function cloud network edg closer end user , gain tremend interest recent year becom integr part modern cloud 5g system . serverless comput , new execut model cloud applic , ofﬂoad task server provis manag ﬁne granular . serverless platform , develop need break applic code collect stateless function set event trigger execut ; platform responsiblefor handl everi trigger scale precis size workload low overhead fast respons , quit suitabl bursti multimedia workload . chapter , provid overview cloud comput , focus impact multimedia servic . discuss multimedia content share cloud storag multimedia comput ofﬂoad cloud . use cloud game case studi examin role cloud new gener interactivemultimedia servic . also discuss recent advanc edg comput serverless comput . 18.1 cloud comput overview cloud comput reli share resourc achiev coher economi scale similar util network , like electr grid . illus-tr fig . 18.1 , cloud user run applic power server cluster offer cloud servic provid , system develop softwar read- ili deploy insid cloud , mitig user ’ burden full instal andcontinu upgrad local hardware/softwar . cloud user also store data cloud instead devic , make ubiquit data access possibl . foundat cloud comput broader concept resourc virtual- izat share . focus maxim util aggreg physic resourc , cloud resourc share multipl user dynam on-demandalloc . exampl , cloud serv european user busi hour , set resourc later use north american user busi hour . user see dedic virtual space . cloud servic public orpriv . public cloud , servic infrastructur provid off-sit public internet . cloud offer the18.1 cloud comput overview 673 fig . 18.1 conceptu overview cloud comput greatest level efﬁcienc resourc share ; howev , less secur vulner privat cloud . unlik public cloud , privat cloud , servic infrastructur maintain privat network . cloud offer greatest level secur control , though requir compani still purchas maintain softwar infrastructur . either case , common set essenti characterist cloud comput , identiﬁ nation institut standard technolog ( nist ) [ 2 ] : on-demand self-servic . user unilater provis comput capabil- iti ( e.g. , server time network storag ) need without human interact servic provid ; resourc pool rapid elast . provid ’ resourc pool serv multipl user , differ physic virtual resourc dynam assign reassign accord user demand . cloud user , resourc avail provis often appear unlimit appropri quantiti time ; measur servic . cloud system automat control optim resourc use leverag meter capabl abstract level appropri type servic ( e.g. , storag , process , bandwidth , activ user account ) . resourc usag monitor , control , report , provid transpar provid user ; broad network access . persist qualiti network access avail accommod heterogen client platform ( e.g. , mobil phone , tablet , laptop , workstat ) . market , cloud servic mostli offer data center power server cluster three fundament model ( see fig . 18.2 ) : infrastructur servic ( iaa ) , platform servic ( paa ) , softwar servic ( saa ) , iaa basic higher model abstract detail lower model . network servic ( naa ) commun servic ( caa ) have674 18 cloud comput multimedia servic fig . 18.2 illustr cloud servic model recent ad part basic cloud comput model , enabl telecommunication-centr cloud ecosystem . infrastructur servic ( iaa ) iaa basic essenti cloud servic . well-known exampl iaa includ infrastructur vendor environ amazon ’ elast comput cloud ( ec2 ) , allow user rent virtual machin run applic , cloud storag servic amazon ’ simpl storag servic ( s3 ) , allow user store retriev data , time , anywher web . gener , iaa provid offer pool comput resourc , form physic machin , often , virtual machin ( vm ) , well resourc , e.g. , virtual-machin disk imag librari , data block ﬁle-bas storag , ﬁrewal , load balanc , ip address , virtual local area network , softwar bundl . wide-area connect , user use either public internet dedic virtual privat network . deploy applic , cloud user instal operating-system imag applic softwar cloud infrastructur . machin virtual , iaa cloud provid support larg number user pool hardwar softwar , scale servic accord user ’ vari requir . cloud provid typic bill iaa servic util comput basi , cost reﬂect amount resourc alloc consum . virtual system must ensur vm given fair secur access underli hardwar . state-of-the- art virtual system , often achiev use softwar modul known hypervisor , work arbit vm ’ virtual devic underli physic devic [ 3 ] . use hypervisor bring mani advantag , devic share , perform isol , secur run vm . consult hypervisor time vm make privileg call , howev , introduc consider overhead as18.1 cloud comput overview 675 hypervisor must brought onlin process request . self-contain vm also incur substanti resourc overhead slow creation , vm run os . recent , light-weight container-bas virtual [ 4–6 ] , e.g. , docker , advoc cloud-bas video servic netﬂix . contain hold compon necessari run desir softwar , includ ﬁle , environmentvari , depend , librari . host os constrain contain ’ access physic resourc , cpu , storag , memori , singl contain consum host ’ physic resourc . use contain also facilitatesth migrat servic abstract monolith tomicroservic [ 6,7 ] . instead implement whole , microservic implement function- aliti commun microservic language- platform- agnost api . enabl much ﬁner-grain control cloud applic product oper . platform servic ( paa ) paa deliv develop environ servic , typic includ theoper system , program languag execut environ , databas , webserv , etc . applic built ran paa provid ’ infrastructur deliv end user via internet . , cost complex purchas manag underli hardwar softwar layer begreatli reduc . moreov , underli comput storag resourc scale automat match applic ’ demand . googl ’ app engin typic exampl paa . besid iaa , microsoft azur also support paa thatallow develop use softwar develop kit ( .net , node.j , php , python , java , rubi , etc . ) azur devop creat deploy applic . softwar servic ( saa ) saa , probabl wide use cloud servic model date , allow appli- cation run infrastructur platform offer cloud rather thanon local hardware/softwar . , user applic heavili invest server , softwar , licens , etc . saa usual price usag basi , monthli yearli ﬂat fee per user . price scalabl andadjust user ad remov point . saa greatli reduc oper cost outsourc hardwar softwar mainten support cloud provid . enabl busi reallocateit oper cost away hardware/softwar spend personnel expens , toward meet goal . besid cost save simpliﬁ mainten support user ’ side , cloud applic also enjoy superior scalabl , whichcan achiev clone task onto multipl virtual machin runtim meet chang work demand . load balanc distribut workload vir-676 18 cloud comput multimedia servic tual machin . yet transpar cloud user , see virtual machin alloc . googl app microsoft ofﬁc 365 typic exam- ple saa . matter fact , fourth quarter ﬁscal year 2017 , ofﬁce365 revenu overtook convent licens sale ﬁrst time . figur 18.2 illustr relat among differ cloud servic model , partic- ularli term abstract , control , ﬂexibl level . amazon play lead role develop cloud comput modern data center . 2006 , amazon initi new product develop effort provid cloud comput extern custom , launch amazon web servic ( aw ) util comput basi , sinc becom one wide use cloud comput platform . 2019 , aw compris 165 servic span wide rang includ comput , storag , network , databas , analyt , applic servic , well deploy , manag , develop tool . next examin two repres servic provid amazon ’ aw , name , s3 storag ec2 comput , wide use support multimedia servic . 18.1.1 repres storag servic : amazon s3 cloud storag advantag always-on , user access ﬁle devic share ﬁle other may access contentat arbitrari time . advanc storag manag , cloud storag also provid much higher level reliabl local storag , yet compar lower cost . critic media share , one demand storageservic . amazon ’ s3 provid web servic interfac use store retriev amount data , time , anywher web . give develop access highli scalabl , reliabl , secur , fast , inexpens infrastructur amazon use run global network web site . servic aim tomaxim beneﬁt scale pass beneﬁt develop end user . end , s3 intent built minim featur set simpl oper . s3 user write , read , delet object contain 1 byte 5 terabyt data . object store bucket retriev via uniqu , developer-assign key . bucket store one sever region . s3 user choos region optim latenc , minim cost , address regulatori requir . 2019 , distinct oper 22 geograph region : 7 north america , 1 south america , 5 europ africa , 1 middle-east , and8 asia paciﬁc . object store region never leav unless transfer , , like cdn rout , network map use rout request . figur 18.3 show exampl data object store us west ( oregon ) region.18.1 cloud comput overview 677 fig . 18.3 exampl data object store amazon aw region ( us west ) tabl 18.1 sampl storag price us east region ( year 2020 ) standard storag intellig tier ( per gb ) glacier storag ( per gb ) first 50 tb/month $ 0.023 per gb $ 0.023 $ 0.004 next 450 tb/month $ 0.022 per gb $ 0.022 $ 0.004 500 tb/month $ 0.021 per gb $ 0.021 $ 0.004 infrequ access/month– $ 0.0125 $ 0.004 s3 built ﬂexibl protocol function layer easili ad . default download protocol http . bittorr protocol interfac also provid lower cost large-scal distribut . data store amazon s3 secur default ; bucket object owner access s3 resourc creat . support multipl access control mechan , well encrypt secur transit secur storag disk . increas durabl , synchron store data across multipl facil , calcul checksum network trafﬁc detect corrupt data packet store retriev data . unlik tradit storag system requir labori data veriﬁc manual repair , s3 perform regular , systemat data integr check built automat self-heal . s3 also automat archiv object even lower cost storag option per- form recur delet , reduc cost object ’ lifetim . cost monitor control user s3 api manag consol . tabl 18.1 show sampl current price plan s3 services.678 18 cloud comput multimedia servic 18.1.2 repres comput servic : amazon ec2 amazon ’ elast comput cloud ( ec2 ) web servic provid resiz comput capac cloud . present virtual comput environ , allow- ing user launch instanc varieti oper system , load custom applic environ , manag network access permiss . dif-fer instanc provis plan avail meet user ’ demand : on-demand instanc : on-demand instanc let user pay comput capac- iti hour long-term commit . free user cost andcomplex plan , purchas , maintain hardware/softwar trans- form commonli larg ﬁxed cost much smaller variabl cost . also remov need buy safeti net capac handl period trafﬁc spike ; reserv instanc : reserv instanc give user option make one- time payment instanc want reserv turn receiv signiﬁcantdiscount hourli charg instanc . three reserv instanc type : light , medium , heavi util reserv , enabl user bal- anc amount pay upfront effect hourli price . reserv instanc marketplac also avail , provid user opportun sell instanc need chang ( exampl , want move instanc new aw region , chang new instanc type , sell capac project end beforeth reserv term expir ) ; spot instanc : spot instanc allow user bid unus ec2 capac run instanc long bid exce current spot price . spot pricechang period base suppli demand , user whose bid meet exceed price gain access avail instanc . user ﬂexibl applic run , use spot instanc signiﬁcantli lower cost . ec2 user choic multipl instanc type , oper system , softwar packag . select conﬁgur memori , cpu , instanc storag , optim boot partit size optim speciﬁc choic applic oper system , e.g. , linux distribut microsoft window server . user also increas decreas capac within minut , complet con-trol instanc root access . moreov , achiev reliabl , replac instanc rapidli predict commiss . region , current servic level agreement commit 99.95 % avail . instanc creation conﬁgur done simpl web servic interfac , illustr fig . 18.4 . user ﬁrst select pre-conﬁgur amazon machin imag ( ami ) templat boot run immedi ( step 1 ) ; creat ami contain applic , librari , data , associ conﬁgur set . user choos expect instanc type ( ) ( step 2 3 ) , attach storag , set network secur requir , start , termin , andmonitor instanc use web servic api varieti manag tool . secur network access also conﬁgur instanc . design use aw modul , ec2 work seamlessli conjunct amazon s3 , amazon servic relat databas servic ( rd ) , simpledb simpl queue servic ( sq ) provid complet solution18.1 cloud comput overview 679 fig . 18.4 key step creat amazon ec2 instance680 18 cloud comput multimedia servic fig . 18.5 relat among differ compon amazon web servic ( aw ) fig . 18.6 relat among amazon s3 , ec2 , elast block store ( eb ) . eb offer storag volum 1 gb 1 tb mount devic ec2 instanc , persist storag enabl s3 comput , queri process storag across wide rang applic , fig . 18.5 illustr . speciﬁc , ec2 instanc attach storag amazon elast block store ( eb ) , provid block level storag volum 1 gb 1 tb . eb provid abil creat point-in-tim snapshot volum , store s3 long-term durabl , fig . 18.6 illustrates.18.2 multimedia cloud comput 681 18.2 multimedia cloud comput multimedia applic servic internet , strong demand cloud comput , due massiv storag comput requir serv million wire internet mobil network user . new multimedia cloud comput paradigm [ 8 ] , user store process multimedia data cloud distribut manner , elimin full instal media applic softwar local comput devic . multimedia cloud comput share mani common characterist general- purpos cloud comput . yet multimedia servic highli heterogen . exist wide array type media associ servic , voic ip , video conferenc , photo share edit , imag search , image-bas render , name ; cloud support differ type media servic massiv user base simultan . besid servic heterogen , differ type devic , smart tv , pc , smartphon , differ capabl multimedia process . cloud adapt capabl ﬁt type devic , term cpu graphic process unit ( gpu ) , display , memori , storag . multimedia cloud also provid qo provis meet distinct qo requir . two way provid qo provis multime-dia : one add qo current cloud-comput infrastructur add qo middlewar cloud infrastructur multimedia applic . former focus design improv within cloudinfrastructur . latter focus improv cloud qo middl layer , qo transport layer qo map cloud infrastructur media applic . summari , heavi demand multimedia data access , process , trans- mission would creat bottleneck general-purpos cloud . today ’ cloud design larg focus alloc comput storag resourc utility- like mechan , qo requir term bandwidth , delay , jitter yet address . realiz multimedia cloud comput , synergi thecloud multimedia servic becom necessari ; , multimedia-awar cloud comput enhanc qo support multimedia applic servic , andcloud-awar multimedia facilit content storag , process , adapt , render , cloud optim resourc util [ 8 ] , fig . 18.7 illustr . 18.3 multimedia content share cloud ﬁrst consid use cloud media share servic . seen previou chapter , repres media share servic outub develop extrem fast . gener , difﬁcult imposs predict impact develop new servic advanc . provis ofresourc thu great challeng , servic novel idea , advanc techniqu , smart market strategi possibl grow similar scale as682 18 cloud comput multimedia servic fig . 18.7 modul relat multimedia cloud comput outub . yet high possibl fail , lose revenu even shut . develop face dilemma earli stage media share servic . one hand , provis larg enough resourc begin costli riski , servic popular expect gain enough revenu , resourc would wast . hand , start servic small usual come scalabl issu . new featur increas user base put high pressur insufﬁci infrastructur , downgrad qualiti servic . cloud , offer reliabl , elast , cost-effect resourc provis “ pay-as-you-go ” servic , clearli eleg solut , allow design start servic small easi scale larg . besid start servic thecloud , migrat move content cloud beneﬁci well exist media servic , presenc scalabl challeng . share essenti part cloud servic . request easi scalabl share main reason multimedia content occupi larg portion cloud storag space . always-on central data center make one-to- mani share highli efﬁcient synchronous—upload content readilyshar larg popul instantli late . share cloud ( edg ) could also offer better qo given connect data center gener good , mention ﬁrewal network address translat ( na ) traversalproblem commonli encount peer-to-p share . figur 18.8 show gener framework facilit migrat exist live media stream servic cloud-assist solut . divid two layer , name , cloud layer user layer . cloud layer consist live media sourc dynam leas cloud server edg . upon receiv user ’ ssubscript request , cloud layer redirect user properli selected18.3 multimedia content share cloud 683 fig . 18.8 gener framework migrat live media stream servic cloud cloud server . redirect , howev , transpar user , i.e. , whole cloud layer deem singl sourc server user ’ perspect . sinc user demand chang time , also location-depend , cloud layer accordingli adjust amount locat distribut leas server edg . intuit , leas server resourc upon demand increas peak time , termin leas upon decreas . implement user layer ﬂexibl . individu user pure reli cloud layer , serv peer-to-p cdn infrastructur , seek extra assist cloud load surg . word , smoothli migrat divers exist live stream system cloud . , howev , number critic theoret practic issu address gener framework . though cloud servic improv , given hardwar , softwar , network limit , latenc resourc provis remain exist , e.g. , start termin virtual machin take minut current amazon ec2 implement . latenc gradual reduc improv cloud/edg design , hardli elimin . therefor , system must well predict leas new server meet chang demand termin server minim leas cost . done demand forecast algorithm cloud user [ 9 ] .684 18 cloud comput multimedia servic 18.3.1 impact global larger , dynam , non-uniform client popul aggrav prob- lem . make even wors , today ’ media share servic becom highli global , subscrib world . global make user behavior demand even divers dynam . consid user demand distribut pptv , popular live media stream system multi- million subscrib [ 10,11 ] . figur 18.9 show distribut two repres channel ( cctv3 dragonbal ) one day . easi see attract user world , peak time therefor shift region region , depend timezon . exampl , cctv3 channel , peak time north america around 20:00 , asian user , around 8:00 . period 12:00 20:00 , asian user low demand , fig . 18.9 illustr user demand distribut variat popular live media stream system ( pptv ) two typic channel ( cctv3 dragonbal ) . eas comparison , user demand normal correspond maximum demand day . time shown x-axi base est span slightli one day , begin night ﬁrst day20:00 0:00 4:00 8:00 12:00 16:00 20:00unidentifiedafricaasiaaustraliaeuropesouth americanorth america time ( est ) ( ) cctv-3 20:00 0:00 4:00 8:00 12:00 16:00 20:00unidentifiedafricaasiaaustraliaeuropesouth americanorth america time ( est ) ( b ) dragonball18.3 multimedia content share cloud 685 fig . 18.10 illustr cloudfront servic , number edg server geograph- ical distribut , serv nearbi cloud user european user gener demand north american user also moder demand . similar observ also found dragonbal channel , despit fact stream content deliv two channel complet differ . context , cloud , edg , content distribut network ( cdn ) integr serv user geo-distribut server . fact gener trend today ’ cloud develop beyond highli central data center . one exampl amazon ’ cloudfront , cloud-bas cdn integr aw . use network edg locat around world , cloudfront cach copi static content close viewer , lower latenc download object offer high , sustain data transfer rate need deliv larg popular object end user scale . request dynam content carri back origin server run aw , e.g. , s3 , optim network path ( see fig . 18.10 ) . network path constantli monitor amazon , connect cloudfront edg locat origin reus serv dynam content best possibl perform . 18.3.2 case studi : netﬂix one success migrat media share applic cloud netﬂix , take third us download internet trafﬁc peak trafﬁc hour . establish 1997 , netﬂix began move away origin core busi model mail dvd introduc video-on-demand via internet earli 2007 . origin netﬂix digit video distribut base larg oracl server java front end , dvd subscript main busi . later 2008 , suffer storag data corrupt bug took servic . rapidli increas scale creat anoth challeng , , howev , hardli predict build privat server cluster , mention staff skill need run larg high-growth-r data center infrastructur . sinc , netﬂix start use amazon ’ aw part servic , moved686 18 cloud comput multimedia servic fig . 18.11 netﬂix architectur cloud migrat . server ﬁnalli elimin 2018 entir technolog infrastructur aw 2012 . till 2018 , complet elimin server , includ user manag bill . support combin huge trafﬁc unpredict demand burst , netﬂix develop global video process system use aw cloud . figur 18.11 show architectur view cloud-bas netﬂix system , includ follow key modul : 1.content convers . netﬂix purchas master copi digit ﬁlm movi studio , use power ec2 cloud machin , convert 50 differ version differ video resolut audio qualiti , target divers array client video player run desktop comput , smartphon , even dvd/bluray player game consol connect televis ; 2.content storag . master copi mani convert copi store s3 . total , netﬂix 1 petabyt data store amazon ; servic distribut across three aw avail zone , even includ user registr credit card payment . serv worldwid user , data sent s3 content deliveri network ( cdn ) feed local isp . dynam adapt stream http ( dash ) avail stream edg end user differ demand version , format , bit rate . cdn use includ combin akamai , limelight , level 3 , etc. , replac openconnect , compani ’ proprietari cdn.18.3 multimedia content share cloud 687 fig . 18.12 servic integr netﬂix cloud modul figur 18.12 show differ function modul netﬂix relat cloud cdn . use amazon ’ cloud edg server , netﬂix react better faster user demand everi increas scale . pay byte comput , bandwidth storag resourc long-term cost becom much lower over-provis self-own server . cost , without cloud , pro- hibit high dedic content provid . recent , netﬂix approach contain microservic adopt alreadi cloud-n infrastructur [ 12 ] , achiev even lower overhead cost better respons . 18.4 multimedia comput ofﬂoad besid storag , comput anoth rich resourc offer cloud . mani computation-intens task migrat cloud , user maintain ultra expens high-perform server server cluster pay cost on-demand fashion . comput ofﬂoad effect expand usabl local devic beyond physic limit , particularli attract mobil devic [ 13– 15 ] . today ’ smartphon tablet increasingli penetr peopl ’ every- day life efﬁcient conveni tool commun entertain . touch screen kind sensor provid even richer user experi desk- top pc . despit fast develop key compon cpu , gpu , memori , wireless access technolog , effort toward unifi handheld desktop comput , remain wide agre mobil termin com- plete replac laptop desktop comput near futur . migrat popular pc softwar mobil platform develop similar substitut still conﬁn limit comput capabl well uniqu operat- ing system hardwar architectur . make even wors , batteri , power sourc mobil termin , seen rel slow improv in688 18 cloud comput multimedia servic past decad , becom major impedi provid reliabl sophist mobil applic meet user demand . combin strength cloud conveni mobil termin thu becom promis rout . exampl appl ’ siri service—aft piec voic record iphon , local recogn conduct speech recognit decid whether resort back end cloud make appropri response.oth exampl includ maui [ 16 ] clonecloud [ 17 ] . former enabl ﬁne- grain energy-awar ofﬂoad mobil code cloud base histori energi consumpt . achiev maximum energi save 90 , 45 , 27 % , andmaximum perform speedup roughli 9.5 , 1.5 , 2.5 face recognit , chess , video game , respect . clonecloud use function input ofﬂin model runtim cost dynam partit applic weak devic cloud . report speedup 14.05 , 21.2 , 12.43 viru scan , imag search , behavior proﬁl , respect . 18.4.1 requir comput ofﬂoad assembl local resourc remot cloud organ make ofﬂoad trans-par end user requir non-trivi effort [ 14,15 ] . first , motiv ofﬂoad . begin , major motiv ofﬂoad determin , save energi local , improv comput per- formanc , . serv guidelin high-level design . second , gain ofﬂoad . understand potenti gain ofﬂoad , proﬁl breakdown analysi applic need see whether applic beneﬁt ofﬂoad . incent resort cloudfor job easili efﬁcient execut local . third , decis ofﬂoad . ofﬂoad decis made static dynam . static ofﬂoad , relat paramet need accur esti- mate advanc , ofﬂoad strategi need decid develop applic . contrari , dynam ofﬂoad monitor runtim conditionsand make decis accordingli , expens higher overhead . multimedia applic , qo requir also import considera- tion . critic qo requir ( e.g. , latenc , image/video qualiti , computationaccuraci ) need respect ofﬂoad inﬂuenc user experi . simpl solut comput ofﬂoad move whole comput engin remot cloud , upload data requir comput thecloud download comput result . common mani implemen- tation , complex enterpris applic typic compos multipl servic compon , hardli migrat cloud one piec instanta-n . complic wireless commun mobil termin . compar wire counterpart , mobil termin gener moreresource-constrain ; particular , wireless commun capac bat- teri capac inher bottleneck [ 18,19 ] . energi trade-off heavily18.4 multimedia comput ofﬂoad 689 depend workload characterist , data commun pattern , technolo- gie use [ 20 ] , need care address . , ofﬂoad whole comput modul applic remot cloud necessari , effect , data volum larg . may sever problem user high-spe wire network connect , dramat reduc beneﬁt mobil user . 18.4.2 servic partit video process consid video encoding/compression/transcod , essenti task broad spec-trum mobil multimedia applic . local user use his/her mobil termin captur video real-tim , expect encod transcod video stream other real-tim well . directli upload raw video withoutefﬁci encod inevit lead high bandwidth cost larg transmiss energi consumpt . hand , video encod often incur heavi compu- tation , result high energi consumpt well . exampl , encodea video 5 ( 30 frame per second resolut 176 ×144 pixel depth 8 bit ) use h.264 encod need almost 1 ×10 10cpu cycl total [ 21 ] , 2×109cpu cycl per second averag , mean 2 ghz cpu requir real-tim encod . consid newest smartphon tablet equip high-deﬁnit camera , cpu workload 5–10 time higher exampl . ofﬂoad whole video compress task cloud , howev , prac- tical ident directli upload raw video data . wireless transmiss either costli simpli imposs limit bandwidth . iti known motion-estim computation-intens modul , account- ing almost 90 % comput . modul obvious focu ofﬂoad . yet simpl decoupl motion estim other given data depen- denci code , i.e. , motion estim frame depend data theprevi refer frame . mobil termin upload current video frame refer frame cloud estim download estim motion vector ( mv ) cloud complet remain video encod step ( e.g. , dct entropi code ) . mv small volum , upload current frame essenti make differ compar upload raw video . one solut use mesh-bas motion estim , partit frame coarse-grain mesh sketch estim one mv mesh node [ 22 ] . regular triangular rectangular mesh [ 23 ] commonli use given simplic , encod decod agre upon mesh structur advanc . unlik standard mesh-bas motion estim ( see [ 22 ] detail ) , need use revers mesh node select motion estim , mesh node aresampl p-frame mv calcul mesh node refer frame . illustr fig . 18.13 , set regular mesh node are690 18 cloud comput multimedia servic fig . 18.13 mesh-bas motion estim two frame , use regular mesh pre- dictiv frame sampl p-frame macroblock ( mb ) . sampl mesh node refer frame upload cloud . mv calcul cloud , result , sent back mobil termin , set mv describ movement mesh node . use design , computation- intens part mesh-bas motion estim ofﬂoad cloud , whileth local motion estim individu macroblock within mesh becom much simpler . compar standard mesh-bas motion estim , lose advantag track set mesh node success p-frame , yet savesmor data transmiss . summari , although tempt promis leverag much cheaper power resourc cloud , interact mobiletermin cloud need care examin avoid excess transmiss overhead . , partit tailor speciﬁc applic expect , exampl motion estim show . trade-off energi compu-t transmiss found mani applic reli comput ofﬂoad extend batteri lifetim . closed-loop design remot cloud also introduc extra delay mobil user cloud , pose anoth challeng interact applic discuss next . 18.5 interact cloud game recent , advanc cloud technolog expand allow ofﬂoad tradit comput also complex task high-deﬁnition3d render , turn idea cloud game realiti [ 24,25 ] . cloud game , simplest form , render interact game applic remot cloud stream scene video sequenc back internet theplay . cloud game player interact applic thin client , respons display video cloud render server well collect player ’ command send interact back cloud.18.5 interact cloud game 691 fig . 18.14 gener framework cloud game figur 18.14 show high level architectur view cloud game system thin client cloud-bas render . cloud game bring great beneﬁt expand user base vast number less-pow devic support thin client , particularli smart- phone tablet . , mobil user enjoy high-qual video game with- perform computation-intens imag render local . exampl , recommend system conﬁgur battleﬁeld 3 , popular ﬁrst-person shooter game , quad-cor cpu , 4 gb ram , 20 gb storag space , high-qual graphic card least 1gb ram . challeng mobil devic hardwar limit smaller size thermal control . further- , mobil devic differ hardware/softwar architectur pc , e.g. , arm rather x86 cpu ( often without gpu ) , lower memori frequenc bandwidth , limit batteri capac . , tradit consol game model alway feasibl devic , turn becom target cloud game . also mask discrep among differ oper system standard web develop tool html5 , flash , javascript . reduc custom support cost sinc comput hardwar cloud game provid ’ full control , offer better digit right manag ( drm ) sinc code directli execut custom ’ local devic . 18.5.1 workload delay cloud game shown fig . 18.14 , cloud game , player ’ command must sent internet thin client cloud game platform . commands692 18 cloud comput multimedia servic reach remot cloud , convert appropri in-gam action , interpret game logic chang game world . game world chang process cloud system ’ gpu render scene . renderedscen compress video encod , sent video stream modul , deliv video stream back thin client . final , thin client decod video display video frame player . ensur interact , serial oper must happen order millisecond . intuit , amount time , deﬁn interact delay , must kept short possibl order provid rich experi cloud game player . , howev , trade-off : shorter player ’ toler interact delay , less time system perform critic oper scene render video compress . also , lower time threshold , like higher network latenc neg affect player ’ experi interact . interact delay toler studi tradit game system found differ style gameshav differ threshold maximum toler delay [ 26 ] . tabl 18.2 summar maximum delay averag player toler qoe begin degrad [ 24 ] . gener rule , game play ﬁrst person perspec- tive , shooter game counter strike , becom notic less playabl action delay littl 100 ms . low delay toler ﬁrst person game tend action-bas , player higher delay tend disadvantag [ 27 ] . particular , outcom deﬁnit game chang action “ pull trigger ” ﬁrst extrem sensit delay action-bas ﬁrst person shooter ( fp ) game . third person game , role play game ( rpg ) , mani massiv multi-play game , world warcraft , often higher delay toler 500 ms . player ’ command game , e.g. , use item , cast spell , heal charact , gener execut player ’ avatar ; often invoc phase , chant magic word spell cast , henc player expect action instantan . actionsmust still regist time manner , sinc player becom frustrat interact delay caus neg outcom , e.g. , heal enemi attack still die command regist gamein time . tabl 18.2 delay toler tradit game exampl game type perspect delay threshold ( ms ) first person shooter ( fp ) first person 100 role play game ( rpg ) third person 500 real-tim strategi ( rt ) omnipres 1,00018.5 interact cloud game 693 last categori game play “ omnipres ” view , i.e. , top- view look mani control entiti . exampl real-tim strategi ( rt ) game like star craft simul game sim . delay 1,000 ms accept style game sinc player often control mani entiti issu mani individu command , often take sec- ond even minut complet . typic rt game , delay 1,000 msfor build unit action take minut hardli notic player . although much similar interact delay toler tradi- tional game cloud game , use stress follow critic distinc-t . first , tradit , interact delay issu multi-play onlin game system , gener consid singl player game . cloud game drastic chang : game render remot stream back player ’ thin client . , must concern interact delay even singl player game . also , tradit onlin game sys-tem often hide effect interact delay render action player ’ local system ever reach game server . exampl , player may instruct avatar move , immedi begin movement local ; howev , game server may receiv updat posit sever millisecond . sinc cloud game ofﬂoad render cloud , thin client longer abil hide interact delay player . visual cue mousecursor movement delay 1,000 ms , make impract expect player abl toler interact delay cloud game tradit game system . maximum interact delay gameshost cloud game context 200 ms. game , specif- ical action-bas game ﬁrst person shooter like requir less 100 ms interact delay order affect player ’ qoe . video stream encod cloud game ’ video stream requir quit similar live video stream- . cloud game live video stream must quickli encode/compress incom video distribut end user . case , small set recent video frame interest , need possibl accessfutur frame produc , impli encod must done respect frame . yet convent live video stream cloud game import differ- enc . first , compar live video stream , cloud game virtual capac buffer video frame client side . , player issu com- mand local thin client , command must travers internet cloud , process game logic , render process unit , compress video encod stream back player . given must done 100–200 ms , appar much margin buffer . livevideo stream hand afford buffer hundr millisecond even second littl loss qoe end user.694 18 cloud comput multimedia servic sensit real-tim encod need cloud game make choic video encod paramount import cloud game provid . h.264 265 advoc , high compress ratio ﬂexibl well stringent real-tim demand . 18.5.2 implement deploy onliv gaikai two industri pioneer cloud game . boost resource- limit user play game use exclus high-end pc game consol , seen great success multi-million user base acquir soni . sinc serv technolog foundat soni ’ cloud game playstat game system . gaikai implement use two public cloud , name amazon ec2 lime- light . figur 18.15 offer practic view gaikai ’ workﬂow . user select game gaikai ( step1 fig . 18.15 ) , ec2 virtual machin ﬁrst deliv gaikai game client user ( step2 ) . , forward ip address game proxi readi run select game user ( step3 ) . user select one game proxi run game ( step4 ) . game proxi start run game , game screen stream user via udp ( step5 step6 ) . multi-play onlin game , game proxi also forward user oper game server ( mostli deploy game compani ) send relat information/react back user ( step7 ) . onliv ’ workﬂow quit similar , implement privat cloud envi- ronment . use public cloud enabl lower implement cost higher scala- biliti ; yet privat cloud may offer better perform custom could fulli unleash potenti cloud game . fig . 18.15 workﬂow gaikai cloud game platform18.5 interact cloud game 695 0 50 100 150 200 250 300 local render onliv base onliv ( +10 ms ) onliv ( +20 ms ) onliv ( +50 ms ) onliv ( +75 ms ) millisecondsprocess timeinteract delay network rtt fig . 18.16 interact delay onliv tabl 18.3 process time cloud overhead measur process time ( ms ) cloud overhead ( ms ) local render 36.7 n/a onliv base 136.7 100.0 onliv ( +10 ms ) 143.3 106.7 onliv ( +20 ms ) 160.0 123.3 onliv ( +50 ms ) 160.0 123.3 onliv ( +75 ms ) 151.7 115.0 figur 18.16 show extra latenc brought onliv . exampl , onliv ( +20 ms ) indic extra 20 ms ad network delay , bring total 50 ms . local render copi averag interact delay approxim 37 ms , wherea onliv baselin take approxim four time longer 167 ms regist game action . expect , higher network latenc , interact delay increas . impress , onliv system manag keep interact delay 200 ms mani test . indic , mani style game , onliv could provid accept interact delay . howev , network latenc exce 50 ms , interact delay may begin hinder user ’ experi . also , even baselin latenc 30 ms , system could provid interact delay less 100 ms , expect threshold ﬁrst person shooter . tabl 18.3 give detail breakdown interact process cloud overhead . process time amount interact delay caus game logic , gpu render , video encod , etc ; , compon interact delay explain network latenc . cloud overhead delay caus core game logic network latenc , includ amount delay caus video encod stream system use onlive.696 18 cloud comput multimedia servic seen , cloud process add 100–120 ms delay onliv . better earlier studi show cloud overhead around 200 ms [ 28 ] , suggest cloud game technolog improv fast . hand , localrend game consol need less 37 ms . word , although cloud , power data center , princip power local consol , current implement efﬁcient . reach optim interactiondelay threshold , better implement term game logic , video encod stream softwar remain expect cloud game . interact path prolong large-scal multi-us game , global distribut user serv differ cloud data center . cloud provid , howev , often serv better network connect ( e.g. , near backbon network higher bandwidth ) even dedic high-spe net- work . cloud server smartli assign user client , latenc may chang much still accept . cloud game rapidli evolv technolog , mani excit possibl . besid softwar servic provid , hardwar manufactur also shown strong interest cloud game , begun work dedic hardwaresolut address promin issu fast concurr render encod game scene [ 29 ] . 2015 , nvidia offer geforc cloud- base game-stream servic . 2018 , googl unveil project stream , wasform announc 2019 game develop confer stadia . support cloud-bas gameplay 4k 60 fp futur plan scale 8k 120 fp . meantim , microsoft unveil project xcloud , aim incorpor microsoftazur cloud servic cloud game . soni also plan use azur part underli platform cloud game . 18.6 edg comput serverless comput multimedia see delay-sensit multimedia applic , aggregat- ing resourc central data center ideal solut cloud comput . recent effort toward ﬁne-grain resourc partit distribut includ edg comput ( geo-distribut ) serverless comput ( servic abstract ) . 18.6.1 mobil edg comput edg comput distribut comput paradigm expand cloud- comput paradigm bring comput data storag closer locat need , i.e. , network edg , improv respons time save bandwidth [ 30–32 ] . convent cdn ’ perspect , edg comput also view expans upgrad distribut storag node smart comput capabl . expans embrac mani today ’ cloud18.6 edg comput serverless comput multimedia 697 cdn servic provid , name aw iot greengrass , cloudfront , azur iot edg , akamai intellig edg , etc . typic edg node made three compon : 1.servic modul , includ contain run nativ third-parti servic local edg node ; 2.runtim , run manag servic modul deploy node ; 3.cloud interfac , offer connect , interact , collabor cloud data center . besid latenc trafﬁc reduct , run task edg also enhanc reliabl singl point failur . instanc , akamai ’ intelligentedg includ 250,000 edg server , deploy thousand locat around world , ingest 2.5 exabyt data per year interact 1.3 billion devic . moreov , easier user advoc cloud comput privaci ’ sperspect , sensit data retain local . edg comput particular import 5g multimedia applic [ 33 , 34 ] . even though 5g may reduc latenc 10 ms lower , end-to-end latenc cloud datacent signiﬁcantli longer data travers wire internet . seamlessli integr cloud fulli unleash potenti , process data network edg becom necess . concept mobil edg comput , also known multi-access edg com- pute ( mec ) , initi present european telecommun standard institut ( etsi ) 2015 , bring storag comput capabl cellular base station , run applic perform relat process task closer cellular custom , without upload download massiv amount ofdata public internet . mec special case gener edg comput paradigm mostli tie 5g network architectur ( see fig . 18.17 gener view 5g mec ) . consid key technolog architecturalconcept enabl evolut 5g . ultra-reli low-lat commun ( urllc ) applic espe- cialli beneﬁt mec , also combin network slice qosassur . exampl , assist edg server , augment realiti ( ar ) acceler time feedback help modifi live representa- tion world . video stream servic oper much efﬁcient giventh awar local network condit [ 35 ] . smart transport , connect autom car efﬁcient reliabl coordin car nearbi real time , particular , within coverag base station . upgrad base station natur offer cach capabl well . mmtc applic also beneﬁt mec , tini connect devic smart home smart citi easili access comput resourc edg remot cloud data center , term speed , cost , reliabl . sinc futur 6g standard target ultra high speed low latenc evensmal cell size , mec play import role well accommod vast amount ubiquit multimedia-empow devices.698 18 cloud comput multimedia servic fig . 18.17 architectur view mobil edg comput ( mec ) 18.6.2 serverless comput video process new execut model , serverless comput ofﬂoad task server provi- sion manag develop platform [ 36 ] . serverless platform , develop need break applic code collect stateless func- tion set event trigger execut . platform respons handl everi trigger scale precis size workload . light-weight vir- tualiz techniqu use serverless comput , repres container , enabl function instanc spin millisecond . serverless com- pute implement commerci offer open sourc project , aw lambda , googl cloud function ( gcf ) , apach openwhisk . charg user ﬁne-grain timescal ( e.g. , 100 ms ) , enabl truli “ pay-as-you- go ” price . given advantag scalabl , start-up delay , price , industri expert research academia great interest appli serverless comput multimedia process . exist studi shown potenti toward execut massiv parallel function speed video process [ 37 ] , amazon ’ practic . figur 18.18 plot perform transcod function deploy two repres serverless platform , name , amazon ’ aw lambda googl ’ gcf , one day period . figur 18.18 show i/o time variat aw lambda . increas memori size 1,024 2,048 mb improv download upload latenc much , indic larger memori size , cpu power bottleneck i/o task . figur 18.18 b plot variat total durat . memori size decreas , execut durat chang dramat . exampl , longest execut durat 512 mb ( 56,640 ms ) 1 .5 time much shortest execut durat ( 37,735 ms ) , increment even larger averag execut durat 2,048 mb ( 13,754 ms ) . figur 18.18 b plot cpu type vm host correspond function instanc . observ , differ cpu type correspond differ-18.6 edg comput serverless comput multimedia 699 40130220 00:00 06:00 12:00 18:00 24:00download ( ms ) 512mb 1024mb 2048mb 100300500 00:00 06:00 12:00 18:00 24:00upload ( ms ) time ( ) aw lambda i/o time.02468 00:00 06:00 12:00 18:00 24:00× 104durat ( ms ) time512mb 1024mb2048mb cpu # 1cpu # 2 cpu # 3 ( b ) aw lambda durat . 160260360 00:00 06:00 12:00 18:00 24:00download ( ms ) 512mb 1024mb 2048mb 160260360 00:00 06:00 12:00 18:00 24:00upload ( ms ) time ( c ) gcf i/o time.123456 00:00 06:00 12:00 18:00 24:00× 104durat ( ms ) time512mb 1024mb 2048mb ( ) gcf durat . fig . 18.18 chang execut time transcod function one day ent perform level . memori size less 1,152 mb , cpu type vm host lambda-mtcnn function instanc cpu # 2 ; cpu type vm cpu # 1 . clearli , inﬂuenc heterogen underli infrastructur perform ignor . figur 18.19 plot chang execut durat transcod task within one week . aw lambda , perform show drastic chang memori size decreas . chang show daili period pattern close relat heterogen underli infrastructur . impli schedul alloc vm random independ time . contrast , gcf exhibit stabl execut durat regardless memori size . summari , memori conﬁgur cost-efﬁci serverless function non-trivi [ 38 ] . best memori conﬁgur inﬂuenc task type even video content . also opportun combin edg comput . execut function code closer user improv respons speed , edg resourc usual limit compar data center . trade-off perform cost serverless edg comput import consideration.700 18 cloud comput multimedia servic fig . 18.19 transcod function execut durat chang within one week differ serverless platform 0204060 25/01 26/01 27/01 28/01 29/01 30/01 31/01 01/02durat ( ) aw lambda512mb 1024mb 2048mb 0204060 25/01 26/01 27/01 28/01 29/01 30/01 31/01 01/02durat ( ) gcf512mb 1024mb 2048mb 18.7 explor cloud edg comput remain new ﬁeld industri research com- muniti . mani relat materi found white paper major cloud edg comput provid amazon , googl , microsoft . 18.8 exercis 1 . discuss relat differ follow system : cloud , server cluster , content distribut network ( cdn ) , data center . 2 . consid cloud-bas video stream peer-to-p video stream ( ) , pro con ? ( b ) discuss possibl solut combin two . discuss beneﬁt hybrid design potenti issu . ( c ) discuss similar differ peer edg node edg comput use conjunct cloud . 3 . consid cloud-bas netﬂix video-on-demand ( v od ) servic . ( ) describ respect role amazon ec2 s3 netﬂix . ( b ) netﬂix upload master video cloud transcod . ’ netﬂix transcod video local upload cloud ? ( c ) netﬂix still need cdn servic beyond s3 ? ( ) role edg comput netﬂix ’ design.18.8 exercis 701 4 . alway beneﬁci ofﬂoad comput cloud ? list two applica- tion scenario simpl comput ofﬂoad may cost-effect , suggest possibl solut . 5 . question , tri quantifi cost save use cloud servic . without cloud , user purchas pc , say price $ x . valu machin depreci rate p % per month , valu v % , machin consid out-dat user purchas new machin . hand , use cloud , user ’ buy machin , leas cloud servic provid monthlyfe $ c. ( ) make cloud servic cost-effect , much provid set monthli leas fee $ cfor compar cloud machin instanc ? ( b ) real-world cost includ model , associ- ate either local machin cloud ? 6 . consid energi consumpt task local comput mobil termin ofﬂoad cloud . assum task need ccpu cycl comput . let mand sbe comput speed , cpu cycl per second , mobil termin cloud machin , respect . local comput mobil termin energi consumpt p mwatt , incur data exchang wireless interfac . ofﬂoad cloud , dbyte data exchang wireless interfac . assum network bandwidth bbp energi consumpt air interfac transmit receiv ptwatt . ( ) assum cpu mobil termin consum energi idl , wireless interfac termin . energyconsumpt mobil termin task execut local , ofﬂoad cloud ? note ’ consid energi consumpt cloud energi bottleneck interest mobil termin . ( b ) condit ofﬂoad cloud save energi ? ( c ) potenti beneﬁt comput ofﬂoad , condit ? 7 . besid cost energi save , list two advantag use cloud , compar build maintain local infrastructur . also list two disadvantag . 8 . consid cloud game , game scene render cloud stream back thin client . ( ) beneﬁt use cloud game ? ( b ) type game suitabl cloud game ? 702 18 cloud comput multimedia servic ( c ) discuss requir live video stream cloud game . similar ? special requir cloud game make difﬁcult ? ( ) suggest solut reduc delay cloud game . refer 1 . m. armbrust , . fox , r. grifﬁth , a.d. joseph , r. katz , a. konwinski , g. lee , d. patterson , a. rabkin , i. stoica , m. zaharia , view cloud comput . commun . acm 53 ( 4 ) , 50–58 ( 2010 ) . april 2 . p . mell , t. granc , nist deﬁnit cloud comput . technic report special publi- cation 800-145 , nation institut standard technolog ( nist ) ( 2011 ) 3 . p . barham , b. dragov , k. fraser , s. hand , t. harri , a. ho , r. neugebau , i. pratt , a. warﬁeld , xen art virtual . sigop oper . syst . rev . 37 ( 5 ) , 164–177 ( 2003 ) 4 . s. soltesz , h. pötzl , m.e . fiuczynski , a. bavier , l. peterson , container-bas oper system virtual : scalabl , high-perform altern hypervisor , proceed 2nd acm sigops/eurosi european confer comput system 2007 , eurosi ’ 07 , pp . 275—287 . ( acm , 2007 ) 5 . s. fu , j. liu , x. chu , . hu , toward standard interfac cloud provid : contain narrow waist . ieee internet comput . 20 ( 2 ) , 66–71 ( 2016 ) . march 6 . b. burn , b . grant , d. oppenheim , e. brewer , j. wilk , borg , omega , kubernet . commun . acm 59 ( 5 ) , 50–57 ( 2016 ) . april 7 . a. jindal , v . podolskiy , m. gerndt , perform model cloud microservic applic , inproceed acm/spec intern confer perform engin , icp ’ 19 , pp . 25—32 . ( acm , new ork , ny , usa , 2019 ) 8 . w. zhu , c. luo , j. wang , s. li , multimedia cloud comput . signal process . mag . ieee 28 ( 3 ) , 59–69 ( 2011 ) 9 . d. niu , z. liu , b. li , s. zhao , demand forecast perform predict peer-assist on-demand stream system , ieee infocom mini-confer ( 2011 ) 10 . . huang , t. fu , d. chiu , j. lui , c. huang , challeng , design analysi large-scal p2p-v od system , acm sigcomm ( 2008 ) 11 . k. xu , h. li , j. liu , w. zhu , w. wang , ppv : univers transpar peer-to-p accel- erat interact onlin video share , iwqo ( 2010 ) 12 . a. leung , a. spyker , t. bozarth , titu : introduc contain netﬂix cloud . queue 15 ( 5 ) , 53–77 ( 2017 ) . octob 13 . f. liu , p . shu , h. jin , l. ding , . jie , d. niu , b. li , gear resource-poor mobil devic power cloud : architectur , challeng , applic . wirel . commun . ieee 20 ( 3 ) , 14– 22 ( 2013 ) 14 . x. , . zhao , l. zhang , h. wang , l. peng , mobil termin meet cloud : compu- tation ofﬂoad bridg . netw . ieee 27 ( 5 ) , 28–33 ( 2013 ) 15 . k. kumar , l. ung-hsiang , cloud comput mobil user : ofﬂoad comput save energi ? ieee comput . 43 ( 4 ) , 51–56 ( 2010 ) . april 16 . e. cuervo , a. balasubramanian , d.-k. cho , a. wolman , s. saroiu , r. chandra , p . bahl , maui : make smartphon last longer code ofﬂoad , proceed 8th intern confer mobil system , applic , servic , mobisi ’ 10 , pp . 49–62 . ( acm , new ork , ny , usa , 2010 ) 17 . b.-g. chun , s. ihm , p . maniati , m. naik , a. patti , clonecloud : elast execut mobil devic cloud , proceed sixth confer comput system , eurosi ’ 11 , pp . 301–314 . ( acm , new ork , ny , usa , 2011 ) refer 703 18 . k. kumar , j. liu , l. ung-hsiang , b. bhargava , survey comput ofﬂoad mobil system . mob . netw . appl . 18 ( 1 ) , 129–140 ( 2013 ) 19 . h.t . dinh , c. lee , d. niyato , p . wang , survey mobil cloud comput : architectur , applic , approach . wirel . commun . mob . comput . pp . 1587–1611 ( 2011 ) 20 . a.p . miettinen , j.k. nurminen , energi efﬁcienc mobil client cloud comput , proceed 2nd usenix confer hot topic cloud comput , hotcloud ’ 10 . ( usenix associ , berkeley , ca , usa , 2010 ) 21 . n. imran , b.-c. seet , a.m. fong , compar analysi video codec multihop wireless video sensor network . multim . syst . 18 ( 5 ) , 373–389 ( 2012 ) 22 . . wang , j. ostermann , .-q . zhang , video process commun , v l .5 . ( p r e n c e hall , 2002 ) 23 . m. say , w. badawi , novel motion estim method mesh-bas video motion track- ing , ieee intern confer acoust , speech , signal process , 2004 . proceed ( icassp ’ 04 ) , vol . 3 , pp . 3–337 . ( ieee , 2004 ) 24 . m. jarschel , d. schlosser , s. scheur , t. hossfeld , evalu qoe cloud game base subject test , 2011 fifth intern confer innov mobil internet servic ubiquit comput ( imi ) , pp . 330–335 ( 2011 ) 25 . r. shea , j. liu , e.c.-h. ngai , . cui , cloud game : architectur perform . netw . ieee 27 ( 4 ) , 16–21 ( 2013 ) 26 . m. claypool , kajal claypool , latenc player action onlin game . commun . acm 49 ( 11 ) , 40–45 ( 2006 ) . novemb 27 . m. claypool , k. claypool , latenc kill : precis deadlin onlin game , pro- ceed first annual acm sigmm confer multimedia system , mmsi ’ 10 , pp . 215–222 . ( acm , new ork , ny , usa , 2010 ) 28 . k.-t. chen , .-c. chang , p .-h. tseng , c.-i . huang , c.-l. lei , measur latenc cloud game system , proceed 19th acm intern confer multimedia , mm ’ 11 , pp . 1269–1272 ( 2011 ) 29 . z. zhao , k. hwang , j. villeta , game cloud design virtual cpu/gpu server initi perform result , proceed 3rd workshop scientiﬁc cloud comput date , sciencecloud ’ 12 , pp . 23–30 . ( acm , new ork , ny , usa , 2012 ) 30 . w. shi , j. cao , q. zhang , . li , l. xu , edg comput : vision challeng . ieee internet thing j . 3 ( 5 ) , 637–646 ( 2016 ) 31 . c. li , . xue , j. wang , w. zhang , t. li , edge-ori comput paradigm : survey architectur design system manag . acm comput . surv . 51 ( 2 ) ( 2018 ) 32 . d. wang , . peng , x. , w. ding , h. jiang , f. chen , j. liu , adapt wireless video stream base edg comput : opportun approach . ieee tran . serv . comput . ( 2018 ) 33 . . mao , c. ou , j. zhang , k. huang , k.b . letaief , survey mobil edg comput : commun perspect . ieee commun . surv . tutor . 19 ( 4 ) , 2322–2358 ( 2017 ) 34 . n. abba , . zhang , a. taherkordi , t. skeie , mobil edg comput : survey . ieee internet thing j . 5 ( 1 ) , 450–465 ( 2018 ) . feb 35 . c. ge , n. wang , w.k . chai , h. hellwagn , qoe-assur 4k http live stream via transient segment hold mobil edg . ieee j. sel . area commun . ( jsac ) ( 2018 ) 36 . e. jona , q. pu , s. v enkataraman , i. stoica , b. recht , occupi cloud : distribut comput 99 % , proceed symposium cloud comput , socc ’ 17 , pp . 445–451 . ( acm , new ork , ny , usa , 2017 ) 37 . l. ao , l. izhikevich , g.m . v oelker , g. porter , sprocket : serverless video process frame- work , proceed acm symposium cloud comput , socc ’ 18 , pp . 263–274 . ( acm , new ork , ny , usa , 2018 ) 38 . m. zhang , . zhu , c. zhang , j. liu , video process serverless comput : measur studi , proceed 29th acm workshop network oper system support digit audio video , nossdav ’ 19 , pp . 61–66 . ( acm , 2019 ) part iv human-centr interact multimedia past decad wit explos new-gener social , mobil , cloud comput technolog multimedia process deliveri . rather passiv receiv media content web 1.0 era , web 2.0 user activ particip onlin commun media product share . popular web 2.0-base social media share servic outub , facebook , twitter , twitch , tiktok drastic chang content distribut landscap , inde becom integr part peopl ’ daili life . doubt , onlin servic futur focu user experi particip rich media rich interact . develop code algorithm hardwar sens , commu- nicat , interact also empow virtual realiti ( vr ) augment realiti ( ar ) , provid better immers experi beyond 3d . sheer amount user-gener content empow social media demand autom multimedia data analysi retriev , locat syntac- tical semant use content . call effect solut greatli extend tradit text-bas search , identifi redund even pirat content inde critic challeng manag media share servic . part examin challeng solut new gener human- centric interact multimedia web 2.0 era . chap . 19 , examin uniqu characterist social media share impact . chap . 20 , introduc basic concept augment realiti virtual realiti well applic . chapter 21further provid introduct multimedia content retriev includ deep learn approach.19onlin social media share onlin social media , group internet-bas applic build ideo- logic technolog foundat web 2.0 , allow creation exchangeof user-gener content [ 1 ] . servic combin rich graphic user inter- face ( gui ) multimedia content , enabl ubiquit content gener share scalabl commun . substanti chang waythat organ , commun , individu commun . two distinct char- acterist web 2.0 consid key factor success new gener social media [ 2 ] : collect intellig . base knowledg gener user web con- tribut content web . user becom content provid therefor content richer dynam . rich connect activ . user content link , creat organ growth connect activ . social network built connect enabl strong tie among user well broadand rapid content propag . mani type onlin social media servic , includ user-gener con- tent share ( e.g. , youtub ) , onlin social network ( e.g. , facebook ) , question- and-answ ( e.g. , quora ) , collaboratively-edit encyclopedia ( e.g. , wikipedia ) , name . social media servic , content , well user , becom interconnect , enabl conveni inform share feel , activ , locat inform , well resourc , blog , photo , video . pervas penetr wireless mobil network , advanc devel- opment smartphon tablet , massiv market mobil applic , social media content easili gener access time any- . youtub ’ report 2020 suggest 70 % view come © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_19707708 19 onlin social media share mobil . crowdsourc livecast servic , twitch , 2.2 million broadcast monthli 15 million daili activ user , around million averag concurr user , mobil video clip share app , tiktok , open itsu user eight time day averag daili usag 52 min . new trend social media creation , deploy , spread , far beyond convent media , brought numer well-known internet meme celebr nodoubt chang daili life . chapter , present overview rapidli evolv ﬁeld , particularli social media servic multimedia content share . ﬁrst look importantsoci media servic , name , user-gener media content share onlin social network . close examin youtub video share servic . discuss media object propag social network , user behavior share . also discuss novel servic crowdsourc livecast mobil video clip share . 19.1 repres social media servic present background two keyston social media share theirrepres implement . 19.1.1 user-gener content ( ugc ) arisen web publish new media content product circl , user- gener content ( ugc ) play key role today ’ social media servic . use wide rang applic differ type media , e.g. , text , music , pictur , video , well combin open sourc , free softwar , ﬂexibl licens relat agreement reduc barrier collabor , skill- build discoveri . content gener share , video data arguabl difﬁcult type media text pictur , given larges , high bandwidth demand , long playback durat . tradit video on-demand live stream servic , video offer enterpris content provid , store server , stream user . anumb new gener video share websit , repres youtub , offer user opportun make video directli access other , simpl oper web 2.0 embed share . establish 2005 , youtub far signiﬁc success video share websit . allow regist user upload video , mostli short video . user watch , emb , share , engag video easili . one fastestgrow websit internet , youtub serv 100 million video per day 2006 ; decemb 2013 , 1 billion uniqu user visit youtub month , 6 billion hour video watch month—that ’ almostan hour everi person earth , 100 hour new video upload everi minut . 2020 , monthli user youtub increas 2 billion,19.1 repres social media servic 709 visitor spend 11m 24 per day ; 500 hour new video upload everi minut , 70 % youtub view mobil . youtub also highli global [ 3 ] —it local 91 countri across 80 languag , 85 % trafﬁc come outsid us ( 80 % 2013 ) . fact , 33 % popular youtub video english . success similar site ( e.g. , vimeo tudou/youku ) conﬁrm massmarket interest ugc video share servic . youtub origin video-on-demand servic , start test live stream infrastructur , youtub live , 2010 . meantim , twitchemerg highli popular crowdsourc livecast servic , particularli video game live stream ( e.g. , individu gamecast esport competit ) , also music broadcast , creativ content , recent , “ real life ” stream . may 2018 , 2.2 million broadcast monthli 15 million daili activ user , around million averag concurr user . 19.1.2 onlin social network ( osn ) onlin social network ( osn ) provid internet-bas platform connectpeopl social relat , e.g. , friend , classmat , colleagu realworld , peopl simpli share common interest . facebook , found 2004 , one domin onlin social network servic internet . 2020 , facebook 2 .5 billion monthli activ user worldwid , 1 .66 billion log onto facebook daili basi . pro- vide user platform connect friend , updat statu , upload photo , comment “ like ” other ’ post , etc . facebook open apifor develop build thousand applic game , make enjoy . anoth import social network websit , twitter , repres microblog , simpler much faster version blog . allow user send text- base post , call tweet , 280 charact ( doubl 140 2017 ) . although short , tweet link richer content imag video . follow friend interest account , news provid , celebr , brand , organ , twitter user obtain real-tim notiﬁc , spread thepost retweet mechan . like facebook , twitter also open api , larg collect regist twitter applic avail , particularli mobil user , make twitter easier access . 2019 , 330 millionmonthli activ user 145 million daili activ user twitter . facebook twitter support share propag media object pictur , music , video among friend , although media contentmay host extern site , e.g. , youtub . nowaday 100 million hour facebook nativ video watch daili . twitter also offer vine servic earlier , , avail exclus mobil user , enabl creat andpost video clip . vine user creat short video clip six second long record vine ’ in-app camera . clip share through710 19 onlin social media share twitter , facebook , social network servic . vine later integr directli twitter , month discontinu , tiktok ( call douyin china ) releas , ad option duet , mean twodiffer tiktok creator may collabor differ time creat ﬁnal video . great success among young gener , hit one billion download global . 19.2 user-gener media content share social media greatli chang mechan content gener access , andalso bring unpreced challeng server network manag . under- stand distinct featur user-gener media content thu crucial trafﬁc engin sustain develop new gener ser-vic . close examin two repres , name , youtub on-demand video twitch livecast . 19.2.1 outub video format meta-data youtub ’ video playback technolog ﬁrst base adob ’ flash player , later migrat html5 video player , whose beneﬁt extend beyond web browser smart tv stream devic . youtub use h.263video codec earlier , introduc “ high qualiti ” format h.264 codec better view qualiti late 2008 , later ad open vp9 codec , give higher qualiti video resolut averag bandwidth reduct 35 % . 2015 , thesupport 4k resolut ad , 360 ◦video [ 4 ] . support 8k resolut ad 2017 , resolut 7,680 ×4,320 pixel . content gener upload video youtub mani format , convert sever standard format upload . well recogn use uniform easily-play format critic success youtub ( seefig.16.2 chap . 16for sampl list audio/video format offer youtub date ) . video stream youtub viewer done dynam adapt stream http ( mpeg-dash ) , webrtc also support . youtub assign video distinct 11-letter id compos charact 0-9 , a-z , a-z , - , _ . video contain follow intuit meta-data : video id , upload , datead , categori , length , number view , number rate , number comment , list relat video . relat video link video similar titl , descript , tag , chosenbi upload . youtub page show 20 relat video , display scroll list . typic exampl meta-data shown tabl 19.1 . note video year 2008 current 6 version 144 1080p , codec vp9 . said , format convers done lately.19.2 user-gener media content share 711 tabl 19.1 exampl meta-data video http : //www.youtube.com/watch ? v=yiqu4gp oa6k id yiqu4gpoa6k upload newageenlighten date ad august 08 , 2008 categori sport video length 270 number view 924 ,691 number rate 1,039 number comment 212 relat video ri1h2_jrvju , 0jdqlaqpouu , … 19.2.2 characterist outub video signiﬁc research effort aim understand workload tradit media server , exampl , video popular access local [ 5–7 ] . share similar characterist , mani video statist traditionalmedia server quit differ youtube-lik site , e.g. , video length distribut user access pattern . importantli , video gener movi tv program gener ordinari user , theyconnect social relat . video categori youtub , categori select user upload video . tabl 19.2 list number percentag categori sampl dataset 5 million video 1 .5-year span [ 8 ] . see distribut highli skew : popular categori “ entertain , ” 25 .4 % , second “ music , ” 24 .8 % . two categori video constitut half entir youtub video collect , suggest youtub mainli entertainment-likesit . “ unavail ” video set privat , video ﬂag inappropri content , crawler get meta inform youtub api . “ remov ” video delet upload , bya youtub moder ( due violat term use ) , still link video . video length length youtub video distinguish differ traditionalvideo content . tradit server contain signiﬁc portion long video , typi-712 19 onlin social media share tabl 19.2 sampl set youtub video categori rank categori count percentag ( % ) 1 entertain 1,304,724 25.4 2 music 1,274,825 24.8 3 comedi 449,652 8.7 4 peopl & blog 447,581 8.7 5 film & anim 442,109 8.6 6 sport 390,619 7.6 7 new & polit 186,753 3.6 8 auto & vehicl 169,883 3.3 9 howto & style 124,885 2.4 10 p e & n l 86,444 1.7 11 travel & event 82,068 1.6 12 educ 54,133 1.1 13 scienc & technolog 50,925 1.0 14 unavail 42,928 0.8 15 nonproﬁt & activ 16,925 0.3 16 game 10,182 0.2 17 remov 9,131 0.2 fig . 19.1 histogram cumul distribut ( cdf , solid line ) youtub video length 0 100 200 300 400 500 600 70001234x 104number video video length ( second ) 0 100 200 300 400 500 600 70000.250.50.751 cdf calli 1–2 hour movi ( e.g. , hplab media server [ 6 ] onlinetvrecord [ 7 ] ) . youtub , howev , mostli compris short video clip . although youtub increas initi 10-min length limit 15 min allow veriﬁ user upload video 12 hour 128 gb , user-gener video remain quit short natur . figur 19.1 show histogram cumul distribut function ( cdf ) youtub video ’ length within 700 , exhibit three peak . ﬁrst peak within one minut , contain 20 .0 % video , show youtub is19.2 user-gener media content share 713 fig . 19.2 length histogram cumul distribut four top categori 0 200 400 600entertain 0 200 400 600 0 200 400 600music 0 200 400 600 0 200 400 600comedi 0 200 400 600 0 200 400 600peopl & blog 0 200 400 600 primarili site short video . second peak 3 4 min , contain 17 .4 % video . shown fig . 19.2 , peak correspond video “ music ” categori , second popular categori youtub . third peak near maximum 10 min , earlier limit length upload video . figur 19.2 show video length distribut top four popular categori . “ entertain ” video similar distribut entir video . “ music ” video high peak three four minut ( 29 .1 % ) , typic length rang music tv . “ comedi ” “ peopl & blog ” video video within two minut ( 53 .1 % 41 .7 % , respect ) , like cor- respond “ highlight ” type clip . access pattern given ugc video length shorter two order magnitud compar tradit movi tv show , youtub ’ video content product signiﬁcantli faster less effort [ 9 ] . total number billion order , much higher tradit video servic ( e.g. , 412 hplab ’ media server [ 6 ] ) , number rapidli increas new user contribut . , scalabl challeng face youtube-lik social media servic inde signiﬁc . found 10 % top popular video account nearli 80 % view , indic youtub highli skew toward popular video . also impli proxi cach high hit ratio sinc small portion video request frequently.714 19 onlin social media share yet youtub user tend abort playback soon , 60 % video watch less 20 % durat , particularli true mobil user [ 10–12 ] . furthermor , 10 % video watch follow day [ 13 ] . , proxi cach , particular , preﬁx cach [ 14 ] , quit effect . closer examin classiﬁ youtub video top video , remov pirat video , random video also shown copyright video tend get view earlier , video top list tend experi sudden burst popular [ 15,16 ] . campu network , howev , top popular video contribut much total video view daili basi , probabl user closer relat share video [ 13 ] . point suggest youtub user ’ view behavior highli diversiﬁ , affect video qualiti ( tradit video share ) well social relat ( uniqu social media ) . 19.2.3 small-world outub video youtub promin social media servic : commun group inyoutub , thu video longer independ . socialnetwork uniqu new gener video share servic . shown , besid web search , trace relat video anoth top view sourc youtube-lik ugc site . strong correl number ofview video top relat video [ 16 ] , also provid divers video view , help user discov video interest rather popular video . small-world network phenomenon probabl interest charac- terist social network . milgram [ 17 ] initi studi small-world net- work investig phenomenon peopl link short chain acquaint ( a.k.a. , six degre separ ) . network possess character- istic random graph 1and regular graphs2 [ 19 ] . formal , given network graph g= ( v , e ) , cluster coefﬁcient c iof node i∈vi proport possibl edg neighbor node actual exist graph , cluster coefﬁcient graph , c ( g ) , averag cluster coefﬁcient node . characterist path length iof node i∈v averag minimum number hop take reach node vand characterist path length graph , ( g ) , averag characterist path length node . small-world network larg cluster coefﬁcient like regular graph , also small characterist path length like random graph . 1a random graph gener base certain probabl distribut . pure random graph , built accord erdös-rényi ( er ) model , exhibit small characterist path length ( vari typic logarithm number node ) along small cluster coefﬁcient [ 18 ] . 2a regular graph graph vertex degree.19.2 user-gener media content share 715 fig . 19.3 small-world characterist youtub video 10210310410510610700.050.10.150.20.250.30.350.4 dataset sizeclust coefficientyoutub network random graph ( ) cluster coef ﬁcient 10210310410510610705101520 dataset sizecharacterist path lengthyoutub network random graph ( b ) characterist path length graph topolog network youtub video measur use relat link youtub dataset form direct edg video graph . figur 19.3a show cluster coefﬁcient graph , function size dataset . cluster coefﬁcient quit high ( 0 .2 0 .3 ) , especi comparison random graph ( nearli 0 ) . slow decreas trend cluster coefﬁcient , show invers depend graph size , common small-world network [ 20 ] . figur 19.3b show characterist path length graph . seen averag diamet ( 10 15 ) slightli larger diamet random graph ( 4 8 ) , quit good consid still larg cluster coefﬁcient dataset . moreov , size graph increas , characterist path length decreas youtub video graph , increas random graph number node averag node degre . phenomena veriﬁ youtub graph small-world network.716 19 onlin social media share ( ) 1,000node ( b ) 4,000node fig . 19.4 two sampl graph youtub video link small-world characterist video graph also observ visual illustr ( see fig . 19.4 two repres 1,000 4,000 node ) . cluster behavior obviou two graph , due user-gener natur tag , titl , descript video use youtub ﬁnd relat one . result similar real-world user-gener graph exist , yet paramet quit differ . exampl , graph form url link world wide web exhibit much longer characterist path length 18 .59 [ 21 ] . like due larger number node ( 8 ×108in web ) , also indic youtub network video much closer group . 19.2.4 outub partner ’ view youtub display advertis webpag monet video , main sourc youtub ’ revenu . besid user-gener video , compani organ electron art , espn , warner brother also provid premium video youtub . accommod con- tent owner copyright video popular channel , youtub introduc ayoutub partner program , larg improv qualiti youtub video , increas youtub ’ revenu . 2020 , qualiﬁ youtub partner must reach threshold 1,000 subscrib 4,000 valid public watch hour last 12 month . statist video great potenti valu youtub partner . exampl , video popular ? extern websit refer- ring view ? partner leverag statist adapt content deploy user engag strategi . help youtub partner this19.2 user-gener media content share 717 fig . 19.5 youtub insight dashboard goal , youtub introduc insight analyt provid variou basic statist video channel . figur 19.5 give snapshot web-bas insight analyt dashboard . youtub user variou mean reach youtub video . last webpag viewer come call referr sourc . understand referr essenti youtub partner adapt user engag strategi . classifi referr sourc four categori [ 22 ] : suggest referr come youtub ’ relat video link ; video search referr come youtub search result , e.g. , googl ; youtub surf referr come youtub page ( except relat video link search result ) , includ anno-t link , youtub channel page , subscrib link , paid unpaid youtub promot , etc . ; 718 19 onlin social media share 35 % 31 % 16 % 11 % 7 % channel 29 % 37 % 12 % 11 % 12 % channel b 23 % 36 % 16 % 2 % 24 % channel c 26 % 34 % 6 % 15 % 19 % channel 13 % 51 % 7 % 10 % 19 % channel e suggest search surf social non−soci fig . 19.6 breakdown referr sourc social referr referr sourc link extern web page , video embed extern web page ; non-soci direct youtub analyt identifi referr sourc , indic viewer navig directli video , e.g. , copi past url . figur 19.6 show breakdown ﬁve categori four sampl channel . clear breakdown percentag channel-depend . exampl , one-third user reach channel video suggest video , one-third reach search result ; channel b channel similar channel ; user reach channel c video extern sourc ; half user reach channel e video search result . observ conﬁrm search result relat video ( suggest ) top sourc view [ 15,16 ] . although social referr top view sourc , impact extern websit referr simpli ignor . great chanc user , attract extern referr , watch video relat video list . word , social referr consid introduct referr . tabl 19.3 list top-ﬁv extern websit sourc channel . disclos speciﬁc name websit except notabl social network servic facebook , twitter , reddit , simpli use gener descript . seen tabl channel-depend . extern websit domin extern referr channel , small percentag indic great number sourc . channel e , 60 % the19.2 user-gener media content share 719 tabl 19.3 summari top extern websit referr channel channel b channel c 1st 9.0 % download site 16.2 % facebook 31.9 % game wiki 2nd 4.4 % facebook 2.2 % n/a 7.6 % facebook 3rd 2.6 % forum 1.5 % download site 5.3 % game blog 4th 1.7 % game site 1.2 % n/a 5.1 % game site 5th 1.5 % game site 0.9 % download site 3.7 % internet video site channel channel e 1st 41.2 % reddit 62.4 % facebook 2nd 9.9 % facebook 2.4 % music stream 3rd 4.7 % twitter 2.0 % music blog 4th 2.0 % blog 2.0 % twitter 5th 1.7 % entertain site1.6 % music blog referr facebook , 20 time greater second one . facebook also domin channel b , yet percentag high channel e . facebook second channel c channel , ﬁrst one high percentag . summari , youtub video share mani differ portal studi propag structur onlin social network later . 19.2.5 crowdsourc interact livecast crowdsourc livecast becom increasingli popular seen great success past year [ 23–26 ] . servic , numer amateur broadcast stream content viewer channel ; exampl includ twitch.tv,3 youtub gaming,4mixer,5inke.tv,6etc . besid watch live content , viewer interact broadcast viewer within channel . crowdcast market estim grow 70 billion 2021 ; facebook , peopl spend 3 ×longer time watch live stream compar content longer live . figur 19.7 show snapshot web interfac twitch . middl live stream window , collabor gener 4 distinct broadcasterplay play game mario . viewer follow channel , subscrib channel press button stream window . top right chat window , regist viewer well channel broadcasterscan post messag . 3http : //www.twitch.tv/ . 4http : //gaming.youtube.com/ . 5http : //www.mixer.com/ . 6http : //www.inke.cn/ .720 19 onlin social media share fig . 19.7 exampl twitch ’ web interfac compar profession video produc distributor ( e.g. , tv channel ) , crowdsourc broadcast geo-distribut highli heterogen term oftheir network/system conﬁgur therefor gener video qualiti . system also extrem dynam time , overal popul distribut viewer region . instanc , twitch live video content come contribut sourc 100 differ countri 150 differ resolut , share viewer world . although thetot number onlin viewer exceed 2 million , less 200 thousand day . number broadcast vari dramat well , mention termin live stream point time . , sourc stream ﬁrst need transcod differ bitrat deliv viewer . given rich interact viewer broadcast well diversiﬁ watch environments/prefer , view-er person qualiti experi ( qoe ) demand ( variou prefer stream delay , channel switch latenc , bitrat ) . consid viewer interact twitch dataset 300 channel three popular gamecast , name , cs : go , leagu legend ( lol ) , fifa . figur 19.8 compar daili averag viewer number interact mes- sage number channel three game . let ia-ratio deﬁn # ve.interact # ve.view . ratio fifa much larger cs : go , indi- cate viewer fifa channel activ frequent interact . figur 19.9 plot view interact pattern differ time period day two typic channel lol fifa . seen viewer interact number rel stabl lol channel , fifa channel , attract viewer rich interact prime time.19.2 user-gener media content share 721 fig . 19.8 distribut viewer number interact messag number channel three game 00.51.01.52.0 0 1.0 2.0 3.0x104 x104messag number viewer numbersc : go lol fifa15 fig . 19.9 averag view interact number differ time period day two gamecast channel 01.02.0 000204060810121416182022x103lolview messag 00.51.01.5 000204060810121416182022x104fifa hour dayview messag suggest watch prefer may vari differ time period and/or differ channel . final , consid interact messag number session four pop- ular channel , session deﬁn watch process viewer ’ join departur . illustr fig . 19.10 , distribut highli skew , 87 % session never gener messag 5 % session frequent messag ( 10 messag per view ) . viewer fre- quent interact gener prefer low stream delay commun broadcast activ viewer real time . contrast , silent viewer less involv sensit stream delay long video messag deliv [ 24 ] . summari , convent stream qoe deﬁnit consid bitrat , startup delay , rebuff fulli character interact experi viewer . instead , viewer qoe consist stream qoe , also interact qoe . latter affect whether stream interac- tion synchron , whether send interact time respond broadcast activ viewer [ 27 ] .722 19 onlin social media share fig . 19.10 cdf plot interact messag number session differ channel 0.850.90.951.0 100101102103104cdf messag numbersmus lol talk show fifa 19.3 media propag onlin social network new gener onlin social network ( osn ) servic , facebook twitter , directli connect peopl cascad relat , inform thu spread much faster extens convent web portal newsgroup servic , mention cumbersom email [ 28 ] . exampl , twitter ﬁrst report tiger wood ’ car crash 30 min cnn , invert convent 2.5-h delay onlin blog mainstream news report [ 29 ] . develop broadband access data compress , video becom import type object spread social network , beyond ear- lier simpl text imag object share [ 28,30 ] . yet video object , richer media , possess quit differ characterist . data volum perspect , video object gener much larger size type object ; henc , video fed extern host site , e.g. , youtub , spread url link ( togeth titl and/or thumbnail ) . matter fact , today ’ video share servic social network servic becom highli integr [ 31,32 ] . youtub enabl automat post facebook twitter base user ’ option , user also share interest video social network webpag . youtub ’ statist reveal 500 year youtub video watch everi day facebook , 700 youtub video share twitter minut . social- baker ’ report suggest facebook ’ nativ video even higher engag rate youtub link ( 0.22 % averag compar 0.10 % ) . social perspect , text diari photo often possess person informa- tion , video gener “ public. ” togeth shorter link , video often spread broadli text imag . yet sheer ever-increas data volum , broader coverag , longer access durat video object also present signiﬁc challeng compar type object , social network servic manag , also network trafﬁc engin resourc provis extern video sites.19.3 media propag onlin social network 723 100102104106100101102103104 ranknumb initi videosdata zipf ’ ( a=1.09 ) zipf ’ ( a=0.44 ) ( ) initi videos100102104106100101102103104 ranknumb share ( b ) share video fig . 19.11 rank distribut initi video share video 19.3.1 share pattern individu user sinc video object share involv propag osn access extern video site , two critic question answer . 1 . often user initi video share ? 2 . often user share video upon receiv ? initi trigger ﬁrst share video . found , one- week dataset 12 .8 million video share 115 million view event , 827 thousand initi record extract [ 33 ] . number small , 6 .5 % 12 .8 million share record . inde reﬂect pervas power video spread social network . rank distribut initi ( term number initi video ) plot fig . 19.11 . suggest user initi video , activ user initi remark number video . activ user inde initi two thousand video one week . zipf ’ law [ 34 ] usual use describ skew distribut , straight line logarithm scale . howev , data fig . 19.11 simpli ﬁtted one zipf line : data top-10 appear straight line , top-10 data clearli differ rest . yet roughli ﬁtted anoth zipf line . distinct suggest exist two possibl type user differ initi behavior : ( 1 ) initi ( 99 % ) initi video ; ( 2 ) set activ initi much friend also initi much larger number video . chang threshold 90 actual quit sharp , show clear distinct two type initi . activ initi serv hub draw much attent gener user worthi particular attent system optim . distribut number user ’ share shown fig . 19.11 b , indic extrem activ user share great number video , although user share small number video . are724 19 onlin social media share ( ) size= 1,093 , h e g h = 9 ( b ) size= 951 , height= 8 ( c ) size= 805 , height= 30 ( ) size= 126 , height= 23 fig . 19.12 illustr spread tree popular video also user watch one thousand video without share , like free-rid peer-to-p system . observ suggest user divers activ , roughli distinguish three type user . •spreader ( su ) , small number user initi lot video , also mani friend , hub-lik . spreader non-person account speciﬁc interest collect spread interest , funni , attract content , includ video ; also possibl spreader bot , spread video spam manner ; •free-rid ( fu ) , watch mani video without share , notic hinder video spread ; •ordinari user ( ou ) , sometim initi video , watch share video , share video watch . 19.3.2 video propag structur model figur 19.12 show visual exampl two typic propag structur : one type moder depth , limit branching—most branch directli sourc , branch , shown fig . 19.12 , b ; type19.3 media propag onlin social network 725 tabl 19.4 statist descript four video ( see fig . 19.12 ) size height view length ( ) categori descript 1093 9 34,531 123 new father pick daughter school helicopt 951 8 14,281 60 advt . earth hour promot video 805 30 12,658 306 music chariti singl “ children ” chines star 126 23 1,431 235 comedi funni lip sync video branch frequent differ level , branch long , shown fig . 19.12 c , ( root node enlarg better visual ) . tabl 19.4 list descript video ’ url , reveal content . see video propag path coverag highli divers , depend video content user watch share behavior . mani studi propag structur model mes- sage share onlin social network [ 28,35 ] . wide use model awar user ’ statu epidem model , describ transmiss communic diseas individu [ 36 ] . besid epidemiolog , also recent use model comput viru infect inform propag news rumor [ 37 ] . one classic epidem model sir model ( susceptible-infectious- recov ) , ﬁrst propos kermack mckendrick [ 38 ] . consid ﬁxed popul three compart : suscept ( ) , infecti ( ) , recov ( r ) . initi letter also repres number peopl compart particular time , , ( ) repres number individu yet infect ; ( ) repres number individu infect capabl spread diseas suscept categori ; r ( ) repres number individu infect recov . given transitionrateβfrom stoiandγfrom itor , follow equat deriv : ds dt=−βsi , di dt=βsi−γi , dr dt=γi natur map convent object share propag social network compart sir model . particular object , user social network suscept begin ; certain time , user access object infecti , indic abl infect other share object . recov choos share . yet video spread , map complet : 1 . user choos watch receiv video , like particip spread well . differenti user user rwho watch directli share video , categor user newcompart , immun ( im ) .726 19 onlin social media share fig . 19.13 susceptible- immune-infectious- recovered-perman ( si2rp ) model 2 . classic sir model , transit time-depend , i.e. , time , chanc stage transit next one . video spread social network , transit stage depend decis certain time . exampl , user need choos watch , share share . address problem , two temporari decis stage , d1and d2can introduc . 3 . necessari differenti user share video watch video . new compart , perman ( p ) , introduc , indic user share video , otherwis recov . enhanc si2rp ( susceptible-immune-infectious-recovered-perman ) model illustr fig . 19.13 . video propag process , initia- tor infecti begin . transit rate stod1isβ , thu suscept user spend 1 /β unit time receiv share video friend . user make decis whether watch video . user interest decid watch share , she/h consid immun . probabl user watch directli share video denot pv . user decid watch video , she/h becom infecti . transit rate itod2isγ , indic user spend 1 /γtime ﬁnish watch video . user make second decis , whether share video . user decid share , she/h becom recov perman otherwis . probabl user decid share video denot ps . transit rate βandγcan infer measur result , di , pv , psin model . four probabl distribut probabl character behavior differ type user , name , spreader ( su ) , ordinari user ( ou ) , free-rid ( fu ) .19.3 media propag onlin social network 727 •an su initi video share accord distribut di ( ou fu initi ) . •a user watch video share friend probabl pv , base recept rate . •after watch , su ou share video probabl ps , base share rate . 19.3.3 video watch share behavior found , social network share , compar stranger , friend haverel higher probabl reciproc visit . content upload friend , user like brows . user also activ view proﬁl leav comment , consequenti , latent interact cover widerrang friend visibl interact [ 39 ] . importantli , user will share resourc assist other close relat , natur lead collabor deliveri [ 40 ] . differ text imag instantli view , post video realli watch recipi click link . upon receiv video post , recipi ( friend follow ) three option : 1 . watch video , thu requir stream qualiti , startup latenc playback continu , satisﬁ . 2 . watch live video , download video expect watch later . 3 . show interest video . user want watch video later , she/h may share resourc upload ’ friend , either . coexist clearli make system design complic . speciﬁ- calli , exist two type friend interest post video , name , stream user andstorag user . stream user expect watch video immedi , storag user download watch video differ time , due toth presenc concurr event . stream user might stop watch ﬁnd video interest , even though video post friend . dynam willaffect data deliveri serv relay user . hand , storag user download video asynchron concern interest playback qualiti , start watch video . hencesuch user consid rel stabl . 19.4 mobil video clip share recent , rapid develop penetr mobil social network haveen new gener video share servic use smart mobil termin instantli captur share ultra-short video clip ( usual sever second ) .728 19 onlin social media share mani mobil app , e.g. , twitter ’ vine , instagram , snapchat , tiktok , name , incorpor multimedia servic seen great accept , particularli youth commun [ 11,12 ] . tiktok ( known douyin china ) becom 8th most-download app past decad . instant video clip servic directli consum smart-termin special design mobil interfac oper . expand social rela-t distinct oper mobil termin , particularli screen scroll , greatli increas amount video avail watch , meantim , shorten time focus individu video ten minut fewsecond [ 41 ] . 19.4.1 mobil interfac characterist tradit video share onlin social network servic , user need click view link one speciﬁc video , allow view one video time/click . user experi crucial mobil instant video clip share . instantvideo clip sever second long , therebi mobil user hardli toler long delay , would complet ruin view experi . mobil instant video clip share servic instead return playlist video clip usertouch screen view updat certain user , tag , channel . user scroll smartphone/tablet ’ screen , video clip seamlessli play gener list . scroll includ seri user gestur , typic click , drag ﬂing , speed , acceler , continu vari depend user ’ input . batch view impli mobil user watch consider amount instant video clip within playback time one convent video ( e.g. , youtub ) . relat new behavior passiv view . media content arrang order user limit control order playback . two video clip interest , separ playlist , user may download ( watch ) video clip . video particular interestar passiv watch , resourc download play consum . although lack common vcr control ( rewind fast forward ) , batch/pass view scroll effect approach success instant video clip playlist , enabl user ﬁnd interest content easili , acceler propag popular video . yet , handl properli , screen scroll may ruin view experi . worst case ( e.g. , down- load everi instant video clip poor cellular connect ) , viciou circl form : download skip video take networkresourc block download interest , turn forc user give watch target video scroll forward search interest videos.19.4 mobil video clip share 729 fig . 19.14 video popular 19.4.2 video clip popular mobil video clip share , number repost use evalu video popular . figur 19.14 plot number repost function rank video clip popular sampl 16 user channel , fig . 19.14 plot cumul proport total number repost versu percentil video clip . popular sampl video clip extrem skew : top 5 % video clip account 99 % repost . popular distribut differ gener video share servic show trend becom skew differ gener social media share ( youtub : 10–80 % ; osn : 2–90 % 5–95 % ; instant video clip : 2– 95 5–99 % ) . youtub result impli , origin , user ’ interest across video evenli distribut ( bias toward popular video ) ; peopl tend watch other watch , exagger osn introduc , user social group share common interest . top social network , ubiquit mobil access lead efﬁcient extens propag video clip . unpopular video clip move toward bottom playlist , user hardli see . contrari , popular video clip promot popular section , user easili reach post . becom popular , keep top playlist therebi access frequent . batch passiv view , process acceler exacerb . extrem skew suggest identifi popular video pre-fetch could beneﬁci . 19.4.3 lifespan propag figur 19.15 show averag daili number repost video clip creat . seen , averag number repost popular video clip monoton decreas day day . even mani popular video clip , they730 19 onlin social media share fig . 19.15 video lifespan propag popular ﬁrst day initi post get less less popular afterward . fast decay featur mobil instant video clip quit uniqu : youtub video also reach global peak immedi introduct system , decay much slowli , request new video publish osn gener experi two three day latenc reach peak valu , chang dynam seri unpredict burst [ 42 ] . figur 19.15 plot cdf activ lifespan popular video clip . show half popular video repost stay activ less 10 day . result quit differ relat observ tradit video share servic : youtub video still get view even one year sinc publish [ 9 ] . fast decay possibl explain mobil natur ubiquit : mobil user upload watch instant video clip time anywher , propag efﬁcient extens , thu reach peak immedi ; frequent video watch upload mobil user acceler fade exist instant video clip , even popular one . short lifespan fast decay impli popular content much dynam mobil v od video stream applic . intro- duce dilemma pre-fetch : one hand , would like cach mani video possibl provid smooth watch experi ; hand , cach video watch soon enough user , becom huge wast fetch , probabl ﬂush recent feed , chanc view . , neither simpl download-and-watch scheme naiv pre-fetching/cach scheme would work efﬁcient , smart adapt solut expect . importantli , must work well screen scroll , rich oper whose multipl factor , e.g. , speed/acceler , considered.19.5 explor 731 19.5 explor research social relat social graph human societi long histori , diseas propag epidemiolog [ 36,38 ] . onlin social media social network , howev , appear recent year still undergo rapid chang . research ﬁeld remain earli stage andmani excit topic explor [ 43 ] . 19.6 exercis 1 . find typic web 1.0 applic typic web 2.0 applic , discuss key differ . 2 . discuss key differ youtub video tradit movies/tv show . would affect content distribut ? 3 . youtub publish statist video onlin . recent one : •more 1.9 billion youtub user activ monthli •more 1 billion hour youtub video watch per day •more 500 hour video upload youtub everi minut •the major user end 25 44-year-old-ag group •youtub avail 90 countri , support 80 languag •mobil make 50 % youtub ’ global watch time . check latest statist estim monthli growth speed youtub . suggest reason make youtube-lik servic expand quickli andth potenti challeng therein . repeat two social media servic . 4 . beneﬁci place content social media servic one server ? , challeng place content multipl server ? 5 . discuss propag consumpt pattern multimedia content social network tool ’ familiar . 6 . given posit integ nand probabl valu 0 ≤p≤1 , erdös-rényi ( er ) random graph g ( n , p ) nvertic possibl edg probabl pof exist . import class random graph . ( ) write simpl program gener er random graph , calcul characterist path length cluster coefﬁcient . compar theyoutub video graph discuss earlier . ( b ) discuss whether graph form onlin social network , say graph facebook user account , random graph . hint : think aboutth way edg form . 7 . simpl model inform propag gossip . gossip , network node , upon receiv messag , randomli forward neighbor node probabl p.732 19 onlin social media share fig . 19.16 exampl tit-for-tat strategi segment 3 segment 1segment 1 ase bc segment 2 ( ) write simpl program simul gossip algorithm randomli gener network . node may delay ttime forward . discuss impact pandton coverag propag speed messag . ( b ) beneﬁci node differ valu p ? , provid guidelin select pfor node . ( c ) gossip suitabl model propag process pictur share real-world social network , say facebook ? video ? 8 . onlin social network , free rider consum video share video . free rider also exist peer-to-p ﬁle share : download data segment other , never upload . bittorr adopt tit-for-tat strategi solv incent problem , i.e. , get paid contribut . depict fig . 19.16 , peer , b , c download differ segment . form feedback loop ; exampl , upload segment 2 b feedback upload segment 3 c , stimul peer cooper . ( ) discuss whether tit-for-tat strategi work video propag free rider . ( b ) live video stream delay constraint , tit-for-tat work ? 9 . mobil video clip share , input user gestur includ click , drag , ﬂing , latter two caus screen scroll . gestur given , follow process screen move predetermin . given ﬁxed display size clip ( speciﬁc , ﬁxed height ) , motion screen scroll model calcul , detail scroll process obtain accur ( e.g. , mani video present , long video stay19.6 exercis 733 viewport ) . although differ oper system differ technic detail implement , philosophi anim screen scroll gener , gradual deceler scroll speed itreach zero ﬁnger touch detect deceler . case drag , assum screen scroll speed experi uniform deceler default deceler d=2,000 pixels/ 2 . given initi scroll speed s0and height instant video clip h , mani video clip cover drag gestur ? m-th video clip appear viewport ? refer 1 . a.m. kaplan , m. haenlein , user world , unit ! challeng opportun social media . bu . horiz . 53 ( 1 ) , 59–68 ( 2010 ) 2 . z. wang , j. liu , w. zhu , social-awar video deliveri : challeng , approach , direct . ieee netw . 30 ( 5 ) , 35–39 ( 2016 ) 3 . v . bajpai , s. ahsan , j. schönwälder , j. ott , measur youtub content deliveri ipv6 . sigcomm comput . commun . rev . 47 ( 5 ) , 2–11 ( 2017 ) 4 . j. yi , s. luo , z. yan , measur studi youtub 360◦live video stream , proceed- ing 29th acm workshop network oper system support digit audioand video , nossdav ’ 19 , pp . 49–54 . ( acm , new york , ny , usa , 2019 ) 5 . s. acharya , b. smith , p. parn , character user access video world wide web , inproceed acm/spi multimedia comput network ( mmcn ) ( 2000 ) 6 . w. tang , f. yun , l. cherkasova , a. vahdat , long-term stream media server workload analysi model ( technic report , hp lab , 2003 ) 7 . t. hoßfeld , k. leibnitz , qualit measur survey popular internet-bas iptv system , proceed intern confer commun electron ( icc ) , pp . 156–161 ( 2008 ) 8 . x. cheng , j. liu , c. dale , understand characterist internet short video share : youtube-bas measur studi . ieee tran . multim . 15 ( 5 ) , 1184–1194 ( 2013 ) 9 . m. cha , h. kwak , p. rodriguez , .-i . ahn , s. moon , tube , tube , everybodi tube : analyz world ’ largest user gener content video system , proceed 7th acm sigcomm confer internet measur ( imc ’ 07 ) , pp . 1–14 ( 2007 ) 10 . a. finamor , m. mellia , m.m . munafò , r. torr , s.g. rao , youtub everywher : impact devic infrastructur synergi user experi , proceed 2011 acm sigcomm confer internet measur ( imc ’ 11 ) , pp . 345–360 ( 2011 ) 11 . s. yarosh , e. bonsignor , s. mcrobert , t. peyton , youthtub : youth video authorship youtub vine , proceed acm cscw , pp . 1423–1437 ( 2016 ) 12 . f. loh , f. wamser , c. moldovan , b. zeidler , t. houndeﬁnedfeld , d. tsilimanto , s. valentin , click playback : dataset studi respons time mobil youtub , proceed 10th acm multimedia system confer , mmsi ’ 19 , pp . 267–272 . ( associ comput machineri , new york , ny , usa , 2019 ) 13 . p. gill , m. arlitt , z. li , a. mahanti , youtub trafﬁc character : view edg , proceed 7th acm sigcomm confer internet measur ( imc ’ 07 ) , pp . 15–28 ( 2007 ) 14 . s. sen , j. rexford , d.f . towsley , proxi preﬁx cach multimedia stream , proceed ieee infocom ( 1999 ) 734 19 onlin social media share 15 . f. figueiredo , f. benevenuto , j.m . almeida , tube time : character popular growth youtub video , proceed fourth acm intern confer web search data mine ( wsdm ’ 11 ) , pp . 745–754 ( 2011 ) 16 . r. zhou , s. khemmarat , l. gao , impact youtub recommend system video view , proceed 10th annual confer internet measur ( imc ’ 10 ) , pp . 404–410 ( 2010 ) 17 . s. milgram , small world problem . psychol . today 2 ( 1 ) , 60–67 ( 1967 ) 18 . d.b . west , introduct graph theori , 2nd edn . ( oxford univers press , 2001 ) 19 . d.j . watt , s.h . strogatz , collect dynam “ small-world ” network . natur 393 ( 6684 ) , 440–442 ( 1998 ) 20 . e. ravasz , a.-l. barabási , hierarch organ complex network . phi . rev . e 67 ( 2 ) , 026112 ( 2003 ) 21 . r. albert , h. jeong , a.-l. barabási , diamet world wide web . natur 401 , 130–131 ( 1999 ) 22 . x. cheng , m. fatourechi , x. , j. liu , insight data youtub : partner ’ view . technic report . ( simon fraser univers , 2012 ) 23 . h. pang , z. wang , c. yan , q. ding , l. sun , first mile crowdsourc live stream : content harvest network approach , proceed themat workshop acm multimedia , pp . 101–109 . ( acm , 2017 ) 24 . x. , c. zhang , j. liu , r. shea , f. di , live broadcast commun interact : bottleneck optim . ieee tran . multim . 19 ( 6 ) , 1184–1194 ( 2017 ) 25 . b. yan , s. shi , . liu , w. yuan , h. , r. jana , . xu , h.j . chao , livejack : integr cdn edg cloud live content broadcast , proceed acm multimedia confer , pp . 73–81 . ( acm , 2017 ) 26 . c. ge , n. wang , w.k . chai , h. hellwagn , qoe-assur 4k http live stream via transient segment hold mobil edg . ieee j. sel . area commun . ( jsac ) 27 . f. wang , c. zhang , f. wang , j. liu , . zhu , h. pang , l. sun , intellig edge-assist crowd- cast deep reinforc learn person qoe , ieee infocom 2019—ieee confer comput commun , pp . 910–918 ( 2019 ) 28 . d. wang , z. wen , h. tong , c.-i . lin , c. song , a.-l. barabasi , inform spread context , proceed 20th intern confer world wide web ( www ’ 11 ) , pp . 735–744 ( 2011 ) 29 . j. leskovec , l. backstrom , j. kleinberg , meme-track dynam news cycl , inproceed 15th acm sigkdd intern confer knowledg discoveri data mine , pp . 497–506 ( 2009 ) 30 . k. dyagilev , s. mannor , e. yom-tov , gener model rapid inform propag , proceed first workshop social media analyt ( soma ’ 10 ) , pp . 35–43 ( 2010 ) 31 . a. abisheva , v .r.k . garimella , d. garcia , i. weber , watch ( share ) youtub ? ? use twitter understand youtub viewership , proceed 7th acm intern confer web search data mine , wsdm ’ 14 , pp . 593–602 ( acm , new york , ny , usa , 2014 ) 32 . h. yu , l. xie , s. sanner , twitter-driven youtub view : beyond individu inﬂuenc , pro- ceed 22nd acm intern confer multimedia , mm ’ 14 , pp . 869–872 . ( acm , new york , ny , usa , 2014 ) 33 . x. cheng , h. li , j. liu , video share propag social network : measur , model , analysi , proceed ieee infocom mini-confer ( 2013 ) 34 . g.k. zipf , psychobiolog languag . ( psycholog , 1999 ) 35 . h. kwak , c. lee , h. park , s. moon , twitter , social network news media ? proceed 19th intern world wide web confer ( www ’ 10 ) , pp . 591–600 ( 2010 ) 36 . d.j . daley , j. gani , j.m . gani , epidem model : introduct , cambridg studi mathemat biolog . ( cambridg univers press , , 2001 ) 37 . z. liu , .-c. lai , n. ye , propag immun infect gener network homogen heterogen compon . phi . rev . e 67 ( 1 ) , 031911 ( 2003 ) refer 735 38 . w.o . kermack , a.g. mckendrick , contribut mathemat theori epidem . proc . r. soc . lond . ser . 115 ( 772 ) , 700–721 ( 1927 ) 39 . j. jiang , c. wilson , x. wang , p. huang , w. sha , . dai , b.i . zhao , understand latent interact onlin social network , proceed 10th annual confer internet measur ( imc ’ 10 ) , pp . 369–382 ( 2010 ) 40 . x. cheng , j. liu , tweet video : coordin live stream storag share , proceed 20th intern workshop network oper system support digitalaudio video , nossdav ’ 10 , pp . 15–20 ( 2010 ) 41 . l. zhang , f. wang , j. liu , mobil instant video clip share screen scroll : measur enhanc . ieee tran . multim . 20 ( 8 ) , 2022–2034 ( 2018 ) 42 . h. li , h. wang , j. liu , k. xu , video share onlin social network : measur analysi , proceed acm nossdav , pp . 83–88 ( 2012 ) 43 . c. kadushin , understand social network : theori , concept , find . ( oxford uni- versiti press , 2012 ) 20augment realiti virtual realiti imagin world physic object surround us could construct destruct whim , tinker , adjust ﬁt demand user . world may never exist physic domain , world augment realiti ( ar ) virtual realiti ( vr ) allow us . chapter , examin frontier immers multimedia explor enabl technolog impact ﬁeld , simultan analyz challeng restrict . augment virtual realiti exist continu scale often call virtual continuum [ 1 ] ( fig . 20.1 ) . one side complet real , realiti : real , physic world consist sole real , physic object ; oppos end complet virtual , virtual : virtual world virtual object . land extrema call mix realiti , aspect real virtual begin blend . augment realiti , physic realiti live mix virtual object , extent virtual aspect outnumb detail realiti ; virtual realiti , howev , physic realiti remov , give fulli immers experi . fig . 20.1 reality-virtu continuum © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_20737738 20 augment realiti virtual realiti fig . 20.2 exampl user might see augment realiti app ; keiichi matsuda ’ short ﬁlm hyperr [ 4 ] . use permiss keiichi matsuda , keiichi matsuda ltd. 20.1 deﬁn augment realiti virtual realiti concept augment realiti virtual realiti exist sinc 1960 . 1962 , morton heilig creat earli virtual realiti system , sensorama [ 2 ] ; 1968 , ivan sutherland creat ﬁrst augment realiti system , swordof damocl [ 3 ] . sutherland also provid one earliest deﬁnit constitut augment realiti : two-dimension illus three-dimension object present observ visual chang exactli way realobject would chang user ’ head move . figur 20.2 show still imag effect might look like ( [ 4 ] , short ﬁlm ar ) . broad deﬁnit narrow ronald azuma [ 5 ] , deﬁn augment realiti system combin real virtual object real environ , align real virtual object , run interact real time , i regist three dimens . revis version success exclud ﬁlm includ , also end exclud 2d overlay top live video . also explicitlyrefer visual illusori effect note sutherland . concept handheld comput work , e.g. , camera , sensor , touchscreen rgb display , etc. , unthink time , either . consid factor , modern ar systemcan technic character factor : a predominantli visual system , that combin real virtual object real environment,20.1 deﬁn augment realiti virtual realiti 739 while align real virtual togeth , run real time , and allow 6 degre freedom ( posit , orient ) interact virtual object . deﬁnit allow inclus 2d overlay preserv intent interact three dimens user physic move real object 6 degre freedom virtual interact object level discret . also allow auxiliari sensori augment ( aural , tactil , gustatori , and/or olfactori ) mandat virtual object visual exist ﬁrst . avoid includ advanc sound system capabl emit spatial sound . further- , make restrict underli hardwar use creat illusori effect allow futur technolog yet discov incorpor system . virtual realiti , object environ virtual . therefor provid simul experi similar complet differ real world . chang , despit seemingli minor , affect system canb construct . longer requir real environ , nuanc object- environ align support viewﬁnder allow real environ coexist object gone . inde simpliﬁ system everyth cannow self-contain close system ; user ’ pose ground truth oppos rel real environ ’ orient . reason , augment realiti system technic capabl provid virtual environmentbi ignor draw user ’ physic surround . one key differenti factor virtual realiti exist telepres- enc [ 6 ] : sensat present distant elsewher . almost necessit ahead-mount display ( hmd ) provid rich presenc interactiv- iti , lead categor display interfac [ 1 ] affect percept whether system augment virtual realiti : class 1—monitor-bas video display upon comput gener imag overlaid . class 2—video display class 1 , immers hmd . class 3—hmd class 2 , see-through capabl rather video real environ . class 4—extens class 3 use stereoscop video real environ . class 5—complet graphic display environ video realiti ad . class 6—extens class 5 use partial immers real object interact comput gener scene . despit appear well delin , distinct class rapidli break percept , orient , real , virtual , implementationar taken account . practic , also appear case ; literatur , usag augment realiti restrict primarili class 3 display ( optic head-mount ) , commerci success implement augment reality740 20 augment realiti virtual realiti often util class 1 class 2 display ( video , sometim head-mount ) , alongsid virtual realiti system . short , medium display less relev whether system augment realiti virtual realiti system actual perceiv visual effect regardless medium . augment realiti system convert virtual realiti system remov real environ , convers necessarili true theremov virtual environ incorpor real would mean fundament overhaul ( e.g. , go class 5 display class 3 ) . remain part chapter , focu augment realiti system , mani technicalsolut appli virtual realiti system well . 20.2 workﬂow augment realiti figur 20.3 show typic augment realiti workﬂow , broken three task : sensori data collect process , scene local align- ment , digit world gener emiss . task modeledaft source-sink data ﬂow , transform low-level data high-level seman- tic , impact digit world gener emit user ’ sens . 20.2.1 sensori data collect step act inform sourc , gener continu stream informa-t describ real-world surround user . inform stream contain thing continu sequenc imag depict user iscurr observ , audio surround , data describ orient fig . 20.3 gener workﬂow model augment realiti , green node indic sourc , red node indic sink20.2 workﬂow augment realiti 741 posit user ’ head . augment realiti system attempt fuse togeth extract abstract represent user . constrain environ- ment usag scenario , may addit extrins sensori compon , mechan linkag determin exact posit rel room . 20.2.2 local align system extract digit represent user , begin localizethi user digit world . process greatli vari depend applic augment realiti , exist multipl virtual world own one user act upon owner . happen applic live translat , heads-up navig , digit person assist , etc . end spectrum , singl , globally-shar virtual world thatal user exist interact . exampl includ smart citi digit signag control , multius video game . gener process local deﬁn gener map real-world coordin virtual object . map function must surject , digit object virtual world must match least one physic coordin . biject , though biject highli desir wouldguarante perfect spatial align . aid local task , system perform recognit physic surround , adjust outcom map function better ﬁt theestim digit represent user , trigger placement virtual object base physic represent . recognit also improv util knowledg digit represent usercurr , respect element virtual world . step use tandem comput ﬁxed-point estim virtual coordin user . accur local align comput challeng , also one activ topic ar/vr research . 20.2.3 world gener emiss stage , augment realiti system necessari inform beginrend two-dimension perspect imageri emit displaymedium present user . digit represent user hope found ﬁxed-point posit , condit display virtual object place respect recognit physic item . secondari inform , user input case multius augment realiti , receiv local data user , consolid reconcil exist virtual world . , exact process vari depend user input observ byth system ; instanc , dedic direct control , visual aural recognition-bas control , spatial input control , combinations.742 20 augment realiti virtual realiti gener , digit world fulli simul point , advanc one time-step forward . multius environ , simul world transmit recipi user exist virtual world . final , perspect ofth digit represent user render display user . note stage rife mani challeng : display need high refresh rate minim align error , high pixel densiti minim pixel , highper pixel intens effect outdoor sun , maintain low power consumpt reduc outright remov requir bulki batteri . 20.3 earli foundat system applic sutherland ’ system [ 3 ] , pioneer augment realiti system , rel prim- itiv optic hmd ( head-mount display ) use half-silv mirror allowth user view real-world object along digit ( class 3 ) . technolog behind truli decad ahead time . system ( fig . 20.4 ) driven mechan linkag measur user ’ head posit , sent toan earli proto-comput . comput output matrici translat rotat 3d object room-rel coordin pipelin three success independ digit devic . ﬁrst devic convert object coordin beeye/devic rel coordin feed next devic . second devic transform 3d coordin 2d coordin clip vertic beyond user ’ ﬁeld-of-view feed output last devic , ana-log display driver . gener analog signal sent half-silv mirror , ﬁnalli view user . mechan devic sens posit user , analog posi- tion data , amount compress experienc spring , translat digit format fed comput . data process turn project matrix , encod posit user view angl . project matrix multipli vector contain posit vertex , convert posit rel poseof user . sutherland ’ system , comput gener coordin digit object output next devic , i.e. , matrix multipli . name suggest , matrix multipli accept two matric input , output result product . necessari system built 1968 , one full year advent strassen ’ algorithm , ﬁrst pub- lish matrix multipl algorithm sub-cub comput complexity.to achiev output 30 frame per second ( fp ) , dedic matrix process chip requir , “ avail general-purpos comput would fast enough becom intim involv perspect comput requir dynamicperspect display ” [ [ 3 ] , p. 759 ] . clip divid , reason , also requir separ devic . take eye-rel coordin perform check user ’ viewingcon . anyth outsid cone would “ clip ” remov . test vertex determin lie outsid view cone , as20.3 earli foundat system applic 743 fig . 20.4 high-level breakdown sutherland ’ ar system [ 3 ] deﬁn perspect matrix , offend vertic simpli “ move ” point intersect edg cone . clip divid also perform depth test , vertic behind view cone remov , convert 3d eye-rel coordin 2d screen-rel coordin . sutherland ’ system mani limit : heavi , bulki , could gener wirefram imageri ; conﬁn area movement allow ; mechan user interact . despit , still marvel ofengin consider ahead time . ﬁrst gener augment realiti sever limit term power , cost , mobil , standard , greatli narrow ﬁeld possibl tech-nolog applic . consequ , vast major literatur period focus militari space-far applic . monument leap custom integr circuit well-deﬁn form factor person comput led explos ar applic . present non-exhaust list promin ar applic usag scenario earli time . navig applic . one major motiv reason ar domain navig assist . 1993 , loomi et al . util aural ar creat navig system visual impair [ 7 ] . 1995 , rekimoto nagao present navicam system assist indoor navig way virtual signag [ 8 ] . 1997 , feiner et al . creat mobil ar system use optic hmd highlight nearbi point interest [ 9 ] . narzt et al . present system navig pedestrian car use mobil ar head-up display ( hud ) , tonni et al . use ar project onto car ’ windshield inform user potenti hazard surround car [ 10 ] .744 20 augment realiti virtual realiti militari applic . ar wide use combat combat simul . follow develop super cockpit , battleﬁeld ar system devel- ope julier et al . naval research laboratori [ 11 ] . mobil ar system would serv basi varieti combat research train simul outlin [ 12 ] . exploratori applic ar also includ data visual , e.g. , azuma et al . explor project reconnaiss data unman aerialvehicl ground troop [ 13 ] . industri applic . ar system mainten repair [ 14 ] w fund us air forc . bmw [ 15 ] , v olkswagan [ 16 ] , ford consor- tium auto manufactur [ 17 ] , boe [ 18 ] , airbu [ 19 ] individu independ experi ar system assist assembl line mainten worker . applic rang assist manufactur overlay instruct schemat , cabl manag , vehicl repair highlight broken block part . outsid manufactur , also applic ﬁeld medicin . 1998 , fuch et al . propos ar system assist laparoscop surgeri [ 20 ] . stereoscop system present simul cutaway view laparo-scop insert . 1999 , navab et al . creat ar system superimpos x-ray imageri onto underli physic appendag [ 21 ] . idea extend imag devic like mri also incorpor visual toolshidden skin tissu v ogt 2006 [ 22 ] . educ applic . evid manufactur look toward ar assist front-lin worker , ar also appli educ enhanc tool.vlahaki et al . use ar virtual guid offer person tour archaeolog site reconstruct build visual everyday life use avatar [ 23 ] . kaufmann et al . creat ar tool mathemat geometri educ [ 24 ] later use case studi toward collabor ar educ [ 25 ] . schrier explor use ar game assist teach histori [ 26 ] , klopfer et al . use environment museum educ [ 27,28 ] . anoth aspect ar system use collabor tool . studierstub one ﬁrst multius ar system share environmentbetween user [ 29 ] . rekimoto saitoh also use ar creat augment surfac allow virtual inform present [ 30 ] . natur extens idea encompass entir room , propos tamura [ 31 ] creat ar meet room . entertain applic . 1st & ten “ yellow line ” footbal broadcast sys- tem [ 32 ] foxtrax “ glow puck ” system [ 33 ] paint virtual object within broadcast media highlight promin import featur broadcast , hockey puck , line scrimmag , driver race car . asid pseudo-ar broadcast , tradit ar system entertain like arquak [ 34 ] human pacman [ 35 ] . also number indoor game ar hockey [ 36 ] bowl [ 37 ] . ﬁeld person entertain ar larg enabl lower barrier toar devic come equip sufﬁcient hardwar local users.20.4 enabl hardwar infrastructur 745 20.4 enabl hardwar infrastructur mid 1990 late 2000 , three key advanc hardwar greatli enabl creation augment virtual realiti system , includ graphic process unit ( gpu ) , global posit system ( gp ) , internet mobil network . 20.4.1 graphic process unit ( gpu ) deliv immers experi , ar/vr applic typic requir muchhigh resolut refresh rate broadcast video , mention rich interact demand real-tim respons . full hd ( 1080p ) 60 hz bottomlin today ’ hmd , ideal , 16k+ resolut 16 khz refreshr eye expect [ 38 ] . massiv amount data hardli handl cpu alon , slow develop earli ar/vr system . ibm ’ monochrom display adapt ( mda ) , introduc 1980 , wasth ﬁrst discret video display card , rectifi nuisanc build custom chain hardwar devic render comput gener imageri . modu operandi , signiﬁcantli differ sutherland ’ graphic pipelin work , opensth era modern graphic process unit ( gpu ) , sinc core visual applic , includ ar/vr . gener , graphic pipelin work use techniqu call raster . transform seri point vector discret dot-lin matrix recreat describ shape . transform also split two part , geometri stage ( top half fig . 20.5 ) pixel stage ( bottom half fig . 20.5 ) [ 39 ] . geometri stage graphic pipelin accept input vertic , use screen-rel coordin 2d scene world-rel coordin 3d scene . correspond project matrix must also suppli case 3d render . input list vertic option matric transfer main system ( cpu ) memori devic ( gpu ) memori , pass toth vertex shader . vertex shader programm step calcul output posit suppli vertex coordin , perform numer oper per- fig . 20.5 standard graphic pipelin 746 20 augment realiti virtual realiti vertex basi . 3d render , usual multipli vertex suppli view project matric . output , actual vertic , pass sever option shader ﬁnalli reach primitiveassembl step . option shader gener reserv special usag . intermediari step exist vertex shader primit assembl . avoid assembl shape outsid screen , clip done immedi prior toprimit assembl manner ident clip divid sutherland ’ system . primit assembl step vertic get transform set point connect geometr mesh . three well-deﬁn primit ( point , line , triangl ) , one remov primit ( quadrilater ) . primit use connect vertic suppli either input stage vertex shader . vertic connect order suppli . exampl fig . 20.5 use triangl , ( 0,0 ) , ( 0,1 ) , ( 1,0 ) form one triangl , ( 0,1 ) , ( 1,0 ) , ( 1,1 ) form . line use instead , pair vertic form line segment , case point , vertex point . raster ﬁnal phase geometri stage . point , primit broken multipl fragment , essenti repres one pixel . multipl fragment per pixel , sufﬁcient explain next stage graphic pipelin . begin see beneﬁt mani dedicatedprocess core step , core process one fragment . pixel stage begin fragment shader . much like vertex shader , fragment shader programm step act per-frag basis.th suppli program instruct gpu color fragment . light , textur , materi properti control fragment shader . shader output color fragment penultim step , blendingand test . blend test one speciﬁc step , rather collect variou oper run clean color primit . recal mani fragment exist singl pixel , even within primit . major step reconcil differ output fragment may atthat singl pixel . exampl , 2d space , one primit may behind anoth primit two overlap rectangl . depth test done hide deepest rectangl , and/or blend enabl mix color togeth thecas two transpar rectangl , although depend conﬁgur pipelin initi . blend test step ﬁnish , pixel-wis output written ﬁnal memori buffer , destin display devic like monitor , mark end process produc one imag frame . pipelin self-contain , highli special hardwar , discret video card , hardwir pipelineprocess achiev high efﬁcienc . sinc step independ previou , possibl begin render next frame previou frame complet ﬁnish render process , therebi greatli speed frame rates.20.4 enabl hardwar infrastructur 747 20.4.2 global posit system ( gp ) global posit system ( gp ) develop cold war provid reliabl navig system , becom fulli oper 1995 . includ number satellit medium earth orbit 20,000 km , act triangul beacon user local . receiv unit requir line-of-sight least 3 differ satellit . satellit broadcast inform beacon regard posit ( rel earth ) on-board time . beacon sent regular interv , gp receiv calcul time differ signal sent receiv . accuraci gp intent reduc accur within 100 begin non-militari use . limit later turn improv gp allow receiv accur within 30 cm . accuraci also improv differenti gp ( dgp ) , work refer station work ident gp receiv known ﬁxed posit , assist gp , leverag cellular base station improv startup perform . one earli inﬂuenti system use gp steven feiner ’ tour machin [ 9 ] . use combin dgp gyroscop primari method local , someth carri well 2010 beyond . figur 20.6 show pictur user wear oper system . feiner note three key issu system : qualiti display , qualiti user local , loss local . outdoor environ , sun massiv overpow bright display , necessit use neutral densiti ﬁlter , affect percept color . similarli , combin accumul error magnetometer/inclinomet prove jar , compound gp signal lost line-of-sight . result , ar research began investig altern approach toward ( ) wear oper tour machin . ( b ) view optic display . buell fayweath build be- hind st. paul ’ chapel . fig . 20.6 feiner ’ tour machin [ 9 ] . use permiss dr. steven k. feiner , comput graphic user interfac lab , columbia university748 20 augment realiti virtual realiti user local . one approach solv invers problem : ﬁnd posit orient virtual object display rel user , rather ﬁnding user display object rel user . 20.4.3 network multipl user arquak one ﬁrst ar system support multipl simultaneousus [ 34 ] . cleverli util exist commerci applic mul- tiuser support , quak . instead use tradit mous keyboard devic input , arquak translat user ’ current pose correspond mous keyboard input base user ’ previou pose . local done use hybrid approach gp still rel inaccur time . fiduci marker place onto build use system correct factor toalign virtual world posit real world . also meant vir- tual world quak must design correl real world , i.e. , build quak world need match build real world . last step inconvert quak run ar applic remov build textur quak world would render transpar avoid occlus real-world build ( fig . 20.7 ) . fig . 20.7 user ’ perspect arquak . gridlin mark in-gam wall . use permiss dr. thoma wearabl comput lab , univers south australia [ 34 ] 20.4 enabl hardwar infrastructur 749 standalon ar system also design achiev full multius func- tional support [ 29 ] . studierstub system view full techno- logic evolut sutherland ’ initi prototyp . rather build ar arounda singl user , client–serv approach use connect user . system , two major separ server : track server environ server . track server act relay server , maintain state track object andus , forward data user . user object static track use magnet sensor , contrast sutherland ’ ultrasound sensor . similarli , environ server act central databas graphic model , aredistribut need client , independ render local . result , client environ databas , must synchron environ server . exactli achiev touch upon , although simpl polici last action win could enact . interact delay system combin synchron environ server , round-trip time slowest client , refresh frequenc display . import interact delay minim , although depend client-sid implement , possibl disguis byassum client input alway succe . 20.5 modern augment realiti system applic new millennium seen advanc miniatur comput , includ smart-phon tablet , integr application-speciﬁc processor , com- modiﬁc comput . embrac develop new gen- erat ar/vr system applic . prior ubiqu modern smartphon 2007 , exist person digit assist ( pda ) , also known handheld pc . precursor devic larger bulkier smartphon cousin also lack countless sensor , otherwis similar level function : telephoni , touchscreen input , wireless capabl , occasion camera . [ 40 ] , research explor prototyp standalon ar system use commerci , off-the-shelf person digit assist ( pda ) devic . local , util optic track approach ﬁducial marker , far cpu intens hardwar time ( 400 mhz ) . one ﬁrst commerci success , mass-market consum ar product modern smartphon mobil game , pokémon go . releas 2016 , becamea massiv worldwid phenomenon ; peak , instal 10 % us android devic , almost mani daili activ user twitter . pokémon go ’ overnight success put ar public spotlight demonstr thatconsum readi adopt ar , state-of-the-art smartphon hardwar capabl support ﬁdeliti requir . also mark begin shift toward handheld , smartphone-bas ar , rather hmd origin inceptedbi sutherland.750 20 augment realiti virtual realiti pokémon go ’ ar system function self-contain manner reli optic track ; use avail sensor smartphon small minim set essenti sensor : compass , gp , gyroscop . sensor , likeacceleromet , would use conjunct sensor basi enhanc local data . phone ’ camera would use provid background ar view , pose data would use render correct pose thevirtu object . end result combin togeth display user smartphon rather hmd . major consequ process smartphon requir massiv amount energi . smartphon energy-constrain devic , thu quit often limit usabl around 30 min hour . allevi cloud ofﬂoad [ 41 ] . dedic comput chip imag process motion process also advoc . appl googl heavili invest creat power softwar develop kit respect plat-form arkit arcor , respect . industri giant , samsung snapchat , also seen success integr ar camera-bas applic allow user augment face virtual decor . otherar develop kit includ artoolkit vuforia . ar develop kit power three core compon : local modul , scene graph modul , physic engin . compon providedthrough add-on platform servic . local modul make use vari- ou sensor smartphon perform simultan local map ( slam ) . result map consist keypoint repres physic featur , well planar surfac detect . data , scene graph physic engin handl gener ar content display . product born commodiﬁc comput lower cost produc fulli custom microprocessor application-speciﬁc inte- grate circuit . huge implic ar vr system , enabl purpose-built hardwar work around issu local render . exampl includ nvidia ’ pascal game gpu cloudxr softwar devel- opment kit help busi creat deliv high-qual , wireless ar andvr experi applic base openvr , broadli use hardwar softwar interfac . hololen system one innov system period , featur microsoft call holograph process unit ( hpu ) powerhous centerpiec system ( fig . 20.8 ) . return root ar system featur dedic integr circuitri differ compon , much like suther-land ’ initi work . unlik prior work , hololen also featur differ method combin light . principl mechan hololen display base around concept known waveguid combin ( fig . 20.9 ) . initi sourc lightwav ( display ) emit freeform prism total intern reﬂect ( tir ) . prism function like ﬁber optic cabl transport light sourc theexit ( pupil ) . surfac grate made entranc exit guid light desir tir path . extern sourc light ( realiti ) pass “ rear ” of20.5 modern augment realiti system applic 751 fig . 20.8 breakdown hololen holograph process unit ( hpu ) ( ) side proﬁl ( b ) top-down fig . 20.9 hololen display function prism . howev , sinc freeform prism refract light enter , addit prism necessari counteract distort introduc curv backsid tir prism . one main advantag display format make adjust extern lightwav . contrast , previou approach sutherland , feiner , thoma util half-silv mirror mechan combin light , result dim view user ’ surround environ- ment . natur dim beneﬁci , howev , hololen ’ display target outdoor use due intens natur sunlight skylight . hpu also interest deviat previou work contend . recal sect . 20.4.1 sever issu contemporari graphic pipelin regard augment realiti . one issu inabl directli manipul buffer gpu addit inform regard depth occlus . hpu directli address issu integr custom microprocess chip rectiﬁ problem.752 20 augment realiti virtual realiti hololen repres new advanc mix realiti system , new consum hmd oculu rift v alv index vr system . minecraft earth , half life : alyx , beat saber exampl differ ar vr applicationsthat run use new gener consum hmd . , howev , still numer issu face hmd . complet computer-in-a-headset , entir reliant batteri continu oper , last 2–4 h dependingon usag . display mechan hololen also requir addit brace point ( front visor ) mount adjust correct prism . consequ , devic whole rather bulki heavi , rest atop person ’ head . contrastthi smartphon : small , lightweight , monocular , invari extrins light condit , deﬁnit aspect conveni eas use , end-us ar system design . matter fact , smartphone-bas system still featur much wider select ar vr applic due lower barrier entri . snapchat lens areon wide use ar applic form factor entertain user digit alter face surround send friend , ikea launch ar app allow user preview furniturein home smartphon . mobil vr also gain traction googl cardboard samsung gear vr provid rel cheaper headset power smartphon . 20.6 limit challeng entertain ﬁeld ar/vr experienc astronom growth thistim period . growth wide fuell success new gener smart-phon , new hmd hololen , commodit comput power cloud comput . success pokémon go inspir mani technolog compani pursu incorpor ar applic . appl , samsung , snapchat incorpor facial process ar allow user augment face virtual accessori , tri differ face alto-geth . similar advanc made consum broadcast sector well . crowdsourc livecast commonli featur element pseudo-ar , e.g. , riot game v alv corpor featur digit avatar game brought life broadcast alongsid human spectat perform . tradit broadcast studio also begun incorpor theseel program weather report , soccer game broadcast , etc . given shift toward consum ar/vr , degre hardwar advance- ment , futur ar/vr applic reimagin exist applic , butfor gener audienc . exampl , medic use ar might shift toward visu- aliz individu ’ biometr display area interest , broken bone intern tissu damag . likewis , futur smart citi might util ar fordynam signag divert trafﬁc event congestion.20.6 limit challeng 753 despit advanc , still mani hurdl ahead . section , present pertin obstacl , discuss affect develop consum grade system , potenti resolut . 20.6.1 color percept distinct aspect optic hmd ar issu color percept bothindoor outdoor environ . display see-through , ulti-m perceiv human eye combin background light ( real- world environ ) foreground display ( virtual environ ) [ 42 ] . complic foreground light gener , i.e. , light sourc addit , light sourc , subtract ( e.g. , lcd ) , ideal white light ﬁltere produc desir color ? mass market , prob-lemat ar system produc drastic differ color percept display chang . consid follow scenario : user stand face red wall illumin singl perfectli white light , entir point-of-view ﬁlled wall . natur , user ’ eye receiv light red wavelength scenario . suppos equip addit hmd , turn ar system , andrequest view model neptun , notabl blue planet . render imag sent hmd , correctli display blue sphere optic display . howev , user perceiv blue sphere , rather one theaddit combin red blue light , , purpl ! suppos user exchang display anoth one happen use subtract light . without loss gener , assum display calibr reproduc color aperfectli white backlight . user turn ar system , see black sphere red light ﬁltere display attempt produc blue , result ﬁltere red green light white . figur 20.10 highlight principl . clear need color correct display , clear effect carri maintain truth accur color reproduct [ 43–45 ] . exampl , addit color system abl produc black , wherea subtract system abl producewhit , reli assumpt “ base ” color either black white , respect . realist , user stand front monochrom wall , virtual object monochromat , lightingcondit ideal singl sourc perfectli white ( unless stand outsid bright , perfectli clear day ) . problem larg ignor monitor-bas display , due simplifi color model singleinput ( camera ) singl output ( monitor ) , compar multipl input need separ consid blend together.754 20 augment realiti virtual realiti fig . 20.10 color combin optic hmd . anexampl seen infig . 20.7 ; h ec l ro ft h e robot ’ face appear begreen , although actuallyyellow , bottom bar white , almost completelytranspar fig . 20.11 pokémon occlud tableto appear hide it.thi done byhand-seg thepokémon compositingwith anoth imag 20.6.2 depth percept anoth obstacl toward fulli immers ar occlus virtual object real object . current , trivial easi place virtual object front real object draw atop real-world due planar optic display beingth medium ar . convers , howev , extrem difﬁcult carri reason : preserv real object , necessari draw around object , close possibl boundari edg real object would-bevirtu object ( see fig . 20.11 ) . multipl way achiev outcom depend desir ﬂex- ibil . imag segment , well studi area comput vision , use toisol differ real-world object , use simpl occlus the20.6 limit challeng 755 natur “ virtual object behind real object ” . complex queri “ virtual object behind front real object , ” need calcul rel depth real object , relationshipbetween rel depth virtual depth . end , hardwar softwar solut , advantag disadvantag . hardwar sensor solut , depth camera , limit maximum distanc resolut depth discern [ 46 ] . object sensor , smaller appear sensor , greater nois . simpl implement depth sensor use calibr infrar dot matrix todetermin rel depth shape object view base distort dot far dot neighbor . complex implement calcul time take one photon hit object bounc back use speed light ; time-of-ﬂight sensor offer greater ﬁdeliti accuraci compar structur light sensor , lower resolut due themass amount data process need . neither approach , howev , particularli well-suit outdoor environ sunni day . softwar solut less constraint , often requir either multipl camera multipl imag differ perspect . typic solut , stereo triangula- tion [ 47 ] , use two camera , much like human vision system . ﬁnding correspond point imag , ray trace camera , giv- 3d intersect point correspond point imag . practic , ﬁnding correspond point difﬁcult homogen region color intens , particularli object motion . singl camera techniqu workund similar principl , requir shift imag imag . 20.6.3 local local one promin discuss aspect ar/vr throughout age literatur , still major obstacl . holloway ’ analysi registra- tion error [ 48 ] identiﬁ variou sourc affect ar object display incorrect locat . two predomin sourc error , still , attribut local error local delay . hardwar advanc manag signiﬁcantli improv accuraci user pose local haveseen gp , go 100 30 cm . necessar- ili improv , howev , poll rate devic high-accuraci mode . suppos , magic sensor capabl perfect ﬁdeliti instantaneousmeasur , limit 10–20 measur per second cor- respond updat latenc 50–100 ms. given instantan measur , ar display perfect registr sourc error . how-ev , movement past point time introduc registr error true pose read , oracl sensor abl provid new read . besid high accuraci posit orient data , high updat frequenc necessari , , two reason : read alway accur calibr , but756 20 augment realiti virtual realiti may accur forecast , success kinet depth illus correspond frequenc imag updat . alway inher updat latenc due discret natur digit compon ; best bedon approxim analog rapid poll , remain challeng consum ar/vr budget constraint . 20.6.4 inform present ar ﬁrst mani step toward fulli immers comput , face ratheruniqu challeng ﬁnding balanc preserv view real-world , amount virtual data display . suppos , obtain per- fect ar system capabl recreat digit object indistinguish real . maxim amount real-world cover virtual objectsbefor longer consid ar rather vr ? user ﬁnd dig- ital object intrus ? user becom overwhelm amount virtual object ? hyperr short concept ﬁlm succinctli highlight prob-lem [ 4 ] . unfortun , boundari highli subject user may toler higher degre occlus other . earli work conduct [ 49– 51 ] , necessarili appli current futur form-factor shift smaller display devic . similarli , question interact carri user virtual user interfac . hmd , like use gesture-basedrecognit , gesture-interact limit user wear hmd , accept input user ? argument could made either case : limit sole current user prevent malici actor interferingwith ar effect , allow nearbi user affect digit object like virtual keyboard reinforc immers enhanc social aspect . monitor-bas display like use current pointer scheme , issu allow depth control 2d plane . one potenti resolut incorpor 2d gestur much like modern smartphon . regardless medium display , clear current wimp ( window , icon , menu , pointer ) paradigm human–comput interact entir applic . recent work done explor new interactionparadigm better suit toward ar/vr [ 52,53 ] . 20.6.5 social accept 2013 , googl announc develop consum grade optic hmd system call glass . pinnacl develop hmd time : lightweight , unintrus , integr exist smartphon . capabl use medium ar , glass initi market person point-of-viewrecord hands-fre digit assist . unfortun , well receiv at20.6 limit challeng 757 time , result widespread social reject technolog societ ethic reason rather qualiti hardwar . two predomin reason reject potenti violat privaci safeti concern regard usag devic . despit physic devic non-intrus , human oper will decid neglect present immedi surround focus display . result invari record incid oper drive vehicl , becam inatten- tive physic surround , collid avoid object [ 54 ] . hand , due devic non-intrus innocu , possibleto record everyth wearer saw without requir consent , either implicitli obviou recognit camera-lik silhouett explicitli via human interact . outward indic record small light eyewar , photograph captur silent . gener public accept pervas hmd , two-step approach may need . googl glass come inclus camera initi market campaign focu toward ar aspect , would chanc familiar rather demon . initi iter accept , would inclus camera consid , public could properli weigh beneﬁt ar versu potenti misus rather immedi focus neg . regardless , one ﬁnal aspect consider potenti motion sick like symptom . effect complet replac person ’ view digit one , like vr , complet understood . user may experi gener dis-comfort , visual fatigu , nausea prolong exposur virtual environ . may anoth barrier toward gener widespread adopt . 20.7 explor ar/vr rapid develop recent year , long way go toward truli immers experi . underli technolog productsavail market far matur evolv fast . relat inform found conference/journ paper well whitepap googl , microsoft , appl , samsung , nvidia , etc . 20.8 exercis 1 . chapter , explor differ augment realiti virtual realiti system . advantag form multimedia compar toth form seen ? 2 . augment realiti system integr wide array engin scienc disciplin . list differ one contribut ar andvr . 3 . mani color channel need display ar imag ? vr ? 758 20 augment realiti virtual realiti 4 . ou ask design new hpu chip support 4k resolut ( 3,840 ×2,160 ) eye 60 fp . ( ) minimum size frame buffer necessari support res- olut ? ( b ) minimum bandwidth serial bu need provid connect chip display bandwidth must share equal two display ? ( c ) bandwidth share display ? ( ) resolut chang 1080p ( 1,920 ×1,080 ) 240 fp ? 5 . potenti sourc error tri determin user ’ loca- tion ? orient ? 6 . suppos ask write local algorithm ar system . ( ) requir constraint might ask ? ( b ) would chang vr system ? ( c ) high-level pseudocod , write algorithm . ( ) suppos augment realiti system support multipl user simultane- ousli , digit world . affect algorithm , sowhat chang would make ? , explain algorithm would handl one person locat north pole , one person south pole . 7 . alway interact delay mix realiti system . sourc delay ? 8 . describ techniqu use combat interact delay . 9 . discuss tradeoff optic head-mount display ( hmd ) smartphone-bas video display augment realiti . refer 1 . p . milgram , f. kishino , taxonomi mix realiti visual display . ieic tran . inf . syst . 77 ( 12 ) , 1321–1329 ( 1994 ) 2 . m.l . heilig , sensorama simul . us patent 3,050,870 , 28 august 19623 . i.e . sutherland , head-mount three dimension display , proceed decemb 9–11 , 1968 , fall joint comput confer , part , p. 757–764 . ( acm , 1968 ) 4 . k. matsuda , hyper-r ( 2016 ) 5 . r.t. azuma , survey augment realiti . presenc : teleoper virtual environ . 6 ( 4 ) , 355–385 ( 1997 ) 6 . j. steuer , deﬁn virtual realiti : dimens determin telepres . j. commun . 42 ( 4 ) , 73–93 ( 1992 ) 7 . j.m . loomi , r.g . golledg , r.l . klatzki , j.m . speigl , j. tietz , person guidanc system visual impair , proceed first annual acm confer assist technolog , pp . 85–91 . ( acm , 1994 ) refer 759 8 . j. rekimoto , k. nagao , world comput : comput augment interact real world environ , proceed 8th annual acm symposium user interfac softwar technolog , pp . 29–36 . ( acm , 1995 ) 9 . s. feiner , b. macintyr , t. höllerer , a. webster , tour machin : prototyp 3d mobil augment realiti system explor urban environ . per . technol . 1 ( 4 ) , 208–217 ( 1997 ) 10 . m. tonni , c. sandor , g. klinker , c. lang , h. bubb , experiment evalu augment realiti visual direct car driver ’ attent , 2005 . proceed . fourth ieee acm intern symposium mix augment realiti , pp . 56–59 . ( ieee , 2005 ) 11 . s. julier , . baillot , m. lanzagorta , d. brown , l. rosenblum , bar : battleﬁeld augment realiti system , nato symposium inform process techniqu militari system , cites ( 2000 ) 12 . m.a . livingston , et al. , militari applic augment realiti , handbook augment realiti , pp . 671–706 . ( springer , 2011 ) 13 . r. azuma , h. neeli , m. daili , j. leonard , perform analysi outdoor augment realiti track system reli upon mobil beacon , ieee/acm intern symposium mix augment realiti ( ismar ’ 06 ) , pp . 101–104 . ( ieee , 2006 ) 14 . s.j . henderson , s.k . feiner , augment realiti mainten repair ( armar ) . tech- nical report . ( columbia univers , new ork , depart comput scienc , 2007 ) 15 . c. sandor , g. klinker , rapid prototyp softwar infrastructur user interfac ubiq- uitou augment realiti . per . ubiquit comput . 9 ( 3 ) , 169–185 ( 2005 ) 16 . k. pentenried , c. bade , f. doil , p . meier , augment reality-bas factori planning—an applic tailor industri need , proceed 6th ieee acm intern symposium mix augment realiti , pp . 1–9 . ( ieee comput societi , 2007 ) 17 . w. friedrich , d. jahn , l. schmidt , arvika-aug realiti develop , product servic , ismar , vol . 2002 , pp . 3–4 . ( cites , 2002 ) 18 . d. mizel , boe ’ wire bundl assembl project , fundament wearabl comput augment realiti ( 2001 ) 19 . d. willer , augment realiti airbu , intern symposium mix & augment realiti ( 2006 ) 20 . h. fuch , et al. , augment realiti visual laparoscop surgeri , intern confer medic imag comput computer-assist intervent , pp . 934–943 . ( springer , 1998 ) 21 . n. navab , a. bani-kashemi , m. mitschk , merg visibl invis : two camera- augment mobil c-arm ( camc ) applic , proceed 2nd ieee acm intern workshop augment realiti ( iwar ’ 99 ) , pp . 134–141 . ( ieee , 1999 ) 22 . s. v ogt , a. khamen , f. sauer , realiti augment medic procedur : system archi- tectur , singl camera marker track , system evalu . int . j. comput . vi . 70 ( 2 ) , 179 ( 2006 ) 23 . v . vlahaki et al. , archeoguid : augment realiti guid archaeolog site . ieee comput . graph . appl . 22 ( 5 ) , 52–60 ( 2002 ) 24 . h. kaufmann , d. schmalstieg , mathemat geometri educ collabor aug- ment realiti , acm siggraph confer abstract applic , pp . 37–41 ( 2002 ) 25 . h. kaufmann , collabor augment realiti educ . ( vienna univers technol- ogi , institut softwar technolog interact system , 2003 ) 26 . k.l . schrier , revolution histori educ : use augment realiti game teach histo- rie . ph.d. thesi . ( massachusett institut technolog , depart compar media studi , 2005 ) 27 . e klopfer , k squir , h. jenkin , environment detect : pda window virtual simul world , proceed ieee intern workshop wireless mobil technolog educ , pp . 95–98 . ( ieee , 2002 ) 28 . e. klopfer , j. perri , k. squir , m.-f. jan , c. steinkuehl , mysteri museum : collabo- rativ game museum educ , proceed confer comput support for760 20 augment realiti virtual realiti collabor learn : learn 2005 : next 10 year ! , pp . 316–320 . ( intern societi learn scienc , 2005 ) 29 . z. szalavári , d. schmalstieg , a. fuhrmann , m. gervautz , “ studierstub ” : environ collabor augment realiti . virtual real . 3 ( 1 ) , 37–48 ( 1998 ) 30 . j. rekimoto , m. saitoh , augment surfac : spatial continu work space hybrid comput environ , proceed sigchi confer human factor comput system , pp . 378–385 . ( acm , 1999 ) 31 . h. tamura , steadi step giant leap toward practic mix realiti system applic , inproceed intern statu confer virtual augment realiti , pp . 3–12 ( 2002 ) 32 . m. lake , game ’ line , line ’ screen . new ork time ( 2000 ) 33 . r. cavallaro , foxtrax hockey puck track system . ieee comput . graph . appl . 2 , 6–12 ( 1997 ) 34 . b. thoma , b . close , j. donoghu , j. squir , p . de bondi , m. morri , w. piekarski , arquak : outdoor/indoor augment realiti ﬁrst person applic , proceed 4th inter- nation symposium wearabl comput , pp . 139–146 . ( ieee , 2000 ) 35 . a.d. cheok , s.w . fong , k.h . goh , x. yang , w. liu , f. farzbiz , human pacman : sensing- base mobil entertain system ubiquit comput tangibl interact , inproceed 2nd workshop network system support game , pp . 106–117 . ( acm , 2003 ) 36 . t. ohshima , k. satoh , h. yamamoto , h. tamura , ar2 hockey : case studi collabora- tive augment realiti , proceed virtual realiti annual intern symposium ( vrai ’ 98 ) , p. 268 . ( ieee comput societi , 1998 ) 37 . c. matysczok , r. radkowski , j. berssenbruegg , ar-bowl : immers realist game play real environ use augment realiti , proceed acm sigchi interna- tional confer advanc comput entertain technolog , pp . 269–276 . ( acm , 2004 ) 38 . p . lincoln , a. blate , m. singh , t. whit , . state , a. lastra , h. fuch , motion photon 80 µs : toward minim latenc virtual augment realiti . ieee tran . visual comput . graph . 22 ( 4 ) , 1367–1376 ( 2016 ) 39 . t. akenine-möl , e. hain , n. hoffman , real-tim render , 4th edn . ( crc press , 2018 ) 40 . d. wagner , d. schmalstieg , first step toward handheld augment realiti , proceed 7th ieee intern symposium wearabl comput , p. 127 . ( ieee comput societi , 2003 ) 41 . r. shea , . sun , s. fu , j. liu , toward fulli ofﬂoad cloud-bas ar : design , implement experi , proceed 8th acm multimedia system confer , pp . 321– 330 . ( acm , 2017 ) 42 . m.a . livingston , j.h . barrow , c.m . sibley , quantiﬁc contrast sensit color percept use head-worn augment realiti display . technic report . ( naval research lab , washington dc , virtual realiti lab , 2009 ) 43 . s.k . sridharan , j.d . hincapié-ramo , d.r . flatla , p . irani , color correct optic see- display use display color proﬁl , proceed 19th acm symposium virtual realiti softwar technolog , pp . 231–240 . ( acm , 2013 ) 44 . j.d . hincapié-ramo , l. ivanchuk , s.k . sridharan , p .p . irani , smartcolor : real-tim color contrast correct optic see-through head-mount display . ieee tran . visualizationcomput . graph . 21 ( 12 ) , 1336–1348 ( 2015 ) 45 . . itoh , m. dzitsiuk , t. amano , g. klinker , semi-parametr color reproduct method optic see-through head-mount display . ieee tran . visual comput . graph . 21 ( 11 ) , 1269–1278 ( 2015 ) 46 . s. lee , depth camera imag process applic , 19th ieee intern confer imag process , pp . 545–548 . ( ieee , 2012 ) 47 . u.r . dhond , j.k. aggarw , structur stereo—a review . ieee tran . syst . man cybern . 19 ( 6 ) , 1489–1510 ( 1989 ) refer 761 48 . r. l. holloway , registr error augment realiti system . ph.d. thesi . ( cites , 1995 ) 49 . s. julier , m. lanzagorta , . baillot , l. rosenblum , s. feiner , t. holler , s. sestito , inform ﬁltere mobil augment realiti , proceed ieee acm intern symposium augment realiti ( isar 2000 ) , pp . 3–11 . ( ieee , 2000 ) 50 . b . bell , s. feiner , t. höllerer , view manag virtual augment realiti , pro- ceed 14th annual acm symposium user interfac softwar technolog , pp . 101–110 . ( acm , 2001 ) 51 . d. kalkofen , e. mendez , d. schmalstieg , interact focu context visual aug- ment realiti , proceed 6th ieee acm intern symposium mix augment realiti , pp . 1–10 . ( ieee comput societi , 2007 ) 52 . e. normand , m. mcgufﬁn , enlarg smartphon ar creat handheld vesad ( vir- tualli extend screen-align display ) , proceed ieee intern symposium mix augment realiti ( 2018 ) 53 . m. al-kalbani , i. william , m. frutos-pascu , analysi medium wrap freehand virtual object grasp exocentr mix realiti , ieee intern symposium mix augment realiti ( ismar ) , pp . 84–93 . ( ieee , 2016 ) 54 . b.d . sawyer , v .s . finomor , a.a. calvo , p .a . hancock , googl glass : driver distract caus cure ? human fact . 56 ( 7 ) , 1307–1321 ( 2014 ) 21content-bas retriev digit librari 21.1 retriev imag ? consid imag fig . 21.1 small portion garden delight hieronymu bosch ( 1453–1516 ) , prado museum madrid . famou paint , may stump understand painter ’ intent.therefor , aim automat retriev imag , unsur- prise encapsul semant ( mean ) imag even difﬁcult challeng . proper annot imag certainli includ descriptor “ people. ” hand , imag block “ net nanni ” screen “ nake peopl ” ( [ 1 ] ) ? know well web browser web search button multimedia content ( usual imag , video youtub competitor ) , oppos text . bosch ’ paint , text-bas search like best job , shouldw wish ﬁnd particular imag . yet may interest fairli gener search , say scene deep blue sky orang sunset . pre-calcul fundament statist imag store databas , usual ﬁndsimpl scene . incept , retriev digit librari began idea borrow tradit inform retriev disciplin ( see , e.g. , [ 2 ] ) . line inquiri con- tinu [ 3 ] . exampl , [ 4 ] , imag classiﬁ indoor outdoor class use basic information-retriev techniqu . train set imag cap- tion , number time word appear document divid thenumb time word appear document class . similar measur devis statist descriptor content imag segment , two information-retrieval-bas measur combin effect classiﬁc mechan . howev , mani multimedia retriev scheme move toward approach favor multimedia content , either without regard relianc upon accom- © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7_21763764 21 content-bas retriev digit librariesss fig . 21.1 best character inform content imag ? pani textual inform , least textual-bas search bolster multimedia evid . commonli known content-bas imag retriev ( cbir ) . recent attent place deeper problem addressingsemant content imag , cours also make use accompani text ( possi- bli insert media archiv ) . data consist statist featur built object imag also text associ imag , type modality—text image—provid semant content omit . exampl , imag red rose normal manual ad keyword “ red ” sinc gener assum . henc , imag featur associ word may disambigu ( see [ 5 ] ) . chapter , howev , shall focu techniqu system make use imag featur , without text , retriev imag databas web . type featur typic use statist measur color histogram imag . consid imag colorful—say , santaclau plu sled . combin bright red ﬂesh tone brown might enough imag signatur allow us least ﬁnd similar imag imag databas ( ofﬁc christma parti ) . recal color histogram typic three-dimension array count pixel speciﬁc red , green , blue valu . nice featur structur care orient imag ( sinc simpli countingpixel valu , orient ) also fairli impervi object occlus . semin paper subject [ 6 ] launch tidal wave interest so-cal “ low-level ” featur imag . simpl featur use descriptor color layout , mean simpl sketch checkerboard grid cover imag look blue sky andorang sunset . anoth featur use textur , mean type descriptor21.1 retriev imag ? 765 typic base edg imag , form take partial deriv imag itself—classifi edg accord close space orient . interest version approach use histogram edg featur . tex- ture layout also use . search engin devis featur said becontent-bas : search guid imag similar measur base statist content imag . typic , might interest look imag similar current favorit santa . industry-ori applic would typic seek particular imag postag stamp , say . subject ﬁeld associ imagedatabas search includ art galleri museum , fashion , interior design , remot sens , geograph inform system , meteorolog , trademark databas , crim- inolog , increas number area . emerg deep learn technolog brought state-of-the-art perfor- manc featur match . initi base convolut neural net-work ( cnn ) [ 7,8 ] . mani variat neural network conﬁgur sinc develop , notabl gener adversari network ( gan ) . difﬁcult type search involv look particular object within imag , term search-by-object model . involv much complet catalog imag content much difﬁcult goal . gener , user base search search associ [ 9 ] , mean ﬁrst cut search follow reﬁnement base similar queri result . gener imag repres kind desir pictur , categori search return one element request set , one sever trademark databas logo . altern , queri may base speciﬁc imag , particular piec art—a target search . also effort retriev 3d shape object [ 10,11 ] . anoth axi bear mind understand mani exist search system whether domain search narrow , databas trademark , wide , set commerci stock photo . system , fundament natur machin system aim replac human endeavor . main obstacl neatli summar author summari [ 9 ] term sensori gap semant gap : sensori gap gap object world inform ( com- putat ) descript deriv record scene . semant gap lack coincid inform one extract visual data interpret data user given situat . imag featur record speciﬁc imag , imag may elud descript term . may certainli abl describ imag linguist , messag imag , semant , difﬁcult captur machin applications.766 21 content-bas retriev digit librariesss 21.2 synopsi earli cbir system follow provid exampl earli cbir system . mean complet synopsi . engin experiment , includ interest way . good summari appear [ 9 ] . •qbic queri imag content ( qbic ) , develop niblack colleagu [ 12,13 ] ibm ’ almaden research center san jose , arguabl famoussearch engin . one interest featur qbic metric use color histogram differ . basic metric use histogram differ histogram intersect , basic l 1-norm base measur . instead simpl histogram intersect , qbic metric recogn color similar , red orang , zero intersect . instead , color-dist matrix ai introduc , element aij= ( 1−dij/dmax ) ( 21.1 ) , diji deﬁn three-dimension color differ ( use euclidean distanc , like distance—sum absolut valu , say ) .then histogram-differ 2i deﬁn follow [ 14 ] : d2=ztaz ( 21.2 ) vector zi histogram-differ vector ( vector histogram ) . exam- ple , histogram-differ vector zwould length 256 compar two-dimension chromat histogram size 16 ×16 . •chabot chabot earli system uc-berkeley aim includ 500,000 digit multiresolut imag . chabot use relat databas manage- ment system postgr access imag associ textual data . thesystem store text color histogram data . instead color percentag , “ mostli red ” type simpl queri accept . •blobworld blobworld [ 15 ] also develop uc-berkeley . attempt captur idea object segment imag region . achiev good segment , anexpect maxim ( em ) algorithm deriv maximum likelihood good cluster featur space . blobworld allow textual content-bas search . system degre feedback , display intern represent submit imag queri result , user better guid algorithm . •webseek team columbia univers develop sever search engin , web-seek better known . collect imag ( text ) web . emphasi make searchabl catalogu topic anim , architecture,21.2 synopsi earli cbir system 767 art , astronomi , cat , . relev feedback provid form thumbnail imag motion icon . video , good form feedback also inclus small , short video sequenc anim gif ﬁle . •photobook fourey photobook [ 16 ] one earlier cbir system develop mit media laboratori . search three differ type imag content ( faces,2-d shape , textur imag ) use three mechan . ﬁrst two type , creat eigenfunct space—a set “ eigenimages. ” , new imag describ term coordin basi . textur , imag istreat sum three orthogon compon decomposit denot wold featur [ 17 ] . relev feedback ad , photobook becam fourey . system assign posit neg weight chang imag , given similar queri one seen , search faster previous . •informedia informedia ( later informedia-ii ) digit video librari project carnegi mellon univers center “ video mining. ” fund consortium ofgovern corpor sponsor . uniqu combin speech recognit , imag understand , natur languag process technolog . featur includ video audio index , navig , video summar visu- , search retriev video media . •uc santa barbara search engin alexandria digit librari ( adl ) season imag search enginedevis univers california , santa barbara . adl concern geograph data : “ spatial data web. ” user interact map zoom map , retriev imag queri result type pertainsto select map area . approach mitig fact terabyt , perhap , data need store landsat satellit imag , say . instead , adl use multiresolut approach allow fast brows make use imag thumbnail . multiresolut imag mean possibl select certain region within imag zoom . •mar multimedia analysi retriev system ( mar ) develop uni- versiti illinoi urbana-champaign . idea creat dynam systemof featur represent could adapt differ applic differ user . relev feedback , chang weight direct user , main tool use . •virag visual inform retriev ( vir ) imag search engin oper object within imag . imag index perform sever preprocess opera-t , smooth contrast enhanc . detail featur vector proprietari ; howev , known comput featur made one sever method , composit featur vector composedof concaten individu computations.768 21 content-bas retriev digit librariesss 21.3 c-bird—an earli experi let us consid speciﬁc imag queri carri . make discuss concret , underpin discuss use imag databas search engin devis one author text ( see [ 18 ] ) . system call content-bas imag retriev digit librari ( c-bird ) , acronym devis content-bas imag retriev , rcbir . c-bird imag databas contain approxim 5,000 imag , mani keyfram video . databas search use select tool : textannot , color histogram , illumination-invari color histogram , color densiti , color layout , textur layout , model-bas search . although system develop earli year , still serv good exampl illustr common techniqu cbir base imag similar . moreov , offer uniqu featur search illumin invari , featur local , search-by-object model . let ’ step option . 21.3.1 color histogram c-bird , featur precomput imag databas . mostpreval featur util imag databas retriev color histogram [ 6 ] , type global imag featur , , imag segment ; instead , everi imag region treat equal . color histogram count pixel given pixel valu red , green , blue ( rgb ) . exampl , pseudocod , imag 8-bit valu r , g , b , ﬁll histogram 256 3bin : int hist [ 256 ] [ 256 ] [ 256 ] ; // reset 0 //imag appropri struct //with byte field red , green , blue i=0 .. ( max_y-1 ) j=0 .. ( max_x-1 ) { r = imag [ ] [ j ] .red ; g = imag [ ] [ j ] .green ; b = imag [ ] [ j ] .blue ; hist [ r ] [ g ] [ b ] ++ ; } usual , use histogram mani bin , part fewer bin tend smooth differ similar unequ imag . also wish save storag space.21.3 c-bird—an earli experi 769 fig . 21.2 search color histogram result . thumbnail imag corel galleri copyright corel . right reserv imag search proce match featur vector sampl imag , case , color histogram , featur vector everi imag databas . c-bird calcul color histogram target imag preprocess step , refer databas user queri imag . histogram isdeﬁn coars , bin quantiz 8 bit , 3 bit red green 2 blue . exampl , fig . 21.2 show user select particular image—on red ﬂower . result obtain , databas 5,000 imag , set 60 match imag . cbir system return result set either top match match set similar measur ﬁxed threshold value.c-bird use latter approach thu may return zero search result . match proce practic depend measur similar adopt . standard measur use color histogram call histogram inter- section . first , color histogram h ii gener imag iin databas . like think histogram three-index array , cours machin think long vector—h term “ featur vector ” typesof measur . histogram normal , sum ( doubl ) equal uniti . normal step interest : effect remov size imag . reason imag , say , resolut 640 ×480 , histogram entri sum 307,200 . imag one-quart size , 320 ×240 , sum770 21 content-bas retriev digit librariesss 76,800 . divis total pixel count remov differ . fact , normal histogram view probabl densiti function ( pdf ) . histogram store databas . suppos select “ model ” image—th new imag match possibl target databas . histogram hmi intersect databas imag histogram hi , accord equat [ 6 ] intersect =n/summationdisplay j=1min ( hj , hj ) ( 21.3 ) superscript jdenot histogram bin j , histogram nbin . closer intersect valu 1 , better imag match . intersectionvalu fast comput , note intersect valu sensit color quantiz . 21.3.2 color densiti color layout specifi desir color densiti , user select percentag theimag particular color set color , use color picker slider . choos either conjunct ( and ) disjunct ( ore ) simplecolor percentag speciﬁc . coars search method . user also set scheme color appear imag , term coars block color . user choic four grid size : 1 ×1 , 2×2 , 4×4 , 8 ×8 . search speciﬁ one grid size , grid ﬁlled rgb color value—or color valu , indic cell consid . everi databas imag partit window four time , window size . cluster color histogram use insid window , ﬁve frequent color store databas . querycel posit size correspond posit size window imag . figur 21.3 show layout scheme use . 21.3.3 textur layout similar color layout search , queri allow user draw desir tex- ture distribut . avail textur zero densiti textur , medium-dens edg four direct ( 0◦,45◦,90◦,135◦ ) combin , high-dens textur four direct combin . textur match done classifi textur accord direction densiti ( separ ) eval- uat correspond textur distribut select user thetextur block layout . figur 21.4 show layout scheme used.21.3 c-bird—an earli experi 771 fig . 21.3 color layout grid fig . 21.4 textur layout grid772 21 content-bas retriev digit librariesss textur analysi detail worthwhil consid detail texture-bas content analysi aim imag search . detail give tast typic techniqu system employ work practic situat . first , creat textur histogram . typic set indic comprehend- ing textur tamura ’ [ 19 ] . human percept studi show “ repetit , ” “ direction , ” “ granular ” relev discriminatori factor human textur percept [ 20 ] . , use two-dimension textur histogram base direction φandedg separ ξ , close relat “ repet- itiveness. ” φmeasur edg orient , ξmeasur distanc parallel edg . extract edg map , imag ﬁrst convert lumin yviay= 0.299r+0.587g+0.114b.asobel edg oper [ 21 ] appli y-imag slide follow 3 ×3 weight matric ( convolut mask ) imag : dx : −101 −202 −101dy:121 000 −1−2−1 ( 21.4 ) averag around pixel weight , produc approxim deriv . edg magnitud dand edg gradient φare given d=/radicalbig d2x+d2i , φ=arctandi dx ( 21.5 ) next , edg thin suppress maximum valu . pixel iwith edg gradient φiand edg magnitud diha neighbor pixel jalong direct φiwith gradient φj≈φiand edg magnitud dj > di , pixel ii suppress 0 . make binari edg imag , set pixel greater threshold valu 1 other 0 . edg separ ξ , edg pixel iwe measur distanc along gradient φito nearest pixel jhave φj≈φiwithin 15◦ . pixel jdoesn ’ exist , separ consid inﬁnit . creat edg direction edg separ map , c-bird construct 2d textur histogram ξversu φ . initi histogram size 193 ×180 , separ valu ξ=193 reserv separ inﬁniti ( well ξ > 192 ) . histogram size reduc three dimens size 65×60 , join entri sum togeth . histogram “ smooth ” replac pixel weight sum neighbor reduc size 7 ×8 , separ valu 7 reserv inﬁniti . stage , textur histogram also normal divid thenumb pixel imag segment.21.3 c-bird—an earli experi 773 21.3.4 search illumin invari illumin chang dramat alter color measur camera rgb sen- sor , pink daylight purpl ﬂuoresc light , exampl . deal illumin chang queri imag differ databas imag , color-channel band imag ﬁrst normal , compressedto 36-vector [ 22 ] . normal r , g , b band imag serv simpl yet effect guard color chang light color chang . two-dimension color histogram creat use chromat , set band ratio { r , g } / ( r+g+b ) . chromat similar chromin video , captur color inform , lumin ( bright ) . 128 ×128–bin 2d color histogram treat imag com- press use wavelet-bas compress scheme [ 23 ] . reduc num- ber vector compon featur vector , dct coefﬁcient smallerhistogram calcul place zigzag order , 36 compon drop . match perform compress domain take euclidean distanc two dct-compress 36-compon featur vector . ( illumination- invari scheme object-model-bas search describ next uniqu c-bird . ) figur 21.5 show result search . fig . 21.5 search illumin invari . thumbnail imag corel galleri copyright corel . right reserved774 21 content-bas retriev digit librariesss fig . 21.6 c-bird interfac , show object select use ellips primit . imag corel galleri copyright corel . right reserv sever type search done check multipl checkbox . return reduc list imag , sinc list conjunct ofal result separ return list method . 21.3.5 search-by-object model import search type c-bird support model-bas object search . user pick sampl imag interact select region object search . object photograph differ scene condit still effect matched.thi search type proce user select thumbnail click model tab enter object select mode . object interact select portion imag ; constitut object queri exampl . figur 21.6 show sampl object select . imag region select use primit shape rectangl ellips , magic wand tool basic seed-bas ﬂood algorithm , activ contour ( “ snake ” ) , brushtool , paint region select . select combin use boolean oper union , intersect , exclus . object region deﬁn user ’ satisfact , drag right pane , show current select . multipl region drag select pane , activ object select pane search on.21.3 c-bird—an earli experi 775 fig . 21.7 block diagram object match step fig . 21.8 model target imag : asampl model imag ; bsampl databas imag contain model book . activ percept textbook cover courtesi lawrenc erlbaum associ , inc.776 21 content-bas retriev digit librariesss fig . 21.9 search result pink book model illumin chang support : asearch result use pose estim ; bsearch result use pose estim textur support ; csearch result use ght shape veriﬁc . thumbnail imag corel galleri arecopyright corel . right reserved21.3 c-bird—an earli experi 777 user also control paramet ﬂood threshold , brush size , activ contour curvatur . detail underli mechan search object model set [ 23 ] introduc exampl work system . figur 21.7 show block diagram algorithm proce . first , user-select model imag process featur local ( detail discuss [ 18 ] ) . color histogram intersect , base reduc chromat histogram describ previou section , appli ﬁrst “ screen. ” step estim pose ( scale , translat , rotat ) object insid target imag database.thi follow veriﬁc intersect textur histogram ﬁnal check use efﬁcient version gener hough transform ( ght ) shape veriﬁc . possibl model imag one target imag databas might fig . 21.8 , scene ( b ) illumin dim ﬂuoresc light . figur 21.9 show search result pink book c-bird . c-bird experiment system , provid proof principl difﬁcult task search-by-object model possibl . 21.4 quantifi search result gener speak , simpl express perform imag searchengin desir . inform retriev , precis percentag relev document retriev compar number document retriev , recal percentag relev document retriev relev document . recal precis wide use report retriev perform imageretriev system well . howev , measur affect databas size amount similar inform databas . also , consid fuzzi match search result order . equat form , quantiti deﬁn precis =relev imag return retri ved imag recal =relev imag return rele vant imag ( 21.6 ) altern , may also written precis =tp tp+fp recal =tp tp+fn ( 21.7 ) 778 21 content-bas retriev digit librariesss tp ( true posit ) number relev imag return , fp ( fals posit ) number irrelev imag return , fn ( fals neg ) number relev imag return . gener , relax threshold allow imag return , smaller precis , larger recal ; vice versa . appar , quit meaning talk either precis recal number itself.instead , combin provid good measur , e.g. , precis recal 50 % , recal precis 90 % , etc . multipl queri involv , number precis recal valu increas . measur overal perform cbir system , common way summar valu singl valu , i.e. , mean averag precis ( map ) . averag precis singl queri qi deﬁn ap ( q ) =1 nrnr/summationdisplay n=1precis ( n ) ( 21.8 ) precis ( n ) precis valu n-th relev imag retriev , nri total number relev imag . map mean averag precis queri imag : map =1 nq/summationdisplay q∈qap ( q ) ( 21.9 ) qi queri imag set , nqi size . map advantag reﬂect precis recal orient aspect sensit entir rank [ 24 ] . deﬁnit precis recal , one thing miss : valu tn ( true neg ) . context cbir , search dog imag databas contain 100 relev dog imag , fact whether databas contain anoth 100 non-dog imag million non-dog imag , i.e. , tn=100 tn=1,000,000 , often matter , larger tntend yield distract ( nois ) . mani measur perform cbir system devis , among popular one receiv oper characterist ( roc ) .g v e n databas contain 100 relev imag ( e.g. , hors ) 1,000 imag ( i.e. , non-hors ) , cbir system correctli retriev 70 hors imag 100 hors imag , incorrectli identiﬁ 300 “ hors ” imag 1,000 imag , true posit rate p r =70 % fals posit rate f p r =30 % . obvious , tpr =recal deﬁn eq . 21.7 , fpr=1−tnr , tnr ( true neg rate ) percentag ( 70 % ) non-hors correctli identiﬁ . figur 21.10 depict so-cal roc space , plot tpr fpr . 45 ◦diagon line fig . 21.10 indic perform random guess . exampl , use ( fair ) coin-ﬂip determin outcome,21.4 quantifi search result 779 e fals posit rate ( fpr ) 0.2 0.4 0.6 0.8 1.00.20.60.81.0 0.4 0true posit rate ( tpr ) perfect worstworsebett ad cb fig . 21.10 roc space return result 50 true hors imag 500 fals “ hors ” imag two group imag , i.e. , tpr =50 % fpr=50 % , indic point ( 0.5,0.5 ) diagon line ﬁgure . bias coin weight produc posit outcom ( e.g. , head ) may yield perform indic point b ( 0.8,0.8 ) . convers , may produc c ( 0.25,0.25 ) . clearli , would like cbir system produc result better coin-ﬂip . name , perform diagon line . point ( 0.1,0.8 ) exampl would good perform . gener , aim close possibl ultim perfect point ( 0,1.0 ) . point e ( 0.8,0.2 ) indic poor perform , obvious ( 1.0,0 ) would worst . measur cbir system multipl tpr ( orfpr ) valu , deriv anroc curv , often provid comprehens analysi system behavior . perfect roc curv would consist two straight line segment , one vertic ( 0,0 ) ( 0,1.0 ) one horizont ( 0,1.0 ) ( 1.0,1.0 ) , indic fals posit fals neg whatsoev . normal roc curv area ideal perform 45◦diagon line . roc gener statist measur variou classiﬁ . applic mani disciplin , e.g. , psycholog , physic , medicin , increasingli machin learn data mining.780 21 content-bas retriev digit librariesss 21.5 key technolog current cbir system ﬁeld cbir wit rapid growth progress new millennium . unlik earli year , user longer satisﬁ queri result return scene contain “ blue sky , ” red blob may may ﬂower . look object , peopl , often search human activitiesa well . datta et al . [ 25 ] zhou et al . [ 26 ] provid comprehens survey cbir ﬁeld . section , brieﬂi describ technolog issu key success current futur cbir system . 21.5.1 robust imag featur represent mani featur descriptor develop beyond one speciﬁ mpeg-7 . , discuss sift andvisu word . scale invari featur transform ( sift ) addit global featur color textur histogram , local featur character scale invari featur transform ( sift ) [ 27 ] develop suitabl search emphas visual object . sift hasbeen shown robust imag nois ; also fair degre invari translat , rotat , scale chang . process extract sift featur imag start build multiresolut scale space , shown fig . 21.11 . scale , stack imag gener appli gaussian smooth ( ﬁltere ) oper . stack ( so-cal octav ) s+3 images—so s=2 exampl shown ﬁgure . standard deviat gaussian ﬁlter stack increas factor 2 1/ . exampl , σ , √ 2σ,2σ,2√ 2σ , 4 σin ﬁrst octav . third imag top stack use bottom imag next stack reduc imag resolut half . gaussian ﬁltere process continu , henc next octav gaussian ﬁlter standard deviations2σ,2√ 2σ,4σ,4√ 2σ , 8 σ . simpl oper imag subtract , indic ﬁgure , gener differ gaussian ( dog ) imag . , readi talk key point sift . dog imag , pixel ’ dog valu maximum minimum compar 26 neighbor scale space ( see fig . 21.11 ) , consid possibl key point . , screen step introduc make sure key point distinct , e.g. , atth corner rather distribut long edg . , histogram edg ( gradient ) direct near key point analyz yield domin direct θ ( so-cal canon orient ) key point . local patch ( 16 ×16 pixel ) key point examin produc 128-dimension sift descriptor . patch divid 4 ×4 subwindow . in21.5 key technolog current cbir system 781 first_ _ __ _ ___ next octav key point gaussian filter differ gaussion ( dog ) octav fig . 21.11 scale space sift key point subwindow , histogram edg ( gradient ) direct deriv . quanti- zation everi 45◦so histogram subwindow produc vector 8 dimens . total , obtain 4 ×4×8=128 dimension sift descriptor . , edg direct calcul rel canon orient θ . henc , facilit rotat invari . visual word bag word ( bow ) concept origin techniqu document classiﬁca- tion text retriev . name suggest , mix bag word extract queri sentenc use queri . stem word use , e.g. , “ talk ” “ talk , ” “ talk , ” “ talk , ” etc . way , detail word ( e.g. , tens , singular , plural ) , word order , grammar sentenc all782 21 content-bas retriev digit librariesss ignor . advantag tend robust variat text . analog , bag visual word extract repres imag featur . fei-fei perona [ 28 ] present earlier work comput vision bag codeword use repres variou textur featur imag . cbir , common way gener visual word use sift good properti discuss . ( ) object base , ( b ) video frame base . search base given object model , cluster sift featur use visual word describ object . commonli , thevector quantiz method outlin chap . 8can use turn visual word codeword codebook . search aim ﬁnding similar frame video movi , sift featur queri video frame use gener visual word . altern , sivic zisserman [ 29 ] divid video frame dozen ( hundr ) region , region produc amean sift descriptor ¯x iand use visual word . cluster match larg number sift descriptor shown comput challeng . visual word rich encapsul essenti visual featur . howev , com- pare word text , visual word even ambigu . gener , small-siz codebook limit discrimin power , good enough handl cbir larg imag video databas . hand , larg code-book also problem , featur contamin nois easili quantiz differ codeword . 21.5.2 user feedback collabor relev feedback , well-known techniqu inform retriev brought bear cbir system [ 30 ] . brieﬂi , idea involv user loop , wherebi imag retriev use round converg onto correct return . usual situat user identiﬁ imag good , bad , ’ care , weight system updat accord user guidanc . basic advantag put user loop use relev feedback way , user need provid complet accur initi queri . relev feedback establish accur link low-level featur high-levelconcept , somewhat close semant gap . result , retriev perform cbir system improv . besid mechan relev feedback , argu user play activ role cbir system . 2012 intern confer multimedia retriev ( icmr ) , panelist ( also author [ 3 ] ) rais question : user multimedia retriev ? point thedomin map , common evalu trecvid , may hinder develop better use multimedia retriev system . although map merit object reproduc , unlik singlenumb meet need user , tend differ dynam task mind.21.5 key technolog current cbir system 783 one way comprehend peopl view imag similar studi use user group form basi percept imag similar [ 31 ] . function use approach type “ perceptu similar measur ” islearn ﬁnding best set featur ( color , textur , etc . ) captur “ similar ” deﬁn via group similar imag identiﬁ . anoth way understand user talk care analyz search pattern . word , addit content-bas , need context- base , user ’ interpret content often inﬂuenc ( even determin ) context . smith et al . [ 32 ] propos ﬁrst computer–human collabor system movi trailer creation , appli ﬁlm “ morgan ” releas 2016 . multi- media analysi algorithm retriev select 10 moment origin movi candid scene trailer , profession ﬁlm-maker involv com- plete trailer creation . speciﬁc , movi ﬁrst segment audio/visualsnippet visual shot-boundari detect audio segment algorithm . audio sentiment featur comput audio segment use openear model [ 33 ] , train six emot recognit dataset . sentibank [ 34 ] employ extract visual sentiment represent keyfram shot . visual sentiment featur keyfram within rang audio segment aggreg form composit visual sentiment featur . besid , visual placeattribut featur extract places-cnn model [ 35 ] . extract high-level audio visual featur , princip compon analysi ( pca ) appli project featur lower dimension space , scene high-est respons select candid make trailer . final , ﬁlm-maker involv creat trailer , rearrang cut shot , creat good transit overlay ofﬁcial soundtrack . 21.5.3 post-process techniqu besid user feedback collabor , post-process method beendevelop initi queri result . spatial veriﬁc qualiti queri result veriﬁ improv spatial veriﬁc . modern camera often provid inform locat pictur taken , trivial check consist relev certain queri result user interest imag certain locat , e.g. , pari rome . paper [ 36 ] , philbin et al . go well beyond simpl check geometr locat . aim verifi imag region queri imag retriev imag object scene region . argu unlikeword inform retriev ( e.g. , “ anim , ” “ ﬂower ” ) , visual word inher contain much spatial inform . exampl , known theori of784 21 content-bas retriev digit librariesss imag geometri two view rigid object relat epipolar geometri , two view planar patch relat homograph , etc . show verifi map base geometr transform inde improv qualiti resultsbi spatial rerank . zhou et al . [ 37 ] describ spatial code method record rel spatial inform ( e.g. , left right , ) pair imag featur . arot spatial map propos efﬁcient simpl x- y-map . queri expans anoth approach move queri toward posit mark content . queri expans propos chum et al . [ 38 ] method . queri expans well-known method inform retriev combinationof high-rank relev document present new queri boost perform retriev . combin could simpli averag ( mean ) featur descriptor return document . problem oneof high-rank document false-posit , immedi harm perform new queri . robust statist method even simpli take median ( instead mean ) help . mention , visual word use cbir often contain use spatial inform . henc , high-rank retriev imag veriﬁ use form new queri imag . chum et al . [ 38 ] use recurs averag queri expans , recurs gener new queri imag spatial veriﬁ return imag . qa paradigm question-answ ( qa ) tri replac larg number imag multimedia content gener , return search queri , make use media content , knowledg search domain , also linguist analysi return hit base user ’ natural-languag question . sinc qa tradit focus text , bridg techniqu multimedia content refer mmqa [ 39 ] . gener , mmqa attempt combin tradit qa , base textual metadata , multimedia-ori approach inde intuit answer user ’ queri . 21.5.4 visual concept search search concept anoth major step close semant gap . typic , afterloc featur turn word , word convert semant conceptswith aid machin learn algorithms.21.5 key technolog current cbir system 785 interest work present wang et al . [ 40 ] , imag similar learn 103 flickr imag group internet adopt support vector machin ( svm ) classiﬁ , histogram intersect kernel . imag group rang fromobject aquarium , boat , car , penguin , scene sunset urban toconcept christma smile . show system perform better other directli measur imag similar simpl low-level visualfeatur color , textur , etc . assist develop test system , research practi- tioner develop mani multimedia databas benchmark . best knowni perhap trec video retriev evalu ( trecvid ) benchmark . trecvid start 2003 , origin confer text retriev confer ( trec ) , co-sponsor nation institut standard ( nist ) u.s. depart- ment defens . initi , trecvid provid video data profession sourc broadcast news , tv program , surveil system , thu limitedstyl content . exampl , typic head-shot news person , overhead view varieti indoor scene , etc . last decad , benchmark expand term test data object . exampl , trecvid 2013evalu follow task : •semant index •interact surveil event detect •instanc search •multimedia event detect •multimedia event recount . subsequ year , sever new task ad video hyper- link task ( lnk ) address issu social media storytel link . trecvid 2019 [ 41 ] task includ ad-hoc video search , activ extend video , instanc search , video text . myer et al . [ 42 ] report good perform multimedia event detect project , entitl sesam . start , multipl event classiﬁ developedbas bag word singl data type , e.g. , low-level visual featur , motion featur , audio featur ; high-level visual ( semant ) concept birthday-parti , making-a-sandwich , etc . variou fusion method ( arithmet mean , geometr mean , mean averag precis ( map ) weight , weight mean root , condit mixtur model , spars mixtur model , etc . ) test . shown simpl fusion method , e.g. , arithmet mean , perform well asmor complex one , better . 21.5.5 featur learn convolut neural network convolut neural network ( cnn ) [ 7 ] brought revolut comput vision commun power featur learn abil base large-scal dataset . alexnet architectur [ 43 ] start outperform tradit mod-786 21 content-bas retriev digit librariesss fig . 21.12 illustr typic convolut neural network architectur el base hand-craft featur imagenet classiﬁc task 2012 . , varieti cnn architectur propos , vggnet [ 44 ] , googlenet [ 45 ] , resnet [ 46 ] . immens success achiev state-of-the-art perform variou comput vision task , imag classiﬁc object detect . convolut neural network usual consist multipl convolut layer , may also includ fully-connect ( fc ) layer , pool layer , normal layer activ function rectiﬁ linear unit ( relu ) . weight convolut ﬁlter fc layer updat learn use error back propag train . figur 21.12 show illustr alexnet architectur [ 43 ] . shown gener featur descriptor extract cnn power discrimin , use tackl divers rang visual recognit task [ 47 ] . cnn usual train imagenet dataset classiﬁc task use featur extractor , feed imag network use output upper layer ( e.g. , fc layer ) featur represent . order adjust cnn learn relev featur task use dataset may differ imag statist , one strategi ﬁne-tun pre-train cnn target dataset similar imag test time . ﬁne-tun achiev ﬁrst initi network weight pre-train cnn retrain model target dataset . method wide use task includ content-bas imag retriev [ 8,48,49 ] . babenko et al . [ 48 ] evalu perform gener cnn featur , refer neural code , imag retriev applic . author employ alexnet architectur use output layer 5 , 6 , 7 , last convolut layer ﬁrst two fully-connect layer , featur descrip- tor neural code input imag . perform neural code evalu four standard dataset ( oxford , oxford 105k , holiday , ukb ) compar tradit featur . result demonstr among layer , featur 6th layer gener perform best . comparison well-perform method , neural code ball park . is21.5 key technolog current cbir system 787 promis consid fact cnn train imagenet dataset classiﬁc task , quit differ retriev task . idea ﬁne- tune also test [ 48 ] , author collect landmark dataset 672 class 213,678 imag . dataset similar imag appear landmark-typ dataset ( holiday oxford ) . demonstr retrain pre-train cnn landmark dataset result improv retrievalperform two dataset . babenko et al . [ 48 ] evalu two differ strategi reduc dimen- sion featur 6th layer , vector 4,096 entri . theyﬁrst evalu perform neural code compress use princip compon analysi ( pca ) differ dimens . experi show neu- ral code compress 256 even 128 dimens littl loss retriev perform . perform degrad grace reduc featur dimens lower 128 . compar neural code tradi-t featur compress dimens 128 , neural code achiev better result . demonstr neural code resili com- pression provid better short-featur hand-craft descriptors.th author investig discrimin dimension reduct method learn low-rank project matrix . object make distanc code similar imag small imag larg . demonstr thisdimens reduct method improv perform pca-compress neural code even extrem compress 16-dimension code . besid use gener featur ﬁne-tun featur [ 48 ] , wan et al . [ 49 ] propos anoth two scheme reﬁn deep cnn featur content-bas imag retriev . ﬁrst scheme use similar learn base extract featur pre-train model . speciﬁc , similar function twosampl denot bilinear form : w ( xi , xj ) =xt iwxj , wi matrix learn comput similar , xi , xjare cnn featur . similar learn base triplet constraint set contain similar dissimilar inform imag pair , denot χ= { ( xi , x+ , x− ) } , i=1 , ... , n , ( xi , x+ ) ( xi , x− ) repres relev imag pair irrelev imag pair , respect . hing loss triplet deﬁn lw ( xi , x+ , x− ) =max { 0,1−sw ( xi , x+ ) +sw ( xi , x− ) } . loss minim appli passive-aggress algorithm iter triplet optim w. triplet construct simpli consid instanc class relev , instanc differ class irrelev . use learn similar measur , model abl achiev better retriev perform usinggener cnn featur . second scheme propos [ 48 ] ﬁne-tun cnn loss function base cosin similar . scheme , cnn model train end-to-endmann back-propag error previou layer updat paramet entir model . therefor , featur represent reﬁn retriev dataset . cosin similar two featur x , xji deﬁn sco ( xi , xj ) = xt ixj/ ( /bardblxi/bardbl×/bardbl xj/bardbl ) . loss function deﬁn similar hing loss ﬁrst scheme , triplet constraint set also use train . experimental788 21 content-bas retriev digit librariesss result demonstr reﬁn model similar guid retrain abl achiev better perform ﬁrst scheme . 21.5.6 databas index scale imag databas grow explos respons timebecom key issu content-bas imag retriev . simpl nearest neighbor search algorithm match queri imag consid time-consuming.even optim search structur k-d tree often meet efﬁcienc requir retriev larg databas . approxim nearest neighbor search method propos tackl problem . usual requir perform special databas organ index enabl fast approxim retriev . brieﬂi introduc two type index techniqu , invert index andhashing- base index . invert index invert index ﬁle structur consid matrix whose row column denot imag visual word , respect . retriev similar imag databas , imag contain visual word queri check . reduc number candid imag compar withth queri provid substanti speed-up exhaust search . ﬁle structur usual implement build ﬁle list visual word . ﬁle list visual word consist id imag contain visual word.som inform ham embed [ 50 ] , geometr statist [ 51 ] also store ﬁle list veriﬁc similar measur purpos . efﬁcienc invert index certain limit begin show larg dataset . method increas number visual word list ﬁle word becom larg exhaust search . invertedmulti-index [ 52 ] propos tackl problem , replac standard quan- tizat insid invert index product quantiz ( pq ) . invert multi-index construct multi-dimension tabl follow pq idea . theadvantag multi-index produc ﬁner subdivis return shorter candid list higher recal , also improv speed approxim nearest neighbor search . zheng et al . [ 53 ] propos coupl multi-index ( c-mi ) framework perform featur fusion index level . featur coupl multi-dimension invert index dimens correspond one fea- ture . retriev process vote imag similar sift colorattribut featur spaces.21.5 key technolog current cbir system 789 hashing-bas index hash techniqu wide adopt achiev efﬁcient retriev larg dataset . method partit databas use multipl hash function project featur sever bucket . imag retriev , queri imag also project hash function imag within bucket com-par queri . local sensit hash ( lsh ) one repres hash scheme [ 54 ] . key intuit lsh project featur multi- ple hash function , probabl collis ( fall within bucket ) much higher featur close far apart . formal , hash function h ( x ) call local sensit , ( r 1 , r2 , p1 , p2 ) - sensit , follow two condit hold featur x , ywith p1 > p2 andr1 < r2 : “ ( x , ) < r1 , p ( h ( x ) =h ( ) ) > p1 , ” “ ( x , ) > r2 , p ( h ( x ) =h ( ) ) < p2. ” function ( x , ) distanc metric pdenot probabl . kuli grauman [ 55 ] gener lsh accommod arbitrari kernel function , permit sub-linear time similar search wide class sim- ilar function . hash function also learn use deep convolutionalneur network [ 56 ] . 21.6 queri video video index make use motion salient featur tempor chang imag variou type queri . shall examin video index detail refer reader excel survey [ 25 ] . brief , sinc tempor main differ video collect imag , deal time compon ﬁrst foremost com- prehend index , brows , search , retriev video content . direct taken qbic group [ 13 ] new focu storyboard gener automat understand video—th so-cal “ invers hollywood ” problem . produc- tion video , writer director start visual depict storyproce . video understand situat , would ideal wish regener storyboard start place comprehend video . ﬁrst place start , , would divid video shot , shot consist roughli video frame click record button . howev , transit often place shots—fade-in , fade-out , dis- solv , wipe , on—so detect shot boundari may simpl forabrupt chang . gener , sinc deal digit video , possibl would like avoid uncompress mpeg ﬁle , say , speed throughput . therefor , researcherstri work compress video . simpl approach idea uncompress enough recov dc term , gener thumbnail 64 time smaller origin . sinc must consid p- b-frame well i-fram , even generatinga good approxim best dc imag complic problem.790 21 content-bas retriev digit librariesss dc frame obtain whole video—or , even better , obtain ﬂy—mani approach use ﬁnding shot boundari . featur use typic color , textur , motion vector , although conceptsa trajectori travers object also use [ 57 ] . shot group scene . scene collect shot belong togeth contigu time . even higher level semant exist so-cal “ ﬁlmgrammar ” [ 58 ] . semant inform basic element stori may obtain . ( coarsest level ) stori ’ exposit , crisi , climax , denouement . audio inform import scene group . typic scene , audio break within scene , even though mani shot may take place cours scene . gener time inform movi creation may also brought bear . text may inde use mean delin shot scene , make use closed-capt inform alreadi avail . howev , reli text unreli , sinc may exist , especi legaci video . differ scheme propos organ display story- board reason succinctli . straightforward method display two- dimension array keyfram . constitut good keyfram cours subject much debat . one approach might simpli output one frameeveri second . howev , action tendenc occur longer peri- od inact stori . therefor , kind cluster method usual use , repres longer period time less within temporalperiod belong singl keyfram . research suggest use graph-bas method . suppos video two talk head , interview interviewe . sensibl rep-resent might digraph direct arc take us one person , back . way , encapsul much inform video ’ structur also avail arsen tool develop graph prune manag . “ proxi ” also develop repres shot scene . group set keyfram may repres sequenc keyfram , may keyfram variabl size . annot text voic , set keyfram “ skim ” video , may requir sensibl understandingof underli video . amosa sever frame may use , wherein frame combin larger one match featur set frame . result set largerkeyfram perhap represent video . even radic approach video represent involv select ( creat ) singl frame best repres entir movi ! could base make sure peopl frame , action , . [ 59 ] , dufaux propos algorithm select shot keyfram base measur motion-act ( via frame differ ) , spatial activ ( via entropi pixelvalu distribut ) , skin-color pixel , face detection.21.6 queri video 791 fig . 21.13 digit video associ keyfram , beach video : afram digit video ; bkeyfram select fig . 21.14 garden video : afram digit video ; bkeyfram selected792 21 content-bas retriev digit librariesss take account skin color face , algorithm increas likelihood select keyfram includ peopl portrait , close-up movi actor , therebi produc interest keyfram . skin color learn use labeledimag sampl . face detect perform use neural net . figur 21.13 show select frame video beach activ ( see [ 60 ] ) . , keyfram fig . 21.13 b select base mainli color inform ( care respect chang incur chang illumin condit video shot ) . difﬁcult problem aris chang shot gradual color rather similar overal , fig . 21.14 . keyfram fig . 21.14 b sufﬁcient show develop whole video sequenc . approach attempt deal profoundli human aspect video , oppos lower level visual audio featur . much effort gone appli data mine knowledge-bas techniqu classifi video categori sport , news , , subcategori footbal basketbal . 21.7 queri video base human activity—a case studi thousand hour video captur everi day cctv camera , web camera , broadcast camera , etc . howev , activ interest ( e.g. , soccer player score goal ) occur rel small region along spatialand tempor extent video . scenario , effect retriev small spatial/tempor segment video contain particular activ larg collect video import . lan et al. ’ work [ 61 ] activ retriev directli inspir applic search activ interest broadcast sport video . exampl , consid scene ﬁeld hockey game shown fig . 21.15 . term human activ , varieti question ask : attack ? play- er bottom right corner ? mani peopl run ? playersar defend ( mark ) member oppos team ? overal game situat ? note potenti queri often involv social role “ defend , ” “ attack , ” “ man-marking. ” lan et al . [ 61 ] present model toward answer queri . represent human activ challeng , open problem . much work focus recognit low-level single-person action ( e.g. , [ 62 ] ) . lan et al . reli low-level featur represent use method predict action individu , build higher level model upon . model present use captur varieti level detail uniﬁ framework . inaddit model low-level action ( e.g. , run stand ) high-level event ( “ attack play , ” “ penalti corner ” ) , social role also model . social role take account inter-rel peopl complementari represent thelow-level action typic use activ recognit literatur . exampl , player engag social role “ man-mark ” like oppon nearbi . , notion low-level action , social role , high-level events21.7 queri video base human activity—a case studi 793 fig.21.15 exampl human activ realist scene . beyond gener scene-level activ descript ( e.g. , free hit ) , explain scene multipl level detail low-levelact ( e.g. , stand jog ) mid-level social role ( e.g. , attack ﬁrst defend ) .the social role denot differ color . exampl , use magenta , blue whiteto repres attack , man-mark , player team attack , respect natur requir contextu representation—th action social role peopl scene interdepend , relat high-level event take place . model captur relationship , allow ﬂexibl infer socialrol depend given scene . 21.7.1 model human activ structur introduc model [ 61 ] . illustr , describ instanti applic model ﬁeld hockey video . ﬁrst describ label . assum imag pre-process , locat goal person imag found . separ player two team accord color histogram . person associ two label : action social role . let hi∈hand ri∈rb action social role person , respect , hand rare set possibl action social role label , respect . video frame associ event label y∈i , yi set possibl event label . model hierarch , includ variou level detail : low-level action , mid-level social role , high-level event . relationship interact includ model . deﬁn score interpret videofram iwith hierarch event represent as794 21 content-bas retriev digit librariesss fig . 21.16 graphic illustr model.differ type potentialsar denot line withdiffer color . detail ofth potenti function arecontain eq . 21.10 fw ( x , , r , h , ) =w/latticetop/phi1 ( x , , r , h , ) =/summationdisplay jw/latticetop 1φ1 ( xj , hj ) +/summationdisplay jw/latticetop 2φ2 ( hj , rj ) +/summationdisplay j , kw/latticetop 3φ3 ( , rj , rk ) ( 21.10 ) go model formul use graphic illustr shown fig . 21.16 . ﬁrst term denot standard linear model train predict action label person scene ( indic blue line fig . 21.16 ) . second term captur depend action label social role ( green line infig . 21.16 ) . third term explor contextu inform model interact peopl term social role event ( magenta dark blue line fig . 21.16 ) . social role natur captur import interact , e.g. , ﬁrst defend tend appear neighborhood attack , man-mark happen player oppos team . model paramet ware learn structur svm framework [ 63 ] ; detail reader refer [ 61 ] . infer given test video , varieti queri one might wish answer . use propos hierarch model , one formul queri individu variabl level detail . instanc , one queri overal event labelfor scene , social role label particular person . figur 21.17 show overview test phase . given video queri variabl q , infer problem ﬁnd best hierarch event represent maxim score function f w ( x , , h , r , ) ﬁxing valu qto possibl valu . exampl , qi action one person ( one hi ) , would comput maximum valu score function21.7 queri video base human activity—a case studi 795 fig . 21.17 overview test phase . given new video queri , ﬁrst run pre- train person detector tracker extract tracklet player . tracklet featuresar fed infer framework . final , retriev result obtain base inferencescor comput use eq . 21.10 fwwhen ﬁxing qto possibl action . deﬁn optim problem follow : max , h , r\qfw ( x , , h , r , ) =max , h , r\qw/latticetop/phi1 ( x , , h , r , ) ( 21.11 ) score use repres relev instanc ( e.g. , video frame ) queri . goal activ retriev system rank data accord relev score return top-rank instanc . 21.7.2 experiment result challeng broadcast field hockey dataset ( develop [ 61 ] ) consist sport activ captur broadcast camera use demonstr efﬁcaci model . model carri differ infer base user ’ queri . method directli applic multi-level human activ recognition.th goal predict event , social role , action person . case , queri ’ specifi particular event social role , consist gener question , overal game situat , social role ofeach player . figur 21.18 show visual predict event social role . 21.8 quality-awar mobil visual search increas popular mobil phone tablet , mobil visual search attract grow interest ﬁeld content-bas imag retriev ( cbir ) . section , present novel framework quality-awar mobil cbir peng et al . [ 64 ] . mobile-cli side , queri imag compress certain qualiti level accommod network condit upload onto serverwith qualiti level transfer side inform . server side , set featur extract queri imag compar features796 21 content-bas retriev digit librariesss fig.21.18 visual result broadcast ﬁeld hockey dataset . ground truth event ( white ) predict event shown left corner imag . correct predict visualizedin blue , otherwis yellow . bound box repres color , denot predictedsoci role . use magenta , yellow , green , blue , white repres social role attack , ﬁrstdefend , defend defend space , defend defend person , respectively.th cross sign middl bound box indic incorrect predict , ground truthsoci role indic color cross sign imag databas . efﬁcaci differ featur chang queri qualiti , leverag side inform queri qualiti select quality- speciﬁc similar function learn ofﬂin use support vector machin ( svm ) method . mobil visual search enabl peopl look visual similar product ﬁnd inform movi cd onlin initi search request cameraphon . depend part visual search perform mobil devic , sever possibl client–serv architectur [ 65 ] : 1 . queri imag transmit server , featur extract retriev done server . 2 . mobil client extract featur queri imag upload featur server . retriev perform server.21.8 quality-awar mobil visual search 797 3 . mobil client maintain cach imag databas . retriev done local client . match found client send queri server . case , system perform constrain bandwidth , comput , memori , power mobil devic . recent , work focus ondesign compact descriptor visual search . one repres work compress histogram gradient ( chog ) descriptor propos chandrasekhar et al . shown highli discrimin low bitrat . besid , thereha exploratori work mpeg committe toward deﬁn standard visual search applic sinc 2011 . standard initi refer “ compact descriptor visual search ( cdv ) . ” evid low-bitr descriptor lead shorter transmiss latenc , smaller memori overload , potenti faster match . therefor , three aforement client–serverarchitectur mobil visual search beneﬁt advanc compact- descriptor technolog . besid great amount research effort devot design visual descriptor , fusion method visual search also attract lotsof attent cbir commun . given descriptor set characterist imag , color , shape , textur , fusion techniqu shown effect reduc semant gap imag retriev base featur similar . , outlin framework mobil visual search use client–serv architectur [ 64 ] . speciﬁc , queri imag compress certain qualiti level mobil client upload server qualiti leveltransmit side inform time . queri quality-depend retriev algorithm base fusion multipl featur perform server . motiv behind propos framework follow : •although comput capac mobil devic becom power , sever advantag perform descriptor extrac- tion server . certainli , elimin wait time caus comput descriptor mobil devic limit comput resourc . importantli , given abund comput resourc server , greatli relax strin- gent constraint complex memori usag descriptor ( ) , make fusion method comput feasibl framework . •a bandwidth also import concern visual search wireless network , framework allow client compress queri imag certain bitrat accommod network condit . •sinc speciﬁc descriptor equal import imag differ qualiti level , side inform queri qualiti could leverag enhanc retriev perform fusion method.798 21 content-bas retriev digit librariesss 21.8.1 quality-awar method outlin queri quality-depend fusion approach mobil visual search . speciﬁc , base fusion ﬁve common imag featur [ 66 ] : •tini imag : trivial descriptor compar imag directli color space reduc imag dimens drastic . •color histogram : histogram 16 bin compon rgb color space , yield total 48 dimens . •gist : descriptor comput output bank 24 gabor-lik ﬁlter tune 8 orient 4 scale . squar output ﬁlter averag a4×4 grid . •texton histogram : imag build 512-dimension histogram use 512-entri univers texton dictionari . •ssim [ 67 ] : self-similar descriptor quantiz 300 visual word byk-mean . unlik descriptor mention , ssim provid comple- mentari measur scene layout somewhat appear invari . queri quality-depend method fusion imag retriev base ﬁve descriptor employ , follow . 1 . categor queri imag differ qualiti level base side infor- mation.1 2 . “ queri image-retriev imag ” pair , comput 5-dimension similarity- score vector xbase ﬁve descriptor . c-svm formul adopt learn weight wkto map xinto ﬁnal score sf=wk·x . speciﬁc , set posit ( relev ) imag pair pi select , also set neg ( irrelev ) imag pair n. imag pair pi∈p∪n , comput vector xi , assign xia label yi ( “ 1 ” pi∈p , “ −1 ” pi∈n ) . weight wcan learn solv follow optim problem : min w , b , ξ1 2wtw+cl/summationtext i=1ξi subject yi ( wtφ ( xi ) +b ) ≥1−ξi , ξi≥0 ( 21.12 ) optim run qualiti level kto learn wkuse queri dataset correspond qualiti . 3 . test stage , learn weight vector wki use comput ﬁnal sim- ilar score “ queri image-retriev imag ” pair , kbe qualiti level queri imag . retriev imag return decreas order ﬁnal similar score . 1for exampl , jpeg standard use scalar adjust set well-deﬁn quantiz tables.21.8 quality-awar mobil visual search 799 tabl 21.1 file size rang imag ( 386 ×256 ) wang databas compress differ qualiti level qualiti factor 100 75 50 30 20 15 10 8 5 3 size rang ( kb ) 7–56 6–38 4–24 4–18 3–14 3–12 3–9 3–8 3–6 3–5 21.8.2 experiment result dataset consid wang imag databas contain 1,000 imag 10 class ( 100 class ) . imag belong class consid rele-v . ten copi wang databas construct differ qualiti level . speciﬁc , imag compress use jpeg compress qualiti factor k∈ { 100,75,50,30,20,15,10,8,5,3 } . let kbe databas contain imag qualiti level k.d100correspond origin wang databas , d3contain imag lowest qualiti . ﬁle size rang imag compress list tabl 21.1 . experi , queri imag qualiti level , wherea imag retriev alway d100 . learn weight wkfor qualiti level k , select 500 queri imag ( 50 class ) dk , pair imag d100for train . let ( qk , , rj ) pair , qk , i∈dkand rj∈d100 . let c ( · ) denot class imag . pair ( qk , , rj ) label posit “ 1 , ” c ( qk , ) =c ( rj ) . otherwis , label neg “ −1. ” 9 neg class one posit class queri imag , randomli select one-ninth neg pair order balanc posit neg samplesdur train . remain 500 imag kthat select train use test . implement , dictionari use comput descriptor built use imag sun databas [ 66 ] . measur similar two descriptor base histogram intersect distanc use linear kernel svm-base quality-awar fusion method . result letsf ( q , rn ) ﬁnal similar score queri imag qand imag rn databas . databas imag rnare sort accord similar score sf ( q , rn ) ≥sf ( q , rn+1 ) . precis recal valu vari queri imag number return imag , mean averag precis ( map ) use instead , deﬁn eq . 21.9 . map result wang databas 10 differ qualiti level shown tabl 21.2 . see perform color histogram , tini imag , gist chang drastic imag qualiti drop . contrari , texton histogram ssim descriptor achiev best performance800 21 content-bas retriev digit librariesss tabl 21.2 map result differ qualiti level queri qualiti 100 75 50 30 20 15 10 8 5 3 color histogram 0.3874 0.3874 0.3831 0.3835 0.3800 0.3775 0.3746 0.3752 0.3672 0.3626 tini imag 0.3054 0.3052 0.3052 0.3047 0.3046 0.3043 0.3044 0.3038 0.3021 0.3021 gist 0.3292 0.3276 0.3279 0.3264 0.3247 0.3228 0.3174 0.3125 0.2990 0.2824 texton histogram 0.4260 0.4171 0.4256 0.4206 0.4135 0.4056 0.3843 0.3597 0.3119 0.2694 ssim 0.4804 0.4805 0.4154 0.3656 0.3463 0.3202 0.2949 0.2777 0.2456 0.2178 quality-awar fusion0.5730 0.5726 0.5462 0.5330 0.5259 0.5168 0.5081 0.4975 0.4808 0.4701 near higher end qualiti rang ( level 100 , 75 , 50 ) perform poorli near lower end qualiti rang ( level 5 3 ) . also observ quality-awar fusion method achiev signiﬁcantli better map individu descriptor qualiti level . notic , quality-awar fusion algorithm lowest-qu queri imag achiev com- parabl perform best-perform individu descriptor ssim thehighest-qu queri imag . strongli support advantag fuse mul- tipl descriptor visual search . discuss present quality-awar framework mobil visual search base queri quality-depend fusion method . experiment result demonstr potenti take consider qualiti queri imag improv perform fusion imag retriev . current progress code techniqu allow mobil client upload bitstream success reﬁn reconstruct queri imag . case , server canperform imag retriev use queri imag reduc qualiti , updat retriev result queri qualiti get better better . 21.9 deep increment hash network * hash wide use large-scal imag retriev storageand search efﬁcienc . learn hash aim encod imag short binari hash code preserv similar origin data supervis manner.with develop deep learn techniqu , recent work found hash function learn convolut neural network signiﬁcantli outperform convent hash mani applic [ 56 ] . deep supervis hash method usual requir larg amount data differ class train deep model achiev promis perform . explos growth imag databas , one practic challeng aris method keep model date . new set imag belong differ categori ad retriev system , updat hash model often requir retrainingon origin addit data , time-consum . besid , hash code origin imag would chang model updat new code need gener feed imag new hash function.21.9 deep increment hash network * 801 section , introduc deep increment hash network ( dihn ) propos wu et al . [ 68 ] address aforement problem . dihn learn hash code new imag directli keep code originalimag unchang . simultan , hash function learn queri imag use subset imag entir databas . main contribut work [ 68 ] summar follow : •a novel deep hash framework , call deep increment hash network ( dihn ) , propos learn hash code increment way . dihn incre- mental learn hash code new imag hold originalon invari , provid ﬂexibl way updat modern imag retriev system . •an increment hash loss devis preserv similar imag , use train deep convolut neural network hash function queri imag . hash loss incorpor exist hash code origin imag train hash function . meanwhil , hash code fornew imag directli obtain optim process . 21.9.1 problem deﬁnit assum databas contain mimag , denot d= { di } i=1 . set class label denot l= { l1 , l2 , ... , lc } , imag dii associ label lj∈l . suppos binari hash code b= { bi } i=1∈ { − 1 , +1 } k×m alreadi learn exist imag use deep hash method , kdenot length binari code . , set nimag d/prime= { di } m+n i=m+1 new class label set l/prime= { l/prime 1 , l/prime 2 , ... , l/prime c/prime } emerg . goal learn binari hash code b/prime= { bi } m+n i=m+1∈ { − 1 , +1 } k×nfor new imag leav bunchang . addit , hash function h ( · ) need encod queri imag hash code . hash function repres use cnn model , train set imag q= { ai } q i=1contain sampl imag old new imag set . function map qto correspond hash code bq= { bqi } q i=1∈ { − 1 , +1 } k×q . pairwis similar inform , denot s∈ { − 1 , +1 } ( m+n ) ×q , avail train . ﬁrst mrow srepres similar imag dand q , remain nrow repres d/primeand q.sij=1 indic diandajar similar , sij=0 indic dissimilar . 21.9.2 descript dihn deep increment hash network ( dihn ) three input , i.e. , originaldatabas imag , increment databas imag /prime , imag sampl origin increment databas q , respect . dihn contain two802 21 content-bas retriev digit librariesss import part : hash function learn andincrement hash code learn . hash function learn part exploit deep cnn model extract featur represent learn hash function queri imag base binari hash code bq imag q . increment hash code learn part directli learn hash code b/primefor increment databas imag d/prime . increment hash loss function propos preserv similar databas point . note hashcod bfor origin imag dare alreadi given remain unchang whole train process . deep hash function hash function [ 68 ] construct incorpor cnn , forc output last fully-connect layer length k , length binari hash code . deep hash function h ( · ) deﬁn bqi=h ( ai ; θ ) =sign ( f ( ai ; θ ) ) ( 21.13 ) θdenot paramet cnn , f ( · ) repres function map input imag aito output last fully-connect layer . increment hash loss increment hash loss propos preserv semant similar imag , util pairwis similar inform s. ham dis- tanc binari code use measur similar . l2-norm loss adopt minim differ inner product binari code pair similar sij . increment hash loss [ 68 ] formul min b/prime , bqj ( b/prime , bq ) =m/summationdisplay i=1q/summationdisplay j=1 ( bt ibqj−ksij ) 2+m+n/summationdisplay i=m+1q/summationdisplay j=1 ( bt ibqj−ksij ) 2 s.t.b/prime= { bm+1 , bm+2 , ... , bm+n } ∈ { − 1 , +1 } k×n bq= { bq1 , bq2 , ... , bqq } ∈ { − 1 , +1 } k×q ( 21.14 ) hash code bi , i=1 , ... , min ﬁrst term origin imag , given . hash code bi , i=m+1 , ... , m+nin second term incre- mental imag , directli learn optim . hash code bqji learn hash function repres cnn , shown eq . 21.13 .i n order facilit optim , sign ( · ) replac continu relaxation21.9 deep increment hash network * 803 function tanh ( · ) . substitut eq . 21.13 –21.14 result follow object function : min b/prime , θj ( b/prime , θ ) =m/summationdisplay i=1/summationdisplay j∈ϕ [ bt itanh ( f ( dj ; θ ) ) −ksij ] 2+m+n/summationdisplay i=m+1/summationdisplay j∈ϕ [ bt itanh ( f ( dj ; θ ) ) −ksij ] 2 +λ/summationdisplay j∈ϕ [ bj−tanh ( f ( dj ; θ ) ) ] 2+µ/summationdisplay j∈ϕ [ tanh ( f ( dj ; θ ) ) t1 ] 2 s.t.b/prime= { bm+1 , bm+2 , ... , bm+n } ∈ { − 1 , +1 } k×n ( 21.15 ) ϕi subset { 1,2 , ... , m+n } denot indic sampl q indand d/prime . term ad object function . ﬁrst term λ/summationtext j∈ϕ [ bj−tanh ( f ( dj ; θ ) ) ] 2 . ad minim gap code learn cnn code bjfor databas imag , either ﬁxed origin imag directli learn object increment imag . second term µ/summationtext j∈ϕ [ tanh ( f ( dj ; θ ) ) t1 ] 2encourag number −1 +1 approxim equal among code . λand µare hyper-paramet , 1i all-on vector . optim paramet θand hash code b/primear learn optim object function altern strategi . speciﬁc , θ-step , b/primei ﬁxed cnn train use back-propag . b/prime-step , learn θﬁxed , use discret cyclic coordin descent ( dcc ) algorithm . learn algorithm summar follow . algorithm 21.1 ( learn algorithm dihn ) input : origin databas set ; increment databas set d/prime ; similar matrix ; origin hash code b ; code length k ; maximum iter number t. output : increment hash code b/primeand neural network paramet θ. initi b/prime∈ { − 1 , +1 } k×n ; neural network paramet θ. repeat fori=1→tdo ( ) forward comput comput f ( ; θ ) raw imag ; ( b ) comput deriv jwith respect f ( ; θ ) . ( c ) updat neural network θwith back-propag . end updat b/primeaccord ( dcc ) algorithm . converg reach maximum iterations804 21 content-bas retriev digit librariesss tabl 21.3 comparison map w.r.t . differ number-of-bit two dataset . best result map shown bold , second best result underlin . cifar-10 nus-wid method 12 bit 24 bit 36 bit 48 bit 12 bit 24 bit 36 bit 48 bit dsh 0.6441 0.7421 0.7703 0.7992 0.7125 0.7313 0.7401 0.7485 dhn 0.6805 0.7213 0.7233 0.7332 0.7719 0.8013 0.8051 0.8146 dpsh 0.6818 0.7204 0.7341 0.7464 0.7941 0.8249 0.8351 0.8442 dqn 0.5540 0.5580 0.5640 0.5800 0.7680 0.7760 0.7830 0.7920 dsdh 0.7400 0.7860 0.8010 0.8200 0.7760 0.8080 0.8200 0.8290 adsh 0.8898 0.9280 0.9310 0.9390 0.8400 0.8784 0.8951 0.9055 dihn 1+adsh 0.8933 0.9279 0.9386 0.9346 0.8357 0.8862 0.8987 0.9070 dihn 2+adsh 0.8975 0.9294 0.9293 0.9385 0.8470 0.8926 0.8964 0.9103 dihn 3+adsh 0.8916 0.9273 0.9330 0.9456 0.8353 0.8821 0.9004 0.9115 dihn 6+adsh 0.8784 0.9172 0.9293 0.9401 – – – – dihn 11+adsh – – – – 0.8120 0.8727 0.8880 0.8972 21.9.3 experiment result wu et al . [ 68 ] conduct extens evalu propos method two wide use dataset : cifar-10 nus-wid . mean averag precis ( map ) use evalu retriev accuraci . includ result section . detail reader refer [ 68 ] . asymmetr deep hash method ( adsh ) [ 56 ] adopt experi- ment gener origin binari hash code b . hash code increment imag gener use dihn . tabl 21.3 show map perform com- parison two dataset . dihn , ( i=1,2,3,6,11 ) mean number class use increment data . normal increment set , i.e. , i=1,2,3 , dihn i+adsh achiev competit retriev perform . chal- leng set increment class , i.e. , i=6,11 , perform dihn i+adsh littl inferior normal set . gener , dihn achiev competit retriev perform . term time complex , demonstr dihn signiﬁcantli decreas train time , need gener hash code origin imag . exampl , take 28 min dihn 3+adsh achiev promis perform k=12 . comparison , adsh requir three time ( 83 minut ) much dihn 3+adsh achiev similar perform . 21.10 exercis 1 . devis text-annot taxonomi ( categor ) imag descript , start- ing classiﬁc use set yahoo ! categori , say . 2 . examin sever websit imag caption . use would say textual data cue identifi imag content ? ( typic , search system use21.10 exercis 805 word stem , elimin tens , case , number words—th word stem becom word stem . ) 3 . suppos color histogram deﬁn coars , bin quantiz 8 bit , 3 bit red green 2 blue . set appropri structur histogram , ﬁll imag read . templat visual c++ code read imag text websit , sampleccode.zip “ sampl code. ” 4 . tri creat textur histogram describ sect . 21.3.3 . could tri small imag follow step given , use matlab , say , eas ofvisu . 5 . describ may ﬁnd imag contain 2d “ brick pattern ” imag databas , assum color “ brick ” yellow color “ gap ” blue . ( make sure discuss limit method possibl improv . ) ( ) use color . ( b ) use edge-bas textur measur . ( c ) use color , textur , shape . 6 . typic compon ( layer ) convolut neural network ( cnn ) ? 7 . describ pre-train ﬁne-tun procedur cnn cbir . advantag procedur ? 8 . describ gener idea databas index techniqu : invert index- ing hashing-bas index . 9 . main differ static imag video avail motion latter . one import part cbr video motion estim ( e.g. , direct speed movement ) . describ could estim movement object video clip , say car , mpeg ( instead uncompress ) video use . 10 . color three-dimension , newton point . gener , made use sever differ color space , kind bright axi , plu two intrinsic-color axe . let ’ use chromat two-dimension space , deﬁn eq . ( 4.7 ) . ’ use ﬁrst two dimens , { r , g } . devis 2d color histogram imag , ﬁnd histogram intersect . compar imag similar measur deriv use 3d color histogram , compar severaldiffer color resolut . worth keep three dimens , gener ? 11 . suggest least three way audio analysi assist video retrieval- system-rel task . 12 . implement imag search engin use low-level imag featur color histogram , color moment , textur . construct imag databas con- tain least 500 imag least 10 differ categori . perform retrievaltask use singl low-level featur well combin featur . which806 21 content-bas retriev digit librariesss featur combin give best retriev result , term precis recal , categori imag ? 13 . anoth way combin precis recal f-score measur . f-score harmon mean precis pand recal r , deﬁn f=2 ( p∗r ) / ( p+r ) experi determin fbehav pand rchang . refer 1 . m.m . fleck , d.a . forsyth , c. bregler , find nake peopl . eur . congr . comput . vi . ( 2 ) , 593–602 ( 1996 ) 2 . c.c . chang , s.i . lee , retriev similar pictur pictori databas . pattern recogn . 24 , 675–680 ( 1991 ) 3 . m. wor , p. sajda , s. santini , d. shamma , a.f . smeaton , q. yang , user multimedia retriev ? ieee multim . 19 ( 4 ) , 6–10 ( 2012 ) 4 . s. paek , c. l. sabl , v . hatzivassilogl , a. jaim , b. h. schiffman , s.-f. chang , k.r . mcke- , integr visual text base approach content label classiﬁc ofphotograph , acm sigir ’ 99 workshop multimedia index retriev , pp . 423–444 ( 1999 ) 5 . k. barnard , d.a . forsyth , learn semant word pictur , proceed intern confer comput vision , pp . ii , 408–415 ( 2001 ) 6 . m.j. swain , d.h. ballard , color index . int . j. comput . vi . 7 , 11–32 ( 1991 ) 7 . . lecun , l. bottou , . bengio , p. haffner , gradient-bas learn appli document recognit . proc . ieee 86 ( 11 ) , 2278–2324 ( 1998 ) 8 . m. tzelepi , a. tefa , deep convolut learn content base imag retriev . neuro- comput 275 , 2467–2478 ( 2018 ) 9 . a.w.m . smeulder , m. wor , s. santini , a. gupta , r. jain , content-bas imag retriev end earli year . ieee tran . pattern anal . mach . intel . 22 , 1349–1380 ( 2000 ) 10 . j.w.h . tangeld , r.c . veltkamp , survey content base 3d shape retriev method . multim . tool appl . 39 , 441–471 ( 2008 ) 11 . p. huang , a. hilton , j. starck , shape similar 3d video sequenc peopl . int . j. comput . vi . 89 ( 2–3 ) , 362–381 ( 2010 ) 12 . m. flickner et al. , queri imag video content : qbic system . ieee comput . 28 ( 9 ) , 23–32 ( 1995 ) 13 . w. niblack , x. zhu , j.l . hafner , t. breuel , d. ponceleon , d. petkov , m.d . flickner , e. upfal , s.i . nin , s. sull , b. dom , b.-l. yeo , a. srinivasan , d. zivkov , m. penner , updat qbic system , storag retriev imag video databas , pp . 150–161 ( 1998 ) 14 . j. hafner , h. . sawhney , w. equitz , m. flickner , w. niblack , efﬁcient color histogram index quadrat form distanc function . ieee tran . pattern anal . mach . intel . 17 , 729–736 ( 1995 ) 15 . c. carson , s. belongi , h. greenspan , j. malik , blobworld : imag segment use expectation-maxim applic imag queri . ieee tran . pattern anal.mach . intel . 24 ( 8 ) , 1026–1038 ( 2002 ) 16 . a. pentland , r. picard , s. sclaroff , photobook : content-bas manipul imag databas , instorag retriev imag video databas ( spie ) , pp . 34–47 ( 1994 ) 17 . f. liu , r.w . picard , period , direction , random : wold featur imag mod- ele retriev . ieee tran . pattern anal . mach . intel . 18 , 722–733 ( 1996 ) refer 807 18 . z.n . li , o.r . zaïan , z. tauber , illumin invari object model content-bas imag video retriev . j. vi . commun . imag rep. 10 , 219–244 ( 1999 ) 19 . h. tamura , s. mori , t. yamawaki , textur featur correspond visual percept . ieee tran . syst . man cybern . smc-8 ( 6 ) , 460–473 ( 1978 ) 20 . a.r . rao , g.l . lohs , toward textur name system : identifi relev dimens textur , ieee confer visual , pp . 220–227 ( 1993 ) 21 . d.a . forsyth , j. ponc , comput vision : modern approach , 2nd edn . ( prentic hall , 2012 ) 22 . m. . drew , j. wei , z.n . li , illumination-invari imag retriev video segment . pattern recogn . 32 , 1369–1388 ( 1999 ) 23 . m. . drew , z.n . li , z. tauber , illumin color covari locale-bas visual object retriev . pattern recogn . 35 ( 8 ) , 1687–1704 ( 2002 ) 24 . t. desela , d. keyser , h. ney , featur imag retriev : experiment comparison . inf . retr . 11 ( 2 ) , 77–107 ( 2008 ) 25 . r. datta , d. joshi , j. li , j.z . wang , imag retriev : idea , inﬂuenc , trend new age . acm comput . surv . 40 ( 2 ) , 5 , 1–5 , 60 ( 2008 ) 26 . w. zhou , h. li , q. tian , recent advanc content-bas imag retriev : literatur survey ( 2017 ) . arxiv preprint arxiv:1706.06064 27 . d. low , distinct imag featur form scale-invari keypoint . int . j. comput . vi . 20 ( 2 ) , 91–110 ( 2004 ) 28 . l. fei-fei , p. perona , bayesian hierarch model learn natur scene categori , proceed ieee confer comput vision pattern recognit ( cvpr ) ( 2005 ) 29 . j. sivic , a. zisserman , video googl : text retriev approach object match video , proceed int.ern confer comput vision ( iccv ) ( 2003 ) 30 . . rui , t. s. huang , m. ortega , s. mehrotra , relev feedback : power tool interact content-bas imag retriev . ieee tran . circ . sy . video tech . 8 ( 5 ) , 644–655 ( 1998 ) 31 . b. li , e. chang , c.-t. wu . dpf—a perceptu distanc function imag retriev , ieee intern confer imag proceed , pp . ii–597–ii–600 ( 2002 ) 32 . j.r. smith , d. joshi , b. huet , w. hsu , j. cota . har ai augment creativ : applic movi trailer creation , acm intern confer multimedia , pp . 1799–1808 ( 2017 ) 33 . f. eyben , m. wöllmer , b. schuller , openear—introduc munich open-sourc emot affect recognit toolkit , 2009 3rd intern confer affect comput intellig interact workshop , pp . 1–6 . ( ieee , 2009 ) 34 . d. borth , b. ji , t. chen , t. breuel , s.f . chang , large-scal visual sentiment ontolog detector use adject noun pair , acm intern confer multimedia , pp . 223–232 . ( acm , 2013 ) 35 . b. zhou , et al. , learn deep featur scene recognit use place databas , advanc neural inform process system , pp . 487–495 ( 2014 ) 3 6 . j .p h l b n , .c h u , .i r , j .s v c , .z e r n , b j e c tr e r e v lw hl r g ev c b u l r e fast spatial match , proceed eee confer comput vision pattern recognit ( cvpr ) ( 2007 ) 37 . w. zhou , . lu , h. li , . song , q. tian , spatial code larg scale partial-dupl web imag search , proceed acm confer multimedia ( acm multimedia ) ( 2010 ) 38 . . chum , j. philbin , j. sivic , m. isard , a. zisserman , total recal : automat queri expan- sion gener featur model object retriev , proceed intern confer comput vision ( iccv ) ( 2007 ) 39 . t.-s. chua , r. hong , g. li , j. tang , text question-answ multimedia qa web- scale media resourc , proceed first acm workshop large-scal multimedia retriev mine , pp . 51–58 ( 2009 ) 40 . g. wang , d. hoiem , d. forsyth , learn imag similar flickr group use fast kernel machin . ieee tran . pattern anal . mach . intel . 34 ( 11 ) , 2177–2188 ( 2012 ) 808 21 content-bas retriev digit librariesss 41 . g. awad , trecvid , et al. , evalu campaign benchmark video activ detect , video caption match , video search & retriev . proceed trecvid , v l . 2019 ( 2019 ) 42 . g.k. meyer , et al. , evalu multimedia featur fusion examplar-bas event detec- tion . mach . vi . appl . ( 2013 ) 43 . a. krizhevski , i. sutskev , g.e . hinton , imagenet classiﬁc deep convolut neural network , advanc neural inform process system ( nip ) , pp . 1097– 1105 ( 2012 ) 44 . k. simonyan , a. zisserman , deep convolut network large-scal imag recogni- tion ( 2014 ) . arxiv preprint arxiv:1409.1556 45 . c. szegedi , et al. , go deeper convolut , ieee confer comput vision pattern recognit ( cvpr ) , pp . 1–9 ( 2015 ) 46 . k. , x. zhang , s. ren , j . sun , deep residu learn imag recognit , ieee con- ferenc comput vision pattern recognit ( cvpr ) , pp . 770–778 ( 2016 ) 47 . r. sharif , et al. , cnn featur off-the-shelf : astound baselin recognit , ieee confer comput vision pattern recognit workshop , pp . 806–813 ( 2014 ) 48 . a. babenko , a. slesarev , a. chigorin , v . lempitski , neural code imag retriev , european confer comput vision , pp . 584–599 . ( springer , 2014 ) 49 . j. wan , et al. , deep learn content-bas imag retriev : comprehens studi . acm intern confer multimedia , pp . 157–166 . ( acm , 2014 ) 50 . h. jegou , m. douz , c. schmid , ham embed weak geometr consist larg scale imag search , european confer comput vision , pp . 304–317 . ( springer , 2008 ) 51 . w. zhou , h. li , . lu , q. tian , larg scale imag search geometr code , acm intern confer multimedia , pp . 1349–1352 . ( acm , 2011 ) 52 . a. babenko , v . lempitski , invert multi-index . ieee tran . pattern anal . mach . intel . 37 ( 6 ) , 1247–1260 ( 2014 ) 53 . l. zheng , s. wang , z. liu , q. tian , pack pad : coupl multi-index accur imag retriev , ieee confer comput vision pattern recognit ( cvpr ) , pp . 1939–1946 ( 2014 ) 54 . m. datar , n. immorlica , p. indyk , v .s . mirrokni , locality-sensit hash scheme base p-stabl distribut , twentieth annual symposium comput geometri , pp . 253–262 . ( acm , 2004 ) 55 . b. kuli , k. grauman , kernel locality-sensit hash scalabl imag search . ieee int . conf . comput . vi . ( iccv ) 9 , 2130–2137 ( 2009 ) 56 . q.i . jiang , w.j . li , asymmetr deep supervis hash , aaai confer artiﬁci intellig ( 2018 ) 57 . s.f . chang et al. , videoq : autom content base video search system use visual cue . proc . acm multim . 97 , 313–324 ( 1997 ) 58 . d. bordwel , k. thompson , film art : introduct , 9th edn . ( mcgraw-hil , 2009 ) 59 . f. dufaux , key frame select repres video , intern confer imag process , pp . ii , 275–278 ( 2000 ) 60 . m. . drew , j . au , video keyfram product efﬁcient cluster compress chromat signatur . acm multim . 2000 , 365–368 ( 2000 ) 61 . t. lan , l. sigal , g. mori , social role hierarch model human activ recognit , inproceed ieee confer comput vision pattern recognit ( cvpr ) ( 2012 ) 62 . c. schuldt , i. laptev , b. caputo , recogn human action : local svm approach , pro- ceed intern confer pattern recognit ( icpr ) ( 2004 ) 63 . t. joachim , train linear svm linear time , sigkdd ( 2006 ) 64 . p. peng , j. li , z.n . li , quality-awar mobil visual search , 3rd intern confer integr inform ( ic-ininfo ) ( 2013 ) 65 . b. girod , v . chandrasekhar , d.m . chen , n.m. cheung , r. grzeszczuk , . reznik , g. takac , s.s. tsai , r. vedantham , mobil visual search . ieee signal process . mag . 28 ( 4 ) , 61–76 ( 2011 ) refer 809 66 . j. xiao , j. hay , k.a . ehing , a. oliva , a. torralba , sun databas : large-scal scene recognit abbey zoo , ieee confer comput vision pattern recognit ( cvpr ) , pp . 3485–3492 . ( ieee , 2010 ) 67 . z. wang et al. , imag qualiti assess : error visibl structur similar . ieee tran . imag process . 13 ( 4 ) , 600–612 ( 2004 ) 68 . d. wu , q. dai , j.liu , b. li , w. wang , deep increment hash network efﬁcient imag retriev , ieee confer comput vision pattern recognit ( cvpr ) , pp . 9069– 9077 ( 2019 ) index 0–9 2d mesh , 402 geometri code , 402 motion code , 404 object code , 402 2d object anim , 405 3d glass color glass , 140 polar glass , 140 shutter glass , 141 3d-hevc , 460,462 3d model-bas code , 408 3d percept , 138 binocular cue , 139 monocular cue , 138 3d polygon mesh , 409 3d video tv , 138 3g,634,635,644,665 4g,635,644,665 5g,637,644,665,697 enhanc mobil broadband ( embb ) , 637 massiv machine-typ commun ( mmtc ) , 637 massiv mimo , 638 mobil edg comput ( mec ) , 639,696 network slice , 639 ultra-reli low-lat communica- tion ( urllc ) , 637 6g,639,697 360◦video , 135 adapt frame pack , 472 cubemap project ( cmp ) , 137,471 equi-angular cubemap project ( eac ) , 137,471 equirectangular project ( erp ) , 136,471 geometri pad , 472 hybrid angular cubemap project ( hac ) , 471 pyramid format , 137a access network , 537,540,543,614 access point ( ap ) , 631,640–642,663 access time , 598 activ pixel , 122 activ video line , 122 adapt compress algorithm , 210 adapt differenti puls code modul ( adpcm ) , 178,190,479,480 adapt huffman code , 210 adapt predict code ( apc ) , 190 adob director , 46 anim , 48 imag lingo , 47 lingo , 47 lingo script , 48 tween , 48 adob flash , 45 adob photoshop , 42 alpha channel , 44 magic wand tool , 44 adob premier , 42 timelin window , 42 adob xd , 48 advanc mobil phone system ( amp ) , 631 advanc tv ( atv ) , 372 advanc video code ( vc ) , aka h.264 , 424 advanc video code high deﬁnit ( vchd ) , 19 afﬁn transform , 406 a-law , 160,164,179 compand , 249 alia , 155,156 altern current ( ac ) , 253 amazon web servic ( aw ) , 14,676,685 amazon eb , 680 amazon ec2 , 674,678,686 amazon machin imag ( ami ) , 678 amazon s3 , 671,674,676,686 © springer natur switzerland ag 2021 z.-n. li et al. , fundament multimedia , text comput scienc , http : //doi.org/10.1007/978-3-030-62124-7811812 index aw region , 677,678 cloudfront , 685 anaglyph 3d , 140 analog display interfac , 131 compon video , 132 composit video , 132 s-video , 132 video graphic array ( vga ) , 133 analog-to-digit ( ad ) convert , 162,190 analog video , 119 anim , 19 autodesk 3d max , 20 autodesk maya , 20 blender , 20 directx , 19 java3d , 19 opengl , 20 anti-alias , 156 ﬁlter , 156 application-lay multicast , 555,605 end-system multicast ( esm ) , 606 multi-tre overlay , 608 singl tree overlay , 606,608 arithmet code , 220,398 adapt arithmet code , 230,231 adapt binari arithmet code , 231 basic algorithm , 221 binari arithmet code , 229,442,444 integ implement , 229 scale increment code , 224 tag,222,225 aspect ratio , 122,128,130 asynchron transfer mode ( atm ) , 545 audio video code standard ( vs ) , 423 audio compress standard g.711 , 480,575 g.721 , 480 g.722 , 575 g.723 , 480 g.723.1 , 492,494 g.726 , 480 g.727 , 480 g.728 , 480,495 g.729 , 480,492,495 audio ﬁltere , 164 audio video interleav ( vi ) , 42 augment realiti ( ar ) , 737,738,740,742 , 745,749,752 color percept , 753 depth percept , 754 hololen , 750 inform present , 756 local , 741,747,755 pokémon go , 749sutherland ’ system , 742 world gener , 741 autostereoscop display devic , 142 lenticular len , 143 parallax barrier , 142 av 1 , 423 b back propag , 786,803 bag word ( bow ) , 781 band-limit signal , 156 band-limit ﬁlter , 164 band-pass ﬁlter , 164,171,180 bandwidth , 164,180,539,561,584,616,631 , 672,681,689,696,708 base station ( bs ) , 631,636,663 bd-rate , aka bjontegaard ’ delta-r , 145 , 464,473 bi-level imag compress standard , also see jbig , 332 bilinear interpol , 370,380 binari alpha block ( bab ) , 396 binari tree , 204 bitmap ( bmp ) , 58,75 bitplan , 59 bitrat , 145,164,210,241,286,289,341,349 , 357,459,473,556,558,603,644 block-bas code , 385,388 block code , 649 bluetooth , 643 blu-ray , 14 bose-chaudhuri-hocquenghem ( bch ) code , 650 broadcast , 552,602 buffer manag , 565 peak bitrat , 566 prefetch buffer , 566 c cabl modem , 536,541,542 cabl tv network , 540,541 hybrid ﬁber-coaxi ( hfc ) cabl network , 541 camera system , 88 cascad style sheet ( css ) , 12 cathod ray tube ( crt ) , 88,120 central process unit ( cpu ) , 678,681,687 , 689,691 checksum , 547,549,645 chroma subsampl , 126,436,446,448 chromat , 94 diagram , 92index 813 chromin , 109 circuit switch , 544 client/serv , 583,584,592 cloud comput , 671 cloud game , 693 comput ofﬂoad , 687 infrastructur servic ( iaa ) , 674 microservic , 675 platform servic ( paa ) , 675 privat cloud , 672 public cloud , 672 softwar servic ( saa ) , 675 cloud game , 690,691 gaikai , 15,694 onliv , 694 cluster , 67 cmi , 105 cmyk , 106 codec , 200,526 code divis multipl access ( cdma ) , 632 , 664 wideband cdma ( wcdma ) , 635,664 code excit linear predict ( celp ) , 489 , 499,500 adapt codebook , 490 line spectrum frequenc ( lsf ) , 492 line spectrum pair ( lsp ) , 492 long time predict ( ltp ) , 489 short time predict ( stp ) , 489 stochast codebook , 493 coder map , 179 codeword , 200 color camera-depend , 103 cycl , 66 densiti , 770 histogram , 64,768 hue , satur , valu ( hsv ) , 103 layout , 770 lookup tabl ( lut ) , 67 monitor speciﬁc , 96 multi-ink printer , 107 multi-sensor camera , 103 palett , 65 palett anim , 66 picker , 65 primari , 91 srgb , 104 subcarri , 123 color-match function , 91 color scienc , 83 light spectra , 83 spectra sensit eye , 85 visibl light , 84commiss international de l ’ eclairag ( cie ) , 91 common intermedi format ( cif ) , 128 common media applic format ( cmaf ) , 617,621 compress lossless , 62,74,200 lossi , 62,74,200,302 ratio , 74,200 speech , 179 compressor function , 249 cone , 85 constant bit rate ( cbr ) , 550,566,598 consult committe intern radio ( ccir ) , 128 container-bas virtual , 687 content-bas imag retriev ( cbir ) , 764 , 768,795 3d shape object , 765 earli cbir system , 766 histogram intersect , 766 human activ , 792,794 key technolog , 780 quality-awar , 798 quantifi search result , 777 video retriev , 767,789 content-bas imag retriev digit librari ( c-bird ) , 768 search color , 768,770 search illumin invari , 773 search object model , 774 search textur , 770 content deliveri network ( cdn ) , also see content distribut network ( cdn ) , 592 content distribut network ( cdn ) , 555 , 592,593,595,615,683,685 akamai , 555,594,686 context-adapt binari arithmet code ( cabac ) , 425,448 context-adapt variabl length code ( ca vlc ) , 425 context-bas arithmet encod ( cae ) , 397 context model , 327 continu fourier transform ( cft ) , 265 continu wavelet transform ( cwt ) , 270 , 274 convolut code , 651 convolut neural network ( cnn ) , 765 , 785 convolut layer , 469,786 featur learn , 785 fully-connect ( fc ) layer , 786814 index in-loop ﬁlter , 469 pool , 786 rectiﬁ linear unit ( relu ) , 469,786 crowdsourc livecast , 719,721 cyclic redund check ( crc ) , 539,646 datagram , 547 decibel ( db ) , 157 decod map , 179 deep increment hash network ( dihn ) , 801 deep learn , 463,765,800 content-bas imag retriev ( cbir ) , 765 , 786,787,789 deep increment hash network ( dihn ) , 801 video code , 469 de-interlac , 120 delaunay mesh , 403 delta modul ( dm ) , 189 adapt , 190 uniform , 189 depth-image-bas render ( dibr ) , 462 dial-up , 540 dictionary-bas code , 215 differ gaussian ( dog ) , 780 differenti code , 180,233 differenti puls code modul ( dpcm ) , 178,182,186,310 differenti servic ( diffserv ) , 563 diffserv code ( ds ) , 563,564 per-hop behavior ( phb ) , 563 digit audio , 17 adob audit , 17 code , 178 pro tool , 18 quantiz transmiss , 178 sound forg , 17 digit display interfac , 133 digit visual interfac ( dvi ) , 133 displayport , 135 high-deﬁnit multimedia interfac ( hdmi ) , 134 digit librari , 199 digit subscrib line ( dsl ) , 540 asymmetr dsl ( adsl ) , 536,541,614 digital-to-analog ( da ) convert , 162 digit versatil disk ( dvd ) , 9,373,523,528 , 685 digit video broadcast ( dvb ) , 597 multimedia home platform ( dvb-mhp ) , 597digit sound , 151 direct current ( dc ) , 252 discret cosin transform ( dct ) , 251,253 , 258 1d,252 2d,251,252,302 2d basi function , 261 2d matrix implement , 263 2d separ basi , 262 basi function , 253,260 comparison dft , 265 dct-matrix , 263,429,453 discret fourier transform ( dft ) , 265 discret multi-ton ( dmt ) , 540 discret sine transform ( dst ) , 448,455 discret wavelet transform ( dwt ) , 270,277 dispar , 139 gradient , 144 manipul , 143 map , 143 rang , 144 sensit , 144 veloc , 144 dispers , 84 distort measur , 241 mean squar error ( mse ) , 242 peak signal-to-nois ratio ( psnr ) , 242 signal-to-nois ratio ( snr ) , 242 dither , 59,66 dither matrix , 60 order dither , 61 domain name system ( dn ) , 545 dropbox , 671 dv video ( digit video ) , 126,128 dynam adapt stream http ( dash ) , 529,621,686,710 dynam rang , 182 e edg comput , 696 embed block code optim truncat ( ebcot ) , 289,316 , 319,323,325 embed zerotre wavelet ( ezw ) , 289,290 , 292,293 end-to-end argument , 552 enhanc deﬁnit tv ( edtv ) , 130 entropi , 200,201,243 entropi code , 201,203,292,306,310,351 , 437,458 epidem model , 725 error conceal , 549,657 error detect , 645index 815 error resili code , 652 error resili entropi code ( erec ) , 655 ethernet , 538 carrier sens multipl access collis detect ( csma/cd ) , 539 euler ’ formula , 265 exchang imag file ( exif ) , 76 excit puriti , 95 expand function , 249 exp-golomb code , 230,438,439,442 extend huffman code , 208 extens markup languag ( xml ) , 12,410 , 417 f facebook , 14,707,709 fax standard g3,332 g4,332 fiber-to-the-hom ( ftth ) , 542 fiber-to-the-neighborhood ( fttn ) , 542 fiber-to-the-nod ( fttn ) , 542 firewal , 536,550–552 first person shooter ( fp ) game , 692 fletcher-munson equal-loud curv , 506 forward error correct ( fec ) , 648 fourier transform , 270 frame-bas code , 385,388 frame buffer , 59,103 free rider , 614 frequenc , 253 frequenc respons , 253,261 frequenc spectrum , 253 spatial frequenc , 253,261 frequenc divis multipl access ( fdma ) , 631–633 frequenc hop ( fh ) , 643 frequenc modul ( fm ) , 165,167 f-score , 806 fundament frequenc , 152 g gamma correct , 88,89,99,103 gamut , 96 printer , 106 gaussian distribut , 297 gener markup languag ( gml ) , 10 gener packet radio servic ( gpr ) , 632 gener switch telephon network ( gstn ) , 574 global motion compens , 400 global posit system ( gp ) , 643,747global system mobil ( gsm ) communica- tion , 632 gossip algorithm , 609,611 granular distort , 245 graphic user interfac ( gui ) , 30 graphic , 18 adob illustr , 18 graphic interchang format ( gif ) , 69 anim , 20 color map , 70 gif87 , 71 gif89 , 72 interlac , 71 screen descriptor , 70 graphic process unit ( gpu ) , 681,687 , 692,745 gray-level imag , 234 intens , 202 grayscal , 74 group pictur ( gop ) , 427 h h.26l , 423 h.261 , 341 bitstream , 355 block layer , 357 encod decod , 353 format support , 350 group block ( gob ) layer , 355 inter-fram ( p-frame ) code , 351 intra-fram ( i-fram ) code , 351 macroblock layer , 356 pictur layer , 355 quantiz , 352 step size , 352 h.262 , 373 h.263 , 341,357,710 motion compens , 357 option code mode , 358 pb-frame , 360 h.263+ , 360 h.263++ , 360 h.264 , 423,710 context-adapt binari arithmet code ( cabac ) , 437,442 context-adapt variabl length code ( ca vlc ) , 437,440 entropi code , 437 group pictur ( gop ) , 427 hierarch predict structur , 428 in-loop deblock ﬁltere , 436 integ transform , 429816 index intra spatial predict , 435 intra-cod , 435 motion compens , 425 multipl refer frame , 427 multiview video code ( mvc ) , 447,448 proﬁl , 444 baselin proﬁl , 444 extend proﬁl , 445 high 10 proﬁl , 446 high 4:2:2 proﬁl , 446 high 4:4:4 predict proﬁl , 446 high proﬁl , 446 main proﬁl , 445 quantiz , 430 quarter-pixel precis , 426 scalabl video code ( svc ) , 446,461 scale , 431 transform code , 424,428 variabl block-siz motion compens , 425 h.264/a vc ( h.264/mpeg-4 vc ) , aka h.264 , 424 h.265 , 448,617 context-adapt binari arithmet code ( cabac ) , 458 discret sine transform ( dst ) , 456 discret sine transform ( dst ) , 455 entropi code , 458 extens , 460 3d-video extens ( 3d-hevc ) , 460 , 461 multiview extens ( mv-hevc ) , 460 , 461 rang extens ( rext ) , 460 scalabl extens ( shvc ) , 460,461 in-loop deblock ﬁltere , 448,457 integ transform , 453 integ transform matrix , 454 intra-cod , 455 motion compens , 449 proﬁl , 459 21 addit proﬁl version 2 , 459 main 10 proﬁl , 459 main proﬁl , 459 main still pictur proﬁl , 459 quad-tre predict structur , 449 quantiz , 454 quarter-pixel precis , 451 sampl adapt offset ( sao ) , 448,457 slice , 449,653 special code mode , 458 i_pcm , 458 lossless , 459 transform skip , 459tile , 450 transform code , 449,453 variabl block-siz motion compens , 449 wavefront parallel process ( wpp ) , 450 h.266 , 462 360◦video , 471 adapt loop ﬁlter ( alf ) , 468,469 adapt multipl transform , 465 bilater ﬁlter , 468 block partit , 463 cnn in-loop ﬁlter , 469 high dynam rang ( hdr ) video , 469 in-loop ﬁltere , 468 in-loop luma reshap , 470 joint explor model ( jem ) , 462 luma-depend quantiz scheme ( lumadqp ) , 470 motion compens , 463 non-rectangular partit , 464 non-separ secondari transform ( nsst ) , 465 one-sixteenth-pixel precis , 463 perform report , 473 reduc secondari transform ( rst ) , 467 half-pixel precis , 358 halfton print , 60 ham code , 649 ham distanc , 649 handoff ( handov ) , 631,661,663 hard handoff , 663 soft handoff , 664 vertic handoff , 665 harmon , 152 hidden termin problem , 641 hierarch jpeg , 312,563 high deﬁnit tv ( hdtv ) , 129,130,446 , 459 high dynam rang ( hdr ) video , 462,469 high efﬁcienc imag file ( heif ) , 76 high efﬁcienc video code ( hevc ) , aka h.265 , 76,448 homogen coordin system , 406 horizont parallax , 139 horizont retrac , 120 hplab media server , 712,713 http-base stream , 613 http stream dynam adapt stream http ( dash ) , 615 http adapt stream ( ) , 615 http live stream ( hl ) , 615 media present descript ( mpd ) , 615 huffman code , 205,654index 817 optim , 207 preﬁx properti , 207 procedur , 211 tree , 211 human vision , 85 hybrid code , 342,366,424,449,463 hybrid excit vocod , 495 multi-band excit ( mbe ) , 495 multiband excit linear predict ( melp ) , 492,497 hypermedia , 9 hypertext markup languag ( html ) , 10,45 , 69,615 hypertext markup languag , version 5 ( html5 ) , 45,615 hypertext transfer protocol ( http ) , 536 , 551,567,614,677 imag 24-bit , 62 8-bit , 63 adob photoshop , 18 data type , 62 descriptor , 768 format , 86 gimp , 18 high bit-depth , 62 histogram , 202 hyperspectr , 63 monochrom , 57 multispectr , 63 qualiti , 795 resolut , 58 retriev , 763 imag process , 64,253 imag qualiti assess ( iqa ) , 146 immers video , 135 inform theori , 200 integ transform , 428,429,453 integr imag , 143 integr servic ( intserv ) , 560 integr servic digit network ( isdn ) , 540 intellectu properti manag protect ( ipmp ) , 417 interact delay , 692,695 interact tv ( itv ) , 596 interlac scan , 120 intern telecommun union ( itu ) , 349,480,484,574,635,653 radiocommun sector ( itu-r ) , 128telecommun standard sector ( itu-t ) , 128,349,423,448 intern telegraph telephon consult committe ( ccitt ) ,180,349 internet , 13,535,543,567 internet engin task forc ( ietf ) , 543 , 550,553 internet group manag protocol ( igmp ) , 553 internet thing ( iot ) , 637,644 internet protocol ( ip ) , 543,545,567 ip address , 545–547,550,552,571,573 , 592,610,661,674,694 ip version 4 ( ipv4 ) , 545,546,552 ip version 6 ( ipv6 ) , 545,550,552 packet fragment , 545 internet protocol tv ( iptv ) , 40 internet servic provid ( isp ) , 536,540,594 internet telephoni , 573 invers discret cosin transform ( idct ) , 252 1d,252 2d,252 2d matrix implement , 264 invert index , 788 ip multicast , 552,603,605 mbone , 554 itu-t video code expert group ( vceg ) , 138,423,462 joint collabor team video code ( jct-vc ) , 448 joint video explor team ( jvet ) , 138 , 462 joint video team ( jvt ) , 423 j jam , 633 jbig2 , 333 jitter , 557,590,681 joint bi-level imag expert group ( jbig ) , 332 joint photograph expert group ( jpeg ) , 9 , 73,301,303,304,563 baselin , 310 dct , 303 entropi code , 306,310 main step , 302 mode , 311 quantiz , 304 zigzag scan , 309 jpeg 2000 , 315 ebcot algorithm , 316818 index main step , 316 perform comparison jpeg , 326 region-of-interest code , 325 jpeg-l , 327 k karhunen-loèv transform ( klt ) , 251 l lab color model , 100 latenc , 557,636 layer multicast , 603 receiver-driven layer multicast ( rlm ) , 603 lempel–ziv–welch ( lzw ) , 69,71,77,215 line-of-sight ( lo ) commun , 627 linear predict code ( lpc ) , 486,494 lpc-10 , 486 local area network ( lan ) , 536,539,543 local sensit hash ( lsh ) , 789 long term evolut ( lte ) , 15,635,636 lookup tabl ( lut ) , 63,65,67 lossless imag compress , 233 lossless jpeg , 234,314 encod , 235 predictor , 235 lossi imag compress , 241 low complex lossless compress imag ( loco-i ) , 327 low-pass ﬁlter , 164 lumin , 109 macroblock , 343,424,425,449,651,653 , 655,657,658 macrocel , 631 mean absolut differ ( mad ) , 344 mean averag precis ( map ) , 778,782 mean opinion score ( mo ) , 146 mean squar error ( mse ) , 145,242,344 median-cut algorithm , 67 media-on-demand ( mod ) , 596 medium access control ( mac ) , 538,539 memori , 644,648,651,678,681,687,691 microcel , 631 microservic , 687 midi 2.0 , 177 minidv , 123 mix realiti , 737 mixer , 719 mobil edg comput ( mec ) , 697 mobil ip , 661access router ( ar ) , 661 correspond node ( cn ) , 661 foreign agent ( fa ) , 661 hierarch mobil ip ( hmip ) , 663 home address ( hoa ) , 661 home agent ( ha ) , 661 mobil node ( mn ) , 661 mobil video clip share , 727 mobil visual search , 795,796 mobil manag , 660 global mobil , 660 inter-domain mobil , 660 intra-domain mobil , 660 macro-mobl , 660 micro-mobl , 660 mode depend non-separ secondari transform ( md-nsst ) , 465 model-bas code , 334 modiﬁ modiﬁ read ( mmr ) algorithm , 396 motion compens ( mc ) , 342,390 backward predict , 343 forward predict , 343 motion estim , 342,689 motion jpeg , 312 motion vector , 343,658 2d logarithm search , 345 hierarch search , 347 sequenti search , 344 move pictur expert group ( mpeg ) , 365 , 423,479 mpeg-1 , 9,366 b-frame , 366 bitstream , 371 block layer , 372 d-frame , 371 differ h.261 , 368 group pictur ( gop ) layer , 371 i-fram , 367 macroblock layer , 372 motion compens , 366 perform , 371 p-frame , 366 pictur layer , 371 predict , 366 quantiz , 369 sequenc layer , 371 slice , 368 slice layer , 371 transform code , 366 mpeg-2 , 372 altern scan , 376 data partit , 383 differ mpeg-1 , 383index 819 interlac video , 374 level , 373 mode predict , 374 proﬁl , 373 program stream , 383 snr scalabl , 378 spatial scalabl , 380 tempor scalabl , 380 transport stream , 383 mpeg-2 advanc audio code ( aac ) , 523 low complex proﬁl , 524 main proﬁl , 524 polyphas quadratur ﬁlter ( pqf ) bank , 525 scalabl sampl rate proﬁl , 524 tempor nois shape ( tn ) tool , 524 mpeg-4 , 41,385,388,584,617,654 audio visual object , 385 binari format scene ( bif ) , 386 binari shape , 396 bodi anim paramet ( bap ) , 409 bodi deﬁnit paramet ( bdp ) , 409 bodi object , 408,409 face anim paramet ( fap ) , 408 face deﬁnit paramet ( fdp ) , 408 face object , 408 gray-scal shape , 396 group video object plane ( gov ) , 388 level , 409 media object , 385 part 10 , also seeh.264 , 386,410,424 part 2 , 386,409 proﬁl , 409 static textur code , 399 synthet object code , 401 textur code , 394 uniform mesh , 402 video object ( vo ) , 386 video object layer ( vol ) , 386 video object plane ( vop ) , 388 video object-bas code , 385,388 video-object sequenc ( vs ) , 386 wavelet code , 399 mpeg-4 advanc audio code ( aac ) , 525 bit-slic arithmet code ( bsac ) , 525 dab+ digit radio , 525 digit multimedia broadcast , 525 digit radio mondial , 525 high deﬁnit advanc audio code ( hd-aac ) , 525 high efﬁcienc advanc audio code ( he-aac ) , 525 perceptu coder , 525 perceptu nois substitut , 525structur audio orchestra languag ( saol ) , 526 structur coder , 526 synthetic/natur hybrid code ( snhc ) , 526 text-to-speech ( tt ) , 526 mpeg-7 , 410 descript deﬁnit languag ( ddl ) , 417 descript scheme ( ds ) , 414 descriptor ( ) , 412 mpeg-7 audio , 528 mpeg audio compress , 505 bark , 512 bit alloc , 520 bit reservoir , 523 critic band , 510 equal-loud contour , 506 frequenc mask , 506,508 mask-to-nois ratio ( mnr ) , 520 modiﬁ discret cosin transform ( mdct ) , 522 mp3 , 9,515,522,523 mpeg layer , 515 layer 1 , 515 layer 2 , 515,522 layer 3 , 515,522 psychoacoust , 506 scale factor band , 523 signal-to-mask ratio ( smr ) , 520 signal-to-nois ratio ( snr ) , 520 tempor mask , 513 threshold hear , 508 mpeg-j , 386 mpeglet , 386 mpeg work model experiment model ( xm ) , 412 simul model ( sm ) , 412 test model ( tm ) , 412 veriﬁc model ( vm ) , 412 µ-law , 160,164,179 compand , 249,479 multicast , 552,602 multimedia , 3 histori , 5 subject , 22 tool , 16 multimedia author , 20 adob anim , 20 adob director , 21 adob dreamweav , 21 tool , 41 uniti , 21 unreal , 21 multimedia broadcasting820 index ob , 21 xsplit , 21 multimedia cloud comput , 681 multimedia present , 28 graphic style , 28 sprite anim , 31 video transit , 32 multimedia product , 38 ﬂowchart phase , 38 prototyp test , 38 storyboard , 38 multipath fade , 628 gilbert-elliot model , 629 rake receiv , 630 rayleigh fade model , 629 rician fade model , 629 multipl input/multipl output ( mimo ) , 636 , 643 multipl sub-nyquist sampl encod ( muse ) , 129 multi-r multicast , 602 multiresolut analysi , 270,271 multisampl , 171 munsel color name system , 102 music sequenc , 17 cakewalk , 17 final , 17 sibeliu , 17 music instrument digit interfac ( midi ) , 167 bank , 169 channel , 168 channel messag , 173 channel mode , 175 channel pressur , 173 convers w v , 177 key pressur , 173 keyboard , 169 midi machin control ( mmc ) , 171 patch , 169 sequenc , 169 system messag , 173,176 tone modul , 169 veloc , 170,173 voic messag , 173 mv-hevc , 460,461 n nation televis system committe ( ntsc ) , 90,96,366 netﬂix , 15,603,671,685 netpbm format , 76 networkappl layer , 536 connectionless , 548 connection-ori , 546 data link layer , 536 network layer , 536 physic layer , 536 present layer , 536 session layer , 536 transport layer , 536 network address translat ( nat ) , 550,614 network function virtual ( nfv ) , 564 , 565,639 non line-of-sight ( nlo ) commun , 629 non-separ secondari transform ( nsst ) , 465 nordic mobil telephoni ( nmt ) , 631 nyquist frequenc , 156 rate , 156,180,190 theorem , 155 octav , 152 omnidirect video , 135 onlin social media , 707 onlin social network ( osn ) , 592,709,722 free-rid , 724 ordinari user , 724 spreader , 724 open system interconnect ( osi ) , 535 , 536,543 optic network unit ( onu ) , 541 opu , 500 orthogon , 260 orthogon frequenc divis multiplex ( ofdm ) , 636,642 orthonorm , 260 basi , 278 out-of-gamut color , 96 overlay network , 555,605 p packet interleav , 652 packet switch , 544 datagram , 544 virtual circuit , 544 pad , 391 adapt frame pack , 472 extend pad , 393 geometri pad , 472 horizont repetit pad , 392index 821 vertic repetit pad , 392 pariti check , 645,648 partial , 152 fundament frequenc , 152 harmon partial , 152 overton , 152 path loss , 627 peak signal-to-nois ratio ( psnr ) , 145,242 , 327,460 peer-to-p , 14,555,605,608,682,683 bittorr , 14,609,677 buffer map , 611 coolstream , 14,610 data-driven overlay , 609 mesh overlay , 609 pplive , 610 ppstream , 610 pptv , 684 uuse , 610 perceptu nonuniform , 161,193,511,560 perceptu quantiz ( pq ) , 470 pervas comput , 640 phase altern line ( pal ) , 96,125,366 pitch , 152,169 pixel , 57 pixel clock , 123 plain old telephon servic ( pot ) , 573 polynomi textur map ( ptm ) , 78 polyphoni , 169 portabl bitmap ( pbm ) , 76 portabl document format ( pdf ) , 77 portabl graymap ( pgm ) , 76 portabl network graphic ( png ) , 75 alpha -channel , 75 interlac , 75 portabl pixmap ( ppm ) , 76 post compress rate distort ( pcrd ) , 322 postscript , 77 precis , 777 predict code , 186 lossless , 182 lossi , 182 probabl densiti function ( pdf ) , 770 proﬁl , 410 progress jpeg , 312,563 progress scan , 119 proxi cach , 584 preﬁx cach , 587 rate-split cach , 588 segment cach , 587 sliding-interv cach , 585 public switch telephon network ( pstn ) , 544,574puls code modul ( pcm ) , 135,178,179 , 181,479,480,563 q qa paradigm , 784 quadratur amplitud modul ( qam ) , 540,542 quadratur modul , 123 quadratur phase-shift key ( qpsk ) , 542 qualiti imag qualiti assess , 145 object assess , 145 qualiti factor , 36,304 subject assess , 146 video qualiti assess , 145 qualiti experi ( qoe ) , 555,556,559 , 692,693,720 qualiti servic ( qo ) , 549,555,556,559 , 560,562,571,583,616,688 quantiz , 154,304 dead-zon , 244,318,432 decis boundari , 179 distort , 186 error , 158,186 linear format , 159 nois , 158 nonuniform , 159 nonuniform quantiz , 247 compand quantiz , 249 lloyd–max quantiz , 247 reconstruct level , 179 uniform , 159 uniform scalar quantiz , 244 midris , 244 midtread , 244,432 vector quantiz , 249,782 codebook , 249 quantiz paramet ( qp ) , 431,432,437 , 454,470 quantiz backward adapt , 480 jayant , 482 lloyd–max , 186 quarter-cif ( qcif ) , 128 queri expans , 784 r random graph , 714 rang extens ( rext ) , 460,461 rate compat punctur convolut ( rcpc ) code , 651 rate-distort , 243,432822 index rate-distort function , 243 real-tim messag protocol ( rtmp ) , 620 real time strategi ( rt ) game , 693 real-tim stream protocol ( rtsp ) , 571 , 573,583,585,614 real-tim transport protocol ( rtp ) , 569,573 , 583,585,614 recal , 777 receiv oper characterist ( roc ) , 778 , 779 red , green blue ( rgb ) , 33,102,412 reed-solomon ( rs ) code , 650 refer frame , 343,427,653,655,658,660 , 689 region interest ( roi ) , 316,325 regular graph , 714 relev feedback , 782 request comment ( rfc ) , 543 resourc reserv protocol ( rsvp ) , 560 retina , 85 revers variabl length code ( rvlc ) , 654 rgb cmi , 105 rod , 85 role play game ( rpg ) , 692 round trip time ( rtt ) , 550,607 rtp control protocol ( rtcp ) , 571,573,583 , 585,614 run-length code ( rlc ) , 203 run-length encod ( rle ) , 75,309 sampl , 154 alia frequenc , 156 ﬁxed rate , 156 fold frequenc , 156 frequenc , 154 nonuniform , 154 rate , 155 true frequenc , 156 uniform , 154 scalabl high efﬁcienc video code ( shvc ) , 460,461 scalabl video code ( svc ) , 446,461 scale invari featur transform ( sift ) , 780 canon orient , 780 descriptor , 780 key point , 780 separ transform , 465 sequenc , 172 sequenti jpeg , 312 serverless comput , 696,698 aw lambda , 698 googl cloud function ( gcf ) , 698session announc protocol ( sap ) , 575 session descript protocol ( sdp ) , 577,620 session initi protocol ( sip ) , 574 set partit hierarch tree ( spiht ) , 289,296 set-top box ( stb ) , 131,596,597 shannon–fano algorithm , 204 shape adapt dct ( sa-dct ) , 394,465 shape code , 396 binari shape code , 396 grayscal shape code , 398 signal process , 164,253 signal-to-nois ratio ( snr ) , 156,242 signal-to-quantization-nois ratio ( sqnr ) , 158 skype , 14 small world , 714 smart tv , 596,598 social media , 710,713,714 social network , 707,708 societi motion pictur televis engin ( smpte ) , 90,96 smpte-170m , 90 softwar deﬁn network ( sdn ) , 564,639 sound card , 167 digit , 152 wave , 151 sourc input format ( sif ) , 366 spatial domain , 233 frequenc , 74,110 redund , 302,342 spectral power distribut ( spd ) , also see spectrum , 84 spectrophotomet , 83 spectrum , 84 locu , 94 speex , 499 spheric video , 135 spread spectrum , 633 sprite , 399 code , 399 standard-deﬁnit tv ( sdtv ) , 130 standard dynam rang ( sdr ) video , 462 standard gener markup languag ( sgml ) , 10 standard rgb ( srgb ) , 90 stereopsi , 139 stream replic , 603 stream media , 556,583,584,592,594 structur similar ( ssim ) , 146,798 subband , 281 support vector machin ( svm ) , 785,796,799index 823 surfac spectral reﬂect , 86 susceptible-infectious-recov ( sir ) model , 725 sync skew , 557 synthes , 169,171 synthet sound , 165 system electroniqu couleur avec memoir ( secam ) , 96,125 tag imag file format ( tiff ) , 75 target frame , 343 televis system nation televis system committe ( ntsc ) , 122,132 phase altern line ( pal ) , 125 system electroniqu couleur avec memoir ( secam ) , 125 tempor redund , 342 textur analysi , 772 layout , 770 tiktok , 728 timbr , 169 time divis multipl access ( tdma ) , 632 total access commun system ( tac ) , 631 transduc , 152 transform code , 250,428,453,463 transmiss control protocol ( tcp ) , 546 acknowledg ( ack ) , 547 addit increas multipl decreas ( aimd ) , 548 port number , 546,547,550,577,614 retransmiss timeout ( rto ) , 548 window , 546 tristimulu valu , 92 twitch , 709,710,719 twitter , 15,709 tweet , 709 vine , 709,728 two side geometr distribut ( tsgd ) , 331 u ubiquit comput , 627,640 u-law ( also see µ-law ) , 160,162,164 ultra high deﬁnit tv ( uhdtv ) , 130,448 , 459 16k resolut , 131 4k resolut , 130 8k resolut , 130ultra high deﬁnit video ( uhd video ) , 130 , 459,461,462 unicast , 552 uniform resourc identiﬁ ( uri ) , 568 uniform resourc locat ( url ) , 545,568 , 574,592,616 user datagram protocol ( udp ) , 548,550,551 , 571,577,583,614,694 port number , 549 user-gener content ( ugc ) , 708 v variabl bit rate ( vbr ) , 556,566,573,588 , 591 variable-length code ( vlc ) , 199,203,359 vergence–accommod conﬂict , 141 versatil video code ( vvc ) , aka h.266 , 462 vertic retrac , 120 video broadcast , 598 batch , 598 harmon broadcast , 600 pyramid broadcast , 599 stagger broadcast , 598 stream merg , 601 video card , 59 video conferenc , 349,357,444,553 video display interfac , 131 video edit , 18 adob effect , 19 adob premier , 18 cyberlink powerdirector , 19 final cut pro , 19 imovi , 19 video electron standard associ ( vesa ) , 133–135 video-on-demand ( v od ) , 556,596,598 video qualiti assess ( vqa ) , 145 video signal , 131 video transit , 42 virtual machin ( vm ) , 674 contain , 675 hypervisor , 674 virtual realiti ( vr ) , 135,737,738,745,752 v ocod , 483 channel vocod , 484 code excit linear predict ( celp ) , 489 formant vocod , 485 linear predict code ( lpc ) , 486 phase insensit , 483 v oice-over-ip ( v oip ) , 542,556,573 vp9 , 423,617,710824 index w wavelength domin , 95 wavelet , 269 admiss condit , 276 analysi ﬁlter , 279 basi , 278 biorthogon , 279 compact support , 279 mother wavelet , 276 synthesi ﬁlter , 279 wave tabl , 165 data , 171 ﬁle , 167 synthesi , 166 weber ’ law , 159 web real time commun ( webrtc ) , 615,619,621,710 white point correct , 97 wide area network ( w ) , 543 wimax , 636 window media audio ( wma ) , 57 window meta file ( wmf ) , 76 wireless lan ( wlan ) , 538,631,640 802.11 , 641 802.11ac , 642 802.11ax ( wifi6 ) , 642 802.11n , 642 carrier sens multipl access collis avoid ( csma/ca ) ,641ieee 802.11a , 642 ieee 802.11b , 642 ieee 802.11g , 642 wi-fi , 538,640,665 word , 781 bag word ( bow ) , 781 visual word , 781,782 work-ahead smooth , 588 world wide web consortium ( w3c ) , 13,417 world wide web ( www ) , 69,385 web 2.0 , 14,707 x xyz rgb , 99 ycbcr , 112,126,302,412,448 yiq , 108,111 youtub , 14,39,603,682,707,708,710 insight analyt , 717 partner program , 716 youtub game , 719 yuv , 108 z zipf ’ law , 723